# BookShop

Приложение было разработано в целях изучения и закрепления навыков работы с фреймворком Angular.
Я самостоятельно придумал общую идею и разработал проект и архитектуру приложения.
Bookshop - это книжная онлайн библиотека с возможностью поиска книг на открытом ресурсе openlibrary.org и их заказе с дальнейшем виртуальным получением
и возвратом.

## Книги
На ресурсе размещено более 17 млн. книг. Можно осуществлять поиск и фильтрацию книг по параметрам: Название, Автор и Subjects - различные 
аспекты, связанные с данной книгой: жанр, время и место действия, имена героев и т.д.
Также доступно просмотреть подробные данные по книге, включая аннотацию.

## Пользователи
### Регистрация
Каждый пользователь может зарегистрироваться с использованием своей электронной почты, как логина, и пользоваться личным кабинетом.
Регистрация нового пользователя происходит с прохождением процесса аутентификации по ссылке в высылаемом приложением письме.
Далее зарегистрированный пользователь авторизуется по своему логину-паролю также с прохождением проверки.
В случае, если пользователь забыл пароль, есть функция его восстановления.
Аутентификация и авторизация реализованы с помощью системы авторизации Authentification платформы firebase.google.com.
### Личный кабинет
В личном кабинете сохраняются просмотренные и забронированные пользователем книги. Там же можно оформить заказ на 
получение забронированных книг. Также в личном кабинете сохраняются все сделанные ранее заказы. В функционал личного кабинета также входят: 
- редактирование профиля пользователя,
- изменение почты (логина),
- изменение пароля.

## Администрирование
Система администрирования позволяет осуществлять контроль и управление виртуальной выдачей и возвратом книг, заказанных пользователями
приложения.
### Администратор
Администратором является пользователь с определенным UID, который зарегистрирован в системе. В данной реализации администратором 
является пользователь с логином v117117117@list.ru с паролем 222222.
### Кабинет администратора
В кабинете администратора можно:
- просматривать список всех пользователей с информацией о состоянии их заказов,
- просматривать данные конкретного пользователя,
- блокировать пользователя, что не позволит ему сделать заказ,
- регистрировать факт и время виртуальной отправки администратором письма пользователю,
- регистрировать факт и время выдачи книг из заказа пользователя,
- регистрировать факт и время возврата книг,
- просматривать список всех книг, которые на данный момент находятся на руках,
- просматривать список текущих заказов пользователей.

# Angular: использованные сущности и методы
Данный раздел приводится для подтверждения квалификации. В некоторых случаяч были сознательно использованы разные варианты реализации элементов
Angular для демонстрации компетенции.
### Pipes
Кроме использования стандартных каналов применен нестандартный канал: shrinkText `/shared/shrink-text.pipe.ts`
### Directives
Кроме стандартных директив применены две нестандартные директивы:
- структурная (аналог *If): appBookshopIf `users/usershared/bookshop.if.directive.ts`,
- валидатор уровня формы для сравнения значений в ее разных полях: appIdentityValidation `users/usershared/identity.validation.directive.ts` 
### Validators
Кроме стандартных встроенных атрибутов-валидаторов и класса Validators применены нестандартные валидаторы: EmailValidation `users/usershared/email.validation.ts`,
IdentityValidation `users/usershared/identity.validation.ts`
### Guards
- canLoad, canActivate, canActivateChild: usercabinetCanloadGuard, adminCanloadGuard `/users/usercabinet/guard/usercabinet.canload.guard.ts`,
  `/admin/admin.canload.guard.ts`
- canDeactivate: usercabinetCanDeactivateGuard `users/usercabinet/guard/usercabinet.candeactivate.guard.ts`
- resolver:  mainResolver `/shared/main.resolver.ts`
### Interceptors
Применен просто для иллюстрации ничего не делающий перехватчик Http-запросов: NoopInterceptor `/shared/noop.interceptor.ts`
### Services
- служба передачи информации между компонентами и эмитировании событий и подписка на них с помощью EventEmmiter: EmitService `/shared/emit.service.ts`,
- служба обмена данными с сервером для загрузки и сохранения данных приложения в базе данных на сервере: DatabaseService `/shared/database.service.ts`,
  реализована с использованием сервиса Firestore Database платформы firebase.google.com,
- служба авторизации и аутентификации: AuthService `/shared/auth.service` реализована с помощью системы авторизации Authentification платформы firebase.google.com,
- служба перехвата системных сообщений при возникновении ошибок: ErrorHandlerService `/shared/error-handler.service.ts`,
- служба REST-запросов к серверу ресурса openlibrary.org для получения данных по книгам библиотеки: RestBooksSource `books/bookshelf/rest.books.source.ts`,
- служба репозитория данных книг: BooksModel `books/bookshelf/repository.books.model.ts`.
Все службы работают с данными в асинхронном режиме с помощью Promise, Observable, EventEmmiter.
### REST-запросы
Служба REST-запросов реализована с помощью объекта HttpClient, асинхронно возвращающего события загрузки данных книг HttpEvents в формате json:
RestBooksSource `books/bookshelf/rest.books.source.ts`.
### Dependency Injection
Реализованы через токены класса (useClass) и через токен значения (useValue). Провайдеры определяются как через указание в свойстве модуля providers:[], 
так и через поле метаданных providedIn: 'root' в декораторе @Injectable.
### RxJS
Для выполнения асинхронных операций широко применяется библиотека RxJS: Observable, EventEmmiter - расширение объекта Subject.
Используются операторы: of, from, pipe, merge, mergeMap, take, finalize, map, takeLast, catchError, timeout, retry.
Подписки Subscription тщательно закрываются!
### Forms
Применены как шаблонные формы, так и реактивные для разнообразия. Использованы разные дизайны для полей ввода (default, form-floating).
### Bootstrap 5
Для стилизации использован фреймворк Bootstrap 5.
### Material library
Использована библиотека Material для создания окна диалога MatDialog в guard типа canDeactivate: `users/usercabinet/guard/usercabinet.candeactivate.guard.ts`. 
### Верстка HTML
Применена адаптивная верстка HTML с использованием привязок Angular ngClass и ngStyle.
### Routing
Применена маршрутизация для перехода между компонентами `app-routing.module.ts`. Основные и дочерние маршруты. Lazy Load Modules для загрузки модуля личного кабинета пользователя `/users/usercabinet/usercabinet.module.ts` с дочерними маршрутами `/users/usercabinet/usercabinet-routing.module.ts` и модуля администрирования `/admin/admin.module.ts` со своими дочерними маршрутами `/admin/admin-routing.module.ts`. Маршруты для загрузки, активации и загрузки дочерних компонентов модулей личного кабинета и администрирования защищены соответствующими guards. При переходе между компонентами иногда применен метод передачи данных в виде параметров маршрутизации `/books/bookshelf/bookshelf.component.ts` -> `/books/bookdetail/bookdetail.component.ts`, в других случаях данные передаются через службу EmitService.
Применен именованный outlet `popup` для загрузки компонента сообщений ErrorMessageComponent `/shared/error.message/error.message.component.ts`
### Сайт
Приложение размещено на странице сайта [https://authentification-74a9d.web.app]
