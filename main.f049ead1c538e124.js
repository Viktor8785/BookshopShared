"use strict";(self.webpackChunkBookShop=self.webpackChunkBookShop||[]).push([[179],{440:(Jt,Qe,k)=>{k.d(Qe,{nm:()=>Zt});var h=k(5813);k(4650),k(5867);var Ge=k(5861),Me=k(9681),rt=k(4859),Pt=k(2090),qe=k(1877);const it=new Map,ct={activated:!1,tokenObservers:[]},We={initialized:!1,enabled:!1};function je(at){return it.get(at)||ct}function pt(at,et){it.set(at,et)}function dt(){return We}class Pn{constructor(et,bt,Ut,sn,En){if(this.operation=et,this.retryPolicy=bt,this.getWaitDuration=Ut,this.lowerBound=sn,this.upperBound=En,this.pending=null,this.nextErrorWaitInterval=sn,sn>En)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(et){var bt=this;return(0,Ge.Z)(function*(){bt.stop();try{bt.pending=new Pt.BH,yield function Zn(at){return new Promise(et=>{setTimeout(et,at)})}(bt.getNextRun(et)),bt.pending.resolve(),yield bt.pending.promise,bt.pending=new Pt.BH,yield bt.operation(),bt.pending.resolve(),yield bt.pending.promise,bt.process(!0).catch(()=>{})}catch(Ut){bt.retryPolicy(Ut)?bt.process(!1).catch(()=>{}):bt.stop()}})()}getNextRun(et){if(et)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const bt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),bt}}}const In=new Pt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function dn(at){if(!je(at).activated)throw In.create("use-before-activation",{appName:at.name})}function br(at,et){return ir.apply(this,arguments)}function ir(){return(ir=(0,Ge.Z)(function*({url:at,body:et},bt){var Ut,sn;const En={"Content-Type":"application/json"},Yn=bt.getImmediate({optional:!0});if(Yn){const Vi=yield Yn.getHeartbeatsHeader();Vi&&(En["X-Firebase-Client"]=Vi)}const oi={method:"POST",body:JSON.stringify(et),headers:En};let Qr,es;try{Qr=yield fetch(at,oi)}catch(Vi){throw In.create("fetch-network-error",{originalErrorMessage:null===(Ut=Vi)||void 0===Ut?void 0:Ut.message})}if(200!==Qr.status)throw In.create("fetch-status-error",{httpStatus:Qr.status});try{es=yield Qr.json()}catch(Vi){throw In.create("fetch-parse-error",{originalErrorMessage:null===(sn=Vi)||void 0===sn?void 0:sn.message})}const Gs=es.ttl.match(/^([\d.]+)(s)$/);if(!Gs||!Gs[2]||isNaN(Number(Gs[1])))throw In.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${es.ttl}`});const Bi=1e3*Number(Gs[1]),Co=Date.now();return{token:es.token,expireTimeMillis:Co+Bi,issuedAtTimeMillis:Co}})).apply(this,arguments)}function Cr(at,et){const{projectId:bt,appId:Ut,apiKey:sn}=at.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${bt}/apps/${Ut}:exchangeDebugToken?key=${sn}`,body:{debug_token:et}}}const er="firebase-app-check-store";let cr=null;function tr(){return cr||(cr=new Promise((at,et)=>{var bt;try{const Ut=indexedDB.open("firebase-app-check-database",1);Ut.onsuccess=sn=>{at(sn.target.result)},Ut.onerror=sn=>{var En;et(In.create("storage-open",{originalErrorMessage:null===(En=sn.target.error)||void 0===En?void 0:En.message}))},Ut.onupgradeneeded=sn=>{0===sn.oldVersion&&sn.target.result.createObjectStore(er,{keyPath:"compositeKey"})}}catch(Ut){et(In.create("storage-open",{originalErrorMessage:null===(bt=Ut)||void 0===bt?void 0:bt.message}))}}),cr)}function fr(){return(fr=(0,Ge.Z)(function*(at,et){const Ut=(yield tr()).transaction(er,"readwrite"),En=Ut.objectStore(er).put({compositeKey:at,value:et});return new Promise((Yn,oi)=>{En.onsuccess=Qr=>{Yn()},Ut.onerror=Qr=>{var es;oi(In.create("storage-set",{originalErrorMessage:null===(es=Qr.target.error)||void 0===es?void 0:es.message}))}})})).apply(this,arguments)}const wr=new qe.Yd("@firebase/app-check");function Kn(at,et){return(0,Pt.hl)()?function Nr(at,et){return function _r(at,et){return fr.apply(this,arguments)}(function On(at){return`${at.options.appId}-${at.name}`}(at),et)}(at,et).catch(bt=>{wr.warn(`Failed to write token to IndexedDB. Error: ${bt}`)}):Promise.resolve()}function tt(){return dt().enabled}function St(){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,Ge.Z)(function*(){const at=dt();if(at.enabled&&at.token)return at.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Je={error:"UNKNOWN_ERROR"};function J(at){return Pt.US.encodeString(JSON.stringify(at),!1)}function ge(at){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,Ge.Z)(function*(at,et=!1){const bt=at.app;dn(bt);const Ut=je(bt);let En,sn=Ut.token;if(sn&&!De(sn)&&(pt(bt,Object.assign(Object.assign({},Ut),{token:void 0})),sn=void 0),!sn){const Qr=yield Ut.cachedTokenPromise;Qr&&(De(Qr)?sn=Qr:yield Kn(bt,void 0))}if(!et&&sn&&De(sn))return{token:sn.token};let oi,Yn=!1;if(tt()){Ut.exchangeTokenPromise||(Ut.exchangeTokenPromise=br(Cr(bt,yield St()),at.heartbeatServiceProvider).finally(()=>{Ut.exchangeTokenPromise=void 0}),Yn=!0);const Qr=yield Ut.exchangeTokenPromise;return yield Kn(bt,Qr),pt(bt,Object.assign(Object.assign({},Ut),{token:Qr})),{token:Qr.token}}try{Ut.exchangeTokenPromise||(Ut.exchangeTokenPromise=Ut.provider.getToken().finally(()=>{Ut.exchangeTokenPromise=void 0}),Yn=!0),sn=yield Ut.exchangeTokenPromise}catch(Qr){"appCheck/throttled"===Qr.code?wr.warn(Qr.message):wr.error(Qr),En=Qr}return sn?En?oi=De(sn)?{token:sn.token,internalError:En}:ie(En):(oi={token:sn.token},pt(bt,Object.assign(Object.assign({},Ut),{token:sn})),yield Kn(bt,sn)):oi=ie(En),Yn&&$e(bt,oi),oi})).apply(this,arguments)}function ln(at,et){const bt=je(at),Ut=bt.tokenObservers.filter(sn=>sn.next!==et);0===Ut.length&&bt.tokenRefresher&&bt.tokenRefresher.isRunning()&&bt.tokenRefresher.stop(),pt(at,Object.assign(Object.assign({},bt),{tokenObservers:Ut}))}function Ne(at){const{app:et}=at,bt=je(et);let Ut=bt.tokenRefresher;Ut||(Ut=function xe(at){const{app:et}=at;return new Pn((0,Ge.Z)(function*(){let Ut;if(Ut=je(et).token?yield ge(at,!0):yield ge(at),Ut.error)throw Ut.error;if(Ut.internalError)throw Ut.internalError}),()=>!0,()=>{const bt=je(et);if(bt.token){let Ut=bt.token.issuedAtTimeMillis+.5*(bt.token.expireTimeMillis-bt.token.issuedAtTimeMillis)+3e5;return Ut=Math.min(Ut,bt.token.expireTimeMillis-3e5),Math.max(0,Ut-Date.now())}return 0},3e4,96e4)}(at),pt(et,Object.assign(Object.assign({},bt),{tokenRefresher:Ut}))),!Ut.isRunning()&&bt.isTokenAutoRefreshEnabled&&Ut.start()}function $e(at,et){const bt=je(at).tokenObservers;for(const Ut of bt)try{"EXTERNAL"===Ut.type&&null!=et.error?Ut.error(et.error):Ut.next(et)}catch{}}function De(at){return at.expireTimeMillis-Date.now()>0}function ie(at){return{token:J(Je),error:at}}class we{constructor(et,bt){this.app=et,this.heartbeatServiceProvider=bt}_delete(){const{tokenObservers:et}=je(this.app);for(const bt of et)ln(this.app,bt.next);return Promise.resolve()}}const At="app-check-internal";!function oe(){(0,Me._registerComponent)(new rt.wA("app-check",at=>function ut(at,et){return new we(at,et)}(at.getProvider("app").getImmediate(),at.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((at,et,bt)=>{at.getProvider(At).initialize()})),(0,Me._registerComponent)(new rt.wA(At,at=>function Bt(at){return{getToken:et=>ge(at,et),addTokenListener:et=>function _t(at,et,bt,Ut){const{app:sn}=at,En=je(sn),Yn={next:bt,error:Ut,type:et};if(pt(sn,Object.assign(Object.assign({},En),{tokenObservers:[...En.tokenObservers,Yn]})),En.token&&De(En.token)){const oi=En.token;Promise.resolve().then(()=>{bt({token:oi.token}),Ne(at)}).catch(()=>{})}En.cachedTokenPromise.then(()=>Ne(at))}(at,"INTERNAL",et),removeTokenListener:et=>ln(at.app,et)}}(at.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Me.registerVersion)("@firebase/app-check","0.5.16")}();class Zt{constructor(){return(0,h.vb)("app-check")}}typeof window<"u"&&window},1205:(Jt,Qe,k)=>{k.d(Qe,{zQ:()=>Lt,ww:()=>$t,rT:()=>We,f7:()=>pt,L6:()=>it,_Q:()=>ct,lh:()=>je,Qv:()=>qe,nw:()=>dt});var h=k(4650),c=k(7579),S=k(9646),d=k(9751),de=k(8996),Ae=k(6451),_e=k(5363),fe=k(3900),Fe=k(4004),pe=k(6063);class be extends c.x{constructor(Mn=1/0,cn=1/0,Rt=pe.l){super(),this._bufferSize=Mn,this._windowTime=cn,this._timestampProvider=Rt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=cn===1/0,this._bufferSize=Math.max(1,Mn),this._windowTime=Math.max(1,cn)}next(Mn){const{isStopped:cn,_buffer:Rt,_infiniteTimeWindow:Pn,_timestampProvider:Zn,_windowTime:Nn}=this;cn||(Rt.push(Mn),!Pn&&Rt.push(Zn.now()+Nn)),this._trimBuffer(),super.next(Mn)}_subscribe(Mn){this._throwIfClosed(),this._trimBuffer();const cn=this._innerSubscribe(Mn),{_infiniteTimeWindow:Rt,_buffer:Pn}=this,Zn=Pn.slice();for(let Nn=0;Nn<Zn.length&&!Mn.closed;Nn+=Rt?1:2)Mn.next(Zn[Nn]);return this._checkFinalizedStatuses(Mn),cn}_trimBuffer(){const{_bufferSize:Mn,_timestampProvider:cn,_buffer:Rt,_infiniteTimeWindow:Pn}=this,Zn=(Pn?1:2)*Mn;if(Mn<1/0&&Zn<Rt.length&&Rt.splice(0,Rt.length-Zn),!Pn){const Nn=cn.now();let In=0;for(let Wt=1;Wt<Rt.length&&Rt[Wt]<=Nn;Wt+=2)In=Wt;In&&Rt.splice(0,In+1)}}}var Pe=k(3099);function st(Qt,Mn,cn){let Rt,Pn=!1;return Qt&&"object"==typeof Qt?({bufferSize:Rt=1/0,windowTime:Mn=1/0,refCount:Pn=!1,scheduler:cn}=Qt):Rt=Qt??1/0,(0,Pe.B)({connector:()=>new be(Rt,Mn,cn),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Pn})}var mt=k(590),He=k(576);function Tt(Qt,Mn){return(0,He.m)(Mn)?(0,fe.w)(()=>Qt,Mn):(0,fe.w)(()=>Qt)}var gt=k(9468),ft=k(9300),Ye=k(5813),Gt=k(2011),Ge=k(6895),Me=k(440),rt=k(127);const qe=new h.OlP("angularfire2.auth.use-emulator"),it=new h.OlP("angularfire2.auth.settings"),ct=new h.OlP("angularfire2.auth.tenant-id"),We=new h.OlP("angularfire2.auth.langugage-code"),je=new h.OlP("angularfire2.auth.use-device-language"),pt=new h.OlP("angularfire.auth.persistence"),dt=(Qt,Mn,cn,Rt,Pn,Zn,Nn,In)=>(0,Gt.cc)(`${Qt.name}.auth`,"AngularFireAuth",Qt.name,()=>{const Wt=Mn.runOutsideAngular(()=>Qt.auth());if(cn&&Wt.useEmulator(...cn),Rt&&(Wt.tenantId=Rt),Wt.languageCode=Pn,Zn&&Wt.useDeviceLanguage(),Nn)for(const[dn,vr]of Object.entries(Nn))Wt.settings[dn]=vr;return In&&Wt.setPersistence(In),Wt},[cn,Rt,Pn,Zn,Nn,In]);let Lt=(()=>{class Qt{constructor(cn,Rt,Pn,Zn,Nn,In,Wt,dn,vr,Ar,br,ir){const sr=new c.x,Vn=(0,S.of)(void 0).pipe((0,_e.Q)(Nn.outsideAngular),(0,fe.w)(()=>Zn.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,5881)))),(0,Fe.U)(()=>(0,Gt.on)(cn,Zn,Rt)),(0,Fe.U)(Cr=>dt(Cr,Zn,In,dn,vr,Ar,Wt,br)),st({bufferSize:1,refCount:!1}));if((0,Ge.PM)(Pn))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,S.of)(null);else{Vn.pipe((0,mt.P)()).subscribe();const yr=Vn.pipe((0,fe.w)(Ht=>Ht.getRedirectResult().then(cr=>cr,()=>null)),Ye.iC,st({bufferSize:1,refCount:!1})),Rr=Vn.pipe((0,fe.w)(Ht=>new d.y(cr=>({unsubscribe:Zn.runOutsideAngular(()=>Ht.onAuthStateChanged(tr=>cr.next(tr),tr=>cr.error(tr),()=>cr.complete()))})))),er=Vn.pipe((0,fe.w)(Ht=>new d.y(cr=>({unsubscribe:Zn.runOutsideAngular(()=>Ht.onIdTokenChanged(tr=>cr.next(tr),tr=>cr.error(tr),()=>cr.complete()))}))));this.authState=yr.pipe(Tt(Rr),(0,gt.R)(Nn.outsideAngular),(0,_e.Q)(Nn.insideAngular)),this.user=yr.pipe(Tt(er),(0,gt.R)(Nn.outsideAngular),(0,_e.Q)(Nn.insideAngular)),this.idToken=this.user.pipe((0,fe.w)(Ht=>Ht?(0,de.D)(Ht.getIdToken()):(0,S.of)(null))),this.idTokenResult=this.user.pipe((0,fe.w)(Ht=>Ht?(0,de.D)(Ht.getIdTokenResult()):(0,S.of)(null))),this.credential=(0,Ae.T)(yr,sr,this.authState.pipe((0,ft.h)(Ht=>!Ht))).pipe((0,Fe.U)(Ht=>Ht?.user?Ht:null),(0,gt.R)(Nn.outsideAngular),(0,_e.Q)(Nn.insideAngular))}return(0,Gt.pX)(this,Vn,Zn,{spy:{apply:(Cr,yr,Rr)=>{(Cr.startsWith("signIn")||Cr.startsWith("createUser"))&&Rr.then(er=>sr.next(er))}}})}}return Qt.\u0275fac=function(cn){return new(cn||Qt)(h.LFG(Gt.Dh),h.LFG(Gt.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Ye.HU),h.LFG(qe,8),h.LFG(it,8),h.LFG(ct,8),h.LFG(We,8),h.LFG(je,8),h.LFG(pt,8),h.LFG(Me.nm,8))},Qt.\u0275prov=h.Yz7({token:Qt,factory:Qt.\u0275fac,providedIn:"any"}),Qt})(),$t=(()=>{class Qt{constructor(){rt.Z.registerVersion("angularfire",Ye.q4.full,"auth-compat")}}return Qt.\u0275fac=function(cn){return new(cn||Qt)},Qt.\u0275mod=h.oAB({type:Qt}),Qt.\u0275inj=h.cJS({providers:[Lt]}),Qt})()},6185:(Jt,Qe,k)=>{k.d(Qe,{ST:()=>Rn,yb:()=>Jn});var h=k(4650),c=k(4986),S=k(9751),d=k(8996),de=k(9646),Ae=k(5813),_e=k(8675),fe=k(4482),Fe=k(5403);function pe(){return(0,fe.e)((Je,J)=>{let ge,Xe=!1;Je.subscribe((0,Fe.x)(J,_t=>{const ln=ge;ge=_t,Xe&&J.next([ln,_t]),Xe=!0}))})}var be=k(4004),Pe=k(5026),st=k(1884),mt=k(9300),He=k(2011),Tt=k(6895),ft=(k(5881),k(3942)),Ye=k(5525),Gt=k(2090),Ge=k(4859);function Pt(Je,J){if(void 0===J)return{merge:!1};if(void 0!==J.mergeFields&&void 0!==J.merge)throw new Ye.WA("invalid-argument",`Invalid options passed to function ${Je}(): You cannot specify both "merge" and "mergeFields".`);return J}function qe(){if(typeof Uint8Array>"u")throw new Ye.WA("unimplemented","Uint8Arrays are not available in this environment.")}function it(){if(!(0,Ye.Me)())throw new Ye.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class ct{constructor(J){this._delegate=J}static fromBase64String(J){return it(),new ct(Ye.Jj.fromBase64String(J))}static fromUint8Array(J){return qe(),new ct(Ye.Jj.fromUint8Array(J))}toBase64(){return it(),this._delegate.toBase64()}toUint8Array(){return qe(),this._delegate.toUint8Array()}isEqual(J){return this._delegate.isEqual(J._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function We(Je){return function je(Je,J){if("object"!=typeof Je||null===Je)return!1;const ge=Je;for(const Xe of J)if(Xe in ge&&"function"==typeof ge[Xe])return!0;return!1}(Je,["next","error","complete"])}class pt{enableIndexedDbPersistence(J,ge){return(0,Ye.ST)(J._delegate,{forceOwnership:ge})}enableMultiTabIndexedDbPersistence(J){return(0,Ye.fH)(J._delegate)}clearIndexedDbPersistence(J){return(0,Ye.Fc)(J._delegate)}}class dt{constructor(J,ge,Xe){this._delegate=ge,this._persistenceProvider=Xe,this.INTERNAL={delete:()=>this.terminate()},J instanceof Ye.l7||(this._appCompat=J)}get _databaseId(){return this._delegate._databaseId}settings(J){const ge=this._delegate._getSettings();!J.merge&&ge.host!==J.host&&(0,Ye.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),J.merge&&delete(J=Object.assign(Object.assign({},ge),J)).merge,this._delegate._setSettings(J)}useEmulator(J,ge,Xe={}){(0,Ye.at)(this._delegate,J,ge,Xe)}enableNetwork(){return(0,Ye.Ix)(this._delegate)}disableNetwork(){return(0,Ye.TF)(this._delegate)}enablePersistence(J){let ge=!1,Xe=!1;return J&&(ge=!!J.synchronizeTabs,Xe=!!J.experimentalForceOwningTab,(0,Ye.Wi)("synchronizeTabs",ge,"experimentalForceOwningTab",Xe)),ge?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,Xe)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,Ye.Mx)(this._delegate)}onSnapshotsInSync(J){return(0,Ye.sc)(this._delegate,J)}get app(){if(!this._appCompat)throw new Ye.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(J){try{return new br(this,(0,Ye.hJ)(this._delegate,J))}catch(ge){throw Pn(ge,"collection()","Firestore.collection()")}}doc(J){try{return new Rt(this,(0,Ye.JU)(this._delegate,J))}catch(ge){throw Pn(ge,"doc()","Firestore.doc()")}}collectionGroup(J){try{return new dn(this,(0,Ye.B$)(this._delegate,J))}catch(ge){throw Pn(ge,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(J){return(0,Ye.i3)(this._delegate,ge=>J(new Qt(this,ge)))}batch(){return(0,Ye.qY)(this._delegate),new Mn(new Ye.PU(this._delegate,J=>(0,Ye.GL)(this._delegate,J)))}loadBundle(J){return(0,Ye.Pb)(this._delegate,J)}namedQuery(J){return(0,Ye.L$)(this._delegate,J).then(ge=>ge?new dn(this,ge):null)}}class Lt extends Ye.u7{constructor(J){super(),this.firestore=J}convertBytes(J){return new ct(new Ye.Jj(J))}convertReference(J){const ge=this.convertDocumentKey(J,this.firestore._databaseId);return Rt.forKey(ge,this.firestore,null)}}class Qt{constructor(J,ge){this._firestore=J,this._delegate=ge,this._userDataWriter=new Lt(J)}get(J){const ge=ir(J);return this._delegate.get(ge).then(Xe=>new In(this._firestore,new Ye.xU(this._firestore._delegate,this._userDataWriter,Xe._key,Xe._document,Xe.metadata,ge.converter)))}set(J,ge,Xe){const _t=ir(J);return Xe?(Pt("Transaction.set",Xe),this._delegate.set(_t,ge,Xe)):this._delegate.set(_t,ge),this}update(J,ge,Xe,..._t){const ln=ir(J);return 2===arguments.length?this._delegate.update(ln,ge):this._delegate.update(ln,ge,Xe,..._t),this}delete(J){const ge=ir(J);return this._delegate.delete(ge),this}}class Mn{constructor(J){this._delegate=J}set(J,ge,Xe){const _t=ir(J);return Xe?(Pt("WriteBatch.set",Xe),this._delegate.set(_t,ge,Xe)):this._delegate.set(_t,ge),this}update(J,ge,Xe,..._t){const ln=ir(J);return 2===arguments.length?this._delegate.update(ln,ge):this._delegate.update(ln,ge,Xe,..._t),this}delete(J){const ge=ir(J);return this._delegate.delete(ge),this}commit(){return this._delegate.commit()}}class cn{constructor(J,ge,Xe){this._firestore=J,this._userDataWriter=ge,this._delegate=Xe}fromFirestore(J,ge){const Xe=new Ye.$q(this._firestore._delegate,this._userDataWriter,J._key,J._document,J.metadata,null);return this._delegate.fromFirestore(new Wt(this._firestore,Xe),ge??{})}toFirestore(J,ge){return ge?this._delegate.toFirestore(J,ge):this._delegate.toFirestore(J)}static getInstance(J,ge){const Xe=cn.INSTANCES;let _t=Xe.get(J);_t||(_t=new WeakMap,Xe.set(J,_t));let ln=_t.get(ge);return ln||(ln=new cn(J,new Lt(J),ge),_t.set(ge,ln)),ln}}cn.INSTANCES=new WeakMap;class Rt{constructor(J,ge){this.firestore=J,this._delegate=ge,this._userDataWriter=new Lt(J)}static forPath(J,ge,Xe){if(J.length%2!=0)throw new Ye.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${J.canonicalString()} has ${J.length}`);return new Rt(ge,new Ye.my(ge._delegate,Xe,new Ye.Ky(J)))}static forKey(J,ge,Xe){return new Rt(ge,new Ye.my(ge._delegate,Xe,J))}get id(){return this._delegate.id}get parent(){return new br(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(J){try{return new br(this.firestore,(0,Ye.hJ)(this._delegate,J))}catch(ge){throw Pn(ge,"collection()","DocumentReference.collection()")}}isEqual(J){return(J=(0,Gt.m9)(J))instanceof Ye.my&&(0,Ye.Eo)(this._delegate,J)}set(J,ge){ge=Pt("DocumentReference.set",ge);try{return ge?(0,Ye.pl)(this._delegate,J,ge):(0,Ye.pl)(this._delegate,J)}catch(Xe){throw Pn(Xe,"setDoc()","DocumentReference.set()")}}update(J,ge,...Xe){try{return 1===arguments.length?(0,Ye.r7)(this._delegate,J):(0,Ye.r7)(this._delegate,J,ge,...Xe)}catch(_t){throw Pn(_t,"updateDoc()","DocumentReference.update()")}}delete(){return(0,Ye.oe)(this._delegate)}onSnapshot(...J){const ge=Zn(J),Xe=Nn(J,_t=>new In(this.firestore,new Ye.xU(this.firestore._delegate,this._userDataWriter,_t._key,_t._document,_t.metadata,this._delegate.converter)));return(0,Ye.cf)(this._delegate,ge,Xe)}get(J){let ge;return ge="cache"===J?.source?(0,Ye.kl)(this._delegate):"server"===J?.source?(0,Ye.Xk)(this._delegate):(0,Ye.QT)(this._delegate),ge.then(Xe=>new In(this.firestore,new Ye.xU(this.firestore._delegate,this._userDataWriter,Xe._key,Xe._document,Xe.metadata,this._delegate.converter)))}withConverter(J){return new Rt(this.firestore,this._delegate.withConverter(J?cn.getInstance(this.firestore,J):null))}}function Pn(Je,J,ge){return Je.message=Je.message.replace(J,ge),Je}function Zn(Je){for(const J of Je)if("object"==typeof J&&!We(J))return J;return{}}function Nn(Je,J){var ge,Xe;let _t;return _t=We(Je[0])?Je[0]:We(Je[1])?Je[1]:"function"==typeof Je[0]?{next:Je[0],error:Je[1],complete:Je[2]}:{next:Je[1],error:Je[2],complete:Je[3]},{next:ln=>{_t.next&&_t.next(J(ln))},error:null===(ge=_t.error)||void 0===ge?void 0:ge.bind(_t),complete:null===(Xe=_t.complete)||void 0===Xe?void 0:Xe.bind(_t)}}class In{constructor(J,ge){this._firestore=J,this._delegate=ge}get ref(){return new Rt(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(J){return this._delegate.data(J)}get(J,ge){return this._delegate.get(J,ge)}isEqual(J){return(0,Ye.qK)(this._delegate,J._delegate)}}class Wt extends In{data(J){const ge=this._delegate.data(J);return(0,Ye.K9)(void 0!==ge,"Document in a QueryDocumentSnapshot should exist"),ge}}class dn{constructor(J,ge){this.firestore=J,this._delegate=ge,this._userDataWriter=new Lt(J)}where(J,ge,Xe){try{return new dn(this.firestore,(0,Ye.IO)(this._delegate,(0,Ye.ar)(J,ge,Xe)))}catch(_t){throw Pn(_t,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(J,ge){try{return new dn(this.firestore,(0,Ye.IO)(this._delegate,(0,Ye.Xo)(J,ge)))}catch(Xe){throw Pn(Xe,/(orderBy|where)\(\)/,"Query.$1()")}}limit(J){try{return new dn(this.firestore,(0,Ye.IO)(this._delegate,(0,Ye.b9)(J)))}catch(ge){throw Pn(ge,"limit()","Query.limit()")}}limitToLast(J){try{return new dn(this.firestore,(0,Ye.IO)(this._delegate,(0,Ye.vh)(J)))}catch(ge){throw Pn(ge,"limitToLast()","Query.limitToLast()")}}startAt(...J){try{return new dn(this.firestore,(0,Ye.IO)(this._delegate,(0,Ye.e0)(...J)))}catch(ge){throw Pn(ge,"startAt()","Query.startAt()")}}startAfter(...J){try{return new dn(this.firestore,(0,Ye.IO)(this._delegate,(0,Ye.TQ)(...J)))}catch(ge){throw Pn(ge,"startAfter()","Query.startAfter()")}}endBefore(...J){try{return new dn(this.firestore,(0,Ye.IO)(this._delegate,(0,Ye.Lx)(...J)))}catch(ge){throw Pn(ge,"endBefore()","Query.endBefore()")}}endAt(...J){try{return new dn(this.firestore,(0,Ye.IO)(this._delegate,(0,Ye.Wu)(...J)))}catch(ge){throw Pn(ge,"endAt()","Query.endAt()")}}isEqual(J){return(0,Ye.iE)(this._delegate,J._delegate)}get(J){let ge;return ge="cache"===J?.source?(0,Ye.UQ)(this._delegate):"server"===J?.source?(0,Ye.zN)(this._delegate):(0,Ye.PL)(this._delegate),ge.then(Xe=>new Ar(this.firestore,new Ye.W(this.firestore._delegate,this._userDataWriter,this._delegate,Xe._snapshot)))}onSnapshot(...J){const ge=Zn(J),Xe=Nn(J,_t=>new Ar(this.firestore,new Ye.W(this.firestore._delegate,this._userDataWriter,this._delegate,_t._snapshot)));return(0,Ye.cf)(this._delegate,ge,Xe)}withConverter(J){return new dn(this.firestore,this._delegate.withConverter(J?cn.getInstance(this.firestore,J):null))}}class vr{constructor(J,ge){this._firestore=J,this._delegate=ge}get type(){return this._delegate.type}get doc(){return new Wt(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ar{constructor(J,ge){this._firestore=J,this._delegate=ge}get query(){return new dn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(J=>new Wt(this._firestore,J))}docChanges(J){return this._delegate.docChanges(J).map(ge=>new vr(this._firestore,ge))}forEach(J,ge){this._delegate.forEach(Xe=>{J.call(ge,new Wt(this._firestore,Xe))})}isEqual(J){return(0,Ye.qK)(this._delegate,J._delegate)}}class br extends dn{constructor(J,ge){super(J,ge),this.firestore=J,this._delegate=ge}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const J=this._delegate.parent;return J?new Rt(this.firestore,J):null}doc(J){try{return new Rt(this.firestore,void 0===J?(0,Ye.JU)(this._delegate):(0,Ye.JU)(this._delegate,J))}catch(ge){throw Pn(ge,"doc()","CollectionReference.doc()")}}add(J){return(0,Ye.ET)(this._delegate,J).then(ge=>new Rt(this.firestore,ge))}isEqual(J){return(0,Ye.Eo)(this._delegate,J._delegate)}withConverter(J){return new br(this.firestore,this._delegate.withConverter(J?cn.getInstance(this.firestore,J):null))}}function ir(Je){return(0,Ye.Cf)(Je,Ye.my)}class sr{constructor(...J){this._delegate=new Ye.Lz(...J)}static documentId(){return new sr(Ye.Xb.keyField().canonicalString())}isEqual(J){return(J=(0,Gt.m9)(J))instanceof Ye.Lz&&this._delegate._internalPath.isEqual(J._internalPath)}}class Vn{constructor(J){this._delegate=J}static serverTimestamp(){const J=(0,Ye.Bt)();return J._methodName="FieldValue.serverTimestamp",new Vn(J)}static delete(){const J=(0,Ye.AK)();return J._methodName="FieldValue.delete",new Vn(J)}static arrayUnion(...J){const ge=(0,Ye.vr)(...J);return ge._methodName="FieldValue.arrayUnion",new Vn(ge)}static arrayRemove(...J){const ge=(0,Ye.Ab)(...J);return ge._methodName="FieldValue.arrayRemove",new Vn(ge)}static increment(J){const ge=(0,Ye.nP)(J);return ge._methodName="FieldValue.increment",new Vn(ge)}isEqual(J){return this._delegate.isEqual(J._delegate)}}const Cr={Firestore:dt,GeoPoint:Ye.F8,Timestamp:Ye.EK,Blob:ct,Transaction:Qt,WriteBatch:Mn,DocumentReference:Rt,DocumentSnapshot:In,Query:dn,QueryDocumentSnapshot:Wt,QuerySnapshot:Ar,CollectionReference:br,FieldPath:sr,FieldValue:Vn,setLogLevel:function $t(Je){(0,Ye.Ub)(Je)},CACHE_SIZE_UNLIMITED:Ye.IX};!function Rr(Je){(function yr(Je,J){Je.INTERNAL.registerComponent(new Ge.wA("firestore-compat",ge=>{const Xe=ge.getProvider("app-compat").getImmediate(),_t=ge.getProvider("firestore").getImmediate();return J(Xe,_t)},"PUBLIC").setServiceProps(Object.assign({},Cr)))})(Je,(J,ge)=>new dt(J,ge,new pt)),Je.registerVersion("@firebase/firestore-compat","0.2.2")}(ft.Z);var er=k(1205),Ht=k(440),cr=k(127);function nr(Je,J){return function tr(Je,J=c.z){return new S.y(ge=>{let Xe;return null!=J?J.schedule(()=>{Xe=Je.onSnapshot({includeMetadataChanges:!0},ge)}):Xe=Je.onSnapshot({includeMetadataChanges:!0},ge),()=>{Xe?.()}})}(Je,J)}function _i(Je,J){return nr(Je,J).pipe((0,be.U)(ge=>({payload:ge,type:"query"})))}function Ir(Je,J){return _i(Je,J).pipe((0,_e.O)(void 0),pe(),(0,be.U)(([ge,Xe])=>{const _t=Xe.payload.docChanges(),ln=_t.map(Ne=>({type:Ne.type,payload:Ne}));return ge&&JSON.stringify(ge.payload.metadata)!==JSON.stringify(Xe.payload.metadata)&&Xe.payload.docs.forEach((Ne,xe)=>{const $e=_t.find(ie=>ie.doc.ref.isEqual(Ne.ref)),De=ge?.payload.docs.find(ie=>ie.ref.isEqual(Ne.ref));$e&&JSON.stringify($e.doc.metadata)===JSON.stringify(Ne.metadata)||!$e&&De&&JSON.stringify(De.metadata)===JSON.stringify(Ne.metadata)||ln.push({type:"modified",payload:{oldIndex:xe,newIndex:xe,type:"modified",doc:Ne}})}),ln}))}function _r(Je,J,ge){return Ir(Je,ge).pipe((0,Pe.R)((Xe,_t)=>function fr(Je,J,ge){return J.forEach(Xe=>{ge.indexOf(Xe.type)>-1&&(Je=function Tn(Je,J){switch(J.type){case"added":if(!Je[J.newIndex]||!Je[J.newIndex].doc.ref.isEqual(J.doc.ref))return mn(Je,J.newIndex,0,J);break;case"modified":if(null==Je[J.oldIndex]||Je[J.oldIndex].doc.ref.isEqual(J.doc.ref)){if(J.oldIndex!==J.newIndex){const ge=Je.slice();return ge.splice(J.oldIndex,1),ge.splice(J.newIndex,0,J),ge}return mn(Je,J.newIndex,1,J)}break;case"removed":if(Je[J.oldIndex]&&Je[J.oldIndex].doc.ref.isEqual(J.doc.ref))return mn(Je,J.oldIndex,1)}return Je}(Je,Xe))}),Je}(Xe,_t.map(ln=>ln.payload),J),[]),(0,st.x)(),(0,be.U)(Xe=>Xe.map(_t=>({type:_t.type,payload:_t}))))}function mn(Je,J,ge,...Xe){const _t=Je.slice();return _t.splice(J,ge,...Xe),_t}function On(Je){return(!Je||0===Je.length)&&(Je=["added","removed","modified"]),Je}class wr{constructor(J,ge,Xe){this.ref=J,this.query=ge,this.afs=Xe}stateChanges(J){let ge=Ir(this.query,this.afs.schedulers.outsideAngular);return J&&J.length>0&&(ge=ge.pipe((0,be.U)(Xe=>Xe.filter(_t=>J.indexOf(_t.type)>-1)))),ge.pipe((0,_e.O)(void 0),pe(),(0,mt.h)(([Xe,_t])=>_t.length>0||!Xe),(0,be.U)(([Xe,_t])=>_t),Ae.iC)}auditTrail(J){return this.stateChanges(J).pipe((0,Pe.R)((ge,Xe)=>[...ge,...Xe],[]))}snapshotChanges(J){const ge=On(J);return _r(this.query,ge,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}valueChanges(J={}){return _i(this.query,this.afs.schedulers.outsideAngular).pipe((0,be.U)(ge=>ge.payload.docs.map(Xe=>J.idField?Object.assign(Object.assign({},Xe.data()),{[J.idField]:Xe.id}):Xe.data())),Ae.iC)}get(J){return(0,d.D)(this.query.get(J)).pipe(Ae.iC)}add(J){return this.ref.add(J)}doc(J){return new bn(this.ref.doc(J),this.afs)}}class bn{constructor(J,ge){this.ref=J,this.afs=ge}set(J,ge){return this.ref.set(J,ge)}update(J){return this.ref.update(J)}delete(){return this.ref.delete()}collection(J,ge){const Xe=this.ref.collection(J),{ref:_t,query:ln}=St(Xe,ge);return new wr(_t,ln,this.afs)}snapshotChanges(){return function Nr(Je,J){return nr(Je,J).pipe((0,_e.O)(void 0),pe(),(0,be.U)(([ge,Xe])=>Xe.exists?ge?.exists?{payload:Xe,type:"modified"}:{payload:Xe,type:"added"}:{payload:Xe,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}valueChanges(J={}){return this.snapshotChanges().pipe((0,be.U)(({payload:ge})=>J.idField?Object.assign(Object.assign({},ge.data()),{[J.idField]:ge.id}):ge.data()))}get(J){return(0,d.D)(this.ref.get(J)).pipe(Ae.iC)}}class zr{constructor(J,ge){this.query=J,this.afs=ge}stateChanges(J){return J&&0!==J.length?Ir(this.query,this.afs.schedulers.outsideAngular).pipe((0,be.U)(ge=>ge.filter(Xe=>J.indexOf(Xe.type)>-1)),(0,mt.h)(ge=>ge.length>0),Ae.iC):Ir(this.query,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}auditTrail(J){return this.stateChanges(J).pipe((0,Pe.R)((ge,Xe)=>[...ge,...Xe],[]))}snapshotChanges(J){const ge=On(J);return _r(this.query,ge,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}valueChanges(J={}){return _i(this.query,this.afs.schedulers.outsideAngular).pipe((0,be.U)(Xe=>Xe.payload.docs.map(_t=>J.idField?Object.assign({[J.idField]:_t.id},_t.data()):_t.data())),Ae.iC)}get(J){return(0,d.D)(this.query.get(J)).pipe(Ae.iC)}}const Kn=new h.OlP("angularfire2.enableFirestorePersistence"),zt=new h.OlP("angularfire2.firestore.persistenceSettings"),Ve=new h.OlP("angularfire2.firestore.settings"),tt=new h.OlP("angularfire2.firestore.use-emulator");function St(Je,J=(ge=>ge)){return{query:J(Je),ref:Je}}let Rn=(()=>{class Je{constructor(ge,Xe,_t,ln,Ne,xe,$e,De,ie,we,ut,Bt,gn,hn,Se,Y,W){this.schedulers=$e;const te=(0,He.on)(ge,xe,Xe),me=ie;we&&(0,er.nw)(te,xe,ut,gn,hn,Se,Bt,Y),[this.firestore,this.persistenceEnabled$]=(0,He.cc)(`${te.name}.firestore`,"AngularFirestore",te.name,()=>{const Ke=xe.runOutsideAngular(()=>te.firestore());if(ln&&Ke.settings(ln),me&&Ke.useEmulator(...me),_t&&!(0,Tt.PM)(Ne)){const Ft=()=>{try{return(0,d.D)(Ke.enablePersistence(De||void 0).then(()=>!0,()=>!1))}catch(on){return typeof console<"u"&&console.warn(on),(0,de.of)(!1)}};return[Ke,xe.runOutsideAngular(Ft)]}return[Ke,(0,de.of)(!1)]},[ln,me,_t])}collection(ge,Xe){let _t;_t="string"==typeof ge?this.firestore.collection(ge):ge;const{ref:ln,query:Ne}=St(_t,Xe),xe=this.schedulers.ngZone.run(()=>ln);return new wr(xe,Ne,this)}collectionGroup(ge,Xe){const _t=Xe||(Ne=>Ne),ln=this.firestore.collectionGroup(ge);return new zr(_t(ln),this)}doc(ge){let Xe;Xe="string"==typeof ge?this.firestore.doc(ge):ge;const _t=this.schedulers.ngZone.run(()=>Xe);return new bn(_t,this)}createId(){return this.firestore.collection("_").doc().id}}return Je.\u0275fac=function(ge){return new(ge||Je)(h.LFG(He.Dh),h.LFG(He.xv,8),h.LFG(Kn,8),h.LFG(Ve,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Ae.HU),h.LFG(zt,8),h.LFG(tt,8),h.LFG(er.zQ,8),h.LFG(er.Qv,8),h.LFG(er.L6,8),h.LFG(er._Q,8),h.LFG(er.rT,8),h.LFG(er.lh,8),h.LFG(er.f7,8),h.LFG(Ht.nm,8))},Je.\u0275prov=h.Yz7({token:Je,factory:Je.\u0275fac,providedIn:"any"}),Je})(),Jn=(()=>{class Je{constructor(){cr.Z.registerVersion("angularfire",Ae.q4.full,"fst-compat")}static enablePersistence(ge){return{ngModule:Je,providers:[{provide:Kn,useValue:!0},{provide:zt,useValue:ge}]}}}return Je.\u0275fac=function(ge){return new(ge||Je)},Je.\u0275mod=h.oAB({type:Je}),Je.\u0275inj=h.cJS({providers:[Rn]}),Je})()},2011:(Jt,Qe,k)=>{k.d(Qe,{Dh:()=>fe,GT:()=>Ae,cc:()=>mt,hO:()=>st,on:()=>pe,pX:()=>de,xv:()=>Fe});var h=k(4650),c=k(127),S=k(5813);Jt=k.hmd(Jt);const d=["ngOnDestroy"],de=(ft,Ye,Gt,Ge={})=>new Proxy(ft,{get:(Me,rt)=>Gt.runOutsideAngular(()=>{var Pt;if(ft[rt])return!(null===(Pt=Ge?.spy)||void 0===Pt)&&Pt.get&&Ge.spy.get(rt,ft[rt]),ft[rt];if(d.indexOf(rt)>-1)return()=>{};const qe=Ye.toPromise().then(it=>{const ct=it&&it[rt];return"function"==typeof ct?ct.bind(it):ct&&ct.then?ct.then(We=>Gt.run(()=>We)):Gt.run(()=>ct)});return new Proxy(()=>{},{get:(it,ct)=>qe[ct],apply:(it,ct,We)=>qe.then(je=>{var pt;const dt=je&&je(...We);return!(null===(pt=Ge?.spy)||void 0===pt)&&pt.apply&&Ge.spy.apply(rt,We,dt),dt})})})}),Ae=(ft,Ye)=>{Ye.forEach(Gt=>{Object.getOwnPropertyNames(Gt.prototype||Gt).forEach(Ge=>{Object.defineProperty(ft.prototype,Ge,Object.getOwnPropertyDescriptor(Gt.prototype||Gt,Ge))})})};class _e{constructor(Ye){return Ye}}const fe=new h.OlP("angularfire2.app.options"),Fe=new h.OlP("angularfire2.app.name");function pe(ft,Ye,Gt){const Me="object"==typeof Gt&&Gt||{};Me.name=Me.name||"string"==typeof Gt&&Gt||"[DEFAULT]";const Pt=c.Z.apps.filter(qe=>qe&&qe.name===Me.name)[0]||Ye.runOutsideAngular(()=>c.Z.initializeApp(ft,Me));try{JSON.stringify(ft)!==JSON.stringify(Pt.options)&&be("error",`${Pt.name} Firebase App already initialized with different options${Jt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new _e(Pt)}const be=(ft,...Ye)=>{(0,h.X6Q)()&&typeof console<"u"&&console[ft](...Ye)},Pe={provide:_e,useFactory:pe,deps:[fe,h.R0b,[new h.FiY,Fe]]};let st=(()=>{class ft{constructor(Gt){c.Z.registerVersion("angularfire",S.q4.full,"core"),c.Z.registerVersion("angularfire",S.q4.full,"app-compat"),c.Z.registerVersion("angular",h.q4F.full,Gt.toString())}static initializeApp(Gt,Ge){return{ngModule:ft,providers:[{provide:fe,useValue:Gt},{provide:Fe,useValue:Ge}]}}}return ft.\u0275fac=function(Gt){return new(Gt||ft)(h.LFG(h.Lbi))},ft.\u0275mod=h.oAB({type:ft}),ft.\u0275inj=h.cJS({providers:[Pe]}),ft})();function mt(ft,Ye,Gt,Ge,Me){const[,rt,Pt]=globalThis.\u0275AngularfireInstanceCache.find(qe=>qe[0]===ft)||[];if(rt)return function He(ft,Ye){try{return ft.toString()===Ye.toString()}catch{return ft===Ye}}(Me,Pt)||(gt("error",`${Ye} was already initialized on the ${Gt} Firebase App with different settings.${Tt?" You may need to reload as Firebase is not HMR aware.":""}`),gt("warn",{is:Me,was:Pt})),rt;{const qe=Ge();return globalThis.\u0275AngularfireInstanceCache.push([ft,qe,Me]),qe}}const Tt=!!Jt.hot,gt=(ft,...Ye)=>{(0,h.X6Q)()&&typeof console<"u"&&console[ft](...Ye)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Jt,Qe,k)=>{k.d(Qe,{q4:()=>Oe,iC:()=>Yi,HU:()=>Ea,vb:()=>Ao,JM:()=>wa});var h=k(4650),c=k(5867),S=k(5861),d=k(9681),de=k(2090),Ae=k(4859),_e=k(1877),fe=k(8766);const Fe="@firebase/installations",pe="0.5.16",Pe=`w:${pe}`,st="FIS_v2",Ye=new de.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Gt(j){return j instanceof de.ZR&&j.code.includes("request-failed")}function Ge({projectId:j}){return`https://firebaseinstallations.googleapis.com/v1/projects/${j}/installations`}function Me(j){return{token:j.token,requestStatus:2,expiresIn:je(j.expiresIn),creationTime:Date.now()}}function rt(j,z){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,S.Z)(function*(j,z){const Re=(yield z.json()).error;return Ye.create("request-failed",{requestName:j,serverCode:Re.code,serverMessage:Re.message,serverStatus:Re.status})})).apply(this,arguments)}function qe({apiKey:j}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":j})}function it(j,{refreshToken:z}){const se=qe(j);return se.append("Authorization",function pt(j){return`${st} ${j}`}(z)),se}function ct(j){return We.apply(this,arguments)}function We(){return(We=(0,S.Z)(function*(j){const z=yield j();return z.status>=500&&z.status<600?j():z})).apply(this,arguments)}function je(j){return Number(j.replace("s","000"))}function dt(j,z){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,S.Z)(function*({appConfig:j,heartbeatServiceProvider:z},{fid:se}){const Re=Ge(j),ht=qe(j),It=z.getImmediate({optional:!0});if(It){const Sr=yield It.getHeartbeatsHeader();Sr&&ht.append("x-firebase-client",Sr)}const Cn={method:"POST",headers:ht,body:JSON.stringify({fid:se,authVersion:st,appId:j.appId,sdkVersion:Pe})},Gn=yield ct(()=>fetch(Re,Cn));if(Gn.ok){const Sr=yield Gn.json();return{fid:Sr.fid||se,registrationStatus:2,refreshToken:Sr.refreshToken,authToken:Me(Sr.authToken)}}throw yield rt("Create Installation",Gn)})).apply(this,arguments)}function $t(j){return new Promise(z=>{setTimeout(z,j)})}const Mn=/^[cdef][\w-]{21}$/;function Rt(){try{const j=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(j),j[0]=112+j[0]%16;const se=function Pn(j){return function Qt(j){return btoa(String.fromCharCode(...j)).replace(/\+/g,"-").replace(/\//g,"_")}(j).substr(0,22)}(j);return Mn.test(se)?se:""}catch{return""}}function Zn(j){return`${j.appName}!${j.appId}`}const Nn=new Map;function In(j,z){const se=Zn(j);vr(se,z),function Ar(j,z){const se=function ir(){return!br&&"BroadcastChannel"in self&&(br=new BroadcastChannel("[Firebase] FID Change"),br.onmessage=j=>{vr(j.data.key,j.data.fid)}),br}();se&&se.postMessage({key:j,fid:z}),function sr(){0===Nn.size&&br&&(br.close(),br=null)}()}(se,z)}function vr(j,z){const se=Nn.get(j);if(se)for(const Re of se)Re(z)}let br=null;const yr="firebase-installations-store";let Rr=null;function er(){return Rr||(Rr=(0,fe.X3)("firebase-installations-database",1,{upgrade:(j,z)=>{0===z&&j.createObjectStore(yr)}})),Rr}function Ht(j,z){return cr.apply(this,arguments)}function cr(){return(cr=(0,S.Z)(function*(j,z){const se=Zn(j),ht=(yield er()).transaction(yr,"readwrite"),It=ht.objectStore(yr),nn=yield It.get(se);return yield It.put(z,se),yield ht.done,(!nn||nn.fid!==z.fid)&&In(j,z.fid),z})).apply(this,arguments)}function tr(j){return nr.apply(this,arguments)}function nr(){return(nr=(0,S.Z)(function*(j){const z=Zn(j),Re=(yield er()).transaction(yr,"readwrite");yield Re.objectStore(yr).delete(z),yield Re.done})).apply(this,arguments)}function Nr(j,z){return _i.apply(this,arguments)}function _i(){return(_i=(0,S.Z)(function*(j,z){const se=Zn(j),ht=(yield er()).transaction(yr,"readwrite"),It=ht.objectStore(yr),nn=yield It.get(se),Cn=z(nn);return void 0===Cn?yield It.delete(se):yield It.put(Cn,se),yield ht.done,Cn&&(!nn||nn.fid!==Cn.fid)&&In(j,Cn.fid),Cn})).apply(this,arguments)}function Ir(j){return _r.apply(this,arguments)}function _r(){return(_r=(0,S.Z)(function*(j){let z;const se=yield Nr(j.appConfig,Re=>{const ht=fr(Re),It=mn(j,ht);return z=It.registrationPromise,It.installationEntry});return""===se.fid?{installationEntry:yield z}:{installationEntry:se,registrationPromise:z}})).apply(this,arguments)}function fr(j){return Kn(j||{fid:Rt(),registrationStatus:0})}function mn(j,z){if(0===z.registrationStatus){if(!navigator.onLine)return{installationEntry:z,registrationPromise:Promise.reject(Ye.create("app-offline"))};const se={fid:z.fid,registrationStatus:1,registrationTime:Date.now()},Re=function Tn(j,z){return On.apply(this,arguments)}(j,se);return{installationEntry:se,registrationPromise:Re}}return 1===z.registrationStatus?{installationEntry:z,registrationPromise:wr(j)}:{installationEntry:z}}function On(){return(On=(0,S.Z)(function*(j,z){try{const se=yield dt(j,z);return Ht(j.appConfig,se)}catch(se){throw Gt(se)&&409===se.customData.serverCode?yield tr(j.appConfig):yield Ht(j.appConfig,{fid:z.fid,registrationStatus:0}),se}})).apply(this,arguments)}function wr(j){return bn.apply(this,arguments)}function bn(){return(bn=(0,S.Z)(function*(j){let z=yield zr(j.appConfig);for(;1===z.registrationStatus;)yield $t(100),z=yield zr(j.appConfig);if(0===z.registrationStatus){const{installationEntry:se,registrationPromise:Re}=yield Ir(j);return Re||se}return z})).apply(this,arguments)}function zr(j){return Nr(j,z=>{if(!z)throw Ye.create("installation-not-found");return Kn(z)})}function Kn(j){return function zt(j){return 1===j.registrationStatus&&j.registrationTime+1e4<Date.now()}(j)?{fid:j.fid,registrationStatus:0}:j}function Ve(j,z){return tt.apply(this,arguments)}function tt(){return(tt=(0,S.Z)(function*({appConfig:j,heartbeatServiceProvider:z},se){const Re=St(j,se),ht=it(j,se),It=z.getImmediate({optional:!0});if(It){const Sr=yield It.getHeartbeatsHeader();Sr&&ht.append("x-firebase-client",Sr)}const Cn={method:"POST",headers:ht,body:JSON.stringify({installation:{sdkVersion:Pe,appId:j.appId}})},Gn=yield ct(()=>fetch(Re,Cn));if(Gn.ok)return Me(yield Gn.json());throw yield rt("Generate Auth Token",Gn)})).apply(this,arguments)}function St(j,{fid:z}){return`${Ge(j)}/${z}/authTokens:generate`}function Rn(j){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,S.Z)(function*(j,z=!1){let se;const Re=yield Nr(j.appConfig,It=>{if(!ln(It))throw Ye.create("not-registered");const nn=It.authToken;if(!z&&Ne(nn))return It;if(1===nn.requestStatus)return se=Je(j,z),It;{if(!navigator.onLine)throw Ye.create("app-offline");const Cn=$e(It);return se=Xe(j,Cn),Cn}});return se?yield se:Re.authToken})).apply(this,arguments)}function Je(j,z){return J.apply(this,arguments)}function J(){return(J=(0,S.Z)(function*(j,z){let se=yield ge(j.appConfig);for(;1===se.authToken.requestStatus;)yield $t(100),se=yield ge(j.appConfig);const Re=se.authToken;return 0===Re.requestStatus?Rn(j,z):Re})).apply(this,arguments)}function ge(j){return Nr(j,z=>{if(!ln(z))throw Ye.create("not-registered");return function De(j){return 1===j.requestStatus&&j.requestTime+1e4<Date.now()}(z.authToken)?Object.assign(Object.assign({},z),{authToken:{requestStatus:0}}):z})}function Xe(j,z){return _t.apply(this,arguments)}function _t(){return(_t=(0,S.Z)(function*(j,z){try{const se=yield Ve(j,z),Re=Object.assign(Object.assign({},z),{authToken:se});return yield Ht(j.appConfig,Re),se}catch(se){if(!Gt(se)||401!==se.customData.serverCode&&404!==se.customData.serverCode){const Re=Object.assign(Object.assign({},z),{authToken:{requestStatus:0}});yield Ht(j.appConfig,Re)}else yield tr(j.appConfig);throw se}})).apply(this,arguments)}function ln(j){return void 0!==j&&2===j.registrationStatus}function Ne(j){return 2===j.requestStatus&&!function xe(j){const z=Date.now();return z<j.creationTime||j.creationTime+j.expiresIn<z+36e5}(j)}function $e(j){const z={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},j),{authToken:z})}function we(){return(we=(0,S.Z)(function*(j){const z=j,{installationEntry:se,registrationPromise:Re}=yield Ir(z);return Re?Re.catch(console.error):Rn(z).catch(console.error),se.fid})).apply(this,arguments)}function Bt(){return(Bt=(0,S.Z)(function*(j,z=!1){const se=j;return yield gn(se),(yield Rn(se,z)).token})).apply(this,arguments)}function gn(j){return hn.apply(this,arguments)}function hn(){return(hn=(0,S.Z)(function*(j){const{registrationPromise:z}=yield Ir(j);z&&(yield z)})).apply(this,arguments)}function Fn(j){return Ye.create("missing-app-config-values",{valueName:j})}const Gr="installations",si=j=>{const z=j.getProvider("app").getImmediate(),se=function on(j){if(!j||!j.options)throw Fn("App Configuration");if(!j.name)throw Fn("App Name");const z=["projectId","apiKey","appId"];for(const se of z)if(!j.options[se])throw Fn(se);return{appName:j.name,projectId:j.options.projectId,apiKey:j.options.apiKey,appId:j.options.appId}}(z);return{app:z,appConfig:se,heartbeatServiceProvider:(0,d._getProvider)(z,"heartbeat"),_delete:()=>Promise.resolve()}},vi=j=>{const z=j.getProvider("app").getImmediate(),se=(0,d._getProvider)(z,Gr).getImmediate();return{getId:()=>function ie(j){return we.apply(this,arguments)}(se),getToken:ht=>function ut(j){return Bt.apply(this,arguments)}(se,ht)}};(function bi(){(0,d._registerComponent)(new Ae.wA(Gr,si,"PUBLIC")),(0,d._registerComponent)(new Ae.wA("installations-internal",vi,"PRIVATE"))})(),(0,d.registerVersion)(Fe,pe),(0,d.registerVersion)(Fe,pe,"esm2017");const Xi="@firebase/remote-config",ri=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class wo{constructor(z,se,Re,ht){this.client=z,this.storage=se,this.storageCache=Re,this.logger=ht}isCachedDataFresh(z,se){if(!se)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Re=Date.now()-se,ht=Re<=z;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Re}. Cache max age millis (minimumFetchIntervalMillis setting): ${z}. Is cache hit: ${ht}.`),ht}fetch(z){var se=this;return(0,S.Z)(function*(){const[Re,ht]=yield Promise.all([se.storage.getLastSuccessfulFetchTimestampMillis(),se.storage.getLastSuccessfulFetchResponse()]);if(ht&&se.isCachedDataFresh(z.cacheMaxAgeMillis,Re))return ht;z.eTag=ht&&ht.eTag;const It=yield se.client.fetch(z),nn=[se.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===It.status&&nn.push(se.storage.setLastSuccessfulFetchResponse(It)),yield Promise.all(nn),It})()}}function Eo(j=navigator){return j.languages&&j.languages[0]||j.language}class ro{constructor(z,se,Re,ht,It,nn){this.firebaseInstallations=z,this.sdkVersion=se,this.namespace=Re,this.projectId=ht,this.apiKey=It,this.appId=nn}fetch(z){var se=this;return(0,S.Z)(function*(){var Re,ht,It;const[nn,Cn]=yield Promise.all([se.firebaseInstallations.getId(),se.firebaseInstallations.getToken()]),Sr=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${se.projectId}/namespaces/${se.namespace}:fetch?key=${se.apiKey}`,Br={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":z.eTag||"*"},ar={sdk_version:se.sdkVersion,app_instance_id:nn,app_instance_id_token:Cn,app_id:se.appId,language_code:Eo()},Es={method:"POST",headers:Br,body:JSON.stringify(ar)},ao=fetch(Sr,Es),_l=new Promise((Ya,Ba)=>{z.signal.addEventListener(()=>{const sa=new Error("The operation was aborted.");sa.name="AbortError",Ba(sa)})});let sl;try{yield Promise.race([ao,_l]),sl=yield ao}catch(Ya){let Ba="fetch-client-network";throw"AbortError"===(null===(Re=Ya)||void 0===Re?void 0:Re.name)&&(Ba="fetch-timeout"),ri.create(Ba,{originalErrorMessage:null===(ht=Ya)||void 0===ht?void 0:ht.message})}let ol=sl.status;const Mo=sl.headers.get("ETag")||void 0;let go,al;if(200===sl.status){let Ya;try{Ya=yield sl.json()}catch(Ba){throw ri.create("fetch-client-parse",{originalErrorMessage:null===(It=Ba)||void 0===It?void 0:It.message})}go=Ya.entries,al=Ya.state}if("INSTANCE_STATE_UNSPECIFIED"===al?ol=500:"NO_CHANGE"===al?ol=304:("NO_TEMPLATE"===al||"EMPTY_CONFIG"===al)&&(go={}),304!==ol&&200!==ol)throw ri.create("fetch-status",{httpStatus:ol});return{status:ol,eTag:Mo,config:go}})()}}class et{constructor(z,se){this.client=z,this.storage=se}fetch(z){var se=this;return(0,S.Z)(function*(){const Re=(yield se.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return se.attemptFetch(z,Re)})()}attemptFetch(z,{throttleEndTimeMillis:se,backoffCount:Re}){var ht=this;return(0,S.Z)(function*(){yield function os(j,z){return new Promise((se,Re)=>{const ht=Math.max(z-Date.now(),0),It=setTimeout(se,ht);j.addEventListener(()=>{clearTimeout(It),Re(ri.create("fetch-throttle",{throttleEndTimeMillis:z}))})})}(z.signal,se);try{const It=yield ht.client.fetch(z);return yield ht.storage.deleteThrottleMetadata(),It}catch(It){if(!function at(j){if(!(j instanceof de.ZR&&j.customData))return!1;const z=Number(j.customData.httpStatus);return 429===z||500===z||503===z||504===z}(It))throw It;const nn={throttleEndTimeMillis:Date.now()+(0,de.$s)(Re),backoffCount:Re+1};return yield ht.storage.setThrottleMetadata(nn),ht.attemptFetch(z,nn)}})()}}class sn{constructor(z,se,Re,ht,It){this.app=z,this._client=se,this._storageCache=Re,this._storage=ht,this._logger=It,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function En(j,z){var se;const Re=j.target.error||void 0;return ri.create(z,{originalErrorMessage:Re&&(null===(se=Re)||void 0===se?void 0:se.message)})}const Yn="app_namespace_store";class Gs{constructor(z,se,Re,ht=function es(){return new Promise((j,z)=>{var se;try{const Re=indexedDB.open("firebase_remote_config",1);Re.onerror=ht=>{z(En(ht,"storage-open"))},Re.onsuccess=ht=>{j(ht.target.result)},Re.onupgradeneeded=ht=>{0===ht.oldVersion&&ht.target.result.createObjectStore(Yn,{keyPath:"compositeKey"})}}catch(Re){z(ri.create("storage-open",{originalErrorMessage:null===(se=Re)||void 0===se?void 0:se.message}))}})}()){this.appId=z,this.appName=se,this.namespace=Re,this.openDbPromise=ht}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(z){return this.set("last_fetch_status",z)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(z){return this.set("last_successful_fetch_timestamp_millis",z)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(z){return this.set("last_successful_fetch_response",z)}getActiveConfig(){return this.get("active_config")}setActiveConfig(z){return this.set("active_config",z)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(z){return this.set("active_config_etag",z)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(z){return this.set("throttle_metadata",z)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(z){var se=this;return(0,S.Z)(function*(){const Re=yield se.openDbPromise;return new Promise((ht,It)=>{var nn;const Gn=Re.transaction([Yn],"readonly").objectStore(Yn),Sr=se.createCompositeKey(z);try{const Br=Gn.get(Sr);Br.onerror=ar=>{It(En(ar,"storage-get"))},Br.onsuccess=ar=>{const Es=ar.target.result;ht(Es?Es.value:void 0)}}catch(Br){It(ri.create("storage-get",{originalErrorMessage:null===(nn=Br)||void 0===nn?void 0:nn.message}))}})})()}set(z,se){var Re=this;return(0,S.Z)(function*(){const ht=yield Re.openDbPromise;return new Promise((It,nn)=>{var Cn;const Sr=ht.transaction([Yn],"readwrite").objectStore(Yn),Br=Re.createCompositeKey(z);try{const ar=Sr.put({compositeKey:Br,value:se});ar.onerror=Es=>{nn(En(Es,"storage-set"))},ar.onsuccess=()=>{It()}}catch(ar){nn(ri.create("storage-set",{originalErrorMessage:null===(Cn=ar)||void 0===Cn?void 0:Cn.message}))}})})()}delete(z){var se=this;return(0,S.Z)(function*(){const Re=yield se.openDbPromise;return new Promise((ht,It)=>{var nn;const Gn=Re.transaction([Yn],"readwrite").objectStore(Yn),Sr=se.createCompositeKey(z);try{const Br=Gn.delete(Sr);Br.onerror=ar=>{It(En(ar,"storage-delete"))},Br.onsuccess=()=>{ht()}}catch(Br){It(ri.create("storage-delete",{originalErrorMessage:null===(nn=Br)||void 0===nn?void 0:nn.message}))}})})()}createCompositeKey(z){return[this.appId,this.appName,this.namespace,z].join()}}class Bi{constructor(z){this.storage=z}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var z=this;return(0,S.Z)(function*(){const se=z.storage.getLastFetchStatus(),Re=z.storage.getLastSuccessfulFetchTimestampMillis(),ht=z.storage.getActiveConfig(),It=yield se;It&&(z.lastFetchStatus=It);const nn=yield Re;nn&&(z.lastSuccessfulFetchTimestampMillis=nn);const Cn=yield ht;Cn&&(z.activeConfig=Cn)})()}setLastFetchStatus(z){return this.lastFetchStatus=z,this.storage.setLastFetchStatus(z)}setLastSuccessfulFetchTimestampMillis(z){return this.lastSuccessfulFetchTimestampMillis=z,this.storage.setLastSuccessfulFetchTimestampMillis(z)}setActiveConfig(z){return this.activeConfig=z,this.storage.setActiveConfig(z)}}function Ho(){return Os.apply(this,arguments)}function Os(){return(Os=(0,S.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}!function Co(){(0,d._registerComponent)(new Ae.wA("remote-config",function j(z,{instanceIdentifier:se}){const Re=z.getProvider("app").getImmediate(),ht=z.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ri.create("registration-window");if(!(0,de.hl)())throw ri.create("indexed-db-unavailable");const{projectId:It,apiKey:nn,appId:Cn}=Re.options;if(!It)throw ri.create("registration-project-id");if(!nn)throw ri.create("registration-api-key");if(!Cn)throw ri.create("registration-app-id");const Gn=new Gs(Cn,Re.name,se=se||"firebase"),Sr=new Bi(Gn),Br=new _e.Yd(Xi);Br.logLevel=_e.in.ERROR;const ar=new ro(ht,d.SDK_VERSION,se,It,nn,Cn),Es=new et(ar,Gn),ao=new wo(Es,Gn,Sr,Br),_l=new sn(Re,ao,Sr,Gn,Br);return function dr(j){const z=(0,de.m9)(j);z._initializePromise||(z._initializePromise=z._storageCache.loadFromStorage().then(()=>{z._isInitializationComplete=!0}))}(_l),_l},"PUBLIC").setMultipleInstances(!0)),(0,d.registerVersion)(Xi,"0.3.15"),(0,d.registerVersion)(Xi,"0.3.15","esm2017")}();const Ti="/firebase-messaging-sw.js",Lr="/firebase-cloud-messaging-push-scope",as="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Is="google.c.a.c_id",Us="google.c.a.c_l",ko="google.c.a.ts",ks="google.c.a.e";var ls=(()=>{return(j=ls||(ls={})).PUSH_RECEIVED="push-received",j.NOTIFICATION_CLICKED="notification-clicked",ls;var j})();function ys(j){const z=new Uint8Array(j);return btoa(String.fromCharCode(...z)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ei(j){const se=(j+"=".repeat((4-j.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Re=atob(se),ht=new Uint8Array(Re.length);for(let It=0;It<Re.length;++It)ht[It]=Re.charCodeAt(It);return ht}const Wi="fcm_token_details_db",Bs="fcm_token_object_Store";function Xo(j){return Ws.apply(this,arguments)}function Ws(){return Ws=(0,S.Z)(function*(j){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(It=>It.name).includes(Wi))return null;let z=null;return(yield(0,fe.X3)(Wi,5,{upgrade:(Re=(0,S.Z)(function*(ht,It,nn,Cn){var Gn;if(It<2||!ht.objectStoreNames.contains(Bs))return;const Sr=Cn.objectStore(Bs),Br=yield Sr.index("fcmSenderId").get(j);if(yield Sr.clear(),Br)if(2===It){const ar=Br;if(!ar.auth||!ar.p256dh||!ar.endpoint)return;z={token:ar.fcmToken,createTime:null!==(Gn=ar.createTime)&&void 0!==Gn?Gn:Date.now(),subscriptionOptions:{auth:ar.auth,p256dh:ar.p256dh,endpoint:ar.endpoint,swScope:ar.swScope,vapidKey:"string"==typeof ar.vapidKey?ar.vapidKey:ys(ar.vapidKey)}}}else if(3===It){const ar=Br;z={token:ar.fcmToken,createTime:ar.createTime,subscriptionOptions:{auth:ys(ar.auth),p256dh:ys(ar.p256dh),endpoint:ar.endpoint,swScope:ar.swScope,vapidKey:ys(ar.vapidKey)}}}else if(4===It){const ar=Br;z={token:ar.fcmToken,createTime:ar.createTime,subscriptionOptions:{auth:ys(ar.auth),p256dh:ys(ar.p256dh),endpoint:ar.endpoint,swScope:ar.swScope,vapidKey:ys(ar.vapidKey)}}}}),function(It,nn,Cn,Gn){return Re.apply(this,arguments)})})).close(),yield(0,fe.Lj)(Wi),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),Ci(z)?z:null;var Re}),Ws.apply(this,arguments)}function Ci(j){if(!j||!j.subscriptionOptions)return!1;const{subscriptionOptions:z}=j;return"number"==typeof j.createTime&&j.createTime>0&&"string"==typeof j.token&&j.token.length>0&&"string"==typeof z.auth&&z.auth.length>0&&"string"==typeof z.p256dh&&z.p256dh.length>0&&"string"==typeof z.endpoint&&z.endpoint.length>0&&"string"==typeof z.swScope&&z.swScope.length>0&&"string"==typeof z.vapidKey&&z.vapidKey.length>0}const Pi="firebase-messaging-store";let Mi=null;function Vs(){return Mi||(Mi=(0,fe.X3)("firebase-messaging-database",1,{upgrade:(j,z)=>{0===z&&j.createObjectStore(Pi)}})),Mi}function ho(j){return $i.apply(this,arguments)}function $i(){return($i=(0,S.Z)(function*(j){const z=L(j),Re=yield(yield Vs()).transaction(Pi).objectStore(Pi).get(z);if(Re)return Re;{const ht=yield Xo(j.appConfig.senderId);if(ht)return yield Hr(j,ht),ht}})).apply(this,arguments)}function Hr(j,z){return Do.apply(this,arguments)}function Do(){return(Do=(0,S.Z)(function*(j,z){const se=L(j),ht=(yield Vs()).transaction(Pi,"readwrite");return yield ht.objectStore(Pi).put(z,se),yield ht.done,z})).apply(this,arguments)}function _s(j){return ve.apply(this,arguments)}function ve(){return(ve=(0,S.Z)(function*(j){const z=L(j),Re=(yield Vs()).transaction(Pi,"readwrite");yield Re.objectStore(Pi).delete(z),yield Re.done})).apply(this,arguments)}function L({appConfig:j}){return j.appId}const Q=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ue(j,z){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,S.Z)(function*(j,z){var se;const Re=yield zn(j),ht=jt(z),It={method:"POST",headers:Re,body:JSON.stringify(ht)};let nn;try{nn=yield(yield fetch(jn(j.appConfig),It)).json()}catch(Cn){throw Q.create("token-subscribe-failed",{errorInfo:null===(se=Cn)||void 0===se?void 0:se.toString()})}if(nn.error)throw Q.create("token-subscribe-failed",{errorInfo:nn.error.message});if(!nn.token)throw Q.create("token-subscribe-no-token");return nn.token})).apply(this,arguments)}function Et(j,z){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,S.Z)(function*(j,z){var se;const Re=yield zn(j),ht=jt(z.subscriptionOptions),It={method:"PATCH",headers:Re,body:JSON.stringify(ht)};let nn;try{nn=yield(yield fetch(`${jn(j.appConfig)}/${z.token}`,It)).json()}catch(Cn){throw Q.create("token-update-failed",{errorInfo:null===(se=Cn)||void 0===se?void 0:se.toString()})}if(nn.error)throw Q.create("token-update-failed",{errorInfo:nn.error.message});if(!nn.token)throw Q.create("token-update-no-token");return nn.token})).apply(this,arguments)}function fn(j,z){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,S.Z)(function*(j,z){var se;const ht={method:"DELETE",headers:yield zn(j)};try{const nn=yield(yield fetch(`${jn(j.appConfig)}/${z}`,ht)).json();if(nn.error)throw Q.create("token-unsubscribe-failed",{errorInfo:nn.error.message})}catch(It){throw Q.create("token-unsubscribe-failed",{errorInfo:null===(se=It)||void 0===se?void 0:se.toString()})}})).apply(this,arguments)}function jn({projectId:j}){return`https://fcmregistrations.googleapis.com/v1/projects/${j}/registrations`}function zn(j){return us.apply(this,arguments)}function us(){return(us=(0,S.Z)(function*({appConfig:j,installations:z}){const se=yield z.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":j.apiKey,"x-goog-firebase-installations-auth":`FIS ${se}`})})).apply(this,arguments)}function jt({p256dh:j,auth:z,endpoint:se,vapidKey:Re}){const ht={web:{endpoint:se,auth:z,p256dh:j}};return Re!==as&&(ht.web.applicationPubKey=Re),ht}const Xn=6048e5;function cs(j){return qs.apply(this,arguments)}function qs(){return(qs=(0,S.Z)(function*(j){const z=yield da(j.swRegistration,j.vapidKey),se={vapidKey:j.vapidKey,swScope:j.swRegistration.scope,endpoint:z.endpoint,auth:ys(z.getKey("auth")),p256dh:ys(z.getKey("p256dh"))},Re=yield ho(j.firebaseDependencies);if(Re){if(G(Re.subscriptionOptions,se))return Date.now()>=Re.createTime+Xn?$o(j,{token:Re.token,createTime:Date.now(),subscriptionOptions:se}):Re.token;try{yield fn(j.firebaseDependencies,Re.token)}catch(ht){console.warn(ht)}return Ks(j.firebaseDependencies,se)}return Ks(j.firebaseDependencies,se)})).apply(this,arguments)}function Ri(j){return ei.apply(this,arguments)}function ei(){return(ei=(0,S.Z)(function*(j){const z=yield ho(j.firebaseDependencies);z&&(yield fn(j.firebaseDependencies,z.token),yield _s(j.firebaseDependencies));const se=yield j.swRegistration.pushManager.getSubscription();return!se||se.unsubscribe()})).apply(this,arguments)}function $o(j,z){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,S.Z)(function*(j,z){try{const se=yield Et(j.firebaseDependencies,z),Re=Object.assign(Object.assign({},z),{token:se,createTime:Date.now()});return yield Hr(j.firebaseDependencies,Re),se}catch(se){throw yield Ri(j),se}})).apply(this,arguments)}function Ks(j,z){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,S.Z)(function*(j,z){const Re={token:yield ue(j,z),createTime:Date.now(),subscriptionOptions:z};return yield Hr(j,Re),Re.token})).apply(this,arguments)}function da(j,z){return fo.apply(this,arguments)}function fo(){return(fo=(0,S.Z)(function*(j,z){return(yield j.pushManager.getSubscription())||j.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ei(z)})})).apply(this,arguments)}function G(j,z){return z.vapidKey===j.vapidKey&&z.endpoint===j.endpoint&&z.auth===j.auth&&z.p256dh===j.p256dh}function H(j){const z={from:j.from,collapseKey:j.collapse_key,messageId:j.fcmMessageId};return function U(j,z){if(!z.notification)return;j.notification={};const se=z.notification.title;se&&(j.notification.title=se);const Re=z.notification.body;Re&&(j.notification.body=Re);const ht=z.notification.image;ht&&(j.notification.image=ht);const It=z.notification.icon;It&&(j.notification.icon=It)}(z,j),function he(j,z){!z.data||(j.data=z.data)}(z,j),function Ot(j,z){var se,Re,ht,It,nn;if(!(z.fcmOptions||null!==(se=z.notification)&&void 0!==se&&se.click_action))return;j.fcmOptions={};const Cn=null!==(ht=null===(Re=z.fcmOptions)||void 0===Re?void 0:Re.link)&&void 0!==ht?ht:null===(It=z.notification)||void 0===It?void 0:It.click_action;Cn&&(j.fcmOptions.link=Cn);const Gn=null===(nn=z.fcmOptions)||void 0===nn?void 0:nn.analytics_label;Gn&&(j.fcmOptions.analyticsLabel=Gn)}(z,j),z}function $n(j){return"object"==typeof j&&!!j&&Is in j}function Jr(j,z){const se=[];for(let Re=0;Re<j.length;Re++)se.push(j.charAt(Re)),Re<z.length&&se.push(z.charAt(Re));return se.join("")}function Ss(j){return Q.create("missing-app-config-values",{valueName:j})}Jr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Jr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class io{constructor(z,se,Re){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ht=function Ps(j){if(!j||!j.options)throw Ss("App Configuration Object");if(!j.name)throw Ss("App Name");const z=["projectId","apiKey","appId","messagingSenderId"],{options:se}=j;for(const Re of z)if(!se[Re])throw Ss(Re);return{appName:j.name,projectId:se.projectId,apiKey:se.apiKey,appId:se.appId,senderId:se.messagingSenderId}}(z);this.firebaseDependencies={app:z,appConfig:ht,installations:se,analyticsProvider:Re}}_delete(){return Promise.resolve()}}function zo(j){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,S.Z)(function*(j){var z;try{j.swRegistration=yield navigator.serviceWorker.register(Ti,{scope:Lr}),j.swRegistration.update().catch(()=>{})}catch(se){throw Q.create("failed-service-worker-registration",{browserErrorMessage:null===(z=se)||void 0===z?void 0:z.message})}})).apply(this,arguments)}function ha(j,z){return ea.apply(this,arguments)}function ea(){return(ea=(0,S.Z)(function*(j,z){if(!z&&!j.swRegistration&&(yield zo(j)),z||!j.swRegistration){if(!(z instanceof ServiceWorkerRegistration))throw Q.create("invalid-sw-registration");j.swRegistration=z}})).apply(this,arguments)}function fa(j,z){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,S.Z)(function*(j,z){z?j.vapidKey=z:j.vapidKey||(j.vapidKey=as)})).apply(this,arguments)}function so(){return(so=(0,S.Z)(function*(j,z){if(!navigator)throw Q.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Q.create("permission-blocked");return yield fa(j,z?.vapidKey),yield ha(j,z?.serviceWorkerRegistration),cs(j)})).apply(this,arguments)}function $a(j,z,se){return No.apply(this,arguments)}function No(){return(No=(0,S.Z)(function*(j,z,se){const Re=Za(z);(yield j.firebaseDependencies.analyticsProvider.get()).logEvent(Re,{message_id:se[Is],message_name:se[Us],message_time:se[ko],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Za(j){switch(j){case ls.NOTIFICATION_CLICKED:return"notification_open";case ls.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ee(){return(ee=(0,S.Z)(function*(j,z){const se=z.data;if(!se.isFirebaseMessaging)return;j.onMessageHandler&&se.messageType===ls.PUSH_RECEIVED&&("function"==typeof j.onMessageHandler?j.onMessageHandler(H(se)):j.onMessageHandler.next(H(se)));const Re=se.data;$n(Re)&&"1"===Re[ks]&&(yield $a(j,se.messageType,Re))})).apply(this,arguments)}const V="@firebase/messaging",Ue=j=>{const z=new io(j.getProvider("app").getImmediate(),j.getProvider("installations-internal").getImmediate(),j.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",se=>function R(j,z){return ee.apply(this,arguments)}(z,se)),z},Ct=j=>{const z=j.getProvider("messaging").getImmediate();return{getToken:Re=>function pa(j,z){return so.apply(this,arguments)}(z,Re)}};function Bn(){return $r.apply(this,arguments)}function $r(){return($r=(0,S.Z)(function*(){try{yield(0,de.eu)()}catch{return!1}return typeof window<"u"&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Nt(){(0,d._registerComponent)(new Ae.wA("messaging",Ue,"PUBLIC")),(0,d._registerComponent)(new Ae.wA("messaging-internal",Ct,"PRIVATE")),(0,d.registerVersion)(V,"0.10.0"),(0,d.registerVersion)(V,"0.10.0","esm2017")}();const ts="analytics",Kr="firebase_id",tn="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Zi="https://www.googletagmanager.com/gtag/js",li=new _e.Yd("@firebase/analytics");function ga(j){return Promise.all(j.map(z=>z.catch(se=>se)))}function Wn(j,z){const se=document.createElement("script");se.src=`${Zi}?l=${j}&id=${z}`,se.async=!0,document.head.appendChild(se)}function gl(j,z,se,Re,ht,It){return kn.apply(this,arguments)}function kn(){return(kn=(0,S.Z)(function*(j,z,se,Re,ht,It){const nn=Re[ht];try{if(nn)yield z[nn];else{const Gn=(yield ga(se)).find(Sr=>Sr.measurementId===ht);Gn&&(yield z[Gn.appId])}}catch(Cn){li.error(Cn)}j("config",ht,It)})).apply(this,arguments)}function Mt(j,z,se,Re,ht){return rn.apply(this,arguments)}function rn(){return(rn=(0,S.Z)(function*(j,z,se,Re,ht){try{let It=[];if(ht&&ht.send_to){let nn=ht.send_to;Array.isArray(nn)||(nn=[nn]);const Cn=yield ga(se);for(const Gn of nn){const Sr=Cn.find(ar=>ar.measurementId===Gn),Br=Sr&&z[Sr.appId];if(!Br){It=[];break}It.push(Br)}}0===It.length&&(It=Object.values(z)),yield Promise.all(It),j("event",Re,ht||{})}catch(It){li.error(It)}})).apply(this,arguments)}function Vl(j){const z=window.document.getElementsByTagName("script");for(const se of Object.values(z))if(se.src&&se.src.includes(Zi)&&se.src.includes(j))return se;return null}const hs=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),La=new class ml{constructor(z={},se=1e3){this.throttleMetadata=z,this.intervalMillis=se}getThrottleMetadata(z){return this.throttleMetadata[z]}setThrottleMetadata(z,se){this.throttleMetadata[z]=se}deleteThrottleMetadata(z){delete this.throttleMetadata[z]}};function za(j){return new Headers({Accept:"application/json","x-goog-api-key":j})}function nl(j){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,S.Z)(function*(j){var z;const{appId:se,apiKey:Re}=j,ht={method:"GET",headers:za(Re)},It=tn.replace("{app-id}",se),nn=yield fetch(It,ht);if(200!==nn.status&&304!==nn.status){let Cn="";try{const Gn=yield nn.json();null!==(z=Gn.error)&&void 0!==z&&z.message&&(Cn=Gn.error.message)}catch{}throw hs.create("config-fetch-failed",{httpStatus:nn.status,responseMessage:Cn})}return nn.json()})).apply(this,arguments)}function Er(j){return qi.apply(this,arguments)}function qi(){return(qi=(0,S.Z)(function*(j,z=La,se){const{appId:Re,apiKey:ht,measurementId:It}=j.options;if(!Re)throw hs.create("no-app-id");if(!ht){if(It)return{measurementId:It,appId:Re};throw hs.create("no-api-key")}const nn=z.getThrottleMetadata(Re)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Cn=new Pr;return setTimeout((0,S.Z)(function*(){Cn.abort()}),void 0!==se?se:6e4),Ga({appId:Re,apiKey:ht,measurementId:It},nn,Cn,z)})).apply(this,arguments)}function Ga(j,z,se){return ti.apply(this,arguments)}function ti(){return(ti=(0,S.Z)(function*(j,{throttleEndTimeMillis:z,backoffCount:se},Re,ht=La){var It,nn;const{appId:Cn,measurementId:Gn}=j;try{yield pr(Re,z)}catch(Sr){if(Gn)return li.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Gn} provided in the "measurementId" field in the local Firebase config. [${null===(It=Sr)||void 0===It?void 0:It.message}]`),{appId:Cn,measurementId:Gn};throw Sr}try{const Sr=yield nl(j);return ht.deleteThrottleMetadata(Cn),Sr}catch(Sr){const Br=Sr;if(!Sa(Br)){if(ht.deleteThrottleMetadata(Cn),Gn)return li.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Gn} provided in the "measurementId" field in the local Firebase config. [${Br?.message}]`),{appId:Cn,measurementId:Gn};throw Sr}const ar=503===Number(null===(nn=Br?.customData)||void 0===nn?void 0:nn.httpStatus)?(0,de.$s)(se,ht.intervalMillis,30):(0,de.$s)(se,ht.intervalMillis),Es={throttleEndTimeMillis:Date.now()+ar,backoffCount:se+1};return ht.setThrottleMetadata(Cn,Es),li.debug(`Calling attemptFetch again in ${ar} millis`),Ga(j,Es,Re,ht)}})).apply(this,arguments)}function pr(j,z){return new Promise((se,Re)=>{const ht=Math.max(z-Date.now(),0),It=setTimeout(se,ht);j.addEventListener(()=>{clearTimeout(It),Re(hs.create("fetch-throttle",{throttleEndTimeMillis:z}))})})}function Sa(j){if(!(j instanceof de.ZR&&j.customData))return!1;const z=Number(j.customData.httpStatus);return 429===z||500===z||503===z||504===z}class Pr{constructor(){this.listeners=[]}addEventListener(z){this.listeners.push(z)}abort(){this.listeners.forEach(z=>z())}}let Wa,Aa;function yn(){return(yn=(0,S.Z)(function*(j,z,se,Re,ht){if(ht&&ht.global)j("event",se,Re);else{const It=yield z;j("event",se,Object.assign(Object.assign({},Re),{send_to:It}))}})).apply(this,arguments)}function fs(j){Aa=j}function js(j){Wa=j}function Al(){return _a.apply(this,arguments)}function _a(){return(_a=(0,S.Z)(function*(){var j;if(!(0,de.hl)())return li.warn(hs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch(z){return li.warn(hs.create("indexeddb-unavailable",{errorInfo:null===(j=z)||void 0===j?void 0:j.toString()}).message),!1}return!0})).apply(this,arguments)}function Di(){return(Di=(0,S.Z)(function*(j,z,se,Re,ht,It,nn){var Cn;const Gn=Er(j);Gn.then(ao=>{se[ao.measurementId]=ao.appId,j.options.measurementId&&ao.measurementId!==j.options.measurementId&&li.warn(`The measurement ID in the local Firebase config (${j.options.measurementId}) does not match the measurement ID fetched from the server (${ao.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ao=>li.error(ao)),z.push(Gn);const Sr=Al().then(ao=>{if(ao)return Re.getId()}),[Br,ar]=yield Promise.all([Gn,Sr]);Vl(It)||Wn(It,Br.measurementId),Aa&&(ht("consent","default",Aa),fs(void 0)),ht("js",new Date);const Es=null!==(Cn=nn?.config)&&void 0!==Cn?Cn:{};return Es.origin="firebase",Es.update=!0,null!=ar&&(Es[Kr]=ar),ht("config",Br.measurementId,Es),Wa&&(ht("set",Wa),js(void 0)),Br.measurementId})).apply(this,arguments)}class lt{constructor(z){this.app=z}_delete(){return delete zi[this.app.options.appId],Promise.resolve()}}let zi={},Hs=[];const Fo={};let Ua,xi,Qs="dataLayer",Ma=!1;function Ml(j,z,se){!function su(){const j=[];if((0,de.ru)()&&j.push("This is a browser extension environment."),(0,de.zI)()||j.push("Cookies are not available."),j.length>0){const z=j.map((Re,ht)=>`(${ht+1}) ${Re}`).join(" "),se=hs.create("invalid-analytics-context",{errorInfo:z});li.warn(se.message)}}();const Re=j.options.appId;if(!Re)throw hs.create("no-app-id");if(!j.options.apiKey){if(!j.options.measurementId)throw hs.create("no-api-key");li.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${j.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=zi[Re])throw hs.create("already-exists",{id:Re});if(!Ma){!function or(j){let z=[];Array.isArray(window[j])?z=window[j]:window[j]=z}(Qs);const{wrappedGtag:It,gtagCore:nn}=function tl(j,z,se,Re,ht){let It=function(...nn){window[Re].push(arguments)};return window[ht]&&"function"==typeof window[ht]&&(It=window[ht]),window[ht]=function bs(j,z,se,Re){function It(){return(It=(0,S.Z)(function*(nn,Cn,Gn){try{"event"===nn?yield Mt(j,z,se,Cn,Gn):"config"===nn?yield gl(j,z,se,Re,Cn,Gn):"consent"===nn?j("consent","update",Gn):j("set",Cn)}catch(Sr){li.error(Sr)}})).apply(this,arguments)}return function ht(nn,Cn,Gn){return It.apply(this,arguments)}}(It,j,z,se),{gtagCore:It,wrappedGtag:window[ht]}}(zi,Hs,Fo,Qs,"gtag");xi=It,Ua=nn,Ma=!0}return zi[Re]=function ia(j,z,se,Re,ht,It,nn){return Di.apply(this,arguments)}(j,Hs,Fo,z,Ua,Qs,se),new lt(j)}function xa(){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,S.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}const yl="@firebase/analytics";!function Js(){(0,d._registerComponent)(new Ae.wA(ts,(z,{options:se})=>Ml(z.getProvider("app").getImmediate(),z.getProvider("installations-internal").getImmediate(),se),"PUBLIC")),(0,d._registerComponent)(new Ae.wA("analytics-internal",function j(z){try{const se=z.getProvider(ts).getImmediate();return{logEvent:(Re,ht,It)=>function qo(j,z,se,Re){j=(0,de.m9)(j),function Li(j,z,se,Re,ht){return yn.apply(this,arguments)}(xi,zi[j.app.options.appId],z,se,Re).catch(ht=>li.error(ht))}(se,Re,ht,It)}}catch(se){throw hs.create("interop-component-reg-failed",{reason:se})}},"PRIVATE")),(0,d.registerVersion)(yl,"0.8.4"),(0,d.registerVersion)(yl,"0.8.4","esm2017")}();var Zs=k(4408),po=k(7565);const D=new class va extends po.v{}(class Ai extends Zs.o{constructor(z,se){super(z,se),this.scheduler=z,this.work=se}schedule(z,se=0){return se>0?super.schedule(z,se):(this.delay=se,this.state=z,this.scheduler.flush(this),this)}execute(z,se){return se>0||this.closed?super.execute(z,se):this._execute(z,se)}requestAsyncId(z,se,Re=0){return null!=Re&&Re>0||null==Re&&this.delay>0?super.requestAsyncId(z,se,Re):(z.flush(this),0)}});var E=k(4986),F=k(8505),$=k(9468),ae=k(5363);const Oe=new h.GfV("7.4.1"),Be="__angularfire_symbol__analyticsIsSupportedValue",xt="__angularfire_symbol__analyticsIsSupported",pn="__angularfire_symbol__remoteConfigIsSupportedValue",hr="__angularfire_symbol__remoteConfigIsSupported",Un="__angularfire_symbol__messagingIsSupportedValue",Ur="__angularfire_symbol__messagingIsSupported";function wa(j,z,se){if(z){if(1===z.length)return z[0];const It=z.filter(nn=>nn.app===se);if(1===It.length)return It[0]}return se.container.getProvider(j).getImmediate({optional:!0})}globalThis[xt]||(globalThis[xt]=xa().then(j=>globalThis[Be]=j).catch(()=>globalThis[Be]=!1)),globalThis[Ur]||(globalThis[Ur]=Bn().then(j=>globalThis[Un]=j).catch(()=>globalThis[Un]=!1)),globalThis[hr]||(globalThis[hr]=Ho().then(j=>globalThis[pn]=j).catch(()=>globalThis[pn]=!1));const Ao=(j,z)=>{const se=z?[z]:(0,c.C6)(),Re=[];return se.forEach(ht=>{ht.container.getProvider(j).instances.forEach(nn=>{Re.includes(nn)||Re.push(nn)})}),Re};function Ko(){}class qa{constructor(z,se=D){this.zone=z,this.delegate=se}now(){return this.delegate.now()}schedule(z,se,Re){const ht=this.zone;return this.delegate.schedule(function(nn){ht.runGuarded(()=>{z.apply(this,[nn])})},se,Re)}}class rl{constructor(z){this.zone=z,this.task=null}call(z,se){const Re=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ko,{},Ko,Ko)),se.pipe((0,F.b)({next:Re,complete:Re,error:Re})).subscribe(z).add(Re)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ea=(()=>{class j{constructor(se){this.ngZone=se,this.outsideAngular=se.runOutsideAngular(()=>new qa(Zone.current)),this.insideAngular=se.run(()=>new qa(Zone.current,E.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return j.\u0275fac=function(se){return new(se||j)(h.LFG(h.R0b))},j.\u0275prov=h.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),j})();function Ca(){const j=globalThis.\u0275AngularFireScheduler;if(!j)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return j}function Yi(j){return Ca(),function ou(j){return function(se){return(se=se.lift(new rl(j.ngZone))).pipe((0,$.R)(j.outsideAngular),(0,ae.Q)(j.insideAngular))}}(Ca())(j)}},8247:(Jt,Qe,k)=>{k.d(Qe,{$:()=>jn,A:()=>be,B:()=>mt,G:()=>vi,H:()=>fi,J:()=>et,L:()=>Ne,M:()=>Os,N:()=>ai,P:()=>E,Q:()=>Is,R:()=>Si,T:()=>Us,U:()=>as,V:()=>ls,W:()=>ys,X:()=>Xo,Y:()=>P,Z:()=>ue,_:()=>Et,a:()=>ta,a0:()=>cs,a1:()=>Ri,a2:()=>$o,a3:()=>Ks,a4:()=>da,a5:()=>G,a6:()=>U,a7:()=>he,a8:()=>$n,a9:()=>Jr,aA:()=>xe,aB:()=>Gn,aC:()=>$l,aD:()=>Ka,aE:()=>un,aI:()=>za,aL:()=>ks,aa:()=>zo,ab:()=>ha,ac:()=>fa,af:()=>$a,ag:()=>Za,ah:()=>R,ak:()=>Pi,al:()=>ii,an:()=>Zi,ao:()=>kn,ap:()=>ct,aq:()=>Y,ar:()=>gn,as:()=>Gt,at:()=>to,au:()=>Mo,av:()=>W,aw:()=>Ge,ax:()=>qe,ay:()=>ao,az:()=>je,b:()=>hs,c:()=>Un,d:()=>ba,e:()=>Ns,f:()=>ou,g:()=>Re,h:()=>j,i:()=>_a,j:()=>nn,k:()=>Lo,l:()=>ps,m:()=>lo,n:()=>Qa,o:()=>fe,r:()=>Zs,s:()=>As,u:()=>D});var h=k(5861),c=k(2090),S=k(9681),d=k(1877),de=k(655),Ae=k(4859);const fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},be={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const mt=function Pe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},He=function st(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Tt=new c.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ft=new d.Yd("@firebase/auth");function Ye(C,...y){ft.logLevel<=d.in.ERROR&&ft.error(`Auth (${S.SDK_VERSION}): ${C}`,...y)}function Gt(C,...y){throw Pt(C,...y)}function Ge(C,...y){return Pt(C,...y)}function Me(C,y,_){const x=Object.assign(Object.assign({},He()),{[y]:_});return new c.LL("auth","Firebase",x).create(y,{appName:C.name})}function rt(C,y,_){if(!(y instanceof _))throw _.name!==y.constructor.name&&Gt(C,"argument-error"),Me(C,"argument-error",`Type of ${y.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pt(C,...y){if("string"!=typeof C){const _=y[0],x=[...y.slice(1)];return x[0]&&(x[0].appName=C.name),C._errorFactory.create(_,...x)}return Tt.create(C,...y)}function qe(C,y,..._){if(!C)throw Pt(y,..._)}function it(C){const y="INTERNAL ASSERTION FAILED: "+C;throw Ye(y),new Error(y)}function ct(C,y){C||it(y)}const We=new Map;function je(C){ct(C instanceof Function,"Expected a class definition");let y=We.get(C);return y?(ct(y instanceof C,"Instance stored in cache mismatched with class"),y):(y=new C,We.set(C,y),y)}function Lt(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.href)||""}function $t(){return"http:"===Qt()||"https:"===Qt()}function Qt(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.protocol)||null}class Rt{constructor(y,_){this.shortDelay=y,this.longDelay=_,ct(_>y,"Short delay should be less than long delay!"),this.isMobile=(0,c.uI)()||(0,c.b$)()}get(){return function Mn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&($t()||(0,c.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Pn(C,y){ct(C.emulator,"Emulator should always be set here");const{url:_}=C.emulator;return y?`${_}${y.startsWith("/")?y.slice(1):y}`:_}class Zn{static initialize(y,_,x){this.fetchImpl=y,_&&(this.headersImpl=_),x&&(this.responseImpl=x)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void it("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void it("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void it("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Nn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},In=new Rt(3e4,6e4);function Wt(C,y){return C.tenantId&&!y.tenantId?Object.assign(Object.assign({},y),{tenantId:C.tenantId}):y}function dn(C,y,_,x){return vr.apply(this,arguments)}function vr(){return(vr=(0,h.Z)(function*(C,y,_,x,re={}){return Ar(C,re,(0,h.Z)(function*(){let ye={},vt={};x&&("GET"===y?vt=x:ye={body:JSON.stringify(x)});const Yt=(0,c.xO)(Object.assign({key:C.config.apiKey},vt)).slice(1),_n=yield C._getAdditionalHeaders();return _n["Content-Type"]="application/json",C.languageCode&&(_n["X-Firebase-Locale"]=C.languageCode),Zn.fetch()(Vn(C,C.config.apiHost,_,Yt),Object.assign({method:y,headers:_n,referrerPolicy:"no-referrer"},ye))}))})).apply(this,arguments)}function Ar(C,y,_){return br.apply(this,arguments)}function br(){return(br=(0,h.Z)(function*(C,y,_){C._canInitEmulator=!1;const x=Object.assign(Object.assign({},Nn),y);try{const re=new Cr(C),ye=yield Promise.race([_(),re.promise]);re.clearNetworkTimeout();const vt=yield ye.json();if("needConfirmation"in vt)throw yr(C,"account-exists-with-different-credential",vt);if(ye.ok&&!("errorMessage"in vt))return vt;{const Yt=ye.ok?vt.errorMessage:vt.error.message,[_n,wn]=Yt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===_n)throw yr(C,"credential-already-in-use",vt);if("EMAIL_EXISTS"===_n)throw yr(C,"email-already-in-use",vt);if("USER_DISABLED"===_n)throw yr(C,"user-disabled",vt);const Xr=x[_n]||_n.toLowerCase().replace(/[_\s]+/g,"-");if(wn)throw Me(C,Xr,wn);Gt(C,Xr)}}catch(re){if(re instanceof c.ZR)throw re;Gt(C,"network-request-failed")}})).apply(this,arguments)}function ir(C,y,_,x){return sr.apply(this,arguments)}function sr(){return(sr=(0,h.Z)(function*(C,y,_,x,re={}){const ye=yield dn(C,y,_,x,re);return"mfaPendingCredential"in ye&&Gt(C,"multi-factor-auth-required",{_serverResponse:ye}),ye})).apply(this,arguments)}function Vn(C,y,_,x){const re=`${y}${_}?${x}`;return C.config.emulator?Pn(C.config,re):`${C.config.apiScheme}://${re}`}class Cr{constructor(y){this.auth=y,this.timer=null,this.promise=new Promise((_,x)=>{this.timer=setTimeout(()=>x(Ge(this.auth,"network-request-failed")),In.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yr(C,y,_){const x={appName:C.name};_.email&&(x.email=_.email),_.phoneNumber&&(x.phoneNumber=_.phoneNumber);const re=Ge(C,y,x);return re.customData._tokenResponse=_,re}function er(){return(er=(0,h.Z)(function*(C,y){return dn(C,"POST","/v1/accounts:delete",y)})).apply(this,arguments)}function Ht(C,y){return cr.apply(this,arguments)}function cr(){return(cr=(0,h.Z)(function*(C,y){return dn(C,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function tr(C,y){return nr.apply(this,arguments)}function nr(){return(nr=(0,h.Z)(function*(C,y){return dn(C,"POST","/v1/accounts:lookup",y)})).apply(this,arguments)}function Nr(C){if(C)try{const y=new Date(Number(C));if(!isNaN(y.getTime()))return y.toUTCString()}catch{}}function _r(){return(_r=(0,h.Z)(function*(C,y=!1){const _=(0,c.m9)(C),x=yield _.getIdToken(y),re=mn(x);qe(re&&re.exp&&re.auth_time&&re.iat,_.auth,"internal-error");const ye="object"==typeof re.firebase?re.firebase:void 0,vt=ye?.sign_in_provider;return{claims:re,token:x,authTime:Nr(fr(re.auth_time)),issuedAtTime:Nr(fr(re.iat)),expirationTime:Nr(fr(re.exp)),signInProvider:vt||null,signInSecondFactor:ye?.sign_in_second_factor||null}})).apply(this,arguments)}function fr(C){return 1e3*Number(C)}function mn(C){var y;const[_,x,re]=C.split(".");if(void 0===_||void 0===x||void 0===re)return Ye("JWT malformed, contained fewer than 3 sections"),null;try{const ye=(0,c.tV)(x);return ye?JSON.parse(ye):(Ye("Failed to decode base64 JWT payload"),null)}catch(ye){return Ye("Caught error parsing JWT payload as JSON",null===(y=ye)||void 0===y?void 0:y.toString()),null}}function On(C,y){return wr.apply(this,arguments)}function wr(){return(wr=(0,h.Z)(function*(C,y,_=!1){if(_)return y;try{return yield y}catch(x){throw x instanceof c.ZR&&bn(x)&&C.auth.currentUser===C&&(yield C.auth.signOut()),x}})).apply(this,arguments)}function bn({code:C}){return"auth/user-disabled"===C||"auth/user-token-expired"===C}class zr{constructor(y){this.user=y,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(y){var _;if(y){const x=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),x}{this.errorBackoff=3e4;const re=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,re)}}schedule(y=!1){var _=this;if(!this.isRunning)return;const x=this.getInterval(y);this.timerId=setTimeout((0,h.Z)(function*(){yield _.iteration()}),x)}iteration(){var y=this;return(0,h.Z)(function*(){var _;try{yield y.user.getIdToken(!0)}catch(x){return void("auth/network-request-failed"===(null===(_=x)||void 0===_?void 0:_.code)&&y.schedule(!0))}y.schedule()})()}}class Kn{constructor(y,_){this.createdAt=y,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nr(this.lastLoginAt),this.creationTime=Nr(this.createdAt)}_copy(y){this.createdAt=y.createdAt,this.lastLoginAt=y.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function zt(C){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,h.Z)(function*(C){var y;const _=C.auth,x=yield C.getIdToken(),re=yield On(C,tr(_,{idToken:x}));qe(re?.users.length,_,"internal-error");const ye=re.users[0];C._notifyReloadListener(ye);const vt=null!==(y=ye.providerUserInfo)&&void 0!==y&&y.length?Jn(ye.providerUserInfo):[],Yt=Rn(C.providerData,vt),Xr=!!C.isAnonymous&&!(C.email&&ye.passwordHash||Yt?.length),rs={uid:ye.localId,displayName:ye.displayName||null,photoURL:ye.photoUrl||null,email:ye.email||null,emailVerified:ye.emailVerified||!1,phoneNumber:ye.phoneNumber||null,tenantId:ye.tenantId||null,providerData:Yt,metadata:new Kn(ye.createdAt,ye.lastLoginAt),isAnonymous:Xr};Object.assign(C,rs)})).apply(this,arguments)}function St(){return(St=(0,h.Z)(function*(C){const y=(0,c.m9)(C);yield zt(y),yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)})).apply(this,arguments)}function Rn(C,y){return[...C.filter(x=>!y.some(re=>re.providerId===x.providerId)),...y]}function Jn(C){return C.map(y=>{var{providerId:_}=y,x=(0,de._T)(y,["providerId"]);return{providerId:_,uid:x.rawId||"",displayName:x.displayName||null,email:x.email||null,phoneNumber:x.phoneNumber||null,photoURL:x.photoUrl||null}})}function J(){return(J=(0,h.Z)(function*(C,y){const _=yield Ar(C,{},(0,h.Z)(function*(){const x=(0,c.xO)({grant_type:"refresh_token",refresh_token:y}).slice(1),{tokenApiHost:re,apiKey:ye}=C.config,vt=Vn(C,re,"/v1/token",`key=${ye}`),Yt=yield C._getAdditionalHeaders();return Yt["Content-Type"]="application/x-www-form-urlencoded",Zn.fetch()(vt,{method:"POST",headers:Yt,body:x})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class ge{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(y){qe(y.idToken,"internal-error"),qe(typeof y.idToken<"u","internal-error"),qe(typeof y.refreshToken<"u","internal-error");const _="expiresIn"in y&&typeof y.expiresIn<"u"?Number(y.expiresIn):function Tn(C){const y=mn(C);return qe(y,"internal-error"),qe(typeof y.exp<"u","internal-error"),qe(typeof y.iat<"u","internal-error"),Number(y.exp)-Number(y.iat)}(y.idToken);this.updateTokensAndExpiration(y.idToken,y.refreshToken,_)}getToken(y,_=!1){var x=this;return(0,h.Z)(function*(){return qe(!x.accessToken||x.refreshToken,y,"user-token-expired"),_||!x.accessToken||x.isExpired?x.refreshToken?(yield x.refresh(y,x.refreshToken),x.accessToken):null:x.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(y,_){var x=this;return(0,h.Z)(function*(){const{accessToken:re,refreshToken:ye,expiresIn:vt}=yield function Je(C,y){return J.apply(this,arguments)}(y,_);x.updateTokensAndExpiration(re,ye,Number(vt))})()}updateTokensAndExpiration(y,_,x){this.refreshToken=_||null,this.accessToken=y||null,this.expirationTime=Date.now()+1e3*x}static fromJSON(y,_){const{refreshToken:x,accessToken:re,expirationTime:ye}=_,vt=new ge;return x&&(qe("string"==typeof x,"internal-error",{appName:y}),vt.refreshToken=x),re&&(qe("string"==typeof re,"internal-error",{appName:y}),vt.accessToken=re),ye&&(qe("number"==typeof ye,"internal-error",{appName:y}),vt.expirationTime=ye),vt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(y){this.accessToken=y.accessToken,this.refreshToken=y.refreshToken,this.expirationTime=y.expirationTime}_clone(){return Object.assign(new ge,this.toJSON())}_performRefresh(){return it("not implemented")}}function Xe(C,y){qe("string"==typeof C||typeof C>"u","internal-error",{appName:y})}class _t{constructor(y){var{uid:_,auth:x,stsTokenManager:re}=y,ye=(0,de._T)(y,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=x,this.stsTokenManager=re,this.accessToken=re.accessToken,this.displayName=ye.displayName||null,this.email=ye.email||null,this.emailVerified=ye.emailVerified||!1,this.phoneNumber=ye.phoneNumber||null,this.photoURL=ye.photoURL||null,this.isAnonymous=ye.isAnonymous||!1,this.tenantId=ye.tenantId||null,this.providerData=ye.providerData?[...ye.providerData]:[],this.metadata=new Kn(ye.createdAt||void 0,ye.lastLoginAt||void 0)}getIdToken(y){var _=this;return(0,h.Z)(function*(){const x=yield On(_,_.stsTokenManager.getToken(_.auth,y));return qe(x,_.auth,"internal-error"),_.accessToken!==x&&(_.accessToken=x,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),x})()}getIdTokenResult(y){return function Ir(C){return _r.apply(this,arguments)}(this,y)}reload(){return function tt(C){return St.apply(this,arguments)}(this)}_assign(y){this!==y&&(qe(this.uid===y.uid,this.auth,"internal-error"),this.displayName=y.displayName,this.photoURL=y.photoURL,this.email=y.email,this.emailVerified=y.emailVerified,this.phoneNumber=y.phoneNumber,this.isAnonymous=y.isAnonymous,this.tenantId=y.tenantId,this.providerData=y.providerData.map(_=>Object.assign({},_)),this.metadata._copy(y.metadata),this.stsTokenManager._assign(y.stsTokenManager))}_clone(y){return new _t(Object.assign(Object.assign({},this),{auth:y,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(y){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=y,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(y){this.reloadListener?this.reloadListener(y):this.reloadUserInfo=y}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(y,_=!1){var x=this;return(0,h.Z)(function*(){let re=!1;y.idToken&&y.idToken!==x.stsTokenManager.accessToken&&(x.stsTokenManager.updateFromServerResponse(y),re=!0),_&&(yield zt(x)),yield x.auth._persistUserIfCurrent(x),re&&x.auth._notifyListenersIfCurrent(x)})()}delete(){var y=this;return(0,h.Z)(function*(){const _=yield y.getIdToken();return yield On(y,function Rr(C,y){return er.apply(this,arguments)}(y.auth,{idToken:_})),y.stsTokenManager.clearRefreshToken(),y.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(y=>Object.assign({},y)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(y,_){var x,re,ye,vt,Yt,_n,wn,Xr;const rs=null!==(x=_.displayName)&&void 0!==x?x:void 0,vo=null!==(re=_.email)&&void 0!==re?re:void 0,zl=null!==(ye=_.phoneNumber)&&void 0!==ye?ye:void 0,Yo=null!==(vt=_.photoURL)&&void 0!==vt?vt:void 0,Gu=null!==(Yt=_.tenantId)&&void 0!==Yt?Yt:void 0,Gl=null!==(_n=_._redirectEventId)&&void 0!==_n?_n:void 0,Mc=null!==(wn=_.createdAt)&&void 0!==wn?wn:void 0,Ja=null!==(Xr=_.lastLoginAt)&&void 0!==Xr?Xr:void 0,{uid:Wu,emailVerified:Wl,isAnonymous:Su,providerData:xc,stsTokenManager:Zr}=_;qe(Wu&&Zr,y,"internal-error");const bh=ge.fromJSON(this.name,Zr);qe("string"==typeof Wu,y,"internal-error"),Xe(rs,y.name),Xe(vo,y.name),qe("boolean"==typeof Wl,y,"internal-error"),qe("boolean"==typeof Su,y,"internal-error"),Xe(zl,y.name),Xe(Yo,y.name),Xe(Gu,y.name),Xe(Gl,y.name),Xe(Mc,y.name),Xe(Ja,y.name);const Cs=new _t({uid:Wu,auth:y,email:vo,emailVerified:Wl,displayName:rs,isAnonymous:Su,photoURL:Yo,phoneNumber:zl,tenantId:Gu,stsTokenManager:bh,createdAt:Mc,lastLoginAt:Ja});return xc&&Array.isArray(xc)&&(Cs.providerData=xc.map(Au=>Object.assign({},Au))),Gl&&(Cs._redirectEventId=Gl),Cs}static _fromIdTokenResponse(y,_,x=!1){return(0,h.Z)(function*(){const re=new ge;re.updateFromServerResponse(_);const ye=new _t({uid:_.localId,auth:y,stsTokenManager:re,isAnonymous:x});return yield zt(ye),ye})()}}const Ne=(()=>{class C{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(_,x){var re=this;return(0,h.Z)(function*(){re.storage[_]=x})()}_get(_){var x=this;return(0,h.Z)(function*(){const re=x.storage[_];return void 0===re?null:re})()}_remove(_){var x=this;return(0,h.Z)(function*(){delete x.storage[_]})()}_addListener(_,x){}_removeListener(_,x){}}return C.type="NONE",C})();function xe(C,y,_){return`firebase:${C}:${y}:${_}`}class $e{constructor(y,_,x){this.persistence=y,this.auth=_,this.userKey=x;const{config:re,name:ye}=this.auth;this.fullUserKey=xe(this.userKey,re.apiKey,ye),this.fullPersistenceKey=xe("persistence",re.apiKey,ye),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(y){return this.persistence._set(this.fullUserKey,y.toJSON())}getCurrentUser(){var y=this;return(0,h.Z)(function*(){const _=yield y.persistence._get(y.fullUserKey);return _?_t._fromJSON(y.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(y){var _=this;return(0,h.Z)(function*(){if(_.persistence===y)return;const x=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=y,x?_.setCurrentUser(x):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(y,_,x="authUser"){return(0,h.Z)(function*(){if(!_.length)return new $e(je(Ne),y,x);const re=(yield Promise.all(_.map(function(){var wn=(0,h.Z)(function*(Xr){if(yield Xr._isAvailable())return Xr});return function(Xr){return wn.apply(this,arguments)}}()))).filter(wn=>wn);let ye=re[0]||je(Ne);const vt=xe(x,y.config.apiKey,y.name);let Yt=null;for(const wn of _)try{const Xr=yield wn._get(vt);if(Xr){const rs=_t._fromJSON(y,Xr);wn!==ye&&(Yt=rs),ye=wn;break}}catch{}const _n=re.filter(wn=>wn._shouldAllowMigration);return ye._shouldAllowMigration&&_n.length?(ye=_n[0],Yt&&(yield ye._set(vt,Yt.toJSON())),yield Promise.all(_.map(function(){var wn=(0,h.Z)(function*(Xr){if(Xr!==ye)try{yield Xr._remove(vt)}catch{}});return function(Xr){return wn.apply(this,arguments)}}())),new $e(ye,y,x)):new $e(ye,y,x)})()}}function De(C){const y=C.toLowerCase();if(y.includes("opera/")||y.includes("opr/")||y.includes("opios/"))return"Opera";if(Bt(y))return"IEMobile";if(y.includes("msie")||y.includes("trident/"))return"IE";if(y.includes("edge/"))return"Edge";if(ie(y))return"Firefox";if(y.includes("silk/"))return"Silk";if(hn(y))return"Blackberry";if(Se(y))return"Webos";if(we(y))return"Safari";if((y.includes("chrome/")||ut(y))&&!y.includes("edge/"))return"Chrome";if(gn(y))return"Android";{const x=C.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===x?.length)return x[1]}return"Other"}function ie(C=(0,c.z$)()){return/firefox\//i.test(C)}function we(C=(0,c.z$)()){const y=C.toLowerCase();return y.includes("safari/")&&!y.includes("chrome/")&&!y.includes("crios/")&&!y.includes("android")}function ut(C=(0,c.z$)()){return/crios\//i.test(C)}function Bt(C=(0,c.z$)()){return/iemobile/i.test(C)}function gn(C=(0,c.z$)()){return/android/i.test(C)}function hn(C=(0,c.z$)()){return/blackberry/i.test(C)}function Se(C=(0,c.z$)()){return/webos/i.test(C)}function Y(C=(0,c.z$)()){return/iphone|ipad|ipod/i.test(C)||/macintosh/i.test(C)&&/mobile/i.test(C)}function W(C=(0,c.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(C)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(C)}function Ke(C=(0,c.z$)()){return Y(C)||gn(C)||Se(C)||hn(C)||/windows phone/i.test(C)||Bt(C)}function on(C,y=[]){let _;switch(C){case"Browser":_=De((0,c.z$)());break;case"Worker":_=`${De((0,c.z$)())}-${C}`;break;default:_=C}const x=y.length?y.join(","):"FirebaseCore-web";return`${_}/JsCore/${S.SDK_VERSION}/${x}`}class Fn{constructor(y){this.auth=y,this.queue=[]}pushCallback(y,_){const x=ye=>new Promise((vt,Yt)=>{try{vt(y(ye))}catch(_n){Yt(_n)}});x.onAbort=_,this.queue.push(x);const re=this.queue.length-1;return()=>{this.queue[re]=()=>Promise.resolve()}}runMiddleware(y){var _=this;return(0,h.Z)(function*(){var x;if(_.auth.currentUser===y)return;const re=[];try{for(const ye of _.queue)yield ye(y),ye.onAbort&&re.push(ye.onAbort)}catch(ye){re.reverse();for(const vt of re)try{vt()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(x=ye)||void 0===x?void 0:x.message})}})()}}class Gr{constructor(y,_,x){this.app=y,this.heartbeatServiceProvider=_,this.config=x,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new si(this),this.idTokenSubscription=new si(this),this.beforeStateQueue=new Fn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Tt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=y.name,this.clientVersion=x.sdkClientVersion}_initializeWithPersistence(y,_){var x=this;return _&&(this._popupRedirectResolver=je(_)),this._initializationPromise=this.queue((0,h.Z)(function*(){var re,ye;if(!x._deleted&&(x.persistenceManager=yield $e.create(x,y),!x._deleted)){if(null!==(re=x._popupRedirectResolver)&&void 0!==re&&re._shouldInitProactively)try{yield x._popupRedirectResolver._initialize(x)}catch{}yield x.initializeCurrentUser(_),x.lastNotifiedUid=(null===(ye=x.currentUser)||void 0===ye?void 0:ye.uid)||null,!x._deleted&&(x._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var y=this;return(0,h.Z)(function*(){if(y._deleted)return;const _=yield y.assertedPersistence.getCurrentUser();if(y.currentUser||_){if(y.currentUser&&_&&y.currentUser.uid===_.uid)return y._currentUser._assign(_),void(yield y.currentUser.getIdToken());yield y._updateCurrentUser(_,!0)}})()}initializeCurrentUser(y){var _=this;return(0,h.Z)(function*(){var x;const re=yield _.assertedPersistence.getCurrentUser();let ye=re,vt=!1;if(y&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Yt=null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId,_n=ye?._redirectEventId,wn=yield _.tryRedirectSignIn(y);(!Yt||Yt===_n)&&wn?.user&&(ye=wn.user,vt=!0)}if(!ye)return _.directlySetCurrentUser(null);if(!ye._redirectEventId){if(vt)try{yield _.beforeStateQueue.runMiddleware(ye)}catch(Yt){ye=re,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Yt))}return ye?_.reloadAndSetCurrentUserOrClear(ye):_.directlySetCurrentUser(null)}return qe(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===ye._redirectEventId?_.directlySetCurrentUser(ye):_.reloadAndSetCurrentUserOrClear(ye)})()}tryRedirectSignIn(y){var _=this;return(0,h.Z)(function*(){let x=null;try{x=yield _._popupRedirectResolver._completeRedirectFn(_,y,!0)}catch{yield _._setRedirectUser(null)}return x})()}reloadAndSetCurrentUserOrClear(y){var _=this;return(0,h.Z)(function*(){var x;try{yield zt(y)}catch(re){if("auth/network-request-failed"!==(null===(x=re)||void 0===x?void 0:x.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(y)})()}useDeviceLanguage(){this.languageCode=function cn(){if(typeof navigator>"u")return null;const C=navigator;return C.languages&&C.languages[0]||C.language||null}()}_delete(){var y=this;return(0,h.Z)(function*(){y._deleted=!0})()}updateCurrentUser(y){var _=this;return(0,h.Z)(function*(){const x=y?(0,c.m9)(y):null;return x&&qe(x.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(x&&x._clone(_))})()}_updateCurrentUser(y,_=!1){var x=this;return(0,h.Z)(function*(){if(!x._deleted)return y&&qe(x.tenantId===y.tenantId,x,"tenant-id-mismatch"),_||(yield x.beforeStateQueue.runMiddleware(y)),x.queue((0,h.Z)(function*(){yield x.directlySetCurrentUser(y),x.notifyAuthListeners()}))})()}signOut(){var y=this;return(0,h.Z)(function*(){return yield y.beforeStateQueue.runMiddleware(null),(y.redirectPersistenceManager||y._popupRedirectResolver)&&(yield y._setRedirectUser(null)),y._updateCurrentUser(null,!0)})()}setPersistence(y){var _=this;return this.queue((0,h.Z)(function*(){yield _.assertedPersistence.setPersistence(je(y))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(y){this._errorFactory=new c.LL("auth","Firebase",y())}onAuthStateChanged(y,_,x){return this.registerStateListener(this.authStateSubscription,y,_,x)}beforeAuthStateChanged(y,_){return this.beforeStateQueue.pushCallback(y,_)}onIdTokenChanged(y,_,x){return this.registerStateListener(this.idTokenSubscription,y,_,x)}toJSON(){var y;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(y=this._currentUser)||void 0===y?void 0:y.toJSON()}}_setRedirectUser(y,_){var x=this;return(0,h.Z)(function*(){const re=yield x.getOrInitRedirectPersistenceManager(_);return null===y?re.removeCurrentUser():re.setCurrentUser(y)})()}getOrInitRedirectPersistenceManager(y){var _=this;return(0,h.Z)(function*(){if(!_.redirectPersistenceManager){const x=y&&je(y)||_._popupRedirectResolver;qe(x,_,"argument-error"),_.redirectPersistenceManager=yield $e.create(_,[je(x._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(y){var _=this;return(0,h.Z)(function*(){var x,re;return _._isInitialized&&(yield _.queue((0,h.Z)(function*(){}))),(null===(x=_._currentUser)||void 0===x?void 0:x._redirectEventId)===y?_._currentUser:(null===(re=_.redirectUser)||void 0===re?void 0:re._redirectEventId)===y?_.redirectUser:null})()}_persistUserIfCurrent(y){var _=this;return(0,h.Z)(function*(){if(y===_.currentUser)return _.queue((0,h.Z)(function*(){return _.directlySetCurrentUser(y)}))})()}_notifyListenersIfCurrent(y){y===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var y,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const x=null!==(_=null===(y=this.currentUser)||void 0===y?void 0:y.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==x&&(this.lastNotifiedUid=x,this.authStateSubscription.next(this.currentUser))}registerStateListener(y,_,x,re){if(this._deleted)return()=>{};const ye="function"==typeof _?_:_.next.bind(_),vt=this._isInitialized?Promise.resolve():this._initializationPromise;return qe(vt,this,"internal-error"),vt.then(()=>ye(this.currentUser)),"function"==typeof _?y.addObserver(_,x,re):y.addObserver(_)}directlySetCurrentUser(y){var _=this;return(0,h.Z)(function*(){_.currentUser&&_.currentUser!==y&&_._currentUser._stopProactiveRefresh(),y&&_.isProactiveRefreshEnabled&&y._startProactiveRefresh(),_.currentUser=y,y?yield _.assertedPersistence.setCurrentUser(y):yield _.assertedPersistence.removeCurrentUser()})()}queue(y){return this.operations=this.operations.then(y,y),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(y){!y||this.frameworks.includes(y)||(this.frameworks.push(y),this.frameworks.sort(),this.clientVersion=on(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var y=this;return(0,h.Z)(function*(){var _;const x={"X-Client-Version":y.clientVersion};y.app.options.appId&&(x["X-Firebase-gmpid"]=y.app.options.appId);const re=yield null===(_=y.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return re&&(x["X-Firebase-Client"]=re),x})()}}function un(C){return(0,c.m9)(C)}class si{constructor(y){this.auth=y,this.observer=null,this.addObserver=(0,c.ne)(_=>this.observer=_)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function vi(C,y,_){const x=un(C);qe(x._canInitEmulator,x,"emulator-config-failed"),qe(/^https?:\/\//.test(y),x,"invalid-emulator-scheme");const re=!!_?.disableWarnings,ye=bi(y),{host:vt,port:Yt}=function Xi(C){const y=bi(C),_=/(\/\/)?([^?#/]+)/.exec(C.substr(y.length));if(!_)return{host:"",port:null};const x=_[2].split("@").pop()||"",re=/^(\[[^\]]+\])(:|$)/.exec(x);if(re){const ye=re[1];return{host:ye,port:ni(x.substr(ye.length+1))}}{const[ye,vt]=x.split(":");return{host:ye,port:ni(vt)}}}(y);x.config.emulator={url:`${ye}//${vt}${null===Yt?"":`:${Yt}`}/`},x.settings.appVerificationDisabledForTesting=!0,x.emulatorConfig=Object.freeze({host:vt,port:Yt,protocol:ye.replace(":",""),options:Object.freeze({disableWarnings:re})}),re||function Ii(){function C(){const y=document.createElement("p"),_=y.style;y.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",y.classList.add("firebase-emulator-warning"),document.body.appendChild(y)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",C):C())}()}function bi(C){const y=C.indexOf(":");return y<0?"":C.substr(0,y+1)}function ni(C){if(!C)return null;const y=Number(C);return isNaN(y)?null:y}class fi{constructor(y,_){this.providerId=y,this.signInMethod=_}toJSON(){return it("not implemented")}_getIdTokenResponse(y){return it("not implemented")}_linkToIdToken(y,_){return it("not implemented")}_getReauthenticationResolver(y){return it("not implemented")}}function Oi(C,y){return ri.apply(this,arguments)}function ri(){return(ri=(0,h.Z)(function*(C,y){return dn(C,"POST","/v1/accounts:resetPassword",Wt(C,y))})).apply(this,arguments)}function ss(C,y){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,h.Z)(function*(C,y){return dn(C,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Ie(C,y){return At.apply(this,arguments)}function At(){return(At=(0,h.Z)(function*(C,y){return dn(C,"POST","/v1/accounts:update",Wt(C,y))})).apply(this,arguments)}function ke(){return(ke=(0,h.Z)(function*(C,y){return ir(C,"POST","/v1/accounts:signInWithPassword",Wt(C,y))})).apply(this,arguments)}function yt(C,y){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,h.Z)(function*(C,y){return dn(C,"POST","/v1/accounts:sendOobCode",Wt(C,y))})).apply(this,arguments)}function Xt(C,y){return dr.apply(this,arguments)}function dr(){return(dr=(0,h.Z)(function*(C,y){return yt(C,y)})).apply(this,arguments)}function pi(C,y){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,h.Z)(function*(C,y){return yt(C,y)})).apply(this,arguments)}function gi(C,y){return ms.apply(this,arguments)}function ms(){return(ms=(0,h.Z)(function*(C,y){return yt(C,y)})).apply(this,arguments)}function ki(C,y){return xs.apply(this,arguments)}function xs(){return(xs=(0,h.Z)(function*(C,y){return yt(C,y)})).apply(this,arguments)}function no(){return(no=(0,h.Z)(function*(C,y){return ir(C,"POST","/v1/accounts:signInWithEmailLink",Wt(C,y))})).apply(this,arguments)}function wo(){return(wo=(0,h.Z)(function*(C,y){return ir(C,"POST","/v1/accounts:signInWithEmailLink",Wt(C,y))})).apply(this,arguments)}class Eo extends fi{constructor(y,_,x,re=null){super("password",x),this._email=y,this._password=_,this._tenantId=re}static _fromEmailAndPassword(y,_){return new Eo(y,_,"password")}static _fromEmailAndCode(y,_,x=null){return new Eo(y,_,"emailLink",x)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(y){const _="string"==typeof y?JSON.parse(y):y;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(y){var _=this;return(0,h.Z)(function*(){switch(_.signInMethod){case"password":return function oe(C,y){return ke.apply(this,arguments)}(y,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function mi(C,y){return no.apply(this,arguments)}(y,{email:_._email,oobCode:_._password});default:Gt(y,"internal-error")}})()}_linkToIdToken(y,_){var x=this;return(0,h.Z)(function*(){switch(x.signInMethod){case"password":return ss(y,{idToken:_,returnSecureToken:!0,email:x._email,password:x._password});case"emailLink":return function ca(C,y){return wo.apply(this,arguments)}(y,{idToken:_,email:x._email,oobCode:x._password});default:Gt(y,"internal-error")}})()}_getReauthenticationResolver(y){return this._getIdTokenResponse(y)}}function ro(C,y){return os.apply(this,arguments)}function os(){return(os=(0,h.Z)(function*(C,y){return ir(C,"POST","/v1/accounts:signInWithIdp",Wt(C,y))})).apply(this,arguments)}class et extends fi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(y){const _=new et(y.providerId,y.signInMethod);return y.idToken||y.accessToken?(y.idToken&&(_.idToken=y.idToken),y.accessToken&&(_.accessToken=y.accessToken),y.nonce&&!y.pendingToken&&(_.nonce=y.nonce),y.pendingToken&&(_.pendingToken=y.pendingToken)):y.oauthToken&&y.oauthTokenSecret?(_.accessToken=y.oauthToken,_.secret=y.oauthTokenSecret):Gt("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(y){const _="string"==typeof y?JSON.parse(y):y,{providerId:x,signInMethod:re}=_,ye=(0,de._T)(_,["providerId","signInMethod"]);if(!x||!re)return null;const vt=new et(x,re);return vt.idToken=ye.idToken||void 0,vt.accessToken=ye.accessToken||void 0,vt.secret=ye.secret,vt.nonce=ye.nonce,vt.pendingToken=ye.pendingToken||null,vt}_getIdTokenResponse(y){return ro(y,this.buildRequest())}_linkToIdToken(y,_){const x=this.buildRequest();return x.idToken=_,ro(y,x)}_getReauthenticationResolver(y){const _=this.buildRequest();return _.autoCreate=!1,ro(y,_)}buildRequest(){const y={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)y.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),y.postBody=(0,c.xO)(_)}return y}}function bt(C,y){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,h.Z)(function*(C,y){return dn(C,"POST","/v1/accounts:sendVerificationCode",Wt(C,y))})).apply(this,arguments)}function En(){return(En=(0,h.Z)(function*(C,y){return ir(C,"POST","/v1/accounts:signInWithPhoneNumber",Wt(C,y))})).apply(this,arguments)}function oi(){return(oi=(0,h.Z)(function*(C,y){const _=yield ir(C,"POST","/v1/accounts:signInWithPhoneNumber",Wt(C,y));if(_.temporaryProof)throw yr(C,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Qr={USER_NOT_FOUND:"user-not-found"};function Gs(){return(Gs=(0,h.Z)(function*(C,y){return ir(C,"POST","/v1/accounts:signInWithPhoneNumber",Wt(C,Object.assign(Object.assign({},y),{operation:"REAUTH"})),Qr)})).apply(this,arguments)}class Bi extends fi{constructor(y){super("phone","phone"),this.params=y}static _fromVerification(y,_){return new Bi({verificationId:y,verificationCode:_})}static _fromTokenResponse(y,_){return new Bi({phoneNumber:y,temporaryProof:_})}_getIdTokenResponse(y){return function sn(C,y){return En.apply(this,arguments)}(y,this._makeVerificationRequest())}_linkToIdToken(y,_){return function Yn(C,y){return oi.apply(this,arguments)}(y,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(y){return function es(C,y){return Gs.apply(this,arguments)}(y,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:y,phoneNumber:_,verificationId:x,verificationCode:re}=this.params;return y&&_?{temporaryProof:y,phoneNumber:_}:{sessionInfo:x,code:re}}toJSON(){const y={providerId:this.providerId};return this.params.phoneNumber&&(y.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(y.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(y.verificationCode=this.params.verificationCode),this.params.verificationId&&(y.verificationId=this.params.verificationId),y}static fromJSON(y){"string"==typeof y&&(y=JSON.parse(y));const{verificationId:_,verificationCode:x,phoneNumber:re,temporaryProof:ye}=y;return x||_||re||ye?new Bi({verificationId:_,verificationCode:x,phoneNumber:re,temporaryProof:ye}):null}}class wi{constructor(y){var _,x,re,ye,vt,Yt;const _n=(0,c.zd)((0,c.pd)(y)),wn=null!==(_=_n.apiKey)&&void 0!==_?_:null,Xr=null!==(x=_n.oobCode)&&void 0!==x?x:null,rs=function Co(C){switch(C){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(re=_n.mode)&&void 0!==re?re:null);qe(wn&&Xr&&rs,"argument-error"),this.apiKey=wn,this.operation=rs,this.code=Xr,this.continueUrl=null!==(ye=_n.continueUrl)&&void 0!==ye?ye:null,this.languageCode=null!==(vt=_n.languageCode)&&void 0!==vt?vt:null,this.tenantId=null!==(Yt=_n.tenantId)&&void 0!==Yt?Yt:null}static parseLink(y){const _=function Vi(C){const y=(0,c.zd)((0,c.pd)(C)).link,_=y?(0,c.zd)((0,c.pd)(y)).deep_link_id:null,x=(0,c.zd)((0,c.pd)(C)).deep_link_id;return(x?(0,c.zd)((0,c.pd)(x)).link:null)||x||_||y||C}(y);try{return new wi(_)}catch{return null}}}let Os=(()=>{class C{constructor(){this.providerId=C.PROVIDER_ID}static credential(_,x){return Eo._fromEmailAndPassword(_,x)}static credentialWithLink(_,x){const re=wi.parseLink(x);return qe(re,"argument-error"),Eo._fromEmailAndCode(_,re.code,re.tenantId)}}return C.PROVIDER_ID="password",C.EMAIL_PASSWORD_SIGN_IN_METHOD="password",C.EMAIL_LINK_SIGN_IN_METHOD="emailLink",C})();class Ti{constructor(y){this.providerId=y,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(y){this.defaultLanguageCode=y}setCustomParameters(y){return this.customParameters=y,this}getCustomParameters(){return this.customParameters}}class Lr extends Ti{constructor(){super(...arguments),this.scopes=[]}addScope(y){return this.scopes.includes(y)||this.scopes.push(y),this}getScopes(){return[...this.scopes]}}class as extends Lr{static credentialFromJSON(y){const _="string"==typeof y?JSON.parse(y):y;return qe("providerId"in _&&"signInMethod"in _,"argument-error"),et._fromParams(_)}credential(y){return this._credential(Object.assign(Object.assign({},y),{nonce:y.rawNonce}))}_credential(y){return qe(y.idToken||y.accessToken,"argument-error"),et._fromParams(Object.assign(Object.assign({},y),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(y){return as.oauthCredentialFromTaggedObject(y)}static credentialFromError(y){return as.oauthCredentialFromTaggedObject(y.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:_,oauthAccessToken:x,oauthTokenSecret:re,pendingToken:ye,nonce:vt,providerId:Yt}=y;if(!x&&!re&&!_&&!ye||!Yt)return null;try{return new as(Yt)._credential({idToken:_,accessToken:x,nonce:vt,pendingToken:ye})}catch{return null}}}let ai=(()=>{class C extends Lr{constructor(){super("facebook.com")}static credential(_){return et._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return C.credential(_.oauthAccessToken)}catch{return null}}}return C.FACEBOOK_SIGN_IN_METHOD="facebook.com",C.PROVIDER_ID="facebook.com",C})(),Is=(()=>{class C extends Lr{constructor(){super("google.com"),this.addScope("profile")}static credential(_,x){return et._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:x})}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:x,oauthAccessToken:re}=_;if(!x&&!re)return null;try{return C.credential(x,re)}catch{return null}}}return C.GOOGLE_SIGN_IN_METHOD="google.com",C.PROVIDER_ID="google.com",C})(),Us=(()=>{class C extends Lr{constructor(){super("github.com")}static credential(_){return et._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return C.credential(_.oauthAccessToken)}catch{return null}}}return C.GITHUB_SIGN_IN_METHOD="github.com",C.PROVIDER_ID="github.com",C})();class ks extends fi{constructor(y,_){super(y,y),this.pendingToken=_}_getIdTokenResponse(y){return ro(y,this.buildRequest())}_linkToIdToken(y,_){const x=this.buildRequest();return x.idToken=_,ro(y,x)}_getReauthenticationResolver(y){const _=this.buildRequest();return _.autoCreate=!1,ro(y,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(y){const _="string"==typeof y?JSON.parse(y):y,{providerId:x,signInMethod:re,pendingToken:ye}=_;return x&&re&&ye&&x===re?new ks(x,ye):null}static _create(y,_){return new ks(y,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ls extends Ti{constructor(y){qe(y.startsWith("saml."),"argument-error"),super(y)}static credentialFromResult(y){return ls.samlCredentialFromTaggedObject(y)}static credentialFromError(y){return ls.samlCredentialFromTaggedObject(y.customData||{})}static credentialFromJSON(y){const _=ks.fromJSON(y);return qe(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{pendingToken:_,providerId:x}=y;if(!_||!x)return null;try{return ks._create(x,_)}catch{return null}}}let ys=(()=>{class C extends Lr{constructor(){super("twitter.com")}static credential(_,x){return et._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:x})}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:x,oauthTokenSecret:re}=_;if(!x||!re)return null;try{return C.credential(x,re)}catch{return null}}}return C.TWITTER_SIGN_IN_METHOD="twitter.com",C.PROVIDER_ID="twitter.com",C})();function Ei(C,y){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,h.Z)(function*(C,y){return ir(C,"POST","/v1/accounts:signUp",Wt(C,y))})).apply(this,arguments)}class ji{constructor(y){this.user=y.user,this.providerId=y.providerId,this._tokenResponse=y._tokenResponse,this.operationType=y.operationType}static _fromIdTokenResponse(y,_,x,re=!1){return(0,h.Z)(function*(){const ye=yield _t._fromIdTokenResponse(y,x,re),vt=Bs(x);return new ji({user:ye,providerId:vt,_tokenResponse:x,operationType:_})})()}static _forOperation(y,_,x){return(0,h.Z)(function*(){yield y._updateTokensIfNecessary(x,!0);const re=Bs(x);return new ji({user:y,providerId:re,_tokenResponse:x,operationType:_})})()}}function Bs(C){return C.providerId?C.providerId:"phoneNumber"in C?"phone":null}function Xo(C){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,h.Z)(function*(C){var y;const _=un(C);if(yield _._initializationPromise,null!==(y=_.currentUser)&&void 0!==y&&y.isAnonymous)return new ji({user:_.currentUser,providerId:null,operationType:"signIn"});const x=yield Ei(_,{returnSecureToken:!0}),re=yield ji._fromIdTokenResponse(_,"signIn",x,!0);return yield _._updateCurrentUser(re.user),re})).apply(this,arguments)}class Ci extends c.ZR{constructor(y,_,x,re){var ye;super(_.code,_.message),this.operationType=x,this.user=re,Object.setPrototypeOf(this,Ci.prototype),this.customData={appName:y.name,tenantId:null!==(ye=y.tenantId)&&void 0!==ye?ye:void 0,_serverResponse:_.customData._serverResponse,operationType:x}}static _fromErrorAndOperation(y,_,x,re){return new Ci(y,_,x,re)}}function Hi(C,y,_,x){return("reauthenticate"===y?_._getReauthenticationResolver(C):_._getIdTokenResponse(C)).catch(ye=>{throw"auth/multi-factor-auth-required"===ye.code?Ci._fromErrorAndOperation(C,ye,y,x):ye})}function Po(C){return new Set(C.map(({providerId:y})=>y).filter(y=>!!y))}function Pi(C,y){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,h.Z)(function*(C,y){const _=(0,c.m9)(C);yield $i(!0,_,y);const{providerUserInfo:x}=yield Ht(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[y]}),re=Po(x||[]);return _.providerData=_.providerData.filter(ye=>re.has(ye.providerId)),re.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Vs(C,y){return ho.apply(this,arguments)}function ho(){return(ho=(0,h.Z)(function*(C,y,_=!1){const x=yield On(C,y._linkToIdToken(C.auth,yield C.getIdToken()),_);return ji._forOperation(C,"link",x)})).apply(this,arguments)}function $i(C,y,_){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,h.Z)(function*(C,y,_){yield zt(y);const re=!1===C?"provider-already-linked":"no-such-provider";qe(Po(y.providerData).has(_)===C,y.auth,re)})).apply(this,arguments)}function Do(C,y){return _s.apply(this,arguments)}function _s(){return(_s=(0,h.Z)(function*(C,y,_=!1){var x;const{auth:re}=C,ye="reauthenticate";try{const vt=yield On(C,Hi(re,ye,y,C),_);qe(vt.idToken,re,"internal-error");const Yt=mn(vt.idToken);qe(Yt,re,"internal-error");const{sub:_n}=Yt;return qe(C.uid===_n,re,"user-mismatch"),ji._forOperation(C,ye,vt)}catch(vt){throw"auth/user-not-found"===(null===(x=vt)||void 0===x?void 0:x.code)&&Gt(re,"user-mismatch"),vt}})).apply(this,arguments)}function ve(C,y){return L.apply(this,arguments)}function L(){return(L=(0,h.Z)(function*(C,y,_=!1){const x="signIn",re=yield Hi(C,x,y),ye=yield ji._fromIdTokenResponse(C,x,re);return _||(yield C._updateCurrentUser(ye.user)),ye})).apply(this,arguments)}function P(C,y){return Q.apply(this,arguments)}function Q(){return(Q=(0,h.Z)(function*(C,y){return ve(un(C),y)})).apply(this,arguments)}function ue(C,y){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,h.Z)(function*(C,y){const _=(0,c.m9)(C);return yield $i(!1,_,y.providerId),Vs(_,y)})).apply(this,arguments)}function Et(C,y){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,h.Z)(function*(C,y){return Do((0,c.m9)(C),y)})).apply(this,arguments)}function fn(C,y){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,h.Z)(function*(C,y){return ir(C,"POST","/v1/accounts:signInWithCustomToken",Wt(C,y))})).apply(this,arguments)}function jn(C,y){return zn.apply(this,arguments)}function zn(){return(zn=(0,h.Z)(function*(C,y){const _=un(C),x=yield fn(_,{token:y,returnSecureToken:!0}),re=yield ji._fromIdTokenResponse(_,"signIn",x);return yield _._updateCurrentUser(re.user),re})).apply(this,arguments)}class us{constructor(y,_){this.factorId=y,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(y,_){return"phoneInfo"in _?jt._fromServerResponse(y,_):Gt(y,"internal-error")}}class jt extends us{constructor(y){super("phone",y),this.phoneNumber=y.phoneInfo}static _fromServerResponse(y,_){return new jt(_)}}function Xn(C,y,_){var x;qe((null===(x=_.url)||void 0===x?void 0:x.length)>0,C,"invalid-continue-uri"),qe(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,C,"invalid-dynamic-link-domain"),y.continueUrl=_.url,y.dynamicLinkDomain=_.dynamicLinkDomain,y.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(qe(_.iOS.bundleId.length>0,C,"missing-ios-bundle-id"),y.iOSBundleId=_.iOS.bundleId),_.android&&(qe(_.android.packageName.length>0,C,"missing-android-pkg-name"),y.androidInstallApp=_.android.installApp,y.androidMinimumVersionCode=_.android.minimumVersion,y.androidPackageName=_.android.packageName)}function cs(C,y,_){return qs.apply(this,arguments)}function qs(){return(qs=(0,h.Z)(function*(C,y,_){const x=(0,c.m9)(C),re={requestType:"PASSWORD_RESET",email:y};_&&Xn(x,re,_),yield pi(x,re)})).apply(this,arguments)}function Ri(C,y,_){return ei.apply(this,arguments)}function ei(){return(ei=(0,h.Z)(function*(C,y,_){yield Oi((0,c.m9)(C),{oobCode:y,newPassword:_})})).apply(this,arguments)}function $o(C,y){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,h.Z)(function*(C,y){yield Ie((0,c.m9)(C),{oobCode:y})})).apply(this,arguments)}function Ks(C,y){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,h.Z)(function*(C,y){const _=(0,c.m9)(C),x=yield Oi(_,{oobCode:y}),re=x.requestType;switch(qe(re,_,"internal-error"),re){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":qe(x.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":qe(x.mfaInfo,_,"internal-error");default:qe(x.email,_,"internal-error")}let ye=null;return x.mfaInfo&&(ye=us._fromServerResponse(un(_),x.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.newEmail:x.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.email:x.newEmail)||null,multiFactorInfo:ye},operation:re}})).apply(this,arguments)}function da(C,y){return fo.apply(this,arguments)}function fo(){return(fo=(0,h.Z)(function*(C,y){const{data:_}=yield Ks((0,c.m9)(C),y);return _.email})).apply(this,arguments)}function G(C,y,_){return H.apply(this,arguments)}function H(){return(H=(0,h.Z)(function*(C,y,_){const x=un(C),re=yield Ei(x,{returnSecureToken:!0,email:y,password:_}),ye=yield ji._fromIdTokenResponse(x,"signIn",re);return yield x._updateCurrentUser(ye.user),ye})).apply(this,arguments)}function U(C,y,_){return P((0,c.m9)(C),Os.credential(y,_))}function he(C,y,_){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,h.Z)(function*(C,y,_){const x=(0,c.m9)(C),re={requestType:"EMAIL_SIGNIN",email:y};qe(_.handleCodeInApp,x,"argument-error"),_&&Xn(x,re,_),yield gi(x,re)})).apply(this,arguments)}function $n(C,y){return"EMAIL_SIGNIN"===wi.parseLink(y)?.operation}function Jr(C,y,_){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,h.Z)(function*(C,y,_){const x=(0,c.m9)(C),re=Os.credentialWithLink(y,_||Lt());return qe(re._tenantId===(x.tenantId||null),x,"tenant-id-mismatch"),P(x,re)})).apply(this,arguments)}function Ss(C,y){return io.apply(this,arguments)}function io(){return(io=(0,h.Z)(function*(C,y){return dn(C,"POST","/v1/accounts:createAuthUri",Wt(C,y))})).apply(this,arguments)}function zo(C,y){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,h.Z)(function*(C,y){const x={identifier:y,continueUri:$t()?Lt():"http://localhost"},{signinMethods:re}=yield Ss((0,c.m9)(C),x);return re||[]})).apply(this,arguments)}function ha(C,y){return ea.apply(this,arguments)}function ea(){return(ea=(0,h.Z)(function*(C,y){const _=(0,c.m9)(C),re={requestType:"VERIFY_EMAIL",idToken:yield C.getIdToken()};y&&Xn(_.auth,re,y);const{email:ye}=yield Xt(_.auth,re);ye!==C.email&&(yield C.reload())})).apply(this,arguments)}function fa(C,y,_){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,h.Z)(function*(C,y,_){const x=(0,c.m9)(C),ye={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield C.getIdToken(),newEmail:y};_&&Xn(x.auth,ye,_);const{email:vt}=yield ki(x.auth,ye);vt!==C.email&&(yield C.reload())})).apply(this,arguments)}function pa(C,y){return so.apply(this,arguments)}function so(){return(so=(0,h.Z)(function*(C,y){return dn(C,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function $a(C,y){return No.apply(this,arguments)}function No(){return(No=(0,h.Z)(function*(C,{displayName:y,photoURL:_}){if(void 0===y&&void 0===_)return;const x=(0,c.m9)(C),ye={idToken:yield x.getIdToken(),displayName:y,photoUrl:_,returnSecureToken:!0},vt=yield On(x,pa(x.auth,ye));x.displayName=vt.displayName||null,x.photoURL=vt.photoUrl||null;const Yt=x.providerData.find(({providerId:_n})=>"password"===_n);Yt&&(Yt.displayName=x.displayName,Yt.photoURL=x.photoURL),yield x._updateTokensIfNecessary(vt)})).apply(this,arguments)}function Za(C,y){return ee((0,c.m9)(C),y,null)}function R(C,y){return ee((0,c.m9)(C),null,y)}function ee(C,y,_){return V.apply(this,arguments)}function V(){return(V=(0,h.Z)(function*(C,y,_){const{auth:x}=C,ye={idToken:yield C.getIdToken(),returnSecureToken:!0};y&&(ye.email=y),_&&(ye.password=_);const vt=yield On(C,ss(x,ye));yield C._updateTokensIfNecessary(vt,!0)})).apply(this,arguments)}class Ue{constructor(y,_,x={}){this.isNewUser=y,this.providerId=_,this.profile=x}}class Ct extends Ue{constructor(y,_,x,re){super(y,_,x),this.username=re}}class Nt extends Ue{constructor(y,_){super(y,"facebook.com",_)}}class Bn extends Ct{constructor(y,_){super(y,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class $r extends Ue{constructor(y,_){super(y,"google.com",_)}}class Or extends Ct{constructor(y,_,x){super(y,"twitter.com",_,x)}}function ii(C){const{user:y,_tokenResponse:_}=C;return y.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function le(C){var y,_;if(!C)return null;const{providerId:x}=C,re=C.rawUserInfo?JSON.parse(C.rawUserInfo):{},ye=C.isNewUser||"identitytoolkit#SignupNewUserResponse"===C.kind;if(!x&&C?.idToken){const vt=null===(_=null===(y=mn(C.idToken))||void 0===y?void 0:y.firebase)||void 0===_?void 0:_.sign_in_provider;if(vt)return new Ue(ye,"anonymous"!==vt&&"custom"!==vt?vt:null)}if(!x)return null;switch(x){case"facebook.com":return new Nt(ye,re);case"github.com":return new Bn(ye,re);case"google.com":return new $r(ye,re);case"twitter.com":return new Or(ye,re,C.screenName||null);case"custom":case"anonymous":return new Ue(ye,null);default:return new Ue(ye,x,re)}}(_)}class Rs{constructor(y,_,x){this.type=y,this.credential=_,this.auth=x}static _fromIdtoken(y,_){return new Rs("enroll",y,_)}static _fromMfaPendingCredential(y){return new Rs("signin",y)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(y){var _,x;if(y?.multiFactorSession){if(null!==(_=y.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Rs._fromMfaPendingCredential(y.multiFactorSession.pendingCredential);if(null!==(x=y.multiFactorSession)&&void 0!==x&&x.idToken)return Rs._fromIdtoken(y.multiFactorSession.idToken)}return null}}class tn{constructor(y,_,x){this.session=y,this.hints=_,this.signInResolver=x}static _fromError(y,_){const x=un(y),re=_.customData._serverResponse,ye=(re.mfaInfo||[]).map(Yt=>us._fromServerResponse(x,Yt));qe(re.mfaPendingCredential,x,"internal-error");const vt=Rs._fromMfaPendingCredential(re.mfaPendingCredential);return new tn(vt,ye,function(){var Yt=(0,h.Z)(function*(_n){const wn=yield _n._process(x,vt);delete re.mfaInfo,delete re.mfaPendingCredential;const Xr=Object.assign(Object.assign({},re),{idToken:wn.idToken,refreshToken:wn.refreshToken});switch(_.operationType){case"signIn":const rs=yield ji._fromIdTokenResponse(x,_.operationType,Xr);return yield x._updateCurrentUser(rs.user),rs;case"reauthenticate":return qe(_.user,x,"internal-error"),ji._forOperation(_.user,_.operationType,Xr);default:Gt(x,"internal-error")}});return function(_n){return Yt.apply(this,arguments)}}())}resolveSignIn(y){var _=this;return(0,h.Z)(function*(){return _.signInResolver(y)})()}}function Zi(C,y){var _;const x=(0,c.m9)(C),re=y;return qe(y.customData.operationType,x,"argument-error"),qe(null===(_=re.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,x,"argument-error"),tn._fromError(x,re)}function li(C,y){return dn(C,"POST","/v2/accounts/mfaEnrollment:start",Wt(C,y))}class or{constructor(y){this.user=y,this.enrolledFactors=[],y._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(x=>us._fromServerResponse(y.auth,x)))})}static _fromUser(y){return new or(y)}getSession(){var y=this;return(0,h.Z)(function*(){return Rs._fromIdtoken(yield y.user.getIdToken(),y.user.auth)})()}enroll(y,_){var x=this;return(0,h.Z)(function*(){const re=y,ye=yield x.getSession(),vt=yield On(x.user,re._process(x.user.auth,ye,_));return yield x.user._updateTokensIfNecessary(vt),x.user.reload()})()}unenroll(y){var _=this;return(0,h.Z)(function*(){var x;const re="string"==typeof y?y:y.uid,ye=yield _.user.getIdToken(),vt=yield On(_.user,function Wn(C,y){return dn(C,"POST","/v2/accounts/mfaEnrollment:withdraw",Wt(C,y))}(_.user.auth,{idToken:ye,mfaEnrollmentId:re}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Yt})=>Yt!==re),yield _.user._updateTokensIfNecessary(vt);try{yield _.user.reload()}catch(Yt){if("auth/user-token-expired"!==(null===(x=Yt)||void 0===x?void 0:x.code))throw Yt}})()}}const gl=new WeakMap;function kn(C){const y=(0,c.m9)(C);return gl.has(y)||gl.set(y,or._fromUser(y)),gl.get(y)}const Mt="__sak";class rn{constructor(y,_){this.storageRetriever=y,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Mt,"1"),this.storage.removeItem(Mt),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(y,_){return this.storage.setItem(y,JSON.stringify(_)),Promise.resolve()}_get(y){const _=this.storage.getItem(y);return Promise.resolve(_?JSON.parse(_):null)}_remove(y){return this.storage.removeItem(y),Promise.resolve()}get storage(){return this.storageRetriever()}}const hs=(()=>{class C extends rn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,x)=>this.onStorageEvent(_,x),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function bs(){const C=(0,c.z$)();return we(C)||Y(C)}()&&function Ft(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ke(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const x of Object.keys(this.listeners)){const re=this.storage.getItem(x),ye=this.localCache[x];re!==ye&&_(x,ye,re)}}onStorageEvent(_,x=!1){if(!_.key)return void this.forAllChangedKeys((Yt,_n,wn)=>{this.notifyListeners(Yt,wn)});const re=_.key;if(x?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Yt=this.storage.getItem(re);if(_.newValue!==Yt)null!==_.newValue?this.storage.setItem(re,_.newValue):this.storage.removeItem(re);else if(this.localCache[re]===_.newValue&&!x)return}const ye=()=>{const Yt=this.storage.getItem(re);!x&&this.localCache[re]===Yt||this.notifyListeners(re,Yt)},vt=this.storage.getItem(re);!function me(){return(0,c.w1)()&&10===document.documentMode}()||vt===_.newValue||_.newValue===_.oldValue?ye():setTimeout(ye,10)}notifyListeners(_,x){this.localCache[_]=x;const re=this.listeners[_];if(re)for(const ye of Array.from(re))ye(x&&JSON.parse(x))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,x,re)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:x,newValue:re}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,x){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(x)}_removeListener(_,x){this.listeners[_]&&(this.listeners[_].delete(x),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,x){var re=()=>super._set,ye=this;return(0,h.Z)(function*(){yield re().call(ye,_,x),ye.localCache[_]=JSON.stringify(x)})()}_get(_){var x=()=>super._get,re=this;return(0,h.Z)(function*(){const ye=yield x().call(re,_);return re.localCache[_]=JSON.stringify(ye),ye})()}_remove(_){var x=()=>super._remove,re=this;return(0,h.Z)(function*(){yield x().call(re,_),delete re.localCache[_]})()}}return C.type="LOCAL",C})(),ta=(()=>{class C extends rn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,x){}_removeListener(_,x){}}return C.type="SESSION",C})();let La=(()=>{class C{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const x=this.receivers.find(ye=>ye.isListeningto(_));if(x)return x;const re=new C(_);return this.receivers.push(re),re}isListeningto(_){return this.eventTarget===_}handleEvent(_){var x=this;return(0,h.Z)(function*(){const re=_,{eventId:ye,eventType:vt,data:Yt}=re.data,_n=x.handlersMap[vt];if(!_n?.size)return;re.ports[0].postMessage({status:"ack",eventId:ye,eventType:vt});const wn=Array.from(_n).map(function(){var rs=(0,h.Z)(function*(vo){return vo(re.origin,Yt)});return function(vo){return rs.apply(this,arguments)}}()),Xr=yield function ml(C){return Promise.all(C.map(function(){var y=(0,h.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(x){return{fulfilled:!1,reason:x}}});return function(_){return y.apply(this,arguments)}}()))}(wn);re.ports[0].postMessage({status:"done",eventId:ye,eventType:vt,response:Xr})})()}_subscribe(_,x){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(x)}_unsubscribe(_,x){this.handlersMap[_]&&x&&this.handlersMap[_].delete(x),(!x||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return C.receivers=[],C})();function za(C="",y=10){let _="";for(let x=0;x<y;x++)_+=Math.floor(10*Math.random());return C+_}class nl{constructor(y){this.target=y,this.handlers=new Set}removeMessageHandler(y){y.messageChannel&&(y.messageChannel.port1.removeEventListener("message",y.onMessage),y.messageChannel.port1.close()),this.handlers.delete(y)}_send(y,_,x=50){var re=this;return(0,h.Z)(function*(){const ye=typeof MessageChannel<"u"?new MessageChannel:null;if(!ye)throw new Error("connection_unavailable");let vt,Yt;return new Promise((_n,wn)=>{const Xr=za("",20);ye.port1.start();const rs=setTimeout(()=>{wn(new Error("unsupported_event"))},x);Yt={messageChannel:ye,onMessage(vo){const zl=vo;if(zl.data.eventId===Xr)switch(zl.data.status){case"ack":clearTimeout(rs),vt=setTimeout(()=>{wn(new Error("timeout"))},3e3);break;case"done":clearTimeout(vt),_n(zl.data.response);break;default:clearTimeout(rs),clearTimeout(vt),wn(new Error("invalid_response"))}}},re.handlers.add(Yt),ye.port1.addEventListener("message",Yt.onMessage),re.target.postMessage({eventType:y,eventId:Xr,data:_},[ye.port2])}).finally(()=>{Yt&&re.removeMessageHandler(Yt)})})()}}function Fi(){return window}function qi(){return typeof Fi().WorkerGlobalScope<"u"&&"function"==typeof Fi().importScripts}function ti(){return(ti=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Pr="firebaseLocalStorageDb",Li="firebaseLocalStorage",yn="fbase_key";class Go{constructor(y){this.request=y}toPromise(){return new Promise((y,_)=>{this.request.addEventListener("success",()=>{y(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function na(C,y){return C.transaction([Li],y?"readwrite":"readonly").objectStore(Li)}function Ki(){const C=indexedDB.open(Pr,1);return new Promise((y,_)=>{C.addEventListener("error",()=>{_(C.error)}),C.addEventListener("upgradeneeded",()=>{const x=C.result;try{x.createObjectStore(Li,{keyPath:yn})}catch(re){_(re)}}),C.addEventListener("success",(0,h.Z)(function*(){const x=C.result;x.objectStoreNames.contains(Li)?y(x):(x.close(),yield function ra(){const C=indexedDB.deleteDatabase(Pr);return new Go(C).toPromise()}(),y(yield Ki()))}))})}function ma(C,y,_){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,h.Z)(function*(C,y,_){const x=na(C,!0).put({[yn]:y,value:_});return new Go(x).toPromise()})).apply(this,arguments)}function To(){return(To=(0,h.Z)(function*(C,y){const _=na(C,!1).get(y),x=yield new Go(_).toPromise();return void 0===x?null:x.value})).apply(this,arguments)}function Aa(C,y){const _=na(C,!0).delete(y);return new Go(_).toPromise()}const _a=(()=>{class C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,h.Z)(function*(){return _.db||(_.db=yield Ki()),_.db})()}_withRetries(_){var x=this;return(0,h.Z)(function*(){let re=0;for(;;)try{const ye=yield x._openDb();return yield _(ye)}catch(ye){if(re++>3)throw ye;x.db&&(x.db.close(),x.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,h.Z)(function*(){return qi()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,h.Z)(function*(){_.receiver=La._getInstance(function Sa(){return qi()?self:null}()),_.receiver._subscribe("keyChanged",function(){var x=(0,h.Z)(function*(re,ye){return{keyProcessed:(yield _._poll()).includes(ye.key)}});return function(re,ye){return x.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var x=(0,h.Z)(function*(re,ye){return["keyChanged"]});return function(re,ye){return x.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,h.Z)(function*(){var x,re;if(_.activeServiceWorker=yield function Ga(){return ti.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new nl(_.activeServiceWorker);const ye=yield _.sender._send("ping",{},800);!ye||(null===(x=ye[0])||void 0===x?void 0:x.fulfilled)&&(null===(re=ye[0])||void 0===re?void 0:re.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var x=this;return(0,h.Z)(function*(){if(x.sender&&x.activeServiceWorker&&function pr(){var C;return(null===(C=navigator?.serviceWorker)||void 0===C?void 0:C.controller)||null}()===x.activeServiceWorker)try{yield x.sender._send("keyChanged",{key:_},x.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Ki();return yield ma(_,Mt,"1"),yield Aa(_,Mt),!0}catch{}return!1})()}_withPendingWrite(_){var x=this;return(0,h.Z)(function*(){x.pendingWrites++;try{yield _()}finally{x.pendingWrites--}})()}_set(_,x){var re=this;return(0,h.Z)(function*(){return re._withPendingWrite((0,h.Z)(function*(){return yield re._withRetries(ye=>ma(ye,_,x)),re.localCache[_]=x,re.notifyServiceWorker(_)}))})()}_get(_){var x=this;return(0,h.Z)(function*(){const re=yield x._withRetries(ye=>function ya(C,y){return To.apply(this,arguments)}(ye,_));return x.localCache[_]=re,re})()}_remove(_){var x=this;return(0,h.Z)(function*(){return x._withPendingWrite((0,h.Z)(function*(){return yield x._withRetries(re=>Aa(re,_)),delete x.localCache[_],x.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,h.Z)(function*(){const x=yield _._withRetries(vt=>{const Yt=na(vt,!1).getAll();return new Go(Yt).toPromise()});if(!x)return[];if(0!==_.pendingWrites)return[];const re=[],ye=new Set;for(const{fbase_key:vt,value:Yt}of x)ye.add(vt),JSON.stringify(_.localCache[vt])!==JSON.stringify(Yt)&&(_.notifyListeners(vt,Yt),re.push(vt));for(const vt of Object.keys(_.localCache))_.localCache[vt]&&!ye.has(vt)&&(_.notifyListeners(vt,null),re.push(vt));return re})()}notifyListeners(_,x){this.localCache[_]=x;const re=this.listeners[_];if(re)for(const ye of Array.from(re))ye(x)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,x){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(x)}_removeListener(_,x){this.listeners[_]&&(this.listeners[_].delete(x),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return C.type="LOCAL",C})();function ia(C,y){return dn(C,"POST","/v2/accounts/mfaSignIn:start",Wt(C,y))}function zi(){return(zi=(0,h.Z)(function*(C){return(yield dn(C,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Fo(C){return new Promise((y,_)=>{const x=document.createElement("script");x.setAttribute("src",C),x.onload=y,x.onerror=re=>{const ye=Ge("internal-error");ye.customData=re,_(ye)},x.type="text/javascript",x.charset="UTF-8",function Hs(){var C,y;return null!==(y=null===(C=document.getElementsByTagName("head"))||void 0===C?void 0:C[0])&&void 0!==y?y:document}().appendChild(x)})}function Qs(C){return`__${C}${Math.floor(1e6*Math.random())}`}const xi=1e12;class Ma{constructor(y){this.auth=y,this.counter=xi,this._widgets=new Map}render(y,_){const x=this.counter;return this._widgets.set(x,new ui(y,this.auth.name,_||{})),this.counter++,x}reset(y){var _;const x=y||xi;null===(_=this._widgets.get(x))||void 0===_||_.delete(),this._widgets.delete(x)}getResponse(y){var _;return(null===(_=this._widgets.get(y||xi))||void 0===_?void 0:_.getResponse())||""}execute(y){var _=this;return(0,h.Z)(function*(){var x;return null===(x=_._widgets.get(y||xi))||void 0===x||x.execute(),""})()}}class ui{constructor(y,_,x){this.params=x,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const re="string"==typeof y?document.getElementById(y):y;qe(re,"argument-error",{appName:_}),this.container=re,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function su(C){const y=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let x=0;x<C;x++)y.push(_.charAt(Math.floor(Math.random()*_.length)));return y.join("")}(50);const{callback:y,"expired-callback":_}=this.params;if(y)try{y(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ml=Qs("rcb"),So=new Rt(3e4,6e4);class xa{constructor(){var y;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(y=Fi().grecaptcha)||void 0===y||!y.render)}load(y,_=""){return qe(function Ol(C){return C.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(C)}(_),y,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Fi().grecaptcha):new Promise((x,re)=>{const ye=Fi().setTimeout(()=>{re(Ge(y,"network-request-failed"))},So.get());Fi()[Ml]=()=>{Fi().clearTimeout(ye),delete Fi()[Ml];const Yt=Fi().grecaptcha;if(!Yt)return void re(Ge(y,"internal-error"));const _n=Yt.render;Yt.render=(wn,Xr)=>{const rs=_n(wn,Xr);return this.counter++,rs},this.hostLanguage=_,x(Yt)},Fo(`https://www.google.com/recaptcha/api.js??${(0,c.xO)({onload:Ml,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(ye),re(Ge(y,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(y){var _;return!(null===(_=Fi().grecaptcha)||void 0===_||!_.render)&&(y===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Gi{load(y){return(0,h.Z)(function*(){return new Ma(y)})()}clearedOneInstance(){}}const Oa="recaptcha",$s={theme:"light",type:"image"};class Si{constructor(y,_=Object.assign({},$s),x){this.parameters=_,this.type=Oa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=un(x),this.isInvisible="invisible"===this.parameters.size,qe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const re="string"==typeof y?document.getElementById(y):y;qe(re,this.auth,"argument-error"),this.container=re,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Gi:new xa,this.validateStartingState()}verify(){var y=this;return(0,h.Z)(function*(){y.assertNotDestroyed();const _=yield y.render(),x=y.getAssertedRecaptcha();return x.getResponse(_)||new Promise(ye=>{const vt=Yt=>{!Yt||(y.tokenChangeListeners.delete(vt),ye(Yt))};y.tokenChangeListeners.add(vt),y.isInvisible&&x.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(y){return Promise.reject(y)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(y=>{throw this.renderPromise=null,y})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(y=>{this.container.removeChild(y)})}validateStartingState(){qe(!this.parameters.sitekey,this.auth,"argument-error"),qe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),qe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(y){return _=>{if(this.tokenChangeListeners.forEach(x=>x(_)),"function"==typeof y)y(_);else if("string"==typeof y){const x=Fi()[y];"function"==typeof x&&x(_)}}}assertNotDestroyed(){qe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var y=this;return(0,h.Z)(function*(){if(yield y.init(),!y.widgetId){let _=y.container;if(!y.isInvisible){const x=document.createElement("div");_.appendChild(x),_=x}y.widgetId=y.getAssertedRecaptcha().render(_,y.parameters)}return y.widgetId})()}init(){var y=this;return(0,h.Z)(function*(){qe($t()&&!qi(),y.auth,"internal-error"),yield function ws(){let C=null;return new Promise(y=>{"complete"!==document.readyState?(C=()=>y(),window.addEventListener("load",C)):y()}).catch(y=>{throw C&&window.removeEventListener("load",C),y})}(),y.recaptcha=yield y._recaptchaLoader.load(y.auth,y.auth.languageCode||void 0);const _=yield function lt(C){return zi.apply(this,arguments)}(y.auth);qe(_,y.auth,"internal-error"),y.parameters.sitekey=_})()}getAssertedRecaptcha(){return qe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class qo{constructor(y,_){this.verificationId=y,this.onConfirmation=_}confirm(y){const _=Bi._fromVerification(this.verificationId,y);return this.onConfirmation(_)}}function As(C,y,_){return yl.apply(this,arguments)}function yl(){return(yl=(0,h.Z)(function*(C,y,_){const x=un(C),re=yield po(x,y,(0,c.m9)(_));return new qo(re,ye=>P(x,ye))})).apply(this,arguments)}function ps(C,y,_){return Js.apply(this,arguments)}function Js(){return(Js=(0,h.Z)(function*(C,y,_){const x=(0,c.m9)(C);yield $i(!1,x,"phone");const re=yield po(x.auth,y,(0,c.m9)(_));return new qo(re,ye=>ue(x,ye))})).apply(this,arguments)}function Zs(C,y,_){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,h.Z)(function*(C,y,_){const x=(0,c.m9)(C),re=yield po(x.auth,y,(0,c.m9)(_));return new qo(re,ye=>Et(x,ye))})).apply(this,arguments)}function po(C,y,_){return va.apply(this,arguments)}function va(){return(va=(0,h.Z)(function*(C,y,_){var x;const re=yield _.verify();try{let ye;if(qe("string"==typeof re,C,"argument-error"),qe(_.type===Oa,C,"argument-error"),ye="string"==typeof y?{phoneNumber:y}:y,"session"in ye){const vt=ye.session;if("phoneNumber"in ye)return qe("enroll"===vt.type,C,"internal-error"),(yield li(C,{idToken:vt.credential,phoneEnrollmentInfo:{phoneNumber:ye.phoneNumber,recaptchaToken:re}})).phoneSessionInfo.sessionInfo;{qe("signin"===vt.type,C,"internal-error");const Yt=(null===(x=ye.multiFactorHint)||void 0===x?void 0:x.uid)||ye.multiFactorUid;return qe(Yt,C,"missing-multi-factor-info"),(yield ia(C,{mfaPendingCredential:vt.credential,mfaEnrollmentId:Yt,phoneSignInInfo:{recaptchaToken:re}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:vt}=yield bt(C,{phoneNumber:ye.phoneNumber,recaptchaToken:re});return vt}}finally{_._reset()}})).apply(this,arguments)}function D(C,y){return T.apply(this,arguments)}function T(){return(T=(0,h.Z)(function*(C,y){yield Vs((0,c.m9)(C),y)})).apply(this,arguments)}let E=(()=>{class C{constructor(_){this.providerId=C.PROVIDER_ID,this.auth=un(_)}verifyPhoneNumber(_,x){return po(this.auth,_,(0,c.m9)(x))}static credential(_,x){return Bi._fromVerification(_,x)}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:x,temporaryProof:re}=_;return x&&re?Bi._fromTokenResponse(x,re):null}}return C.PROVIDER_ID="phone",C.PHONE_SIGN_IN_METHOD="phone",C})();function F(C,y){return y?je(y):(qe(C._popupRedirectResolver,C,"argument-error"),C._popupRedirectResolver)}class $ extends fi{constructor(y){super("custom","custom"),this.params=y}_getIdTokenResponse(y){return ro(y,this._buildIdpRequest())}_linkToIdToken(y,_){return ro(y,this._buildIdpRequest(_))}_getReauthenticationResolver(y){return ro(y,this._buildIdpRequest())}_buildIdpRequest(y){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return y&&(_.idToken=y),_}}function ae(C){return ve(C.auth,new $(C),C.bypassAuthState)}function Oe(C){const{auth:y,user:_}=C;return qe(_,y,"internal-error"),Do(_,new $(C),C.bypassAuthState)}function Be(C){return xt.apply(this,arguments)}function xt(){return(xt=(0,h.Z)(function*(C){const{auth:y,user:_}=C;return qe(_,y,"internal-error"),Vs(_,new $(C),C.bypassAuthState)})).apply(this,arguments)}class pn{constructor(y,_,x,re,ye=!1){this.auth=y,this.resolver=x,this.user=re,this.bypassAuthState=ye,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var y=this;return new Promise(function(){var _=(0,h.Z)(function*(x,re){y.pendingPromise={resolve:x,reject:re};try{y.eventManager=yield y.resolver._initialize(y.auth),yield y.onExecution(),y.eventManager.registerConsumer(y)}catch(ye){y.reject(ye)}});return function(x,re){return _.apply(this,arguments)}}())}onAuthEvent(y){var _=this;return(0,h.Z)(function*(){const{urlResponse:x,sessionId:re,postBody:ye,tenantId:vt,error:Yt,type:_n}=y;if(Yt)return void _.reject(Yt);const wn={auth:_.auth,requestUri:x,sessionId:re,tenantId:vt||void 0,postBody:ye||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(_n)(wn))}catch(Xr){_.reject(Xr)}})()}onError(y){this.reject(y)}getIdpTask(y){switch(y){case"signInViaPopup":case"signInViaRedirect":return ae;case"linkViaPopup":case"linkViaRedirect":return Be;case"reauthViaPopup":case"reauthViaRedirect":return Oe;default:Gt(this.auth,"internal-error")}}resolve(y){ct(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(y),this.unregisterAndCleanUp()}reject(y){ct(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(y),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const hr=new Rt(2e3,1e4);function Un(C,y,_){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,h.Z)(function*(C,y,_){const x=un(C);rt(C,y,Ti);const re=F(x,_);return new wa(x,"signInViaPopup",y,re).executeNotNull()})).apply(this,arguments)}function Ns(C,y,_){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,h.Z)(function*(C,y,_){const x=(0,c.m9)(C);rt(x.auth,y,Ti);const re=F(x.auth,_);return new wa(x.auth,"reauthViaPopup",y,re,x).executeNotNull()})).apply(this,arguments)}function ba(C,y,_){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,h.Z)(function*(C,y,_){const x=(0,c.m9)(C);rt(x.auth,y,Ti);const re=F(x.auth,_);return new wa(x.auth,"linkViaPopup",y,re,x).executeNotNull()})).apply(this,arguments)}let wa=(()=>{class C extends pn{constructor(_,x,re,ye,vt){super(_,x,ye,vt),this.provider=re,this.authWindow=null,this.pollId=null,C.currentPopupAction&&C.currentPopupAction.cancel(),C.currentPopupAction=this}executeNotNull(){var _=this;return(0,h.Z)(function*(){const x=yield _.execute();return qe(x,_.auth,"internal-error"),x})()}onExecution(){var _=this;return(0,h.Z)(function*(){ct(1===_.filter.length,"Popup operations only handle one event");const x=za();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],x),_.authWindow.associatedEvent=x,_.resolver._originValidation(_.auth).catch(re=>{_.reject(re)}),_.resolver._isIframeWebStorageSupported(_.auth,re=>{re||_.reject(Ge(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ge(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C.currentPopupAction=null}pollUserCancellation(){const _=()=>{var x,re;this.pollId=null!==(re=null===(x=this.authWindow)||void 0===x?void 0:x.window)&&void 0!==re&&re.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ge(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,hr.get())};_()}}return C.currentPopupAction=null,C})();const Ko=new Map;class qa extends pn{constructor(y,_,x=!1){super(y,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,x),this.eventId=null}execute(){var y=()=>super.execute,_=this;return(0,h.Z)(function*(){let x=Ko.get(_.auth._key());if(!x){try{const ye=(yield function rl(C,y){return Ea.apply(this,arguments)}(_.resolver,_.auth))?yield y().call(_):null;x=()=>Promise.resolve(ye)}catch(re){x=()=>Promise.reject(re)}Ko.set(_.auth._key(),x)}return _.bypassAuthState||Ko.set(_.auth._key(),()=>Promise.resolve(null)),x()})()}onAuthEvent(y){var _=()=>super.onAuthEvent,x=this;return(0,h.Z)(function*(){if("signInViaRedirect"===y.type)return _().call(x,y);if("unknown"!==y.type){if(y.eventId){const re=yield x.auth._redirectUserForId(y.eventId);if(re)return x.user=re,_().call(x,y);x.resolve(null)}}else x.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Ea(){return(Ea=(0,h.Z)(function*(C,y){const _=Yi(y),x=il(C);if(!(yield x._isAvailable()))return!1;const re="true"===(yield x._get(_));return yield x._remove(_),re})).apply(this,arguments)}function Ca(C,y){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,h.Z)(function*(C,y){return il(C)._set(Yi(y),"true")})).apply(this,arguments)}function Ka(){Ko.clear()}function $l(C,y){Ko.set(C._key(),y)}function il(C){return je(C._redirectPersistence)}function Yi(C){return xe("pendingRedirect",C.config.apiKey,C.name)}function ou(C,y,_){return function xr(C,y,_){return Zl.apply(this,arguments)}(C,y,_)}function Zl(){return(Zl=(0,h.Z)(function*(C,y,_){const x=un(C);rt(C,y,Ti);const re=F(x,_);return yield Ca(re,x),re._openRedirect(x,y,"signInViaRedirect")})).apply(this,arguments)}function j(C,y,_){return function z(C,y,_){return se.apply(this,arguments)}(C,y,_)}function se(){return(se=(0,h.Z)(function*(C,y,_){const x=(0,c.m9)(C);rt(x.auth,y,Ti);const re=F(x.auth,_);yield Ca(re,x.auth);const ye=yield Br(x);return re._openRedirect(x.auth,y,"reauthViaRedirect",ye)})).apply(this,arguments)}function Re(C,y,_){return function ht(C,y,_){return It.apply(this,arguments)}(C,y,_)}function It(){return(It=(0,h.Z)(function*(C,y,_){const x=(0,c.m9)(C);rt(x.auth,y,Ti);const re=F(x.auth,_);yield $i(!1,x,y.providerId),yield Ca(re,x.auth);const ye=yield Br(x);return re._openRedirect(x.auth,y,"linkViaRedirect",ye)})).apply(this,arguments)}function nn(C,y){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,h.Z)(function*(C,y){return yield un(C)._initializationPromise,Gn(C,y,!1)})).apply(this,arguments)}function Gn(C,y){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,h.Z)(function*(C,y,_=!1){const x=un(C),re=F(x,y),vt=yield new qa(x,re,_).execute();return vt&&!_&&(delete vt.user._redirectEventId,yield x._persistUserIfCurrent(vt.user),yield x._setRedirectUser(null,y)),vt})).apply(this,arguments)}function Br(C){return ar.apply(this,arguments)}function ar(){return(ar=(0,h.Z)(function*(C){const y=za(`${C.uid}:::`);return C._redirectEventId=y,yield C.auth._setRedirectUser(C),yield C.auth._persistUserIfCurrent(C),y})).apply(this,arguments)}class ao{constructor(y){this.auth=y,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(y){this.consumers.add(y),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,y)&&(this.sendToConsumer(this.queuedRedirectEvent,y),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(y){this.consumers.delete(y)}onEvent(y){if(this.hasEventBeenHandled(y))return!1;let _=!1;return this.consumers.forEach(x=>{this.isEventForConsumer(y,x)&&(_=!0,this.sendToConsumer(y,x),this.saveEventToCache(y))}),this.hasHandledPotentialRedirect||!function ol(C){switch(C.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sl(C);default:return!1}}(y)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=y,_=!0)),_}sendToConsumer(y,_){var x;if(y.error&&!sl(y)){const re=(null===(x=y.error.code)||void 0===x?void 0:x.split("auth/")[1])||"internal-error";_.onError(Ge(this.auth,re))}else _.onAuthEvent(y)}isEventForConsumer(y,_){const x=null===_.eventId||!!y.eventId&&y.eventId===_.eventId;return _.filter.includes(y.type)&&x}hasEventBeenHandled(y){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_l(y))}saveEventToCache(y){this.cachedEventUids.add(_l(y)),this.lastProcessedEventTime=Date.now()}}function _l(C){return[C.type,C.eventId,C.sessionId,C.tenantId].filter(y=>y).join("-")}function sl({type:C,error:y}){return"unknown"===C&&"auth/no-auth-event"===y?.code}function Mo(C){return go.apply(this,arguments)}function go(){return(go=(0,h.Z)(function*(C,y={}){return dn(C,"GET","/v1/projects",y)})).apply(this,arguments)}const al=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ya=/^https?/;function sa(){return(sa=(0,h.Z)(function*(C){if(C.config.emulator)return;const{authorizedDomains:y}=yield Mo(C);for(const _ of y)try{if(Ac(_))return}catch{}Gt(C,"unauthorized-domain")})).apply(this,arguments)}function Ac(C){const y=Lt(),{protocol:_,hostname:x}=new URL(y);if(C.startsWith("chrome-extension://")){const vt=new URL(C);return""===vt.hostname&&""===x?"chrome-extension:"===_&&C.replace("chrome-extension://","")===y.replace("chrome-extension://",""):"chrome-extension:"===_&&vt.hostname===x}if(!Ya.test(_))return!1;if(al.test(C))return x===C;const re=C.replace(/\./g,"\\.");return new RegExp("^(.+\\."+re+"|"+re+")$","i").test(x)}const kl=new Rt(3e4,6e4);function I(){const C=Fi().___jsl;if(C?.H)for(const y of Object.keys(C.H))if(C.H[y].r=C.H[y].r||[],C.H[y].L=C.H[y].L||[],C.H[y].r=[...C.H[y].L],C.CP)for(let _=0;_<C.CP.length;_++)C.CP[_]=null}let f=null;function w(C){return f=f||function m(C){return new Promise((y,_)=>{var x,re,ye;function vt(){I(),gapi.load("gapi.iframes",{callback:()=>{y(gapi.iframes.getContext())},ontimeout:()=>{I(),_(Ge(C,"network-request-failed"))},timeout:kl.get()})}if(null!==(re=null===(x=Fi().gapi)||void 0===x?void 0:x.iframes)&&void 0!==re&&re.Iframe)y(gapi.iframes.getContext());else{if(null===(ye=Fi().gapi)||void 0===ye||!ye.load){const Yt=Qs("iframefcb");return Fi()[Yt]=()=>{gapi.load?vt():_(Ge(C,"network-request-failed"))},Fo(`https://apis.google.com/js/api.js?onload=${Yt}`).catch(_n=>_(_n))}vt()}}).catch(y=>{throw f=null,y})}(C),f}const B=new Rt(5e3,15e3),Le={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ot=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kt(C){const y=C.config;qe(y.authDomain,C,"auth-domain-config-required");const _=y.emulator?Pn(y,"emulator/auth/iframe"):`https://${C.config.authDomain}/__/auth/iframe`,x={apiKey:y.apiKey,appName:C.name,v:S.SDK_VERSION},re=ot.get(C.config.apiHost);re&&(x.eid=re);const ye=C._getFrameworks();return ye.length&&(x.fw=ye.join(",")),`${_}?${(0,c.xO)(x).slice(1)}`}function Sn(){return Sn=(0,h.Z)(function*(C){const y=yield w(C),_=Fi().gapi;return qe(_,C,"internal-error"),y.open({where:document.body,url:kt(C),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Le,dontclear:!0},x=>new Promise(function(){var re=(0,h.Z)(function*(ye,vt){yield x.restyle({setHideOnLeave:!1});const Yt=Ge(C,"network-request-failed"),_n=Fi().setTimeout(()=>{vt(Yt)},B.get());function wn(){Fi().clearTimeout(_n),ye(x)}x.ping(wn).then(wn,()=>{vt(Yt)})});return function(ye,vt){return re.apply(this,arguments)}}()))}),Sn.apply(this,arguments)}const lr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Vr{constructor(y){this.window=y,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function to(C,y,_,x,re,ye){qe(C.config.authDomain,C,"auth-domain-config-required"),qe(C.config.apiKey,C,"invalid-api-key");const vt={apiKey:C.config.apiKey,appName:C.name,authType:_,redirectUrl:x,v:S.SDK_VERSION,eventId:re};if(y instanceof Ti){y.setDefaultLanguage(C.languageCode),vt.providerId=y.providerId||"",(0,c.xb)(y.getCustomParameters())||(vt.customParameters=JSON.stringify(y.getCustomParameters()));for(const[_n,wn]of Object.entries(ye||{}))vt[_n]=wn}if(y instanceof Lr){const _n=y.getScopes().filter(wn=>""!==wn);_n.length>0&&(vt.scopes=_n.join(","))}C.tenantId&&(vt.tid=C.tenantId);const Yt=vt;for(const _n of Object.keys(Yt))void 0===Yt[_n]&&delete Yt[_n];return`${function mo({config:C}){return C.emulator?Pn(C,"emulator/auth/handler"):`https://${C.authDomain}/__/auth/handler`}(C)}?${(0,c.xO)(Yt).slice(1)}`}const yo="webStorageSupport",Lo=class Va{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ta,this._completeRedirectFn=Gn,this._overrideRedirectResult=$l}_openPopup(y,_,x,re){var ye=this;return(0,h.Z)(function*(){var vt;ct(null===(vt=ye.eventManagers[y._key()])||void 0===vt?void 0:vt.manager,"_initialize() not called before _openPopup()");const Yt=to(y,_,x,Lt(),re);return function ns(C,y,_,x=500,re=600){const ye=Math.max((window.screen.availHeight-re)/2,0).toString(),vt=Math.max((window.screen.availWidth-x)/2,0).toString();let Yt="";const _n=Object.assign(Object.assign({},lr),{width:x.toString(),height:re.toString(),top:ye,left:vt}),wn=(0,c.z$)().toLowerCase();_&&(Yt=ut(wn)?"_blank":_),ie(wn)&&(y=y||"http://localhost",_n.scrollbars="yes");const Xr=Object.entries(_n).reduce((vo,[zl,Yo])=>`${vo}${zl}=${Yo},`,"");if(function te(C=(0,c.z$)()){var y;return Y(C)&&!(null===(y=window.navigator)||void 0===y||!y.standalone)}(wn)&&"_self"!==Yt)return function eo(C,y){const _=document.createElement("a");_.href=C,_.target=y;const x=document.createEvent("MouseEvent");x.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(x)}(y||"",Yt),new Vr(null);const rs=window.open(y||"",Yt,Xr);qe(rs,C,"popup-blocked");try{rs.focus()}catch{}return new Vr(rs)}(y,Yt,za())})()}_openRedirect(y,_,x,re){var ye=this;return(0,h.Z)(function*(){return yield ye._originValidation(y),function Er(C){Fi().location.href=C}(to(y,_,x,Lt(),re)),new Promise(()=>{})})()}_initialize(y){const _=y._key();if(this.eventManagers[_]){const{manager:re,promise:ye}=this.eventManagers[_];return re?Promise.resolve(re):(ct(ye,"If manager is not set, promise should be"),ye)}const x=this.initAndGetManager(y);return this.eventManagers[_]={promise:x},x.catch(()=>{delete this.eventManagers[_]}),x}initAndGetManager(y){var _=this;return(0,h.Z)(function*(){const x=yield function Dn(C){return Sn.apply(this,arguments)}(y),re=new ao(y);return x.register("authEvent",ye=>(qe(ye?.authEvent,y,"invalid-auth-event"),{status:re.onEvent(ye.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[y._key()]={manager:re},_.iframes[y._key()]=x,re})()}_isIframeWebStorageSupported(y,_){this.iframes[y._key()].send(yo,{type:yo},re=>{var ye;const vt=null===(ye=re?.[0])||void 0===ye?void 0:ye[yo];void 0!==vt&&_(!!vt),Gt(y,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(y){const _=y._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Ba(C){return sa.apply(this,arguments)}(y)),this.originValidationPromises[_]}get _shouldInitProactively(){return Ke()||we()||Y()}};class ll extends class Iu{constructor(y){this.factorId=y}_process(y,_,x){switch(_.type){case"enroll":return this._finalizeEnroll(y,_.credential,x);case"signin":return this._finalizeSignIn(y,_.credential);default:return it("unexpected MultiFactorSessionType")}}}{constructor(y){super("phone"),this.credential=y}static _fromCredential(y){return new ll(y)}_finalizeEnroll(y,_,x){return function ga(C,y){return dn(C,"POST","/v2/accounts/mfaEnrollment:finalize",Wt(C,y))}(y,{idToken:_,displayName:x,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(y,_){return function Di(C,y){return dn(C,"POST","/v2/accounts/mfaSignIn:finalize",Wt(C,y))}(y,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let lo=(()=>{class C{constructor(){}static assertion(_){return ll._fromCredential(_)}}return C.FACTOR_ID="phone",C})();var vl="@firebase/auth",Tu="0.20.11";class An{constructor(y){this.auth=y,this.internalListeners=new Map}getUid(){var y;return this.assertAuthConfigured(),(null===(y=this.auth.currentUser)||void 0===y?void 0:y.uid)||null}getToken(y){var _=this;return(0,h.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(y)}:null})()}addAuthTokenListener(y){if(this.assertAuthConfigured(),this.internalListeners.has(y))return;const _=this.auth.onIdTokenChanged(x=>{var re;y((null===(re=x)||void 0===re?void 0:re.stsTokenManager.accessToken)||null)});this.internalListeners.set(y,_),this.updateProactiveRefresh()}removeAuthTokenListener(y){this.assertAuthConfigured();const _=this.internalListeners.get(y);!_||(this.internalListeners.delete(y),_(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const _o=(0,c.Pz)("authIdTokenMaxAge")||300;let xo=null;const oa=C=>function(){var y=(0,h.Z)(function*(_){const x=_&&(yield _.getIdTokenResult()),re=x&&((new Date).getTime()-Date.parse(x.issuedAtTime))/1e3;if(re&&re>_o)return;const ye=x?.token;xo!==ye&&(xo=ye,yield fetch(C,{method:ye?"POST":"DELETE",headers:ye?{Authorization:`Bearer ${ye}`}:{}}))});return function(_){return y.apply(this,arguments)}}();function Qa(C=(0,S.getApp)()){const y=(0,S._getProvider)(C,"auth");if(y.isInitialized())return y.getImmediate();const _=function pt(C,y){const _=(0,S._getProvider)(C,"auth");if(_.isInitialized()){const re=_.getImmediate(),ye=_.getOptions();if((0,c.vZ)(ye,y??{}))return re;Gt(re,"already-initialized")}return _.initialize({options:y})}(C,{popupRedirectResolver:Lo,persistence:[_a,hs,ta]}),x=(0,c.Pz)("authTokenSyncURL");if(x){const ye=oa(x);(function qr(C,y,_){(0,c.m9)(C).beforeAuthStateChanged(y,_)})(_,ye,()=>ye(_.currentUser)),function ds(C,y,_,x){(0,c.m9)(C).onIdTokenChanged(y,_,x)}(_,vt=>ye(vt))}const re=(0,c.q4)("auth");return re&&vi(_,`http://${re}`),_}!function Dr(C){(0,S._registerComponent)(new Ae.wA("auth",(y,{options:_})=>{const x=y.getProvider("app").getImmediate(),re=y.getProvider("heartbeat"),{apiKey:ye,authDomain:vt}=x.options;return((Yt,_n)=>{qe(ye&&!ye.includes(":"),"invalid-api-key",{appName:Yt.name}),qe(!vt?.includes(":"),"argument-error",{appName:Yt.name});const wn={apiKey:ye,authDomain:vt,clientPlatform:C,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:on(C)},Xr=new Gr(Yt,_n,wn);return function dt(C,y){const _=y?.persistence||[],x=(Array.isArray(_)?_:[_]).map(je);y?.errorMap&&C._updateErrorMap(y.errorMap),C._initializeWithPersistence(x,y?.popupRedirectResolver)}(Xr,_),Xr})(x,re)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((y,_,x)=>{y.getProvider("auth-internal").initialize()})),(0,S._registerComponent)(new Ae.wA("auth-internal",y=>{const _=un(y.getProvider("auth").getImmediate());return new An(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,S.registerVersion)(vl,Tu,function mr(C){switch(C){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(C)),(0,S.registerVersion)(vl,Tu,"esm2017")}("Browser")},5525:(Jt,Qe,k)=>{k.d(Qe,{u7:()=>fh,Jj:()=>Il,IX:()=>Sy,my:()=>zs,xU:()=>Eu,Lz:()=>Bo,WA:()=>rn,F8:()=>tu,$q:()=>Dc,W:()=>Ic,EK:()=>ti,PU:()=>ph,l7:()=>F,Ky:()=>yn,Xb:()=>Li,Cf:()=>yi,K9:()=>gl,Me:()=>yl,yq:()=>li,Wi:()=>xg,ET:()=>Tc,Ab:()=>om,vr:()=>Sl,Fc:()=>Ay,hJ:()=>Y_,B$:()=>Pg,at:()=>Cl,oe:()=>im,AK:()=>Ul,TF:()=>xy,JU:()=>Rg,ST:()=>Uu,fH:()=>nv,Ix:()=>qf,Wu:()=>Jg,Lx:()=>Qg,qY:()=>bo,GL:()=>Zu,QT:()=>em,kl:()=>Vo,Xk:()=>tm,PL:()=>Ny,UQ:()=>Fy,zN:()=>nm,nP:()=>am,b9:()=>ky,vh:()=>Wg,Pb:()=>id,L$:()=>Ta,cf:()=>Uy,sc:()=>By,Xo:()=>Xf,IO:()=>Zg,iE:()=>jf,Eo:()=>_y,i3:()=>Hy,Bt:()=>Tl,pl:()=>Ly,Ub:()=>Rs,qK:()=>Ry,TQ:()=>Kg,e0:()=>qg,r7:()=>rm,Mx:()=>My,ar:()=>zg});var fe,h=k(5861),c=k(9681),S=k(4859),d=k(1877),de=k(2090),Ae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_e={},Fe=Fe||{},pe=Ae||self;function be(){}function Pe(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function st(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var He="closure_uid_"+(1e9*Math.random()>>>0),Tt=0;function gt(i,e,n){return i.call.apply(i.bind,arguments)}function ft(i,e,n){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var l=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(l,o),i.apply(e,l)}}return function(){return i.apply(e,arguments)}}function Ye(i,e,n){return(Ye=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?gt:ft).apply(null,arguments)}function Gt(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var o=n.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Ge(i,e){function n(){}n.prototype=e.prototype,i.X=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.Wb=function(o,l,p){for(var v=Array(arguments.length-2),O=2;O<arguments.length;O++)v[O-2]=arguments[O];return e.prototype[l].apply(o,v)}}function Me(){this.s=this.s,this.o=this.o}Me.prototype.s=!1,Me.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function mt(i){Object.prototype.hasOwnProperty.call(i,He)&&i[He]||(i[He]=++Tt)}(this)},Me.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Pt=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function qe(i){const e=i.length;if(0<e){const n=Array(e);for(let o=0;o<e;o++)n[o]=i[o];return n}return[]}function it(i,e){for(let n=1;n<arguments.length;n++){const o=arguments[n];if(Pe(o)){const l=i.length||0,p=o.length||0;i.length=l+p;for(let v=0;v<p;v++)i[l+v]=o[v]}else i.push(o)}}function ct(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}ct.prototype.h=function(){this.defaultPrevented=!0};var We=function(){if(!pe.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{pe.addEventListener("test",be,e),pe.removeEventListener("test",be,e)}catch{}return i}();function je(i){return/^[\s\xa0]*$/.test(i)}var pt=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function dt(i,e){return i<e?-1:i>e?1:0}function Lt(){var i=pe.navigator;return i&&(i=i.userAgent)?i:""}function $t(i){return-1!=Lt().indexOf(i)}function Qt(i){return Qt[" "](i),i}Qt[" "]=be;var dn,i,cn=$t("Opera"),Rt=$t("Trident")||$t("MSIE"),Pn=$t("Edge"),Zn=Pn||Rt,Nn=$t("Gecko")&&!(-1!=Lt().toLowerCase().indexOf("webkit")&&!$t("Edge"))&&!($t("Trident")||$t("MSIE"))&&!$t("Edge"),In=-1!=Lt().toLowerCase().indexOf("webkit")&&!$t("Edge");function Wt(){var i=pe.document;return i?i.documentMode:void 0}e:{var vr="",Ar=(i=Lt(),Nn?/rv:([^\);]+)(\)|;)/.exec(i):Pn?/Edge\/([\d\.]+)/.exec(i):Rt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):In?/WebKit\/(\S+)/.exec(i):cn?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Ar&&(vr=Ar?Ar[1]:""),Rt){var br=Wt();if(null!=br&&br>parseFloat(vr)){dn=String(br);break e}}dn=vr}var ir={};var yr=pe.document&&Rt&&(Wt()||parseInt(dn,10))||void 0;function Rr(i,e){if(ct.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Nn){e:{try{Qt(e.nodeName);var l=!0;break e}catch{}l=!1}l||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:er[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Rr.X.h.call(this)}}Ge(Rr,ct);var er={2:"touch",3:"pen",4:"mouse"};Rr.prototype.h=function(){Rr.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Ht="closure_listenable_"+(1e6*Math.random()|0),cr=0;function tr(i,e,n,o,l){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!o,this.ha=l,this.key=++cr,this.ba=this.ea=!1}function nr(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function Nr(i,e,n){for(const o in i)e.call(n,i[o],o,i)}function _i(i){const e={};for(const n in i)e[n]=i[n];return e}const Ir="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _r(i,e){let n,o;for(let l=1;l<arguments.length;l++){for(n in o=arguments[l],o)i[n]=o[n];for(let p=0;p<Ir.length;p++)n=Ir[p],Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n])}}function fr(i){this.src=i,this.g={},this.h=0}function mn(i,e){var n=e.type;if(n in i.g){var p,o=i.g[n],l=Pt(o,e);(p=0<=l)&&Array.prototype.splice.call(o,l,1),p&&(nr(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function Tn(i,e,n,o){for(var l=0;l<i.length;++l){var p=i[l];if(!p.ba&&p.listener==e&&p.capture==!!n&&p.ha==o)return l}return-1}fr.prototype.add=function(i,e,n,o,l){var p=i.toString();(i=this.g[p])||(i=this.g[p]=[],this.h++);var v=Tn(i,e,o,l);return-1<v?(e=i[v],n||(e.ea=!1)):((e=new tr(e,this.src,p,!!o,l)).ea=n,i.push(e)),e};var On="closure_lm_"+(1e6*Math.random()|0),wr={};function bn(i,e,n,o,l){if(o&&o.once)return zt(i,e,n,o,l);if(Array.isArray(e)){for(var p=0;p<e.length;p++)bn(i,e[p],n,o,l);return null}return n=J(n),i&&i[Ht]?i.N(e,n,st(o)?!!o.capture:!!o,l):zr(i,e,n,!1,o,l)}function zr(i,e,n,o,l,p){if(!e)throw Error("Invalid event type");var v=st(l)?!!l.capture:!!l,O=Jn(i);if(O||(i[On]=O=new fr(i)),(n=O.add(e,n,o,v,p)).proxy)return n;if(o=function Kn(){const e=Rn;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=o,o.src=i,o.listener=n,i.addEventListener)We||(l=v),void 0===l&&(l=!1),i.addEventListener(e.toString(),o,l);else if(i.attachEvent)i.attachEvent(St(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return n}function zt(i,e,n,o,l){if(Array.isArray(e)){for(var p=0;p<e.length;p++)zt(i,e[p],n,o,l);return null}return n=J(n),i&&i[Ht]?i.O(e,n,st(o)?!!o.capture:!!o,l):zr(i,e,n,!0,o,l)}function Ve(i,e,n,o,l){if(Array.isArray(e))for(var p=0;p<e.length;p++)Ve(i,e[p],n,o,l);else o=st(o)?!!o.capture:!!o,n=J(n),i&&i[Ht]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=Tn(p=i.g[e],n,o,l))&&(nr(p[n]),Array.prototype.splice.call(p,n,1),0==p.length&&(delete i.g[e],i.h--))):i&&(i=Jn(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Tn(e,n,o,l)),(n=-1<i?e[i]:null)&&tt(n))}function tt(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[Ht])mn(e.i,i);else{var n=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(n,o,i.capture):e.detachEvent?e.detachEvent(St(n),o):e.addListener&&e.removeListener&&e.removeListener(o),(n=Jn(e))?(mn(n,i),0==n.h&&(n.src=null,e[On]=null)):nr(i)}}}function St(i){return i in wr?wr[i]:wr[i]="on"+i}function Rn(i,e){if(i.ba)i=!0;else{e=new Rr(e,this);var n=i.listener,o=i.ha||i.src;i.ea&&tt(i),i=n.call(o,e)}return i}function Jn(i){return(i=i[On])instanceof fr?i:null}var Je="__closure_events_fn_"+(1e9*Math.random()>>>0);function J(i){return"function"==typeof i?i:(i[Je]||(i[Je]=function(e){return i.handleEvent(e)}),i[Je])}function ge(){Me.call(this),this.i=new fr(this),this.P=this,this.I=null}function Xe(i,e){var n,o=i.I;if(o)for(n=[];o;o=o.I)n.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new ct(e,i);else if(e instanceof ct)e.target=e.target||i;else{var l=e;_r(e=new ct(o,i),l)}if(l=!0,n)for(var p=n.length-1;0<=p;p--){var v=e.g=n[p];l=_t(v,o,!0,e)&&l}if(l=_t(v=e.g=i,o,!0,e)&&l,l=_t(v,o,!1,e)&&l,n)for(p=0;p<n.length;p++)l=_t(v=e.g=n[p],o,!1,e)&&l}function _t(i,e,n,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var l=!0,p=0;p<e.length;++p){var v=e[p];if(v&&!v.ba&&v.capture==n){var O=v.listener,q=v.ha||v.src;v.ea&&mn(i.i,v),l=!1!==O.call(q,o)&&l}}return l&&!o.defaultPrevented}Ge(ge,Me),ge.prototype[Ht]=!0,ge.prototype.removeEventListener=function(i,e,n,o){Ve(this,i,e,n,o)},ge.prototype.M=function(){if(ge.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],o=0;o<n.length;o++)nr(n[o]);delete i.g[e],i.h--}}this.I=null},ge.prototype.N=function(i,e,n,o){return this.i.add(String(i),e,!1,n,o)},ge.prototype.O=function(i,e,n,o){return this.i.add(String(i),e,!0,n,o)};var ln=pe.JSON.stringify;function Ne(){var i=hn;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var ut,$e=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new De,i=>i.reset());class De{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function ie(i){pe.setTimeout(()=>{throw i},0)}function we(i,e){ut||function Bt(){var i=pe.Promise.resolve(void 0);ut=function(){i.then(Se)}}(),gn||(ut(),gn=!0),hn.add(i,e)}var gn=!1,hn=new class xe{constructor(){this.h=this.g=null}add(e,n){const o=$e.get();o.set(e,n),this.h?this.h.next=o:this.g=o,this.h=o}};function Se(){for(var i;i=Ne();){try{i.h.call(i.g)}catch(n){ie(n)}var e=$e;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}gn=!1}function Y(i,e){ge.call(this),this.h=i||1,this.g=e||pe,this.j=Ye(this.lb,this),this.l=Date.now()}function W(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function te(i,e,n){if("function"==typeof i)n&&(i=Ye(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Ye(i.handleEvent,i)}return 2147483647<Number(e)?-1:pe.setTimeout(i,e||0)}function me(i){i.g=te(()=>{i.g=null,i.i&&(i.i=!1,me(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Ge(Y,ge),(fe=Y.prototype).ca=!1,fe.R=null,fe.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Xe(this,"tick"),this.ca&&(W(this),this.start()))}},fe.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},fe.M=function(){Y.X.M.call(this),W(this),delete this.g};class Ke extends Me{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:me(this)}M(){super.M(),this.g&&(pe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ft(i){Me.call(this),this.h=i,this.g={}}Ge(Ft,Me);var on=[];function Fn(i,e,n,o){Array.isArray(n)||(n&&(on[0]=n.toString()),n=on);for(var l=0;l<n.length;l++){var p=bn(e,n[l],o||i.handleEvent,!1,i.h||i);if(!p)break;i.g[p.key]=p}}function Gr(i){Nr(i.g,function(e,n){this.g.hasOwnProperty(n)&&tt(e)},i),i.g={}}function un(){this.g=!0}function bi(i,e,n,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ni(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var o=n[i];if(!(2>o.length)){var l=o[1];if(Array.isArray(l)&&!(1>l.length)){var p=l[0];if("noop"!=p&&"stop"!=p&&"close"!=p)for(var v=1;v<l.length;v++)l[v]=""}}}return ln(n)}catch{return e}}(i,n)+(o?" "+o:"")})}Ft.prototype.M=function(){Ft.X.M.call(this),Gr(this)},Ft.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},un.prototype.Aa=function(){this.g=!1},un.prototype.info=function(){};var Ii={},fi=null;function Oi(){return fi=fi||new ge}function ri(i){ct.call(this,Ii.Pa,i)}function ss(i){const e=Oi();Xe(e,new ri(e))}function Tr(i,e){ct.call(this,Ii.STAT_EVENT,i),this.stat=e}function Ie(i){const e=Oi();Xe(e,new Tr(e,i))}function At(i,e){ct.call(this,Ii.Qa,i),this.size=e}function oe(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return pe.setTimeout(function(){i()},e)}Ii.Pa="serverreachability",Ge(ri,ct),Ii.STAT_EVENT="statevent",Ge(Tr,ct),Ii.Qa="timingevent",Ge(At,ct);var ke={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},yt={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Zt(){}function dr(){}Zt.prototype.h=null;var ms,pi={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Fr(){ct.call(this,"d")}function gi(){ct.call(this,"c")}function ki(){}function xs(i,e,n,o){this.l=i,this.j=e,this.m=n,this.U=o||1,this.S=new Ft(this),this.O=no,this.T=new Y(i=Zn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new mi}function mi(){this.i=null,this.g="",this.h=!1}Ge(Fr,ct),Ge(gi,ct),Ge(ki,Zt),ki.prototype.g=function(){return new XMLHttpRequest},ki.prototype.i=function(){return{}},ms=new ki;var no=45e3,ca={},wo={};function Eo(i,e,n){i.K=1,i.v=as(wi(e)),i.s=n,i.P=!0,ro(i,null)}function ro(i,e){i.F=Date.now(),bt(i),i.A=wi(i.v);var n=i.A,o=i.U;Array.isArray(o)||(o=[String(o)]),Xo(n.i,"t",o),i.C=0,n=i.l.H,i.h=new mi,i.g=Za(i.l,n?e:null,!i.s),0<i.N&&(i.L=new Ke(Ye(i.La,i,i.g),i.N)),Fn(i.S,i.g,"readystatechange",i.ib),e=i.H?_i(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),ss(),function si(i,e,n,o,l,p){i.info(function(){if(i.g)if(p)for(var v="",O=p.split("&"),q=0;q<O.length;q++){var ne=O[q].split("=");if(1<ne.length){var Ee=ne[0];ne=ne[1];var ze=Ee.split("_");v=2<=ze.length&&"type"==ze[1]?v+(Ee+"=")+ne+"&":v+(Ee+"=redacted&")}}else v=null;else v=p;return"XMLHTTP REQ ("+o+") [attempt "+l+"]: "+e+"\n"+n+"\n"+v})}(i.j,i.u,i.A,i.m,i.U,i.s)}function os(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function at(i,e,n){let l,o=!0;for(;!i.I&&i.C<n.length;){if(l=et(i,n),l==wo){4==e&&(i.o=4,Ie(14),o=!1),bi(i.j,i.m,null,"[Incomplete Response]");break}if(l==ca){i.o=4,Ie(15),bi(i.j,i.m,n,"[Invalid Chunk]"),o=!1;break}bi(i.j,i.m,l,null),oi(i,l)}os(i)&&l!=wo&&l!=ca&&(i.h.g="",i.C=0),4!=e||0!=n.length||i.h.h||(i.o=1,Ie(16),o=!1),i.i=i.i&&o,o?0<n.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),ha(e),e.K=!0,Ie(11))):(bi(i.j,i.m,n,"[Invalid Chunked Response]"),Yn(i),En(i))}function et(i,e){var n=i.C,o=e.indexOf("\n",n);return-1==o?wo:(n=Number(e.substring(n,o)),isNaN(n)?ca:(o+=1)+n>e.length?wo:(e=e.substr(o,n),i.C=o+n,e))}function bt(i){i.V=Date.now()+i.O,Ut(i,i.O)}function Ut(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=oe(Ye(i.gb,i),e)}function sn(i){i.B&&(pe.clearTimeout(i.B),i.B=null)}function En(i){0==i.l.G||i.I||Ro(i.l,i)}function Yn(i){sn(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,W(i.T),Gr(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function oi(i,e){try{var n=i.l;if(0!=n.G&&(n.g==i||ho(n.h,i)))if(!i.J&&ho(n.h,i)&&3==n.G){try{var o=n.Fa.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var l=o;if(0==l[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<i.F))break e;fa(n),he(n)}Ys(n),Ie(18)}}else n.Ba=l[1],0<n.Ba-n.T&&37500>l[2]&&n.L&&0==n.A&&!n.v&&(n.v=oe(Ye(n.cb,n),6e3));if(1>=Vs(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else so(n,11)}else if((i.J||n.g==i)&&fa(n),!je(e))for(l=n.Fa.g.parse(e),e=0;e<l.length;e++){let ne=l[e];if(n.T=ne[0],ne=ne[1],2==n.G)if("c"==ne[0]){n.I=ne[1],n.ka=ne[2];const Ee=ne[3];null!=Ee&&(n.ma=Ee,n.j.info("VER="+n.ma));const ze=ne[4];null!=ze&&(n.Ca=ze,n.j.info("SVER="+n.Ca));const Dt=ne[5];null!=Dt&&"number"==typeof Dt&&0<Dt&&(n.J=o=1.5*Dt,n.j.info("backChannelRequestTimeoutMs_="+o)),o=n;const qt=i.g;if(qt){const en=qt.g?qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(en){var p=o.h;p.g||-1==en.indexOf("spdy")&&-1==en.indexOf("quic")&&-1==en.indexOf("h2")||(p.j=p.l,p.g=new Set,p.h&&($i(p,p.h),p.h=null))}if(o.D){const qn=qt.g?qt.g.getResponseHeader("X-HTTP-Session-Id"):null;qn&&(o.za=qn,Lr(o.F,o.D,qn))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-i.F,n.j.info("Handshake RTT: "+n.P+"ms"));var v=i;if((o=n).sa=No(o,o.H?o.ka:null,o.V),v.J){Hr(o.h,v);var O=v,q=o.J;q&&O.setTimeout(q),O.B&&(sn(O),bt(O)),o.g=v}else zo(o);0<n.i.length&&$n(n)}else"stop"!=ne[0]&&"close"!=ne[0]||so(n,7);else 3==n.G&&("stop"==ne[0]||"close"==ne[0]?"stop"==ne[0]?so(n,7):U(n):"noop"!=ne[0]&&n.l&&n.l.wa(ne),n.A=0)}ss()}catch{}}function Gs(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Pe(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var n=function es(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(Pe(i)||"string"==typeof i){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const o in i)e[n++]=o;return e}}}(i),o=function Qr(i){if(i.W&&"function"==typeof i.W)return i.W();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(Pe(i)){for(var e=[],n=i.length,o=0;o<n;o++)e.push(i[o]);return e}for(o in e=[],n=0,i)e[n++]=i[o];return e}(i),l=o.length,p=0;p<l;p++)e.call(void 0,o[p],n&&n[p],i)}(fe=xs.prototype).setTimeout=function(i){this.O=i},fe.ib=function(i){i=i.target;const e=this.L;e&&3==Ks(i)?e.l():this.La(i)},fe.La=function(i){try{if(i==this.g)e:{const Ee=Ks(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>Ee)&&(3!=Ee||Zn||this.g&&(this.h.h||this.g.fa()||Zo(this.g)))){this.I||4!=Ee||7==e||ss(),sn(this);var n=this.g.aa();this.Y=n;t:if(os(this)){var o=Zo(this.g);i="";var l=o.length,p=4==Ks(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Yn(this),En(this);var v="";break t}this.h.i=new pe.TextDecoder}for(e=0;e<l;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:p&&e==l-1});o.splice(0,l),this.h.g+=i,this.C=0,v=this.h.g}else v=this.g.fa();if(this.i=200==n,function vi(i,e,n,o,l,p,v){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+l+"]: "+e+"\n"+n+"\n"+p+" "+v})}(this.j,this.u,this.A,this.m,this.U,Ee,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var O,q=this.g;if((O=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!je(O)){var ne=O;break t}}ne=null}if(!(n=ne)){this.i=!1,this.o=3,Ie(12),Yn(this),En(this);break e}bi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,oi(this,n)}this.P?(at(this,Ee,v),Zn&&this.i&&3==Ee&&(Fn(this.S,this.T,"tick",this.hb),this.T.start())):(bi(this.j,this.m,v,null),oi(this,v)),4==Ee&&Yn(this),this.i&&!this.I&&(4==Ee?Ro(this.l,this):(this.i=!1,bt(this)))}else 400==n&&0<v.indexOf("Unknown SID")?(this.o=3,Ie(12)):(this.o=0,Ie(13)),Yn(this),En(this)}}}catch{}},fe.hb=function(){if(this.g){var i=Ks(this.g),e=this.g.fa();this.C<e.length&&(sn(this),at(this,i,e),this.i&&4!=i&&bt(this))}},fe.cancel=function(){this.I=!0,Yn(this)},fe.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function Xi(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ss(),Ie(17)),Yn(this),this.o=2,En(this)):Ut(this,this.V-i)};var Bi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vi(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Vi){this.h=void 0!==e?e:i.h,Ho(this,i.j),this.s=i.s,this.g=i.g,Os(this,i.m),this.l=i.l,e=i.i;var n=new Ei;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Ti(this,n),this.o=i.o}else i&&(n=String(i).match(Bi))?(this.h=!!e,Ho(this,n[1]||"",!0),this.s=ai(n[2]||""),this.g=ai(n[3]||"",!0),Os(this,n[4]),this.l=ai(n[5]||"",!0),Ti(this,n[6]||"",!0),this.o=ai(n[7]||"")):(this.h=!!e,this.i=new Ei(null,this.h))}function wi(i){return new Vi(i)}function Ho(i,e,n){i.j=n?ai(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Os(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Ti(i,e,n){e instanceof Ei?(i.i=e,function Ci(i,e){e&&!i.j&&(Wi(i),i.i=null,i.g.forEach(function(n,o){var l=o.toLowerCase();o!=l&&(ji(this,o),Xo(this,l,n))},i)),i.j=e}(i.i,i.h)):(n||(e=Is(e,ls)),i.i=new Ei(e,i.h))}function Lr(i,e,n){i.i.set(e,n)}function as(i){return Lr(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function ai(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Is(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,Us),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Us(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Vi.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Is(e,ko,!0),":");var n=this.g;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Is(e,ko,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&i.push("/"),i.push(Is(n,"/"==n.charAt(0)?Jo:ks,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",Is(n,ys)),i.join("")};var ko=/[#\/\?@]/g,ks=/[#\?:]/g,Jo=/[#\?]/g,ls=/[#\?@]/g,ys=/#/g;function Ei(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Wi(i){i.g||(i.g=new Map,i.h=0,i.i&&function Co(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var o=i[n].indexOf("="),l=null;if(0<=o){var p=i[n].substring(0,o);l=i[n].substring(o+1)}else p=i[n];e(p,l?decodeURIComponent(l.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function ji(i,e){Wi(i),e=Ws(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Bs(i,e){return Wi(i),e=Ws(i,e),i.g.has(e)}function Xo(i,e,n){ji(i,e),0<n.length&&(i.i=null,i.g.set(Ws(i,e),qe(n)),i.h+=n.length)}function Ws(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Po(i){this.l=i||Pi,i=pe.PerformanceNavigationTiming?0<(i=pe.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(pe.g&&pe.g.Ga&&pe.g.Ga()&&pe.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(fe=Ei.prototype).add=function(i,e){Wi(this),this.i=null,i=Ws(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},fe.forEach=function(i,e){Wi(this),this.g.forEach(function(n,o){n.forEach(function(l){i.call(e,l,o,this)},this)},this)},fe.oa=function(){Wi(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let o=0;o<e.length;o++){const l=i[o];for(let p=0;p<l.length;p++)n.push(e[o])}return n},fe.W=function(i){Wi(this);let e=[];if("string"==typeof i)Bs(this,i)&&(e=e.concat(this.g.get(Ws(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e},fe.set=function(i,e){return Wi(this),this.i=null,Bs(this,i=Ws(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},fe.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},fe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var o=e[n];const p=encodeURIComponent(String(o)),v=this.W(o);for(o=0;o<v.length;o++){var l=p;""!==v[o]&&(l+="="+encodeURIComponent(String(v[o]))),i.push(l)}}return this.i=i.join("&")};var Pi=10;function Mi(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Vs(i){return i.h?1:i.g?i.g.size:0}function ho(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function $i(i,e){i.g?i.g.add(e):i.h=e}function Hr(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Do(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.D);return e}return qe(i.i)}function _s(){}function ve(){this.g=new _s}function L(i,e,n){const o=n||"";try{Gs(i,function(l,p){let v=l;st(l)&&(v=ln(l)),e.push(o+p+"="+encodeURIComponent(v))})}catch(l){throw e.push(o+"type="+encodeURIComponent("_badmap")),l}}function Q(i,e,n,o,l){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,l(o)}catch{}}function ue(i){this.l=i.ac||null,this.j=i.jb||!1}function Ze(i,e){ge.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Et,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Po.prototype.cancel=function(){if(this.i=Do(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},_s.prototype.stringify=function(i){return pe.JSON.stringify(i,void 0)},_s.prototype.parse=function(i){return pe.JSON.parse(i,void 0)},Ge(ue,Zt),ue.prototype.g=function(){return new Ze(this.l,this.j)},ue.prototype.i=function(i){return function(){return i}}({}),Ge(Ze,ge);var Et=0;function Vt(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function fn(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Ln(i)}function Ln(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(fe=Ze.prototype).open=function(i,e){if(this.readyState!=Et)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Ln(this)},fe.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||pe).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},fe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,fn(this)),this.readyState=Et},fe.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Ln(this)),this.g&&(this.readyState=3,Ln(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof pe.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Vt(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},fe.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?fn(this):Ln(this),3==this.readyState&&Vt(this)}},fe.Va=function(i){this.g&&(this.response=this.responseText=i,fn(this))},fe.Ua=function(i){this.g&&(this.response=i,fn(this))},fe.ga=function(){this.g&&fn(this)},fe.setRequestHeader=function(i,e){this.v.append(i,e)},fe.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},fe.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(Ze.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var jn=pe.JSON.parse;function zn(i){ge.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=us,this.K=this.L=!1}Ge(zn,ge);var us="",jt=/^https?$/i,Xn=["POST","PUT"];function qs(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Ri(i),$o(i)}function Ri(i){i.D||(i.D=!0,Xe(i,"complete"),Xe(i,"error"))}function ei(i){if(i.h&&typeof Fe<"u"&&(!i.C[1]||4!=Ks(i)||2!=i.aa()))if(i.v&&4==Ks(i))te(i.Ha,0,i);else if(Xe(i,"readystatechange"),4==Ks(i)){i.h=!1;try{const O=i.aa();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var o;if(o=0===O){var l=String(i.H).match(Bi)[1]||null;if(!l&&pe.self&&pe.self.location){var p=pe.self.location.protocol;l=p.substr(0,p.length-1)}o=!jt.test(l?l.toLowerCase():"")}n=o}if(n)Xe(i,"complete"),Xe(i,"success");else{i.m=6;try{var v=2<Ks(i)?i.g.statusText:""}catch{v=""}i.j=v+" ["+i.aa()+"]",Ri(i)}}finally{$o(i)}}}function $o(i,e){if(i.g){Ts(i);const n=i.g,o=i.C[0]?be:null;i.g=null,i.C=null,e||Xe(i,"ready");try{n.onreadystatechange=o}catch{}}}function Ts(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(pe.clearTimeout(i.A),i.A=null)}function Ks(i){return i.g?i.g.readyState:0}function Zo(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case us:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function da(i){let e="";return Nr(i,function(n,o){e+=o,e+=":",e+=n,e+="\r\n"}),e}function fo(i,e,n){e:{for(o in n){var o=!1;break e}o=!0}o||(n=da(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):Lr(i,e,n))}function G(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function H(i){this.Ca=0,this.i=[],this.j=new un,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=G("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=G("baseRetryDelayMs",5e3,i),this.bb=G("retryDelaySeedMs",1e4,i),this.$a=G("forwardChannelMaxRetries",2,i),this.ta=G("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new Po(i&&i.concurrentRequestLimit),this.Fa=new ve,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function U(i){if(Ot(i),3==i.G){var e=i.U++,n=wi(i.F);Lr(n,"SID",i.I),Lr(n,"RID",e),Lr(n,"TYPE","terminate"),Ss(i,n),(e=new xs(i,i.j,e,void 0)).K=2,e.v=as(wi(n)),n=!1,pe.navigator&&pe.navigator.sendBeacon&&(n=pe.navigator.sendBeacon(e.v.toString(),"")),!n&&pe.Image&&((new Image).src=e.v,n=!0),n||(e.g=Za(e.l,null),e.g.da(e.v)),e.F=Date.now(),bt(e)}$a(i)}function he(i){i.g&&(ha(i),i.g.cancel(),i.g=null)}function Ot(i){he(i),i.u&&(pe.clearTimeout(i.u),i.u=null),fa(i),i.h.cancel(),i.m&&("number"==typeof i.m&&pe.clearTimeout(i.m),i.m=null)}function $n(i){Mi(i.h)||i.m||(i.m=!0,we(i.Ja,i),i.C=0)}function Ps(i,e){var n;n=e?e.m:i.U++;const o=wi(i.F);Lr(o,"SID",i.I),Lr(o,"RID",n),Lr(o,"AID",i.T),Ss(i,o),i.o&&i.s&&fo(o,i.o,i.s),n=new xs(i,i.j,n,i.C+1),null===i.o&&(n.H=i.s),e&&(i.i=e.D.concat(i.i)),e=io(i,n,1e3),n.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),$i(i.h,n),Eo(n,o,e)}function Ss(i,e){i.ia&&Nr(i.ia,function(n,o){Lr(e,o,n)}),i.l&&Gs({},function(n,o){Lr(e,o,n)})}function io(i,e,n){n=Math.min(i.i.length,n);var o=i.l?Ye(i.l.Ra,i.l,i):null;e:{var l=i.i;let p=-1;for(;;){const v=["count="+n];-1==p?0<n?(p=l[0].h,v.push("ofs="+p)):p=0:v.push("ofs="+p);let O=!0;for(let q=0;q<n;q++){let ne=l[q].h;const Ee=l[q].g;if(ne-=p,0>ne)p=Math.max(0,l[q].h-100),O=!1;else try{L(Ee,v,"req"+ne+"_")}catch{o&&o(Ee)}}if(O){o=v.join("&");break e}}}return i=i.i.splice(0,n),e.D=i,o}function zo(i){i.g||i.u||(i.Z=1,we(i.Ia,i),i.A=0)}function Ys(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=oe(Ye(i.Ia,i),pa(i,i.A)),i.A++,0))}function ha(i){null!=i.B&&(pe.clearTimeout(i.B),i.B=null)}function ea(i){i.g=new xs(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=wi(i.sa);Lr(e,"RID","rpc"),Lr(e,"SID",i.I),Lr(e,"CI",i.L?"0":"1"),Lr(e,"AID",i.T),Lr(e,"TYPE","xmlhttp"),Ss(i,e),i.o&&i.s&&fo(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var n=i.g;i=i.ka,n.K=1,n.v=as(wi(e)),n.s=null,n.P=!0,ro(n,i)}function fa(i){null!=i.v&&(pe.clearTimeout(i.v),i.v=null)}function Ro(i,e){var n=null;if(i.g==e){fa(i),ha(i),i.g=null;var o=2}else{if(!ho(i.h,e))return;n=e.D,Hr(i.h,e),o=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==o){n=e.s?e.s.length:0,e=Date.now()-e.F;var l=i.C;Xe(o=Oi(),new At(o,n)),$n(i)}else zo(i);else if(3==(l=e.o)||0==l&&0<i.pa||!(1==o&&function Jr(i,e){return!(Vs(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=oe(Ye(i.Ja,i,e),pa(i,i.C)),i.C++,0)))}(i,e)||2==o&&Ys(i)))switch(n&&0<n.length&&(e=i.h,e.i=e.i.concat(n)),l){case 1:so(i,5);break;case 4:so(i,10);break;case 3:so(i,6);break;default:so(i,2)}}function pa(i,e){let n=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(n*=2),n*e}function so(i,e){if(i.j.info("Error code "+e),2==e){var n=null;i.l&&(n=null);var o=Ye(i.kb,i);n||(n=new Vi("//www.google.com/images/cleardot.gif"),pe.location&&"http"==pe.location.protocol||Ho(n,"https"),as(n)),function P(i,e){const n=new un;if(pe.Image){const o=new Image;o.onload=Gt(Q,n,o,"TestLoadImage: loaded",!0,e),o.onerror=Gt(Q,n,o,"TestLoadImage: error",!1,e),o.onabort=Gt(Q,n,o,"TestLoadImage: abort",!1,e),o.ontimeout=Gt(Q,n,o,"TestLoadImage: timeout",!1,e),pe.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(n.toString(),o)}else Ie(2);i.G=0,i.l&&i.l.va(e),$a(i),Ot(i)}function $a(i){if(i.G=0,i.la=[],i.l){const e=Do(i.h);(0!=e.length||0!=i.i.length)&&(it(i.la,e),it(i.la,i.i),i.h.i.length=0,qe(i.i),i.i.length=0),i.l.ua()}}function No(i,e,n){var o=n instanceof Vi?wi(n):new Vi(n,void 0);if(""!=o.g)e&&(o.g=e+"."+o.g),Os(o,o.m);else{var l=pe.location;o=l.protocol,e=e?e+"."+l.hostname:l.hostname,l=+l.port;var p=new Vi(null,void 0);o&&Ho(p,o),e&&(p.g=e),l&&Os(p,l),n&&(p.l=n),o=p}return e=i.za,(n=i.D)&&e&&Lr(o,n,e),Lr(o,"VER",i.ma),Ss(i,o),o}function Za(i,e,n){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new zn(n&&i.Da&&!i.ra?new ue({jb:!0}):i.ra)).Ka(i.H),e}function R(){}function ee(){if(Rt&&!(10<=Number(yr)))throw Error("Environmental error: no available transport.")}function V(i,e){ge.call(this),this.g=new H(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!je(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!je(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Ct(this)}function le(i){Fr.call(this);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Ue(){gi.call(this),this.status=1}function Ct(i){this.g=i}(fe=zn.prototype).Ka=function(i){this.L=i},fe.da=function(i,e,n,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ms.g(),this.C=function Xt(i){return i.h||(i.h=i.i())}(this.u?this.u:ms),this.g.onreadystatechange=Ye(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(p){return void qs(this,p)}if(i=n||"",n=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var l in o)n.set(l,o[l]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const p of o.keys())n.set(p,o.get(p))}o=Array.from(n.keys()).find(p=>"content-type"==p.toLowerCase()),l=pe.FormData&&i instanceof pe.FormData,!(0<=Pt(Xn,e))||o||l||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[p,v]of n)this.g.setRequestHeader(p,v);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ts(this),0<this.B&&((this.K=function cs(i){return Rt&&function sr(){return function Mn(i){var e=ir;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=pt(String(dn)).split("."),n=pt("9").split("."),o=Math.max(e.length,n.length);for(let v=0;0==i&&v<o;v++){var l=e[v]||"",p=n[v]||"";do{if(l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],p=/(\d*)(\D*)(.*)/.exec(p)||["","","",""],0==l[0].length&&0==p[0].length)break;i=dt(0==l[1].length?0:parseInt(l[1],10),0==p[1].length?0:parseInt(p[1],10))||dt(0==l[2].length,0==p[2].length)||dt(l[2],p[2]),l=l[3],p=p[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ye(this.qa,this)):this.A=te(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(p){qs(this,p)}},fe.qa=function(){typeof Fe<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xe(this,"timeout"),this.abort(8))},fe.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Xe(this,"complete"),Xe(this,"abort"),$o(this))},fe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),$o(this,!0)),zn.X.M.call(this)},fe.Ha=function(){this.s||(this.F||this.v||this.l?ei(this):this.fb())},fe.fb=function(){ei(this)},fe.aa=function(){try{return 2<Ks(this)?this.g.status:-1}catch{return-1}},fe.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},fe.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),jn(e)}},fe.Ea=function(){return this.m},fe.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(fe=H.prototype).ma=8,fe.G=1,fe.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const l=new xs(this,this.j,i,void 0);let p=this.s;if(this.S&&(p?(p=_i(p),_r(p,this.S)):p=this.S),null!==this.o||this.N||(l.H=p,p=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){var o=this.i[n];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=n;break e}if(4096===e||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=io(this,l,e),Lr(n=wi(this.F),"RID",i),Lr(n,"CVER",22),this.D&&Lr(n,"X-HTTP-Session-Id",this.D),Ss(this,n),p&&(this.N?e="headers="+encodeURIComponent(String(da(p)))+"&"+e:this.o&&fo(n,this.o,p)),$i(this.h,l),this.Ya&&Lr(n,"TYPE","init"),this.O?(Lr(n,"$req",e),Lr(n,"SID","null"),l.Z=!0,Eo(l,n,null)):Eo(l,n,e),this.G=2}}else 3==this.G&&(i?Ps(this,i):0==this.i.length||Mi(this.h)||Ps(this))},fe.Ia=function(){if(this.u=null,ea(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=oe(Ye(this.eb,this),i)}},fe.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ie(10),he(this),ea(this))},fe.cb=function(){null!=this.v&&(this.v=null,he(this),Ys(this),Ie(19))},fe.kb=function(i){i?(this.j.info("Successfully pinged google.com"),Ie(2)):(this.j.info("Failed to ping google.com"),Ie(1))},(fe=R.prototype).xa=function(){},fe.wa=function(){},fe.va=function(){},fe.ua=function(){},fe.Ra=function(){},ee.prototype.g=function(i,e){return new V(i,e)},Ge(V,ge),V.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,n=this.h||void 0;Ie(0),i.V=e,i.ia=n||{},i.L=i.Y,i.F=No(i,null,i.V),$n(i)},V.prototype.close=function(){U(this.g)},V.prototype.u=function(i){var e=this.g;if("string"==typeof i){var n={};n.__data__=i,i=n}else this.v&&((n={}).__data__=ln(i),i=n);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&$n(e)},V.prototype.M=function(){this.g.l=null,delete this.j,U(this.g),delete this.g,V.X.M.call(this)},Ge(le,Fr),Ge(Ue,gi),Ge(Ct,R),Ct.prototype.xa=function(){Xe(this.g,"a")},Ct.prototype.wa=function(i){Xe(this.g,new le(i))},Ct.prototype.va=function(i){Xe(this.g,new Ue)},Ct.prototype.ua=function(){Xe(this.g,"b")},ee.prototype.createWebChannel=ee.prototype.g,V.prototype.send=V.prototype.u,V.prototype.open=V.prototype.m,V.prototype.close=V.prototype.close,ke.NO_ERROR=0,ke.TIMEOUT=8,ke.HTTP_ERROR=6,yt.COMPLETE="complete",dr.EventType=pi,pi.OPEN="a",pi.CLOSE="b",pi.ERROR="c",pi.MESSAGE="d",ge.prototype.listen=ge.prototype.N,zn.prototype.listenOnce=zn.prototype.O,zn.prototype.getLastError=zn.prototype.Oa,zn.prototype.getLastErrorCode=zn.prototype.Ea,zn.prototype.getStatus=zn.prototype.aa,zn.prototype.getResponseJson=zn.prototype.Sa,zn.prototype.getResponseText=zn.prototype.fa,zn.prototype.send=zn.prototype.da,zn.prototype.setWithCredentials=zn.prototype.Ka;var Nt=_e.createWebChannelTransport=function(){return new ee},Bn=_e.getStatEventTarget=function(){return Oi()},$r=_e.ErrorCode=ke,Or=_e.EventType=yt,ii=_e.Event=Ii,Wr=_e.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},ds=_e.FetchXmlHttpFactory=ue,qr=_e.WebChannel=dr,Ni=_e.XhrIo=zn;const Io="@firebase/firestore";class ci{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ci.UNAUTHENTICATED=new ci(null),ci.GOOGLE_CREDENTIALS=new ci("google-credentials-uid"),ci.FIRST_PARTY=new ci("first-party-uid"),ci.MOCK_USER=new ci("mock-user");let ts="9.13.0";const Kr=new d.Yd("@firebase/firestore");function vs(){return Kr.logLevel}function Rs(i){Kr.setLogLevel(i)}function tn(i,...e){if(Kr.logLevel<=d.in.DEBUG){const n=e.map(ga);Kr.debug(`Firestore (${ts}): ${i}`,...n)}}function Zi(i,...e){if(Kr.logLevel<=d.in.ERROR){const n=e.map(ga);Kr.error(`Firestore (${ts}): ${i}`,...n)}}function li(i,...e){if(Kr.logLevel<=d.in.WARN){const n=e.map(ga);Kr.warn(`Firestore (${ts}): ${i}`,...n)}}function ga(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Wn(i="Unexpected state"){const e=`FIRESTORE (${ts}) INTERNAL ASSERTION FAILED: `+i;throw Zi(e),new Error(e)}function or(i,e){i||Wn()}function gl(i,e){i||Wn()}function kn(i,e){return i}const Mt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rn extends de.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class bs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class tl{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Vl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ci.UNAUTHENTICATED))}shutdown(){}}class jl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class hs{constructor(e){this.t=e,this.currentUser=ci.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var o=this;let l=this.i;const p=ne=>this.i!==l?(l=this.i,n(ne)):Promise.resolve();let v=new bs;this.o=()=>{this.i++,this.currentUser=this.u(),v.resolve(),v=new bs,e.enqueueRetryable(()=>p(this.currentUser))};const O=()=>{const ne=v;e.enqueueRetryable((0,h.Z)(function*(){yield ne.promise,yield p(o.currentUser)}))},q=ne=>{tn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=ne,this.auth.addAuthTokenListener(this.o),O()};this.t.onInit(ne=>q(ne)),setTimeout(()=>{if(!this.auth){const ne=this.t.getImmediate({optional:!0});ne?q(ne):(tn("FirebaseAuthCredentialsProvider","Auth not yet detected"),v.resolve(),v=new bs)}},0),O()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(o=>this.i!==e?(tn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(or("string"==typeof o.accessToken),new tl(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return or(null===e||"string"==typeof e),new ci(e)}}class iu{constructor(e,n,o,l){this.h=e,this.l=n,this.m=o,this.g=l,this.type="FirstParty",this.user=ci.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(or(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class ta{constructor(e,n,o,l){this.h=e,this.l=n,this.m=o,this.g=l}getToken(){return Promise.resolve(new iu(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(ci.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ml{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class La{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const o=p=>{null!=p.error&&tn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${p.error.message}`);const v=p.token!==this.A;return this.A=p.token,tn("FirebaseAppCheckTokenProvider",`Received ${v?"new":"existing"} token.`),v?n(p.token):Promise.resolve()};this.o=p=>{e.enqueueRetryable(()=>o(p))};const l=p=>{tn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=p,this.appCheck.addTokenListener(this.o)};this.T.onInit(p=>l(p)),setTimeout(()=>{if(!this.appCheck){const p=this.T.getImmediate({optional:!0});p?l(p):tn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(or("string"==typeof n.token),this.A=n.token,new ml(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function nl(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let o=0;o<i;o++)n[o]=Math.floor(256*Math.random());return n}class Fi{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const l=nl(40);for(let p=0;p<l.length;++p)o.length<20&&l[p]<n&&(o+=e.charAt(l[p]%e.length))}return o}}function Er(i,e){return i<e?-1:i>e?1:0}function qi(i,e,n){return i.length===e.length&&i.every((o,l)=>n(o,e[l]))}function Ga(i){return i+"\0"}class ti{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new rn(Mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new rn(Mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new rn(Mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new rn(Mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ti.fromMillis(Date.now())}static fromDate(e){return ti.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new ti(n,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Er(this.nanoseconds,e.nanoseconds):Er(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class pr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new pr(e)}static min(){return new pr(new ti(0,0))}static max(){return new pr(new ti(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Sa{constructor(e,n,o){void 0===n?n=0:n>e.length&&Wn(),void 0===o?o=e.length-n:o>e.length-n&&Wn(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return 0===Sa.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Sa?e.forEach(o=>{n.push(o)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let l=0;l<o;l++){const p=e.get(l),v=n.get(l);if(p<v)return-1;if(p>v)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Pr extends Sa{construct(e,n,o){return new Pr(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new rn(Mt.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter(l=>l.length>0))}return new Pr(n)}static emptyPath(){return new Pr([])}}const Wa=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Li extends Sa{construct(e,n,o){return new Li(e,n,o)}static isValidIdentifier(e){return Wa.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Li.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Li(["__name__"])}static fromServerFormat(e){const n=[];let o="",l=0;const p=()=>{if(0===o.length)throw new rn(Mt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let v=!1;for(;l<e.length;){const O=e[l];if("\\"===O){if(l+1===e.length)throw new rn(Mt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const q=e[l+1];if("\\"!==q&&"."!==q&&"`"!==q)throw new rn(Mt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=q,l+=2}else"`"===O?(v=!v,l++):"."!==O||v?(o+=O,l++):(p(),l++)}if(p(),v)throw new rn(Mt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Li(n)}static emptyPath(){return new Li([])}}class yn{constructor(e){this.path=e}static fromPath(e){return new yn(Pr.fromString(e))}static fromName(e){return new yn(Pr.fromString(e).popFirst(5))}static empty(){return new yn(Pr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Pr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Pr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new yn(new Pr(e.slice()))}}class Go{constructor(e,n,o,l){this.indexId=e,this.collectionGroup=n,this.fields=o,this.indexState=l}}function na(i){return i.fields.find(e=>2===e.kind)}function ra(i){return i.fields.filter(e=>2!==e.kind)}Go.UNKNOWN_ID=-1;class ma{constructor(e,n){this.fieldPath=e,this.kind=n}}class ya{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ya(0,fs.min())}}function To(i,e){const n=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,l=pr.fromTimestamp(1e9===o?new ti(n+1,0):new ti(n,o));return new fs(l,yn.empty(),e)}function Aa(i){return new fs(i.readTime,i.key,-1)}class fs{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new fs(pr.min(),yn.empty(),-1)}static max(){return new fs(pr.max(),yn.empty(),-1)}}function js(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=yn.comparator(i.documentKey,e.documentKey),0!==n?n:Er(i.largestBatchId,e.largestBatchId))}const Al="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _a{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ia(i){return Di.apply(this,arguments)}function Di(){return Di=(0,h.Z)(function*(i){if(i.code!==Mt.FAILED_PRECONDITION||i.message!==Al)throw i;tn("LocalStore","Unexpectedly lost primary lease")}),Di.apply(this,arguments)}class lt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Wn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new lt((o,l)=>{this.nextCallback=p=>{this.wrapSuccess(e,p).next(o,l)},this.catchCallback=p=>{this.wrapFailure(n,p).next(o,l)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof lt?n:lt.resolve(n)}catch(n){return lt.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):lt.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):lt.reject(n)}static resolve(e){return new lt((n,o)=>{n(e)})}static reject(e){return new lt((n,o)=>{o(e)})}static waitFor(e){return new lt((n,o)=>{let l=0,p=0,v=!1;e.forEach(O=>{++l,O.next(()=>{++p,v&&p===l&&n()},q=>o(q))}),v=!0,p===l&&n()})}static or(e){let n=lt.resolve(!1);for(const o of e)n=n.next(l=>l?lt.resolve(l):o());return n}static forEach(e,n){const o=[];return e.forEach((l,p)=>{o.push(n.call(this,l,p))}),this.waitFor(o)}static mapArray(e,n){return new lt((o,l)=>{const p=e.length,v=new Array(p);let O=0;for(let q=0;q<p;q++){const ne=q;n(e[ne]).next(Ee=>{v[ne]=Ee,++O,O===p&&o(v)},Ee=>l(Ee))}})}static doWhile(e,n){return new lt((o,l)=>{const p=()=>{!0===e()?n().next(()=>{p()},l):o()};p()})}}class zi{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.P=new bs,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{n.error?this.P.reject(new Qs(e,n.error)):this.P.resolve()},this.transaction.onerror=o=>{const l=ui(o.target.error);this.P.reject(new Qs(e,l))}}static open(e,n,o,l){try{return new zi(n,e.transaction(l,o))}catch(p){throw new Qs(n,p)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(tn("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Ua(n)}}class Hs{constructor(e,n,o){this.name=e,this.version=n,this.S=o,12.2===Hs.D((0,de.z$)())&&Zi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return tn("SimpleDb","Removing database:",e),xi(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,de.hl)())return!1;if(Hs.N())return!0;const e=(0,de.z$)(),n=Hs.D(e),o=0<n&&n<10,l=Hs.k(e),p=0<l&&l<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||p)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static k(e){const n=e.match(/Android ([\d.]+)/i),o=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(o)}F(e){var n=this;return(0,h.Z)(function*(){return n.db||(tn("SimpleDb","Opening database:",n.name),n.db=yield new Promise((o,l)=>{const p=indexedDB.open(n.name,n.version);p.onsuccess=v=>{o(v.target.result)},p.onblocked=()=>{l(new Qs(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},p.onerror=v=>{const O=v.target.error;l("VersionError"===O.name?new rn(Mt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===O.name?new rn(Mt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+O):new Qs(e,O))},p.onupgradeneeded=v=>{tn("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',v.oldVersion),n.S.$(v.target.result,p.transaction,v.oldVersion,n.version).next(()=>{tn("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=o=>n.B(o)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,o,l){var p=this;return(0,h.Z)(function*(){const v="readonly"===n;let O=0;for(;;){++O;try{p.db=yield p.F(e);const q=zi.open(p.db,e,v?"readonly":"readwrite",o),ne=l(q).next(Ee=>(q.V(),Ee)).catch(Ee=>(q.abort(Ee),lt.reject(Ee))).toPromise();return ne.catch(()=>{}),yield q.v,ne}catch(q){const ne=q,Ee="FirebaseError"!==ne.name&&O<3;if(tn("SimpleDb","Transaction failed with error:",ne.message,"Retrying:",Ee),p.close(),!Ee)return Promise.reject(ne)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Fo{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return xi(this.U.delete())}}class Qs extends rn{constructor(e,n){super(Mt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function oo(i){return"IndexedDbTransactionError"===i.name}class Ua{constructor(e){this.store=e}put(e,n){let o;return void 0!==n?(tn("SimpleDb","PUT",this.store.name,e,n),o=this.store.put(n,e)):(tn("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),xi(o)}add(e){return tn("SimpleDb","ADD",this.store.name,e,e),xi(this.store.add(e))}get(e){return xi(this.store.get(e)).next(n=>(void 0===n&&(n=null),tn("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return tn("SimpleDb","DELETE",this.store.name,e),xi(this.store.delete(e))}count(){return tn("SimpleDb","COUNT",this.store.name),xi(this.store.count())}W(e,n){const o=this.options(e,n);if(o.index||"function"!=typeof this.store.getAll){const l=this.cursor(o),p=[];return this.H(l,(v,O)=>{p.push(O)}).next(()=>p)}{const l=this.store.getAll(o.range);return new lt((p,v)=>{l.onerror=O=>{v(O.target.error)},l.onsuccess=O=>{p(O.target.result)}})}}J(e,n){const o=this.store.getAll(e,null===n?void 0:n);return new lt((l,p)=>{o.onerror=v=>{p(v.target.error)},o.onsuccess=v=>{l(v.target.result)}})}Y(e,n){tn("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,n);o.X=!1;const l=this.cursor(o);return this.H(l,(p,v,O)=>O.delete())}Z(e,n){let o;n?o=e:(o={},n=e);const l=this.cursor(o);return this.H(l,n)}tt(e){const n=this.cursor({});return new lt((o,l)=>{n.onerror=p=>{const v=ui(p.target.error);l(v)},n.onsuccess=p=>{const v=p.target.result;v?e(v.primaryKey,v.value).next(O=>{O?v.continue():o()}):o()}})}H(e,n){const o=[];return new lt((l,p)=>{e.onerror=v=>{p(v.target.error)},e.onsuccess=v=>{const O=v.target.result;if(!O)return void l();const q=new Fo(O),ne=n(O.primaryKey,O.value,q);if(ne instanceof lt){const Ee=ne.catch(ze=>(q.done(),lt.reject(ze)));o.push(Ee)}q.isDone?l():null===q.G?O.continue():O.continue(q.G)}}).next(()=>lt.waitFor(o))}options(e,n){let o;return void 0!==e&&("string"==typeof e?o=e:n=e),{index:o,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const o=this.store.index(e.index);return e.X?o.openKeyCursor(e.range,n):o.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function xi(i){return new lt((e,n)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const l=ui(o.target.error);n(l)}})}let Ma=!1;function ui(i){const e=Hs.D((0,de.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const o=new rn("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ma||(Ma=!0,setTimeout(()=>{throw o},0)),o}}return i}class su{constructor(e,n){this.asyncQueue=e,this.et=n,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var n=this;tn("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,h.Z)(function*(){n.task=null;try{tn("IndexBackiller",`Documents written: ${yield n.et.st()}`)}catch(o){oo(o)?tn("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield ia(o)}yield n.nt(6e4)}))}}class Ml{constructor(e,n){this.localStore=e,this.persistence=n}st(e=50){var n=this;return(0,h.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>n.it(o,e))})()}it(e,n){const o=new Set;let l=n,p=!0;return lt.doWhile(()=>!0===p&&l>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(v=>{if(null!==v&&!o.has(v))return tn("IndexBackiller",`Processing collection: ${v}`),this.rt(e,v,l).next(O=>{l-=O,o.add(v)});p=!1})).next(()=>n-l)}rt(e,n,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(l=>this.localStore.localDocuments.getNextDocuments(e,n,l,o).next(p=>{const v=p.changes;return this.localStore.indexManager.updateIndexEntries(e,v).next(()=>this.ot(l,p)).next(O=>(tn("IndexBackiller",`Updating offset: ${O}`),this.localStore.indexManager.updateCollectionGroup(e,n,O))).next(()=>v.size)}))}ot(e,n){let o=e;return n.changes.forEach((l,p)=>{const v=Aa(p);js(v,o)>0&&(o=v)}),new fs(o.readTime,o.documentKey,Math.max(n.batchId,e.largestBatchId))}}class So{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>n.writeSequenceNumber(o))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function xl(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function xa(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Ol(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}So.at=-1;class Gi{constructor(e,n){this.comparator=e,this.root=n||$s.EMPTY}insert(e,n){return new Gi(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$s.BLACK,null,null))}remove(e){return new Gi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$s.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(0===o)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const l=this.comparator(e,o.key);if(0===l)return n+o.left.size;l<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,o)=>(e(n,o),!1))}toString(){const e=[];return this.inorderTraversal((n,o)=>(e.push(`${n}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Oa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Oa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Oa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Oa(this.root,e,this.comparator,!0)}}class Oa{constructor(e,n,o,l){this.isReverse=l,this.nodeStack=[];let p=1;for(;!e.isEmpty();)if(p=n?o(e.key,n):1,n&&l&&(p*=-1),p<0)e=this.isReverse?e.left:e.right;else{if(0===p){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $s{constructor(e,n,o,l,p){this.key=e,this.value=n,this.color=o??$s.RED,this.left=l??$s.EMPTY,this.right=p??$s.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,l,p){return new $s(e??this.key,n??this.value,o??this.color,l??this.left,p??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let l=this;const p=o(e,l.key);return l=p<0?l.copy(null,null,null,l.left.insert(e,n,o),null):0===p?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,o)),l.fixUp()}removeMin(){if(this.left.isEmpty())return $s.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),0===n(e,l.key)){if(l.right.isEmpty())return $s.EMPTY;o=l.right.min(),l=l.copy(o.key,o.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$s.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$s.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Wn();const e=this.left.check();if(e!==this.right.check())throw Wn();return e+(this.isRed()?0:1)}}$s.EMPTY=null,$s.RED=!0,$s.BLACK=!1,$s.EMPTY=new class{constructor(){this.size=0}get key(){throw Wn()}get value(){throw Wn()}get color(){throw Wn()}get left(){throw Wn()}get right(){throw Wn()}copy(i,e,n,o,l){return this}insert(i,e,n){return new $s(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Si{constructor(e){this.comparator=e,this.data=new Gi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,o)=>(e(n),!1))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const l=o.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let o;for(o=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ws(this.data.getIterator())}getIteratorFrom(e){return new ws(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(o=>{n=n.add(o)}),n}isEqual(e){if(!(e instanceof Si)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,p=o.getNext().key;if(0!==this.comparator(l,p))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Si(this.comparator);return n.data=e,n}}class ws{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qo(i){return i.hasNext()?i.getNext():void 0}class As{constructor(e){this.fields=e,e.sort(Li.comparator)}static empty(){return new As([])}unionWith(e){let n=new Si(Li.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new As(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qi(this.fields,e.fields,(n,o)=>n.isEqual(o))}}function yl(){return typeof atob<"u"}class ps{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new ps(n)}static fromUint8Array(e){const n=function(o){let l="";for(let p=0;p<o.length;++p)l+=String.fromCharCode(o[p]);return l}(e);return new ps(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Er(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ps.EMPTY_BYTE_STRING=new ps("");const Js=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zs(i){if(or(!!i),"string"==typeof i){let e=0;const n=Js.exec(i);if(or(!!n),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Ai(i.seconds),nanos:Ai(i.nanos)}}function Ai(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function po(i){return"string"==typeof i?ps.fromBase64String(i):ps.fromUint8Array(i)}function va(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function D(i){const e=i.mapValue.fields.__previous_value__;return va(e)?D(e):e}function T(i){const e=Zs(i.mapValue.fields.__local_write_time__.timestampValue);return new ti(e.seconds,e.nanos)}class E{constructor(e,n,o,l,p,v,O,q){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=l,this.ssl=p,this.forceLongPolling=v,this.autoDetectLongPolling=O,this.useFetchStreams=q}}class F{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new F("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof F&&e.projectId===this.projectId&&e.database===this.database}}function $(i){return null==i}function ae(i){return 0===i&&1/i==-1/0}function Oe(i){return"number"==typeof i&&Number.isInteger(i)&&!ae(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const Be={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},xt={nullValue:"NULL_VALUE"};function pn(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?va(i)?4:Ca(i)?9007199254740991:10:Wn()}function hr(i,e){if(i===e)return!0;const n=pn(i);if(n!==pn(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return T(i).isEqual(T(e));case 3:return function(o,l){if("string"==typeof o.timestampValue&&"string"==typeof l.timestampValue&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const p=Zs(o.timestampValue),v=Zs(l.timestampValue);return p.seconds===v.seconds&&p.nanos===v.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return l=e,po(i.bytesValue).isEqual(po(l.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,l){return Ai(o.geoPointValue.latitude)===Ai(l.geoPointValue.latitude)&&Ai(o.geoPointValue.longitude)===Ai(l.geoPointValue.longitude)}(i,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return Ai(o.integerValue)===Ai(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const p=Ai(o.doubleValue),v=Ai(l.doubleValue);return p===v?ae(p)===ae(v):isNaN(p)&&isNaN(v)}return!1}(i,e);case 9:return qi(i.arrayValue.values||[],e.arrayValue.values||[],hr);case 10:return function(o,l){const p=o.mapValue.fields||{},v=l.mapValue.fields||{};if(xl(p)!==xl(v))return!1;for(const O in p)if(p.hasOwnProperty(O)&&(void 0===v[O]||!hr(p[O],v[O])))return!1;return!0}(i,e);default:return Wn()}var l}function Un(i,e){return void 0!==(i.values||[]).find(n=>hr(n,e))}function Ur(i,e){if(i===e)return 0;const n=pn(i),o=pn(e);if(n!==o)return Er(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return Er(i.booleanValue,e.booleanValue);case 2:return function(l,p){const v=Ai(l.integerValue||l.doubleValue),O=Ai(p.integerValue||p.doubleValue);return v<O?-1:v>O?1:v===O?0:isNaN(v)?isNaN(O)?0:-1:1}(i,e);case 3:return Ns(i.timestampValue,e.timestampValue);case 4:return Ns(T(i),T(e));case 5:return Er(i.stringValue,e.stringValue);case 6:return function(l,p){const v=po(l),O=po(p);return v.compareTo(O)}(i.bytesValue,e.bytesValue);case 7:return function(l,p){const v=l.split("/"),O=p.split("/");for(let q=0;q<v.length&&q<O.length;q++){const ne=Er(v[q],O[q]);if(0!==ne)return ne}return Er(v.length,O.length)}(i.referenceValue,e.referenceValue);case 8:return function(l,p){const v=Er(Ai(l.latitude),Ai(p.latitude));return 0!==v?v:Er(Ai(l.longitude),Ai(p.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(l,p){const v=l.values||[],O=p.values||[];for(let q=0;q<v.length&&q<O.length;++q){const ne=Ur(v[q],O[q]);if(ne)return ne}return Er(v.length,O.length)}(i.arrayValue,e.arrayValue);case 10:return function(l,p){if(l===Be.mapValue&&p===Be.mapValue)return 0;if(l===Be.mapValue)return 1;if(p===Be.mapValue)return-1;const v=l.fields||{},O=Object.keys(v),q=p.fields||{},ne=Object.keys(q);O.sort(),ne.sort();for(let Ee=0;Ee<O.length&&Ee<ne.length;++Ee){const ze=Er(O[Ee],ne[Ee]);if(0!==ze)return ze;const Dt=Ur(v[O[Ee]],q[ne[Ee]]);if(0!==Dt)return Dt}return Er(O.length,ne.length)}(i.mapValue,e.mapValue);default:throw Wn()}}function Ns(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Er(i,e);const n=Zs(i),o=Zs(e),l=Er(n.seconds,o.seconds);return 0!==l?l:Er(n.nanos,o.nanos)}function Xs(i){return ba(i)}function ba(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const l=Zs(o);return`time(${l.seconds},${l.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?po(i.bytesValue).toBase64():"referenceValue"in i?yn.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let l="[",p=!0;for(const v of o.values||[])p?p=!1:l+=",",l+=ba(v);return l+"]"}(i.arrayValue):"mapValue"in i?function(o){const l=Object.keys(o.fields||{}).sort();let p="{",v=!0;for(const O of l)v?v=!1:p+=",",p+=`${O}:${ba(o.fields[O])}`;return p+"}"}(i.mapValue):Wn();var e}function Ms(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function wa(i){return!!i&&"integerValue"in i}function Ao(i){return!!i&&"arrayValue"in i}function Ko(i){return!!i&&"nullValue"in i}function qa(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function rl(i){return!!i&&"mapValue"in i}function Ea(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return xa(i.mapValue.fields,(n,o)=>e.mapValue.fields[n]=Ea(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ea(i.arrayValue.values[n]);return e}return Object.assign({},i)}function Ca(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Hl(i){return"nullValue"in i?xt:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Ms(F.empty(),yn.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Wn()}function Ka(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Ms(F.empty(),yn.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Be:Wn()}function $l(i,e){const n=Ur(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function il(i,e){const n=Ur(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Yi{constructor(e){this.value=e}static empty(){return new Yi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!rl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ea(n)}setAll(e){let n=Li.emptyPath(),o={},l=[];e.forEach((v,O)=>{if(!n.isImmediateParentOf(O)){const q=this.getFieldsMap(n);this.applyChanges(q,o,l),o={},l=[],n=O.popLast()}v?o[O.lastSegment()]=Ea(v):l.push(O.lastSegment())});const p=this.getFieldsMap(n);this.applyChanges(p,o,l)}delete(e){const n=this.field(e.popLast());rl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let l=n.mapValue.fields[e.get(o)];rl(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,o){xa(n,(l,p)=>e[l]=p);for(const l of o)delete e[l]}clone(){return new Yi(Ea(this.value))}}function ou(i){const e=[];return xa(i.fields,(n,o)=>{const l=new Li([n]);if(rl(o)){const p=ou(o.mapValue).fields;if(0===p.length)e.push(l);else for(const v of p)e.push(l.child(v))}else e.push(l)}),new As(e)}class xr{constructor(e,n,o,l,p,v){this.key=e,this.documentType=n,this.version=o,this.readTime=l,this.data=p,this.documentState=v}static newInvalidDocument(e){return new xr(e,0,pr.min(),pr.min(),Yi.empty(),0)}static newFoundDocument(e,n,o){return new xr(e,1,n,pr.min(),o,0)}static newNoDocument(e,n){return new xr(e,2,n,pr.min(),Yi.empty(),0)}static newUnknownDocument(e,n){return new xr(e,3,n,pr.min(),Yi.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof xr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Zl{constructor(e,n=null,o=[],l=[],p=null,v=null,O=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=l,this.limit=p,this.startAt=v,this.endAt=O,this.ht=null}}function j(i,e=null,n=[],o=[],l=null,p=null,v=null){return new Zl(i,e,n,o,l,p,v)}function z(i){const e=kn(i);if(null===e.ht){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(o=>{return(l=o).field.canonicalString()+l.op.toString()+Xs(l.value);var l}).join(","),n+="|ob:",n+=e.orderBy.map(o=>{return(l=o).field.canonicalString()+l.dir;var l}).join(","),$(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(o=>Xs(o)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(o=>Xs(o)).join(",")),e.ht=n}return e.ht}function Re(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let l=0;l<i.orderBy.length;l++)if(!al(i.orderBy[l],e.orderBy[l]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let l=0;l<i.filters.length;l++)if((n=i.filters[l]).op!==(o=e.filters[l]).op||!n.field.isEqual(o.field)||!hr(n.value,o.value))return!1;var n,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Ba(i.startAt,e.startAt)&&Ba(i.endAt,e.endAt)}function ht(i){return yn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function It(i,e){return i.filters.filter(n=>n instanceof Gn&&n.field.isEqual(e))}function nn(i,e,n){let o=xt,l=!0;for(const p of It(i,e)){let v=xt,O=!0;switch(p.op){case"<":case"<=":v=Hl(p.value);break;case"==":case"in":case">=":v=p.value;break;case">":v=p.value,O=!1;break;case"!=":case"not-in":v=xt}$l({value:o,inclusive:l},{value:v,inclusive:O})<0&&(o=v,l=O)}if(null!==n)for(let p=0;p<i.orderBy.length;++p)if(i.orderBy[p].field.isEqual(e)){const v=n.position[p];$l({value:o,inclusive:l},{value:v,inclusive:n.inclusive})<0&&(o=v,l=n.inclusive);break}return{value:o,inclusive:l}}function Cn(i,e,n){let o=Be,l=!0;for(const p of It(i,e)){let v=Be,O=!0;switch(p.op){case">=":case">":v=Ka(p.value),O=!1;break;case"==":case"in":case"<=":v=p.value;break;case"<":v=p.value,O=!1;break;case"!=":case"not-in":v=Be}il({value:o,inclusive:l},{value:v,inclusive:O})>0&&(o=v,l=O)}if(null!==n)for(let p=0;p<i.orderBy.length;++p)if(i.orderBy[p].field.isEqual(e)){const v=n.position[p];il({value:o,inclusive:l},{value:v,inclusive:n.inclusive})>0&&(o=v,l=n.inclusive);break}return{value:o,inclusive:l}}class Gn extends class{}{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?"in"===n||"not-in"===n?this.lt(e,n,o):new Sr(e,n,o):"array-contains"===n?new ao(e,o):"in"===n?new _l(e,o):"not-in"===n?new sl(e,o):"array-contains-any"===n?new ol(e,o):new Gn(e,n,o)}static lt(e,n,o){return"in"===n?new Br(e,o):new ar(e,o)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.ft(Ur(n,this.value)):null!==n&&pn(this.value)===pn(n)&&this.ft(Ur(n,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Wn()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Sr extends Gn{constructor(e,n,o){super(e,n,o),this.key=yn.fromName(o.referenceValue)}matches(e){const n=yn.comparator(e.key,this.key);return this.ft(n)}}class Br extends Gn{constructor(e,n){super(e,"in",n),this.keys=Es(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ar extends Gn{constructor(e,n){super(e,"not-in",n),this.keys=Es(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Es(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(o=>yn.fromName(o.referenceValue))}class ao extends Gn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ao(n)&&Un(n.arrayValue,this.value)}}class _l extends Gn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Un(this.value.arrayValue,n)}}class sl extends Gn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Un(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Un(this.value.arrayValue,n)}}class ol extends Gn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ao(n)||!n.arrayValue.values)&&n.arrayValue.values.some(o=>Un(this.value.arrayValue,o))}}class Mo{constructor(e,n){this.position=e,this.inclusive=n}}class go{constructor(e,n="asc"){this.field=e,this.dir=n}}function al(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Ya(i,e,n){let o=0;for(let l=0;l<i.position.length;l++){const p=e[l],v=i.position[l];if(o=p.field.isKeyField()?yn.comparator(yn.fromName(v.referenceValue),n.key):Ur(v,n.data.field(p.field)),"desc"===p.dir&&(o*=-1),0!==o)break}return o}function Ba(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!hr(i.position[n],e.position[n]))return!1;return!0}class sa{constructor(e,n=null,o=[],l=[],p=null,v="F",O=null,q=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=l,this.limit=p,this.limitType=v,this.startAt=O,this.endAt=q,this._t=null,this.wt=null}}function Ac(i,e,n,o,l,p,v,O){return new sa(i,e,n,o,l,p,v,O)}function kl(i){return new sa(i)}function I(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function m(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function f(i){for(const e of i.filters)if(e.dt())return e.field;return null}function w(i){return null!==i.collectionGroup}function B(i){const e=kn(i);if(null===e._t){e._t=[];const n=f(e),o=m(e);if(null!==n&&null===o)n.isKeyField()||e._t.push(new go(n)),e._t.push(new go(Li.keyField(),"asc"));else{let l=!1;for(const p of e.explicitOrderBy)e._t.push(p),p.field.isKeyField()&&(l=!0);if(!l){const p=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new go(Li.keyField(),p))}}}return e._t}function X(i){const e=kn(i);if(!e.wt)if("F"===e.limitType)e.wt=j(e.path,e.collectionGroup,B(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const p of B(e))n.push(new go(p.field,"desc"===p.dir?"asc":"desc"));const o=e.endAt?new Mo(e.endAt.position,e.endAt.inclusive):null,l=e.startAt?new Mo(e.startAt.position,e.startAt.inclusive):null;e.wt=j(e.path,e.collectionGroup,n,e.filters,e.limit,o,l)}return e.wt}function Ce(i,e,n){return new sa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Le(i,e){return Re(X(i),X(e))&&i.limitType===e.limitType}function ot(i){return`${z(X(i))}|lt:${i.limitType}`}function kt(i){return`Query(target=${function se(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(n=>{return`${(o=n).field.canonicalString()} ${o.op} ${Xs(o.value)}`;var o}).join(", ")}]`),$(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(n=>{return`${(o=n).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(n=>Xs(n)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(n=>Xs(n)).join(",")),`Target(${e})`}(X(i))}; limitType=${i.limitType})`}function Dn(i,e){return e.isFoundDocument()&&function(n,o){const l=o.key.path;return null!==n.collectionGroup?o.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(l):yn.isDocumentKey(n.path)?n.path.isEqual(l):n.path.isImmediateParentOf(l)}(i,e)&&function(n,o){for(const l of n.explicitOrderBy)if(!l.field.isKeyField()&&null===o.data.field(l.field))return!1;return!0}(i,e)&&function(n,o){for(const l of n.filters)if(!l.matches(o))return!1;return!0}(i,e)&&(o=e,!((n=i).startAt&&!function(l,p,v){const O=Ya(l,p,v);return l.inclusive?O<=0:O<0}(n.startAt,B(n),o)||n.endAt&&!function(l,p,v){const O=Ya(l,p,v);return l.inclusive?O>=0:O>0}(n.endAt,B(n),o)));var n,o}function Sn(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function lr(i){return(e,n)=>{let o=!1;for(const l of B(i)){const p=Qn(l,e,n);if(0!==p)return p;o=o||l.field.isKeyField()}return 0}}function Qn(i,e,n){const o=i.field.isKeyField()?yn.comparator(e.key,n.key):function(l,p,v){const O=p.data.field(l),q=v.data.field(l);return null!==O&&null!==q?Ur(O,q):Wn()}(i.field,e,n);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return Wn()}}function xn(i,e){if(i.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ae(e)?"-0":e}}function gr(i){return{integerValue:""+i}}function di(i,e){return Oe(e)?gr(e):xn(i,e)}class Vr{constructor(){this._=void 0}}function ns(i,e,n){return i instanceof Da?function(o,l){const p={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&(p.fields.__previous_value__=l),{mapValue:p}}(n,e):i instanceof to?mo(i,e):i instanceof yo?Va(i,e):function(o,l){const p=Fs(o,l),v=Iu(p)+Iu(o.yt);return wa(p)&&wa(o.yt)?gr(v):xn(o.It,v)}(i,e)}function eo(i,e,n){return i instanceof to?mo(i,e):i instanceof yo?Va(i,e):n}function Fs(i,e){return i instanceof Lo?wa(n=e)||(o=n)&&"doubleValue"in o?e:{integerValue:0}:null;var o,n}class Da extends Vr{}class to extends Vr{constructor(e){super(),this.elements=e}}function mo(i,e){const n=ll(e);for(const o of i.elements)n.some(l=>hr(l,o))||n.push(o);return{arrayValue:{values:n}}}class yo extends Vr{constructor(e){super(),this.elements=e}}function Va(i,e){let n=ll(e);for(const o of i.elements)n=n.filter(l=>!hr(l,o));return{arrayValue:{values:n}}}class Lo extends Vr{constructor(e,n){super(),this.It=e,this.yt=n}}function Iu(i){return Ai(i.integerValue||i.doubleValue)}function ll(i){return Ao(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class lo{constructor(e,n){this.field=e,this.transform=n}}class Tu{constructor(e,n){this.version=e,this.transformResults=n}}class An{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new An}static exists(e){return new An(void 0,e)}static updateTime(e){return new An(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mr(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Dr{}function hi(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new ye(i.key,An.none()):new C(i.key,i.data,An.none());{const n=i.data,o=Yi.empty();let l=new Si(Li.comparator);for(let p of e.fields)if(!l.has(p)){let v=n.field(p);null===v&&p.length>1&&(p=p.popLast(),v=n.field(p)),null===v?o.delete(p):o.set(p,v),l=l.add(p)}return new y(i.key,o,new As(l.toArray()),An.none())}}function _o(i,e,n){i instanceof C?function(o,l,p){const v=o.value.clone(),O=x(o.fieldTransforms,l,p.transformResults);v.setAll(O),l.convertToFoundDocument(p.version,v).setHasCommittedMutations()}(i,e,n):i instanceof y?function(o,l,p){if(!mr(o.precondition,l))return void l.convertToUnknownDocument(p.version);const v=x(o.fieldTransforms,l,p.transformResults),O=l.data;O.setAll(_(o)),O.setAll(v),l.convertToFoundDocument(p.version,O).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function xo(i,e,n,o){return i instanceof C?function(l,p,v,O){if(!mr(l.precondition,p))return v;const q=l.value.clone(),ne=re(l.fieldTransforms,O,p);return q.setAll(ne),p.convertToFoundDocument(p.version,q).setHasLocalMutations(),null}(i,e,n,o):i instanceof y?function(l,p,v,O){if(!mr(l.precondition,p))return v;const q=re(l.fieldTransforms,O,p),ne=p.data;return ne.setAll(_(l)),ne.setAll(q),p.convertToFoundDocument(p.version,ne).setHasLocalMutations(),null===v?null:v.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(Ee=>Ee.field))}(i,e,n,o):(v=n,mr(i.precondition,p=e)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):v);var p,v}function oa(i,e){let n=null;for(const o of i.fieldTransforms){const l=e.data.field(o.field),p=Fs(o.transform,l||null);null!=p&&(null===n&&(n=Yi.empty()),n.set(o.field,p))}return n||null}function Qa(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(n=i.fieldTransforms)&&void 0===o||n&&o&&qi(n,o,(l,p)=>function vl(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(n=i.transform)instanceof to&&o instanceof to||n instanceof yo&&o instanceof yo?qi(n.elements,o.elements,hr):n instanceof Lo&&o instanceof Lo?hr(n.yt,o.yt):n instanceof Da&&o instanceof Da);var n,o}(l,p))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var n,o}class C extends Dr{constructor(e,n,o,l=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class y extends Dr{constructor(e,n,o,l,p=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=l,this.fieldTransforms=p,this.type=1}getFieldMask(){return this.fieldMask}}function _(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const o=i.data.field(n);e.set(n,o)}}),e}function x(i,e,n){const o=new Map;or(i.length===n.length);for(let l=0;l<n.length;l++){const p=i[l],v=p.transform,O=e.data.field(p.field);o.set(p.field,eo(v,O,n[l]))}return o}function re(i,e,n){const o=new Map;for(const l of i){const p=l.transform,v=n.data.field(l.field);o.set(l.field,ns(p,v,e))}return o}class ye extends Dr{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vt extends Dr{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Yt{constructor(e){this.count=e}}var _n,wn;function Xr(i){switch(i){default:return Wn();case Mt.CANCELLED:case Mt.UNKNOWN:case Mt.DEADLINE_EXCEEDED:case Mt.RESOURCE_EXHAUSTED:case Mt.INTERNAL:case Mt.UNAVAILABLE:case Mt.UNAUTHENTICATED:return!1;case Mt.INVALID_ARGUMENT:case Mt.NOT_FOUND:case Mt.ALREADY_EXISTS:case Mt.PERMISSION_DENIED:case Mt.FAILED_PRECONDITION:case Mt.ABORTED:case Mt.OUT_OF_RANGE:case Mt.UNIMPLEMENTED:case Mt.DATA_LOSS:return!0}}function rs(i){if(void 0===i)return Zi("GRPC error has no .code"),Mt.UNKNOWN;switch(i){case _n.OK:return Mt.OK;case _n.CANCELLED:return Mt.CANCELLED;case _n.UNKNOWN:return Mt.UNKNOWN;case _n.DEADLINE_EXCEEDED:return Mt.DEADLINE_EXCEEDED;case _n.RESOURCE_EXHAUSTED:return Mt.RESOURCE_EXHAUSTED;case _n.INTERNAL:return Mt.INTERNAL;case _n.UNAVAILABLE:return Mt.UNAVAILABLE;case _n.UNAUTHENTICATED:return Mt.UNAUTHENTICATED;case _n.INVALID_ARGUMENT:return Mt.INVALID_ARGUMENT;case _n.NOT_FOUND:return Mt.NOT_FOUND;case _n.ALREADY_EXISTS:return Mt.ALREADY_EXISTS;case _n.PERMISSION_DENIED:return Mt.PERMISSION_DENIED;case _n.FAILED_PRECONDITION:return Mt.FAILED_PRECONDITION;case _n.ABORTED:return Mt.ABORTED;case _n.OUT_OF_RANGE:return Mt.OUT_OF_RANGE;case _n.UNIMPLEMENTED:return Mt.UNIMPLEMENTED;case _n.DATA_LOSS:return Mt.DATA_LOSS;default:return Wn()}}(wn=_n||(_n={}))[wn.OK=0]="OK",wn[wn.CANCELLED=1]="CANCELLED",wn[wn.UNKNOWN=2]="UNKNOWN",wn[wn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wn[wn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wn[wn.NOT_FOUND=5]="NOT_FOUND",wn[wn.ALREADY_EXISTS=6]="ALREADY_EXISTS",wn[wn.PERMISSION_DENIED=7]="PERMISSION_DENIED",wn[wn.UNAUTHENTICATED=16]="UNAUTHENTICATED",wn[wn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wn[wn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wn[wn.ABORTED=10]="ABORTED",wn[wn.OUT_OF_RANGE=11]="OUT_OF_RANGE",wn[wn.UNIMPLEMENTED=12]="UNIMPLEMENTED",wn[wn.INTERNAL=13]="INTERNAL",wn[wn.UNAVAILABLE=14]="UNAVAILABLE",wn[wn.DATA_LOSS=15]="DATA_LOSS";class vo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0!==o)for(const[l,p]of o)if(this.equalsFn(l,e))return p}has(e){return void 0!==this.get(e)}set(e,n){const o=this.mapKeyFn(e),l=this.inner[o];if(void 0===l)return this.inner[o]=[[e,n]],void this.innerSize++;for(let p=0;p<l.length;p++)if(this.equalsFn(l[p][0],e))return void(l[p]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0===o)return!1;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return 1===o.length?delete this.inner[n]:o.splice(l,1),this.innerSize--,!0;return!1}forEach(e){xa(this.inner,(n,o)=>{for(const[l,p]of o)e(l,p)})}isEmpty(){return Ol(this.inner)}size(){return this.innerSize}}const zl=new Gi(yn.comparator);function Yo(){return zl}const Gu=new Gi(yn.comparator);function Gl(...i){let e=Gu;for(const n of i)e=e.insert(n.key,n);return e}function Mc(i){let e=Gu;return i.forEach((n,o)=>e=e.insert(n,o.overlayedDocument)),e}function Ja(){return Wl()}function Wu(){return Wl()}function Wl(){return new vo(i=>i.toString(),(i,e)=>i.isEqual(e))}const Su=new Gi(yn.comparator),xc=new Si(yn.comparator);function Zr(...i){let e=xc;for(const n of i)e=e.add(n);return e}const bh=new Si(Er);function Cs(){return bh}class Au{constructor(e,n,o,l,p){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=l,this.resolvedLimboDocuments=p}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const l=new Map;return l.set(e,Oc.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new Au(pr.min(),l,Cs(),Yo(),Zr())}}class Oc{constructor(e,n,o,l,p){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=l,this.removedDocuments=p}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new Oc(o,n,Zr(),Zr(),Zr())}}class qu{constructor(e,n,o,l){this.Tt=e,this.removedTargetIds=n,this.key=o,this.Et=l}}class wh{constructor(e,n){this.targetId=e,this.At=n}}class fp{constructor(e,n,o=ps.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=l}}class pp{constructor(){this.Rt=0,this.bt=mp(),this.Pt=ps.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Zr(),n=Zr(),o=Zr();return this.bt.forEach((l,p)=>{switch(p){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:o=o.add(l);break;default:Wn()}}),new Oc(this.Pt,this.vt,e,n,o)}Nt(){this.Vt=!1,this.bt=mp()}kt(e,n){this.Vt=!0,this.bt=this.bt.insert(e,n)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Cm{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Yo(),this.qt=gp(),this.Kt=new Si(Er)}Gt(e){for(const n of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(n,e.Et):this.jt(n,e.key,e.Et);for(const n of e.removedTargetIds)this.jt(n,e.key,e.Et)}Wt(e){this.forEachTarget(e,n=>{const o=this.zt(n);switch(e.state){case 0:this.Ht(n)&&o.Ct(e.resumeToken);break;case 1:o.Ft(),o.St||o.Nt(),o.Ct(e.resumeToken);break;case 2:o.Ft(),o.St||this.removeTarget(n);break;case 3:this.Ht(n)&&(o.$t(),o.Ct(e.resumeToken));break;case 4:this.Ht(n)&&(this.Jt(n),o.Ct(e.resumeToken));break;default:Wn()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Lt.forEach((o,l)=>{this.Ht(l)&&n(l)})}Yt(e){const n=e.targetId,o=e.At.count,l=this.Xt(n);if(l){const p=l.target;if(ht(p))if(0===o){const v=new yn(p.path);this.jt(n,v,xr.newNoDocument(v,pr.min()))}else or(1===o);else this.Zt(n)!==o&&(this.Jt(n),this.Kt=this.Kt.add(n))}}te(e){const n=new Map;this.Lt.forEach((p,v)=>{const O=this.Xt(v);if(O){if(p.current&&ht(O.target)){const q=new yn(O.target.path);null!==this.Ut.get(q)||this.ee(v,q)||this.jt(v,q,xr.newNoDocument(q,e))}p.Dt&&(n.set(v,p.xt()),p.Nt())}});let o=Zr();this.qt.forEach((p,v)=>{let O=!0;v.forEachWhile(q=>{const ne=this.Xt(q);return!ne||2===ne.purpose||(O=!1,!1)}),O&&(o=o.add(p))}),this.Ut.forEach((p,v)=>v.setReadTime(e));const l=new Au(e,n,this.Kt,this.Ut,o);return this.Ut=Yo(),this.qt=gp(),this.Kt=new Si(Er),l}Qt(e,n){if(!this.Ht(e))return;const o=this.ee(e,n.key)?2:0;this.zt(e).kt(n.key,o),this.Ut=this.Ut.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ne(n.key).add(e))}jt(e,n,o){if(!this.Ht(e))return;const l=this.zt(e);this.ee(e,n)?l.kt(n,1):l.Ot(n),this.qt=this.qt.insert(n,this.ne(n).delete(e)),o&&(this.Ut=this.Ut.insert(n,o))}removeTarget(e){this.Lt.delete(e)}Zt(e){const n=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let n=this.Lt.get(e);return n||(n=new pp,this.Lt.set(e,n)),n}ne(e){let n=this.qt.get(e);return n||(n=new Si(Er),this.qt=this.qt.insert(e,n)),n}Ht(e){const n=null!==this.Xt(e);return n||tn("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.Lt.get(e);return n&&n.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new pp),this.Bt.getRemoteKeysForTarget(e).forEach(n=>{this.jt(e,n,null)})}ee(e,n){return this.Bt.getRemoteKeysForTarget(e).has(n)}}function gp(){return new Gi(yn.comparator)}function mp(){return new Gi(yn.comparator)}const N_={asc:"ASCENDING",desc:"DESCENDING"},F_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class kc{constructor(e,n){this.databaseId=e,this.gt=n}}function Mu(i,e){return i.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Eh(i,e){return i.gt?e.toBase64():e.toUint8Array()}function yp(i,e){return Mu(i,e.toTimestamp())}function Uo(i){return or(!!i),pr.fromTimestamp(function(e){const n=Zs(e);return new ti(n.seconds,n.nanos)}(i))}function Ch(i,e){return(n=i,new Pr(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function Dh(i){const e=Pr.fromString(i);return or(fd(e)),e}function Ku(i,e){return Ch(i.databaseId,e.path)}function ul(i,e){const n=Dh(e);if(n.get(1)!==i.databaseId.projectId)throw new rn(Mt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new rn(Mt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new yn(Ih(n))}function _p(i,e){return Ch(i.databaseId,e)}function vp(i){const e=Dh(i);return 4===e.length?Pr.emptyPath():Ih(e)}function xu(i){return new Pr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Ih(i){return or(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Th(i,e,n){return{name:Ku(i,e),fields:n.value.mapValue.fields}}function au(i,e,n){const o=ul(i,e.name),l=Uo(e.updateTime),p=new Yi({mapValue:{fields:e.fields}}),v=xr.newFoundDocument(o,l,p);return n&&v.setHasCommittedMutations(),n?v.setHasCommittedMutations():v}function lu(i,e){let n;if(e instanceof C)n={update:Th(i,e.key,e.value)};else if(e instanceof ye)n={delete:Ku(i,e.key)};else if(e instanceof y)n={update:Th(i,e.key,e.data),updateMask:Am(e.fieldMask)};else{if(!(e instanceof vt))return Wn();n={verify:Ku(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(o=>function(l,p){const v=p.transform;if(v instanceof Da)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof to)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof yo)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof Lo)return{fieldPath:p.field.canonicalString(),increment:v.yt};throw Wn()}(0,o))),e.precondition.isNone||(n.currentDocument=void 0!==(l=e.precondition).updateTime?{updateTime:yp(i,l.updateTime)}:void 0!==l.exists?{exists:l.exists}:Wn()),n;var l}function Ah(i,e){const n=e.currentDocument?void 0!==(l=e.currentDocument).updateTime?An.updateTime(Uo(l.updateTime)):void 0!==l.exists?An.exists(l.exists):An.none():An.none(),o=e.updateTransforms?e.updateTransforms.map(l=>function(p,v){let O=null;"setToServerValue"in v?(or("REQUEST_TIME"===v.setToServerValue),O=new Da):"appendMissingElements"in v?O=new to(v.appendMissingElements.values||[]):"removeAllFromArray"in v?O=new yo(v.removeAllFromArray.values||[]):"increment"in v?O=new Lo(p,v.increment):Wn();const q=Li.fromServerFormat(v.fieldPath);return new lo(q,O)}(i,l)):[];var l;if(e.update){const l=ul(i,e.update.name),p=new Yi({mapValue:{fields:e.update.fields}});if(e.updateMask){const v=new As((e.updateMask.fieldPaths||[]).map(ne=>Li.fromServerFormat(ne)));return new y(l,p,v,n,o)}return new C(l,p,n,o)}if(e.delete){const l=ul(i,e.delete);return new ye(l,n)}if(e.verify){const l=ul(i,e.verify);return new vt(l,n)}return Wn()}function Pc(i,e){return{documents:[_p(i,e.path)]}}function ql(i,e){const n={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(n.parent=_p(i,o),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=_p(i,o.popLast()),n.structuredQuery.from=[{collectionId:o.lastSegment()}]);const l=function(q){if(0===q.length)return;const ne=q.map(Ee=>function(ze){if("=="===ze.op){if(qa(ze.value))return{unaryFilter:{field:bl(ze.field),op:"IS_NAN"}};if(Ko(ze.value))return{unaryFilter:{field:bl(ze.field),op:"IS_NULL"}}}else if("!="===ze.op){if(qa(ze.value))return{unaryFilter:{field:bl(ze.field),op:"IS_NOT_NAN"}};if(Ko(ze.value))return{unaryFilter:{field:bl(ze.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bl(ze.field),op:wp(ze.op),value:ze.value}}}(Ee));return 1===ne.length?ne[0]:{compositeFilter:{op:"AND",filters:ne}}}(e.filters);l&&(n.structuredQuery.where=l);const p=function(q){if(0!==q.length)return q.map(ne=>{return{field:bl((Ee=ne).field),direction:Im(Ee.dir)};var Ee})}(e.orderBy);p&&(n.structuredQuery.orderBy=p);const v=(ne=e.limit,i.gt||$(ne)?ne:{value:ne});var ne,O,q;return null!==v&&(n.structuredQuery.limit=v),e.startAt&&(n.structuredQuery.startAt={before:(O=e.startAt).inclusive,values:O.position}),e.endAt&&(n.structuredQuery.endAt={before:!(q=e.endAt).inclusive,values:q.position}),n}function xh(i){let e=vp(i.parent);const n=i.structuredQuery,o=n.from?n.from.length:0;let l=null;if(o>0){or(1===o);const Ee=n.from[0];Ee.allDescendants?l=Ee.collectionId:e=e.child(Ee.collectionId)}let p=[];n.where&&(p=bp(n.where));let v=[];n.orderBy&&(v=n.orderBy.map(Ee=>{return new go(Yu((ze=Ee).field),function(Dt){switch(Dt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ze.direction));var ze}));let O=null;n.limit&&(O=function(Ee){let ze;return ze="object"==typeof Ee?Ee.value:Ee,$(ze)?null:ze}(n.limit));let q=null;var Ee;n.startAt&&(q=new Mo((Ee=n.startAt).values||[],!!Ee.before));let ne=null;return n.endAt&&(ne=function(Ee){return new Mo(Ee.values||[],!Ee.before)}(n.endAt)),Ac(e,l,v,p,O,"F",q,ne)}function bp(i){return i?void 0!==i.unaryFilter?[Sm(i)]:void 0!==i.fieldFilter?[Tm(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>bp(e)).reduce((e,n)=>e.concat(n)):Wn():[]}function Im(i){return N_[i]}function wp(i){return F_[i]}function bl(i){return{fieldPath:i.canonicalString()}}function Yu(i){return Li.fromServerFormat(i.fieldPath)}function Tm(i){return Gn.create(Yu(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Wn()}}(i.fieldFilter.op),i.fieldFilter.value)}function Sm(i){switch(i.unaryFilter.op){case"IS_NAN":const e=Yu(i.unaryFilter.field);return Gn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Yu(i.unaryFilter.field);return Gn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Yu(i.unaryFilter.field);return Gn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Yu(i.unaryFilter.field);return Gn.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Wn()}}function Am(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function fd(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function ka(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Cp(e)),e=Ep(i.get(n),e);return Cp(e)}function Ep(i,e){let n=e;const o=i.length;for(let l=0;l<o;l++){const p=i.charAt(l);switch(p){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=p}}return n}function Cp(i){return i+"\x01\x01"}function wl(i){const e=i.length;if(or(e>=2),2===e)return or("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Pr.emptyPath();const n=e-2,o=[];let l="";for(let p=0;p<e;){const v=i.indexOf("\x01",p);switch((v<0||v>n)&&Wn(),i.charAt(v+1)){case"\x01":const O=i.substring(p,v);let q;0===l.length?q=O:(l+=O,q=l,l=""),o.push(q);break;case"\x10":l+=i.substring(p,v),l+="\0";break;case"\x11":l+=i.substring(p,v+1);break;default:Wn()}p=v+2}return new Pr(o)}const Mm=["userId","batchId"];function pd(i,e){return[i,ka(e)]}function Qu(i,e,n){return[i,ka(e),n]}const xm={},Ju=["prefixPath","collectionGroup","readTime","documentId"],Rc=["prefixPath","collectionGroup","documentId"],Om=["collectionGroup","readTime","prefixPath","documentId"],L_=["canonicalId","targetId"],Dp=["targetId","path"],km=["path","targetId"],Pm=["collectionId","parent"],Rm=["indexId","uid"],Ip=["uid","sequenceNumber"],Tp=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kh=["indexId","uid","orderedDocumentKey"],Nm=["userId","collectionPath","documentId"],Fm=["userId","collectionPath","largestBatchId"],Ph=["userId","collectionGroup","largestBatchId"],Lm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],U_=[...Lm,"documentOverlays"],gd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Um=gd,B_=[...Um,"indexConfiguration","indexState","indexEntries"];class Sp extends _a{constructor(e,n){super(),this.ie=e,this.currentSequenceNumber=n}}function aa(i,e){const n=kn(i);return Hs.M(n.ie,e)}class Ap{constructor(e,n,o,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=l}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const p=this.mutations[l];p.key.isEqual(e.key)&&_o(p,e,o[l])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=xo(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=xo(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=Wu();return this.mutations.forEach(l=>{const p=e.get(l.key),v=p.overlayedDocument;let O=this.applyToLocalView(v,p.mutatedFields);O=n.has(l.key)?null:O;const q=hi(v,O);null!==q&&o.set(l.key,q),v.isValidDocument()||v.convertToNoDocument(pr.min())}),o}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Zr())}isEqual(e){return this.batchId===e.batchId&&qi(this.mutations,e.mutations,(n,o)=>Qa(n,o))&&qi(this.baseMutations,e.baseMutations,(n,o)=>Qa(n,o))}}class Rh{constructor(e,n,o,l){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=l}static from(e,n,o){or(e.mutations.length===o.length);let l=Su;const p=e.mutations;for(let v=0;v<p.length;v++)l=l.insert(p[v].key,o[v].version);return new Rh(e,n,o,l)}}class md{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Pl{constructor(e,n,o,l,p=pr.min(),v=pr.min(),O=ps.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=l,this.snapshotVersion=p,this.lastLimboFreeSnapshotVersion=v,this.resumeToken=O}withSequenceNumber(e){return new Pl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Pl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Pl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Nh{constructor(e){this.re=e}}function Fh(i,e){const n=e.key,o={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Xu(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Ku(l=i.re,(p=e).key),fields:p.data.value.mapValue.fields,updateTime:Mu(l,p.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:n.path.toArray(),readTime:Ou(e.version)};else{if(!e.isUnknownDocument())return Wn();o.unknownDocument={path:n.path.toArray(),version:Ou(e.version)}}var l,p;return o}function Xu(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Ou(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Kl(i){const e=new ti(i.seconds,i.nanoseconds);return pr.fromTimestamp(e)}function El(i,e){const n=(e.baseMutations||[]).map(p=>Ah(i.re,p));for(let p=0;p<e.mutations.length-1;++p){const v=e.mutations[p];p+1<e.mutations.length&&void 0!==e.mutations[p+1].transform&&(v.updateTransforms=e.mutations[p+1].transform.fieldTransforms,e.mutations.splice(p+1,1),++p)}const o=e.mutations.map(p=>Ah(i.re,p)),l=ti.fromMillis(e.localWriteTimeMs);return new Ap(e.batchId,l,n,o)}function Nc(i){const e=Kl(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?Kl(i.lastLimboFreeSnapshotVersion):pr.min();let o;var l;return void 0!==i.query.documents?(or(1===(l=i.query).documents.length),o=X(kl(vp(l.documents[0])))):o=X(xh(i.query)),new Pl(o,i.targetId,0,i.lastListenSequenceNumber,e,n,ps.fromBase64String(i.resumeToken))}function xp(i,e){const n=Ou(e.snapshotVersion),o=Ou(e.lastLimboFreeSnapshotVersion);let l;l=ht(e.target)?Pc(i.re,e.target):ql(i.re,e.target);const p=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:z(e.target),readTime:n,resumeToken:p,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:l}}function Lh(i){const e=xh({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Ce(e,e.limit,"L"):e}function yd(i,e){return new md(e.largestBatchId,Ah(i.re,e.overlayMutation))}function Op(i,e){const n=e.path.lastSegment();return[i,ka(e.path.popLast()),n]}function kp(i,e,n,o){return{indexId:i,uid:e.uid||"",sequenceNumber:n,readTime:Ou(o.readTime),documentKey:ka(o.documentKey.path),largestBatchId:o.largestBatchId}}class Bm{getBundleMetadata(e,n){return Pp(e).get(n).next(o=>{if(o)return{id:(l=o).bundleId,createTime:Kl(l.createTime),version:l.version};var l})}saveBundleMetadata(e,n){return Pp(e).put({bundleId:(o=n).id,createTime:Ou(Uo(o.createTime)),version:o.version});var o}getNamedQuery(e,n){return _d(e).get(n).next(o=>{if(o)return{name:(l=o).name,query:Lh(l.bundledQuery),readTime:Kl(l.readTime)};var l})}saveNamedQuery(e,n){return _d(e).put({name:(o=n).name,readTime:Ou(Uo(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Pp(i){return aa(i,"bundles")}function _d(i){return aa(i,"namedQueries")}class vd{constructor(e,n){this.It=e,this.userId=n}static oe(e,n){return new vd(e,n.uid||"")}getOverlay(e,n){return Fc(e).get(Op(this.userId,n)).next(o=>o?yd(this.It,o):null)}getOverlays(e,n){const o=Ja();return lt.forEach(n,l=>this.getOverlay(e,l).next(p=>{null!==p&&o.set(l,p)})).next(()=>o)}saveOverlays(e,n,o){const l=[];return o.forEach((p,v)=>{const O=new md(n,v);l.push(this.ue(e,O))}),lt.waitFor(l)}removeOverlaysForBatchId(e,n,o){const l=new Set;n.forEach(v=>l.add(ka(v.getCollectionPath())));const p=[];return l.forEach(v=>{const O=IDBKeyRange.bound([this.userId,v,o],[this.userId,v,o+1],!1,!0);p.push(Fc(e).Y("collectionPathOverlayIndex",O))}),lt.waitFor(p)}getOverlaysForCollection(e,n,o){const l=Ja(),p=ka(n),v=IDBKeyRange.bound([this.userId,p,o],[this.userId,p,Number.POSITIVE_INFINITY],!0);return Fc(e).W("collectionPathOverlayIndex",v).next(O=>{for(const q of O){const ne=yd(this.It,q);l.set(ne.getKey(),ne)}return l})}getOverlaysForCollectionGroup(e,n,o,l){const p=Ja();let v;const O=IDBKeyRange.bound([this.userId,n,o],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Fc(e).Z({index:"collectionGroupOverlayIndex",range:O},(q,ne,Ee)=>{const ze=yd(this.It,ne);p.size()<l||ze.largestBatchId===v?(p.set(ze.getKey(),ze),v=ze.largestBatchId):Ee.done()}).next(()=>p)}ue(e,n){return Fc(e).put(function(o,l,p){const[v,O,q]=Op(l,p.mutation.key);return{userId:l,collectionPath:O,documentId:q,collectionGroup:p.mutation.key.getCollectionGroup(),largestBatchId:p.largestBatchId,overlayMutation:lu(o.re,p.mutation)}}(this.It,this.userId,n))}}function Fc(i){return aa(i,"documentOverlays")}class ku{constructor(){}ce(e,n){this.ae(e,n),n.he()}ae(e,n){if("nullValue"in e)this.le(n,5);else if("booleanValue"in e)this.le(n,10),n.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(n,15),n.fe(Ai(e.integerValue));else if("doubleValue"in e){const o=Ai(e.doubleValue);isNaN(o)?this.le(n,13):(this.le(n,15),ae(o)?n.fe(0):n.fe(o))}else if("timestampValue"in e){const o=e.timestampValue;this.le(n,20),"string"==typeof o?n.de(o):(n.de(`${o.seconds||""}`),n.fe(o.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,n),this.we(n);else if("bytesValue"in e)this.le(n,30),n.me(po(e.bytesValue)),this.we(n);else if("referenceValue"in e)this.ge(e.referenceValue,n);else if("geoPointValue"in e){const o=e.geoPointValue;this.le(n,45),n.fe(o.latitude||0),n.fe(o.longitude||0)}else"mapValue"in e?Ca(e)?this.le(n,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,n),this.we(n)):"arrayValue"in e?(this.pe(e.arrayValue,n),this.we(n)):Wn()}_e(e,n){this.le(n,25),this.Ie(e,n)}Ie(e,n){n.de(e)}ye(e,n){const o=e.fields||{};this.le(n,55);for(const l of Object.keys(o))this._e(l,n),this.ae(o[l],n)}pe(e,n){const o=e.values||[];this.le(n,50);for(const l of o)this.ae(l,n)}ge(e,n){this.le(n,37),yn.fromName(e).path.forEach(o=>{this.le(n,60),this.Ie(o,n)})}le(e,n){e.fe(n)}we(e){e.fe(2)}}function Rp(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Np(i){const e=64-function(n){let o=0;for(let l=0;l<8;++l){const p=Rp(255&n[l]);if(o+=p,8!==p)break}return o}(i);return Math.ceil(e/8)}ku.Te=new ku;class Vm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Ae(o.value),o=n.next();this.Re()}be(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Pe(o.value),o=n.next();this.ve()}Ve(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Ae(o);else if(o<2048)this.Ae(960|o>>>6),this.Ae(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Ae(480|o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o);else{const l=n.codePointAt(0);this.Ae(240|l>>>18),this.Ae(128|63&l>>>12),this.Ae(128|63&l>>>6),this.Ae(128|63&l)}}this.Re()}Se(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Pe(o);else if(o<2048)this.Pe(960|o>>>6),this.Pe(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Pe(480|o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o);else{const l=n.codePointAt(0);this.Pe(240|l>>>18),this.Pe(128|63&l>>>12),this.Pe(128|63&l>>>6),this.Pe(128|63&l)}}this.ve()}De(e){const n=this.Ce(e),o=Np(n);this.xe(1+o),this.buffer[this.position++]=255&o;for(let l=n.length-o;l<n.length;++l)this.buffer[this.position++]=255&n[l]}Ne(e){const n=this.Ce(e),o=Np(n);this.xe(1+o),this.buffer[this.position++]=~(255&o);for(let l=n.length-o;l<n.length;++l)this.buffer[this.position++]=~(255&n[l])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const n=function(l){const p=new DataView(new ArrayBuffer(8));return p.setFloat64(0,l,!1),new Uint8Array(p.buffer)}(e),o=0!=(128&n[0]);n[0]^=o?255:128;for(let l=1;l<n.length;++l)n[l]^=o?255:0;return n}Ae(e){const n=255&e;0===n?(this.Oe(0),this.Oe(255)):255===n?(this.Oe(255),this.Oe(0)):this.Oe(n)}Pe(e){const n=255&e;0===n?(this.Fe(0),this.Fe(255)):255===n?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const n=e+this.position;if(n<=this.buffer.length)return;let o=2*this.buffer.length;o<n&&(o=n);const l=new Uint8Array(o);l.set(this.buffer),this.buffer=l}}class Pa{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Uh{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class ec{constructor(){this.Be=new Vm,this.Le=new Pa(this.Be),this.Ue=new Uh(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Yl{constructor(e,n,o,l){this.indexId=e,this.documentKey=n,this.arrayValue=o,this.directionalValue=l}Ke(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(n);return o.set(this.directionalValue,0),n!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Yl(this.indexId,this.documentKey,this.arrayValue,o)}}function uo(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=tc(i.arrayValue,e.arrayValue),0!==n?n:(n=tc(i.directionalValue,e.directionalValue),0!==n?n:yn.comparator(i.documentKey,e.documentKey)))}function tc(i,e){for(let n=0;n<i.length&&n<e.length;++n){const o=i[n]-e[n];if(0!==o)return o}return i.length-e.length}class Fp{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const n of e.filters){const o=n;o.dt()?this.je=o:this.Qe.push(o)}}We(e){const n=na(e);if(void 0!==n&&!this.ze(n))return!1;const o=ra(e);let l=0,p=0;for(;l<o.length&&this.ze(o[l]);++l);if(l===o.length)return!0;if(void 0!==this.je){const v=o[l];if(!this.He(this.je,v)||!this.Je(this.Ge[p++],v))return!1;++l}for(;l<o.length;++l){const v=o[l];if(p>=this.Ge.length||!this.Je(this.Ge[p++],v))return!1}return!0}ze(e){for(const n of this.Qe)if(this.He(n,e))return!0;return!1}He(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}class jm{constructor(){this.Ye=new Bh}addToCollectionParentIndex(e,n){return this.Ye.add(n),lt.resolve()}getCollectionParents(e,n){return lt.resolve(this.Ye.getEntries(n))}addFieldIndex(e,n){return lt.resolve()}deleteFieldIndex(e,n){return lt.resolve()}getDocumentsMatchingTarget(e,n){return lt.resolve(null)}getIndexType(e,n){return lt.resolve(0)}getFieldIndexes(e,n){return lt.resolve([])}getNextCollectionGroupToUpdate(e){return lt.resolve(null)}getMinOffset(e,n){return lt.resolve(fs.min())}getMinOffsetFromCollectionGroup(e,n){return lt.resolve(fs.min())}updateCollectionGroup(e,n,o){return lt.resolve()}updateIndexEntries(e,n){return lt.resolve()}}class Bh{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),l=this.index[n]||new Si(Pr.comparator),p=!l.has(o);return this.index[n]=l.add(o),p}has(e){const n=e.lastSegment(),o=e.popLast(),l=this.index[n];return l&&l.has(o)}getEntries(e){return(this.index[e]||new Si(Pr.comparator)).toArray()}}const Lc=new Uint8Array(0);class Hm{constructor(e,n){this.user=e,this.databaseId=n,this.Xe=new Bh,this.Ze=new vo(o=>z(o),(o,l)=>Re(o,l)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Xe.has(n)){const o=n.lastSegment(),l=n.popLast();e.addOnCommittedListener(()=>{this.Xe.add(n)});const p={collectionId:o,parent:ka(l)};return Vh(e).put(p)}return lt.resolve()}getCollectionParents(e,n){const o=[],l=IDBKeyRange.bound([n,""],[Ga(n),""],!1,!0);return Vh(e).W(l).next(p=>{for(const v of p){if(v.collectionId!==n)break;o.push(wl(v.parent))}return o})}addFieldIndex(e,n){const o=Bc(e),l={indexId:(v=n).indexId,collectionGroup:v.collectionGroup,fields:v.fields.map(O=>[O.fieldPath.canonicalString(),O.kind])};var v;delete l.indexId;const p=o.add(l);if(n.indexState){const v=Vc(e);return p.next(O=>{v.put(kp(O,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return p.next()}deleteFieldIndex(e,n){const o=Bc(e),l=Vc(e),p=Uc(e);return o.delete(n.indexId).next(()=>l.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>p.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const o=Uc(e);let l=!0;const p=new Map;return lt.forEach(this.tn(n),v=>this.en(e,v).next(O=>{l&&(l=!!O),p.set(v,O)})).next(()=>{if(l){let v=Zr();const O=[];return lt.forEach(p,(q,ne)=>{var Ee;tn("IndexedDbIndexManager",`Using index ${Ee=q,`id=${Ee.indexId}|cg=${Ee.collectionGroup}|f=${Ee.fields.map(Qi=>`${Qi.fieldPath}:${Qi.kind}`).join(",")}`} to execute ${z(n)}`);const ze=function(Qi,jo){const gs=na(jo);if(void 0===gs)return null;for(const Ji of It(Qi,gs.fieldPath))switch(Ji.op){case"array-contains-any":return Ji.value.arrayValue.values||[];case"array-contains":return[Ji.value]}return null}(ne,q),Dt=function(Qi,jo){const gs=new Map;for(const Ji of ra(jo))for(const ua of It(Qi,Ji.fieldPath))switch(ua.op){case"==":case"in":gs.set(Ji.fieldPath.canonicalString(),ua.value);break;case"not-in":case"!=":return gs.set(Ji.fieldPath.canonicalString(),ua.value),Array.from(gs.values())}return null}(ne,q),qt=function(Qi,jo){const gs=[];let Ji=!0;for(const ua of ra(jo)){const ud=0===ua.kind?nn(Qi,ua.fieldPath,Qi.startAt):Cn(Qi,ua.fieldPath,Qi.startAt);gs.push(ud.value),Ji&&(Ji=ud.inclusive)}return new Mo(gs,Ji)}(ne,q),en=function(Qi,jo){const gs=[];let Ji=!0;for(const ua of ra(jo)){const ud=0===ua.kind?Cn(Qi,ua.fieldPath,Qi.endAt):nn(Qi,ua.fieldPath,Qi.endAt);gs.push(ud.value),Ji&&(Ji=ud.inclusive)}return new Mo(gs,Ji)}(ne,q),qn=this.nn(q,ne,qt),rr=this.nn(q,ne,en),Ui=this.sn(q,ne,Dt),Ds=this.rn(q.indexId,ze,qn,qt.inclusive,rr,en.inclusive,Ui);return lt.forEach(Ds,Qi=>o.J(Qi,n.limit).next(jo=>{jo.forEach(gs=>{const Ji=yn.fromSegments(gs.documentKey);v.has(Ji)||(v=v.add(Ji),O.push(Ji))})}))}).next(()=>O)}return lt.resolve(null)})}tn(e){let n=this.Ze.get(e);return n||(n=[e],this.Ze.set(e,n),n)}rn(e,n,o,l,p,v,O){const q=(null!=n?n.length:1)*Math.max(o.length,p.length),ne=q/(null!=n?n.length:1),Ee=[];for(let ze=0;ze<q;++ze){const Dt=n?this.on(n[ze/ne]):Lc,qt=this.un(e,Dt,o[ze%ne],l),en=this.cn(e,Dt,p[ze%ne],v),qn=O.map(rr=>this.un(e,Dt,rr,!0));Ee.push(...this.createRange(qt,en,qn))}return Ee}un(e,n,o,l){const p=new Yl(e,yn.empty(),n,o);return l?p:p.Ke()}cn(e,n,o,l){const p=new Yl(e,yn.empty(),n,o);return l?p.Ke():p}en(e,n){const o=new Fp(n),l=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,l).next(p=>{let v=null;for(const O of p)o.We(O)&&(!v||O.fields.length>v.fields.length)&&(v=O);return v})}getIndexType(e,n){let o=2;return lt.forEach(this.tn(n),l=>this.en(e,l).next(p=>{p?0!==o&&p.fields.length<function(v){let O=new Si(Li.comparator),q=!1;for(const ne of v.filters){const Ee=ne;Ee.field.isKeyField()||("array-contains"===Ee.op||"array-contains-any"===Ee.op?q=!0:O=O.add(Ee.field))}for(const ne of v.orderBy)ne.field.isKeyField()||(O=O.add(ne.field));return O.size+(q?1:0)}(l)&&(o=1):o=0})).next(()=>o)}an(e,n){const o=new ec;for(const l of ra(e)){const p=n.data.field(l.fieldPath);if(null==p)return null;const v=o.qe(l.kind);ku.Te.ce(p,v)}return o.$e()}on(e){const n=new ec;return ku.Te.ce(e,n.qe(0)),n.$e()}hn(e,n){const o=new ec;return ku.Te.ce(Ms(this.databaseId,n),o.qe(function(l){const p=ra(l);return 0===p.length?0:p[p.length-1].kind}(e))),o.$e()}sn(e,n,o){if(null===o)return[];let l=[];l.push(new ec);let p=0;for(const v of ra(e)){const O=o[p++];for(const q of l)if(this.ln(n,v.fieldPath)&&Ao(O))l=this.fn(l,v,O);else{const ne=q.qe(v.kind);ku.Te.ce(O,ne)}}return this.dn(l)}nn(e,n,o){return this.sn(e,n,o.position)}dn(e){const n=[];for(let o=0;o<e.length;++o)n[o]=e[o].$e();return n}fn(e,n,o){const l=[...e],p=[];for(const v of o.arrayValue.values||[])for(const O of l){const q=new ec;q.seed(O.$e()),ku.Te.ce(v,q.qe(n.kind)),p.push(q)}return p}ln(e,n){return!!e.filters.find(o=>o instanceof Gn&&o.field.isEqual(n)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,n){const o=Bc(e),l=Vc(e);return(n?o.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):o.W()).next(p=>{const v=[];return lt.forEach(p,O=>l.get([O.indexId,this.uid]).next(q=>{v.push(function(ne,Ee){const ze=Ee?new ya(Ee.sequenceNumber,new fs(Kl(Ee.readTime),new yn(wl(Ee.documentKey)),Ee.largestBatchId)):ya.empty(),Dt=ne.fields.map(([qt,en])=>new ma(Li.fromServerFormat(qt),en));return new Go(ne.indexId,ne.collectionGroup,Dt,ze)}(O,q))})).next(()=>v)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((o,l)=>{const p=o.indexState.sequenceNumber-l.indexState.sequenceNumber;return 0!==p?p:Er(o.collectionGroup,l.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,o){const l=Bc(e),p=Vc(e);return this._n(e).next(v=>l.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(O=>lt.forEach(O,q=>p.put(kp(q.indexId,this.user,v,o)))))}updateIndexEntries(e,n){const o=new Map;return lt.forEach(n,(l,p)=>{const v=o.get(l.collectionGroup);return(v?lt.resolve(v):this.getFieldIndexes(e,l.collectionGroup)).next(O=>(o.set(l.collectionGroup,O),lt.forEach(O,q=>this.wn(e,l,q).next(ne=>{const Ee=this.mn(p,q);return ne.isEqual(Ee)?lt.resolve():this.gn(e,p,q,ne,Ee)}))))})}yn(e,n,o,l){return Uc(e).put({indexId:l.indexId,uid:this.uid,arrayValue:l.arrayValue,directionalValue:l.directionalValue,orderedDocumentKey:this.hn(o,n.key),documentKey:n.key.path.toArray()})}pn(e,n,o,l){return Uc(e).delete([l.indexId,this.uid,l.arrayValue,l.directionalValue,this.hn(o,n.key),n.key.path.toArray()])}wn(e,n,o){const l=Uc(e);let p=new Si(uo);return l.Z({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.hn(o,n)])},(v,O)=>{p=p.add(new Yl(o.indexId,n,O.arrayValue,O.directionalValue))}).next(()=>p)}mn(e,n){let o=new Si(uo);const l=this.an(n,e);if(null==l)return o;const p=na(n);if(null!=p){const v=e.data.field(p.fieldPath);if(Ao(v))for(const O of v.arrayValue.values||[])o=o.add(new Yl(n.indexId,e.key,this.on(O),l))}else o=o.add(new Yl(n.indexId,e.key,Lc,l));return o}gn(e,n,o,l,p){tn("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const v=[];return function(O,q,ne,Ee,ze){const Dt=O.getIterator(),qt=q.getIterator();let en=qo(Dt),qn=qo(qt);for(;en||qn;){let rr=!1,Ui=!1;if(en&&qn){const Ds=ne(en,qn);Ds<0?Ui=!0:Ds>0&&(rr=!0)}else null!=en?Ui=!0:rr=!0;rr?(Ee(qn),qn=qo(qt)):Ui?(ze(en),en=qo(Dt)):(en=qo(Dt),qn=qo(qt))}}(l,p,uo,O=>{v.push(this.yn(e,n,o,O))},O=>{v.push(this.pn(e,n,o,O))}),lt.waitFor(v)}_n(e){let n=1;return Vc(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,l,p)=>{p.done(),n=l.sequenceNumber+1}).next(()=>n)}createRange(e,n,o){o=o.sort((v,O)=>uo(v,O)).filter((v,O,q)=>!O||0!==uo(v,q[O-1]));const l=[];l.push(e);for(const v of o){const O=uo(v,e),q=uo(v,n);if(0===O)l[0]=e.Ke();else if(O>0&&q<0)l.push(v),l.push(v.Ke());else if(q>0)break}l.push(n);const p=[];for(let v=0;v<l.length;v+=2)p.push(IDBKeyRange.bound([l[v].indexId,this.uid,l[v].arrayValue,l[v].directionalValue,Lc,[]],[l[v+1].indexId,this.uid,l[v+1].arrayValue,l[v+1].directionalValue,Lc,[]]));return p}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Lp)}getMinOffset(e,n){return lt.mapArray(this.tn(n),o=>this.en(e,o).next(l=>l||Wn())).next(Lp)}}function Vh(i){return aa(i,"collectionParents")}function Uc(i){return aa(i,"indexEntries")}function Bc(i){return aa(i,"indexConfiguration")}function Vc(i){return aa(i,"indexState")}function Lp(i){or(0!==i.length);let e=i[0].indexState.offset,n=e.largestBatchId;for(let o=1;o<i.length;o++){const l=i[o].indexState.offset;js(l,e)<0&&(e=l),n<l.largestBatchId&&(n=l.largestBatchId)}return new fs(e.readTime,e.documentKey,n)}const Up={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ja{constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new ja(e,ja.DEFAULT_COLLECTION_PERCENTILE,ja.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Bp(i,e,n){const o=i.store("mutations"),l=i.store("documentMutations"),p=[],v=IDBKeyRange.only(n.batchId);let O=0;const q=o.Z({range:v},(Ee,ze,Dt)=>(O++,Dt.delete()));p.push(q.next(()=>{or(1===O)}));const ne=[];for(const Ee of n.mutations){const ze=Qu(e,Ee.key.path,n.batchId);p.push(l.delete(ze)),ne.push(Ee.key)}return lt.waitFor(p).next(()=>ne)}function Ql(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Wn();e=i.noDocument}return JSON.stringify(e).length}ja.DEFAULT_COLLECTION_PERCENTILE=10,ja.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ja.DEFAULT=new ja(41943040,ja.DEFAULT_COLLECTION_PERCENTILE,ja.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ja.DISABLED=new ja(-1,0,0);class cl{constructor(e,n,o,l){this.userId=e,this.It=n,this.indexManager=o,this.referenceDelegate=l,this.In={}}static oe(e,n,o,l){or(""!==e.uid);const p=e.isAuthenticated()?e.uid:"";return new cl(p,n,o,l)}checkEmpty(e){let n=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return uu(e).Z({index:"userMutationsIndex",range:o},(l,p,v)=>{n=!1,v.done()}).next(()=>n)}addMutationBatch(e,n,o,l){const p=jc(e),v=uu(e);return v.add({}).next(O=>{or("number"==typeof O);const q=new Ap(O,n,o,l),ne=function(Dt,qt,en){const qn=en.baseMutations.map(Ui=>lu(Dt.re,Ui)),rr=en.mutations.map(Ui=>lu(Dt.re,Ui));return{userId:qt,batchId:en.batchId,localWriteTimeMs:en.localWriteTime.toMillis(),baseMutations:qn,mutations:rr}}(this.It,this.userId,q),Ee=[];let ze=new Si((Dt,qt)=>Er(Dt.canonicalString(),qt.canonicalString()));for(const Dt of l){const qt=Qu(this.userId,Dt.key.path,O);ze=ze.add(Dt.key.path.popLast()),Ee.push(v.put(ne)),Ee.push(p.put(qt,xm))}return ze.forEach(Dt=>{Ee.push(this.indexManager.addToCollectionParentIndex(e,Dt))}),e.addOnCommittedListener(()=>{this.In[O]=q.keys()}),lt.waitFor(Ee).next(()=>q)})}lookupMutationBatch(e,n){return uu(e).get(n).next(o=>o?(or(o.userId===this.userId),El(this.It,o)):null)}Tn(e,n){return this.In[n]?lt.resolve(this.In[n]):this.lookupMutationBatch(e,n).next(o=>{if(o){const l=o.keys();return this.In[n]=l,l}return null})}getNextMutationBatchAfterBatchId(e,n){const o=n+1,l=IDBKeyRange.lowerBound([this.userId,o]);let p=null;return uu(e).Z({index:"userMutationsIndex",range:l},(v,O,q)=>{O.userId===this.userId&&(or(O.batchId>=o),p=El(this.It,O)),q.done()}).next(()=>p)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return uu(e).Z({index:"userMutationsIndex",range:n,reverse:!0},(l,p,v)=>{o=p.batchId,v.done()}).next(()=>o)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return uu(e).W("userMutationsIndex",n).next(o=>o.map(l=>El(this.It,l)))}getAllMutationBatchesAffectingDocumentKey(e,n){const o=pd(this.userId,n.path),l=IDBKeyRange.lowerBound(o),p=[];return jc(e).Z({range:l},(v,O,q)=>{const[ne,Ee,ze]=v,Dt=wl(Ee);if(ne===this.userId&&n.path.isEqual(Dt))return uu(e).get(ze).next(qt=>{if(!qt)throw Wn();or(qt.userId===this.userId),p.push(El(this.It,qt))});q.done()}).next(()=>p)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Si(Er);const l=[];return n.forEach(p=>{const v=pd(this.userId,p.path),O=IDBKeyRange.lowerBound(v),q=jc(e).Z({range:O},(ne,Ee,ze)=>{const[Dt,qt,en]=ne,qn=wl(qt);Dt===this.userId&&p.path.isEqual(qn)?o=o.add(en):ze.done()});l.push(q)}),lt.waitFor(l).next(()=>this.En(e,o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,l=o.length+1,p=pd(this.userId,o),v=IDBKeyRange.lowerBound(p);let O=new Si(Er);return jc(e).Z({range:v},(q,ne,Ee)=>{const[ze,Dt,qt]=q,en=wl(Dt);ze===this.userId&&o.isPrefixOf(en)?en.length===l&&(O=O.add(qt)):Ee.done()}).next(()=>this.En(e,O))}En(e,n){const o=[],l=[];return n.forEach(p=>{l.push(uu(e).get(p).next(v=>{if(null===v)throw Wn();or(v.userId===this.userId),o.push(El(this.It,v))}))}),lt.waitFor(l).next(()=>o)}removeMutationBatch(e,n){return Bp(e.ie,this.userId,n).next(o=>(e.addOnCommittedListener(()=>{this.An(n.batchId)}),lt.forEach(o,l=>this.referenceDelegate.markPotentiallyOrphaned(e,l))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return lt.resolve();const o=IDBKeyRange.lowerBound([this.userId]),l=[];return jc(e).Z({range:o},(p,v,O)=>{if(p[0]===this.userId){const q=wl(p[1]);l.push(q)}else O.done()}).next(()=>{or(0===l.length)})})}containsKey(e,n){return Vp(e,this.userId,n)}Rn(e){return $m(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Vp(i,e,n){const o=pd(e,n.path),l=o[1],p=IDBKeyRange.lowerBound(o);let v=!1;return jc(i).Z({range:p,X:!0},(O,q,ne)=>{const[Ee,ze,Dt]=O;Ee===e&&ze===l&&(v=!0),ne.done()}).next(()=>v)}function uu(i){return aa(i,"mutations")}function jc(i){return aa(i,"documentMutations")}function $m(i){return aa(i,"mutationQueues")}class cu{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new cu(0)}static vn(){return new cu(-1)}}class V_{constructor(e,n){this.referenceDelegate=e,this.It=n}allocateTargetId(e){return this.Vn(e).next(n=>{const o=new cu(n.highestTargetId);return n.highestTargetId=o.next(),this.Sn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(n=>pr.fromTimestamp(new ti(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,o){return this.Vn(e).next(l=>(l.highestListenSequenceNumber=n,o&&(l.lastRemoteSnapshotVersion=o.toTimestamp()),n>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=n),this.Sn(e,l)))}addTargetData(e,n){return this.Dn(e,n).next(()=>this.Vn(e).next(o=>(o.targetCount+=1,this.Cn(n,o),this.Sn(e,o))))}updateTargetData(e,n){return this.Dn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ra(e).delete(n.targetId)).next(()=>this.Vn(e)).next(o=>(or(o.targetCount>0),o.targetCount-=1,this.Sn(e,o)))}removeTargets(e,n,o){let l=0;const p=[];return Ra(e).Z((v,O)=>{const q=Nc(O);q.sequenceNumber<=n&&null===o.get(q.targetId)&&(l++,p.push(this.removeTargetData(e,q)))}).next(()=>lt.waitFor(p)).next(()=>l)}forEachTarget(e,n){return Ra(e).Z((o,l)=>{const p=Nc(l);n(p)})}Vn(e){return bd(e).get("targetGlobalKey").next(n=>(or(null!==n),n))}Sn(e,n){return bd(e).put("targetGlobalKey",n)}Dn(e,n){return Ra(e).put(xp(this.It,n))}Cn(e,n){let o=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,o=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Vn(e).next(n=>n.targetCount)}getTargetData(e,n){const o=z(n),l=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let p=null;return Ra(e).Z({range:l,index:"queryTargetsIndex"},(v,O,q)=>{const ne=Nc(O);Re(n,ne.target)&&(p=ne,q.done())}).next(()=>p)}addMatchingKeys(e,n,o){const l=[],p=Rl(e);return n.forEach(v=>{const O=ka(v.path);l.push(p.put({targetId:o,path:O})),l.push(this.referenceDelegate.addReference(e,o,v))}),lt.waitFor(l)}removeMatchingKeys(e,n,o){const l=Rl(e);return lt.forEach(n,p=>{const v=ka(p.path);return lt.waitFor([l.delete([o,v]),this.referenceDelegate.removeReference(e,o,p)])})}removeMatchingKeysForTargetId(e,n){const o=Rl(e),l=IDBKeyRange.bound([n],[n+1],!1,!0);return o.delete(l)}getMatchingKeysForTargetId(e,n){const o=IDBKeyRange.bound([n],[n+1],!1,!0),l=Rl(e);let p=Zr();return l.Z({range:o,X:!0},(v,O,q)=>{const ne=wl(v[1]),Ee=new yn(ne);p=p.add(Ee)}).next(()=>p)}containsKey(e,n){const o=ka(n.path),l=IDBKeyRange.bound([o],[Ga(o)],!1,!0);let p=0;return Rl(e).Z({index:"documentTargetsIndex",X:!0,range:l},([v,O],q,ne)=>{0!==v&&(p++,ne.done())}).next(()=>p>0)}se(e,n){return Ra(e).get(n).next(o=>o?Nc(o):null)}}function Ra(i){return aa(i,"targets")}function bd(i){return aa(i,"targetGlobal")}function Rl(i){return aa(i,"targetDocuments")}function jp([i,e],[n,o]){const l=Er(i,n);return 0===l?Er(e,o):l}class Hp{constructor(e){this.xn=e,this.buffer=new Si(jp),this.Nn=0}kn(){return++this.Nn}On(e){const n=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();jp(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Zm{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var n=this;tn("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,h.Z)(function*(){n.Mn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(o){oo(o)?tn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield ia(o)}yield n.Fn(3e5)}))}}class Hc{constructor(e,n){this.$n=e,this.params=n}calculateTargetCount(e,n){return this.$n.Bn(e).next(o=>Math.floor(n/100*o))}nthSequenceNumber(e,n){if(0===n)return lt.resolve(So.at);const o=new Hp(n);return this.$n.forEachTarget(e,l=>o.On(l.sequenceNumber)).next(()=>this.$n.Ln(e,l=>o.On(l))).next(()=>o.maxValue)}removeTargets(e,n,o){return this.$n.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.$n.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(tn("LruGarbageCollector","Garbage collection skipped; disabled"),lt.resolve(Up)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(tn("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Up):this.Un(e,n))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,n){let o,l,p,v,O,q,ne;const Ee=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ze=>(ze>this.params.maximumSequenceNumbersToCollect?(tn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ze}`),l=this.params.maximumSequenceNumbersToCollect):l=ze,v=Date.now(),this.nthSequenceNumber(e,l))).next(ze=>(o=ze,O=Date.now(),this.removeTargets(e,o,n))).next(ze=>(p=ze,q=Date.now(),this.removeOrphanedDocuments(e,o))).next(ze=>(ne=Date.now(),vs()<=d.in.DEBUG&&tn("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${v-Ee}ms\n\tDetermined least recently used ${l} in `+(O-v)+`ms\n\tRemoved ${p} targets in `+(q-O)+`ms\n\tRemoved ${ze} documents in `+(ne-q)+`ms\nTotal Duration: ${ne-Ee}ms`),lt.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:p,documentsRemoved:ze})))}}class zm{constructor(e,n){this.db=e,this.garbageCollector=new Hc(this,n)}Bn(e){const n=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>n.next(l=>o+l))}qn(e){let n=0;return this.Ln(e,o=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Ln(e,n){return this.Kn(e,(o,l)=>n(l))}addReference(e,n,o){return wd(e,o)}removeReference(e,n,o){return wd(e,o)}removeTargets(e,n,o){return this.db.getTargetCache().removeTargets(e,n,o)}markPotentiallyOrphaned(e,n){return wd(e,n)}Gn(e,n){return function(o,l){let p=!1;return $m(o).tt(v=>Vp(o,v,l).next(O=>(O&&(p=!0),lt.resolve(!O)))).next(()=>p)}(e,n)}removeOrphanedDocuments(e,n){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),l=[];let p=0;return this.Kn(e,(v,O)=>{if(O<=n){const q=this.Gn(e,v).next(ne=>{if(!ne)return p++,o.getEntry(e,v).next(()=>(o.removeEntry(v,pr.min()),Rl(e).delete([0,ka(v.path)])))});l.push(q)}}).next(()=>lt.waitFor(l)).next(()=>o.apply(e)).next(()=>p)}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,n){return wd(e,n)}Kn(e,n){const o=Rl(e);let l,p=So.at;return o.Z({index:"documentTargetsIndex"},([v,O],{path:q,sequenceNumber:ne})=>{0===v?(p!==So.at&&n(new yn(wl(l)),p),p=ne,l=q):p=So.at}).next(()=>{p!==So.at&&n(new yn(wl(l)),p)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wd(i,e){return Rl(i).put((o=i.currentSequenceNumber,{targetId:0,path:ka(e.path),sequenceNumber:o}));var o}class Ed{constructor(){this.changes=new vo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return void 0!==o?lt.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jh{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,o){return Jl(e).put(o)}removeEntry(e,n,o){return Jl(e).delete(function(l,p){const v=l.path.toArray();return[v.slice(0,v.length-2),v[v.length-2],Xu(p),v[v.length-1]]}(n,o))}updateMetadata(e,n){return this.getMetadata(e).next(o=>(o.byteSize+=n,this.Qn(e,o)))}getEntry(e,n){let o=xr.newInvalidDocument(n);return Jl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(nc(n))},(l,p)=>{o=this.jn(n,p)}).next(()=>o)}Wn(e,n){let o={size:0,document:xr.newInvalidDocument(n)};return Jl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(nc(n))},(l,p)=>{o={document:this.jn(n,p),size:Ql(p)}}).next(()=>o)}getEntries(e,n){let o=Yo();return this.zn(e,n,(l,p)=>{const v=this.jn(l,p);o=o.insert(l,v)}).next(()=>o)}Hn(e,n){let o=Yo(),l=new Gi(yn.comparator);return this.zn(e,n,(p,v)=>{const O=this.jn(p,v);o=o.insert(p,O),l=l.insert(p,Ql(v))}).next(()=>({documents:o,Jn:l}))}zn(e,n,o){if(n.isEmpty())return lt.resolve();let l=new Si(Cd);n.forEach(q=>l=l.add(q));const p=IDBKeyRange.bound(nc(l.first()),nc(l.last())),v=l.getIterator();let O=v.getNext();return Jl(e).Z({index:"documentKeyIndex",range:p},(q,ne,Ee)=>{const ze=yn.fromSegments([...ne.prefixPath,ne.collectionGroup,ne.documentId]);for(;O&&Cd(O,ze)<0;)o(O,null),O=v.getNext();O&&O.isEqual(ze)&&(o(O,ne),O=v.hasNext()?v.getNext():null),O?Ee.j(nc(O)):Ee.done()}).next(()=>{for(;O;)o(O,null),O=v.hasNext()?v.getNext():null})}getAllFromCollection(e,n,o){const l=[n.popLast().toArray(),n.lastSegment(),Xu(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],p=[n.popLast().toArray(),n.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jl(e).W(IDBKeyRange.bound(l,p,!0)).next(v=>{let O=Yo();for(const q of v){const ne=this.jn(yn.fromSegments(q.prefixPath.concat(q.collectionGroup,q.documentId)),q);O=O.insert(ne.key,ne)}return O})}getAllFromCollectionGroup(e,n,o,l){let p=Yo();const v=$p(n,o),O=$p(n,fs.max());return Jl(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(v,O,!0)},(q,ne,Ee)=>{const ze=this.jn(yn.fromSegments(ne.prefixPath.concat(ne.collectionGroup,ne.documentId)),ne);p=p.insert(ze.key,ze),p.size===l&&Ee.done()}).next(()=>p)}newChangeBuffer(e){return new j_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Pu(e).get("remoteDocumentGlobalKey").next(n=>(or(!!n),n))}Qn(e,n){return Pu(e).put("remoteDocumentGlobalKey",n)}jn(e,n){if(n){const o=function Mp(i,e){let n;if(e.document)n=au(i.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=yn.fromSegments(e.noDocument.path),l=Kl(e.noDocument.readTime);n=xr.newNoDocument(o,l),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Wn();{const o=yn.fromSegments(e.unknownDocument.path),l=Kl(e.unknownDocument.version);n=xr.newUnknownDocument(o,l)}}return e.readTime&&n.setReadTime(function(o){const l=new ti(o[0],o[1]);return pr.fromTimestamp(l)}(e.readTime)),n}(this.It,n);if(!o.isNoDocument()||!o.version.isEqual(pr.min()))return o}return xr.newInvalidDocument(e)}}function Hh(i){return new jh(i)}class j_ extends Ed{constructor(e,n){super(),this.Yn=e,this.trackRemovals=n,this.Xn=new vo(o=>o.toString(),(o,l)=>o.isEqual(l))}applyChanges(e){const n=[];let o=0,l=new Si((p,v)=>Er(p.canonicalString(),v.canonicalString()));return this.changes.forEach((p,v)=>{const O=this.Xn.get(p);if(n.push(this.Yn.removeEntry(e,p,O.readTime)),v.isValidDocument()){const q=Fh(this.Yn.It,v);l=l.add(p.path.popLast()),o+=Ql(q)-O.size,n.push(this.Yn.addEntry(e,p,q))}else if(o-=O.size,this.trackRemovals){const q=Fh(this.Yn.It,v.convertToNoDocument(pr.min()));n.push(this.Yn.addEntry(e,p,q))}}),l.forEach(p=>{n.push(this.Yn.indexManager.addToCollectionParentIndex(e,p))}),n.push(this.Yn.updateMetadata(e,o)),lt.waitFor(n)}getFromCache(e,n){return this.Yn.Wn(e,n).next(o=>(this.Xn.set(n,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,n){return this.Yn.Hn(e,n).next(({documents:o,Jn:l})=>(l.forEach((p,v)=>{this.Xn.set(p,{size:v,readTime:o.get(p).readTime})}),o))}}function Pu(i){return aa(i,"remoteDocumentGlobal")}function Jl(i){return aa(i,"remoteDocumentsV14")}function nc(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $p(i,e){const n=e.documentKey.path.toArray();return[i,Xu(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Cd(i,e){const n=i.path.toArray(),o=e.path.toArray();let l=0;for(let p=0;p<n.length-2&&p<o.length-2;++p)if(l=Er(n[p],o[p]),l)return l;return l=Er(n.length,o.length),l||(l=Er(n[n.length-2],o[o.length-2]),l||Er(n[n.length-1],o[o.length-1]))}class Gm{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Zp{constructor(e,n,o,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=l}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next(l=>(o=l,this.getBaseDocument(e,n,o))).next(l=>(null!==o&&xo(o.mutation,l,As.empty(),ti.now()),l))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.getLocalViewOfDocuments(e,o,Zr()).next(()=>o))}getLocalViewOfDocuments(e,n,o=Zr()){const l=Ja();return this.populateOverlays(e,l,n).next(()=>this.computeViews(e,n,l,o).next(p=>{let v=Gl();return p.forEach((O,q)=>{v=v.insert(O,q.overlayedDocument)}),v}))}getOverlayedDocuments(e,n){const o=Ja();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,Zr()))}populateOverlays(e,n,o){const l=[];return o.forEach(p=>{n.has(p)||l.push(p)}),this.documentOverlayCache.getOverlays(e,l).next(p=>{p.forEach((v,O)=>{n.set(v,O)})})}computeViews(e,n,o,l){let p=Yo();const v=Wl(),O=Wl();return n.forEach((q,ne)=>{const Ee=o.get(ne.key);l.has(ne.key)&&(void 0===Ee||Ee.mutation instanceof y)?p=p.insert(ne.key,ne):void 0!==Ee&&(v.set(ne.key,Ee.mutation.getFieldMask()),xo(Ee.mutation,ne,Ee.mutation.getFieldMask(),ti.now()))}),this.recalculateAndSaveOverlays(e,p).next(q=>(q.forEach((ne,Ee)=>v.set(ne,Ee)),n.forEach((ne,Ee)=>{var ze;return O.set(ne,new Gm(Ee,null!==(ze=v.get(ne))&&void 0!==ze?ze:null))}),O))}recalculateAndSaveOverlays(e,n){const o=Wl();let l=new Gi((v,O)=>v-O),p=Zr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(v=>{for(const O of v)O.keys().forEach(q=>{const ne=n.get(q);if(null===ne)return;let Ee=o.get(q)||As.empty();Ee=O.applyToLocalView(ne,Ee),o.set(q,Ee);const ze=(l.get(O.batchId)||Zr()).add(q);l=l.insert(O.batchId,ze)})}).next(()=>{const v=[],O=l.getReverseIterator();for(;O.hasNext();){const q=O.getNext(),ne=q.key,Ee=q.value,ze=Wu();Ee.forEach(Dt=>{if(!p.has(Dt)){const qt=hi(n.get(Dt),o.get(Dt));null!==qt&&ze.set(Dt,qt),p=p.add(Dt)}}),v.push(this.documentOverlayCache.saveOverlays(e,ne,ze))}return lt.waitFor(v)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,n,o){return yn.isDocumentKey((l=n).path)&&null===l.collectionGroup&&0===l.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):w(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o):this.getDocumentsMatchingCollectionQuery(e,n,o);var l}getNextDocuments(e,n,o,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,l).next(p=>{const v=l-p.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,l-p.size):lt.resolve(Ja());let O=-1,q=p;return v.next(ne=>lt.forEach(ne,(Ee,ze)=>(O<ze.largestBatchId&&(O=ze.largestBatchId),p.get(Ee)?lt.resolve():this.getBaseDocument(e,Ee,ze).next(Dt=>{q=q.insert(Ee,Dt)}))).next(()=>this.populateOverlays(e,ne,p)).next(()=>this.computeViews(e,q,ne,Zr())).next(Ee=>({batchId:O,changes:Mc(Ee)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new yn(n)).next(o=>{let l=Gl();return o.isFoundDocument()&&(l=l.insert(o.key,o)),l})}getDocumentsMatchingCollectionGroupQuery(e,n,o){const l=n.collectionGroup;let p=Gl();return this.indexManager.getCollectionParents(e,l).next(v=>lt.forEach(v,O=>{const q=(ne=n,Ee=O.child(l),new sa(Ee,null,ne.explicitOrderBy.slice(),ne.filters.slice(),ne.limit,ne.limitType,ne.startAt,ne.endAt));var ne,Ee;return this.getDocumentsMatchingCollectionQuery(e,q,o).next(ne=>{ne.forEach((Ee,ze)=>{p=p.insert(Ee,ze)})})}).next(()=>p))}getDocumentsMatchingCollectionQuery(e,n,o){let l;return this.remoteDocumentCache.getAllFromCollection(e,n.path,o).next(p=>(l=p,this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId))).next(p=>{p.forEach((O,q)=>{const ne=q.getKey();null===l.get(ne)&&(l=l.insert(ne,xr.newInvalidDocument(ne)))});let v=Gl();return l.forEach((O,q)=>{const ne=p.get(O);void 0!==ne&&xo(ne.mutation,q,As.empty(),ti.now()),Dn(n,q)&&(v=v.insert(O,q))}),v})}getBaseDocument(e,n,o){return null===o||1===o.mutation.type?this.remoteDocumentCache.getEntry(e,n):lt.resolve(xr.newInvalidDocument(n))}}class Wm{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,n){return lt.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var o;return this.Zn.set(n.id,{id:(o=n).id,version:o.version,createTime:Uo(o.createTime)}),lt.resolve()}getNamedQuery(e,n){return lt.resolve(this.ts.get(n))}saveNamedQuery(e,n){return this.ts.set(n.name,{name:(o=n).name,query:Lh(o.bundledQuery),readTime:Uo(o.readTime)}),lt.resolve();var o}}class qm{constructor(){this.overlays=new Gi(yn.comparator),this.es=new Map}getOverlay(e,n){return lt.resolve(this.overlays.get(n))}getOverlays(e,n){const o=Ja();return lt.forEach(n,l=>this.getOverlay(e,l).next(p=>{null!==p&&o.set(l,p)})).next(()=>o)}saveOverlays(e,n,o){return o.forEach((l,p)=>{this.ue(e,n,p)}),lt.resolve()}removeOverlaysForBatchId(e,n,o){const l=this.es.get(o);return void 0!==l&&(l.forEach(p=>this.overlays=this.overlays.remove(p)),this.es.delete(o)),lt.resolve()}getOverlaysForCollection(e,n,o){const l=Ja(),p=n.length+1,v=new yn(n.child("")),O=this.overlays.getIteratorFrom(v);for(;O.hasNext();){const q=O.getNext().value,ne=q.getKey();if(!n.isPrefixOf(ne.path))break;ne.path.length===p&&q.largestBatchId>o&&l.set(q.getKey(),q)}return lt.resolve(l)}getOverlaysForCollectionGroup(e,n,o,l){let p=new Gi((ne,Ee)=>ne-Ee);const v=this.overlays.getIterator();for(;v.hasNext();){const ne=v.getNext().value;if(ne.getKey().getCollectionGroup()===n&&ne.largestBatchId>o){let Ee=p.get(ne.largestBatchId);null===Ee&&(Ee=Ja(),p=p.insert(ne.largestBatchId,Ee)),Ee.set(ne.getKey(),ne)}}const O=Ja(),q=p.getIterator();for(;q.hasNext()&&(q.getNext().value.forEach((ne,Ee)=>O.set(ne,Ee)),!(O.size()>=l)););return lt.resolve(O)}ue(e,n,o){const l=this.overlays.get(o.key);if(null!==l){const v=this.es.get(l.largestBatchId).delete(o.key);this.es.set(l.largestBatchId,v)}this.overlays=this.overlays.insert(o.key,new md(n,o));let p=this.es.get(n);void 0===p&&(p=Zr(),this.es.set(n,p)),this.es.set(n,p.add(o.key))}}class $h{constructor(){this.ns=new Si(Qo.ss),this.rs=new Si(Qo.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,n){const o=new Qo(e,n);this.ns=this.ns.add(o),this.rs=this.rs.add(o)}us(e,n){e.forEach(o=>this.addReference(o,n))}removeReference(e,n){this.cs(new Qo(e,n))}hs(e,n){e.forEach(o=>this.removeReference(o,n))}ls(e){const n=new yn(new Pr([])),o=new Qo(n,e),l=new Qo(n,e+1),p=[];return this.rs.forEachInRange([o,l],v=>{this.cs(v),p.push(v.key)}),p}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const n=new yn(new Pr([])),o=new Qo(n,e),l=new Qo(n,e+1);let p=Zr();return this.rs.forEachInRange([o,l],v=>{p=p.add(v.key)}),p}containsKey(e){const n=new Qo(e,0),o=this.ns.firstAfterOrEqual(n);return null!==o&&e.isEqual(o.key)}}class Qo{constructor(e,n){this.key=e,this._s=n}static ss(e,n){return yn.comparator(e.key,n.key)||Er(e._s,n._s)}static os(e,n){return Er(e._s,n._s)||yn.comparator(e.key,n.key)}}class zp{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Si(Qo.ss)}checkEmpty(e){return lt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,o,l){const p=this.ws;this.ws++;const v=new Ap(p,n,o,l);this.mutationQueue.push(v);for(const O of l)this.gs=this.gs.add(new Qo(O.key,p)),this.indexManager.addToCollectionParentIndex(e,O.key.path.popLast());return lt.resolve(v)}lookupMutationBatch(e,n){return lt.resolve(this.ys(n))}getNextMutationBatchAfterBatchId(e,n){const l=this.ps(n+1),p=l<0?0:l;return lt.resolve(this.mutationQueue.length>p?this.mutationQueue[p]:null)}getHighestUnacknowledgedBatchId(){return lt.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return lt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new Qo(n,0),l=new Qo(n,Number.POSITIVE_INFINITY),p=[];return this.gs.forEachInRange([o,l],v=>{const O=this.ys(v._s);p.push(O)}),lt.resolve(p)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Si(Er);return n.forEach(l=>{const p=new Qo(l,0),v=new Qo(l,Number.POSITIVE_INFINITY);this.gs.forEachInRange([p,v],O=>{o=o.add(O._s)})}),lt.resolve(this.Is(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,l=o.length+1;let p=o;yn.isDocumentKey(p)||(p=p.child(""));const v=new Qo(new yn(p),0);let O=new Si(Er);return this.gs.forEachWhile(q=>{const ne=q.key.path;return!!o.isPrefixOf(ne)&&(ne.length===l&&(O=O.add(q._s)),!0)},v),lt.resolve(this.Is(O))}Is(e){const n=[];return e.forEach(o=>{const l=this.ys(o);null!==l&&n.push(l)}),n}removeMutationBatch(e,n){or(0===this.Ts(n.batchId,"removed")),this.mutationQueue.shift();let o=this.gs;return lt.forEach(n.mutations,l=>{const p=new Qo(l.key,n.batchId);return o=o.delete(p),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)}).next(()=>{this.gs=o})}An(e){}containsKey(e,n){const o=new Qo(n,0),l=this.gs.firstAfterOrEqual(o);return lt.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return lt.resolve()}Ts(e,n){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const n=this.ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Zh{constructor(e){this.Es=e,this.docs=new Gi(yn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,l=this.docs.get(o),p=l?l.size:0,v=this.Es(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:v}),this.size+=v-p,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return lt.resolve(o?o.document.mutableCopy():xr.newInvalidDocument(n))}getEntries(e,n){let o=Yo();return n.forEach(l=>{const p=this.docs.get(l);o=o.insert(l,p?p.document.mutableCopy():xr.newInvalidDocument(l))}),lt.resolve(o)}getAllFromCollection(e,n,o){let l=Yo();const p=new yn(n.child("")),v=this.docs.getIteratorFrom(p);for(;v.hasNext();){const{key:O,value:{document:q}}=v.getNext();if(!n.isPrefixOf(O.path))break;O.path.length>n.length+1||js(Aa(q),o)<=0||(l=l.insert(q.key,q.mutableCopy()))}return lt.resolve(l)}getAllFromCollectionGroup(e,n,o,l){Wn()}As(e,n){return lt.forEach(this.docs,o=>n(o))}newChangeBuffer(e){return new Gp(this)}getSize(e){return lt.resolve(this.size)}}class Gp extends Ed{constructor(e){super(),this.Yn=e}applyChanges(e){const n=[];return this.changes.forEach((o,l)=>{l.isValidDocument()?n.push(this.Yn.addEntry(e,l)):this.Yn.removeEntry(o)}),lt.waitFor(n)}getFromCache(e,n){return this.Yn.getEntry(e,n)}getAllFromCache(e,n){return this.Yn.getEntries(e,n)}}class zh{constructor(e){this.persistence=e,this.Rs=new vo(n=>z(n),Re),this.lastRemoteSnapshotVersion=pr.min(),this.highestTargetId=0,this.bs=0,this.Ps=new $h,this.targetCount=0,this.vs=cu.Pn()}forEachTarget(e,n){return this.Rs.forEach((o,l)=>n(l)),lt.resolve()}getLastRemoteSnapshotVersion(e){return lt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return lt.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),lt.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.bs&&(this.bs=n),lt.resolve()}Dn(e){this.Rs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.vs=new cu(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.Dn(n),this.targetCount+=1,lt.resolve()}updateTargetData(e,n){return this.Dn(n),lt.resolve()}removeTargetData(e,n){return this.Rs.delete(n.target),this.Ps.ls(n.targetId),this.targetCount-=1,lt.resolve()}removeTargets(e,n,o){let l=0;const p=[];return this.Rs.forEach((v,O)=>{O.sequenceNumber<=n&&null===o.get(O.targetId)&&(this.Rs.delete(v),p.push(this.removeMatchingKeysForTargetId(e,O.targetId)),l++)}),lt.waitFor(p).next(()=>l)}getTargetCount(e){return lt.resolve(this.targetCount)}getTargetData(e,n){const o=this.Rs.get(n)||null;return lt.resolve(o)}addMatchingKeys(e,n,o){return this.Ps.us(n,o),lt.resolve()}removeMatchingKeys(e,n,o){this.Ps.hs(n,o);const l=this.persistence.referenceDelegate,p=[];return l&&n.forEach(v=>{p.push(l.markPotentiallyOrphaned(e,v))}),lt.waitFor(p)}removeMatchingKeysForTargetId(e,n){return this.Ps.ls(n),lt.resolve()}getMatchingKeysForTargetId(e,n){const o=this.Ps.ds(n);return lt.resolve(o)}containsKey(e,n){return lt.resolve(this.Ps.containsKey(n))}}class Wp{constructor(e,n){this.Vs={},this.overlays={},this.Ss=new So(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new zh(this),this.indexManager=new jm,this.remoteDocumentCache=new Zh(o=>this.referenceDelegate.xs(o)),this.It=new Nh(n),this.Ns=new Wm(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new qm,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.Vs[e.toKey()];return o||(o=new zp(n,this.referenceDelegate),this.Vs[e.toKey()]=o),o}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,n,o){tn("MemoryPersistence","Starting transaction:",e);const l=new Km(this.Ss.next());return this.referenceDelegate.ks(),o(l).next(p=>this.referenceDelegate.Os(l).next(()=>p)).toPromise().then(p=>(l.raiseOnCommittedEvent(),p))}Ms(e,n){return lt.or(Object.values(this.Vs).map(o=>()=>o.containsKey(e,n)))}}class Km extends _a{constructor(e){super(),this.currentSequenceNumber=e}}class $c{constructor(e){this.persistence=e,this.Fs=new $h,this.$s=null}static Bs(e){return new $c(e)}get Ls(){if(this.$s)return this.$s;throw Wn()}addReference(e,n,o){return this.Fs.addReference(o,n),this.Ls.delete(o.toString()),lt.resolve()}removeReference(e,n,o){return this.Fs.removeReference(o,n),this.Ls.add(o.toString()),lt.resolve()}markPotentiallyOrphaned(e,n){return this.Ls.add(n.toString()),lt.resolve()}removeTarget(e,n){this.Fs.ls(n.targetId).forEach(l=>this.Ls.add(l.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next(l=>{l.forEach(p=>this.Ls.add(p.toString()))}).next(()=>o.removeTargetData(e,n))}ks(){this.$s=new Set}Os(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return lt.forEach(this.Ls,o=>{const l=yn.fromPath(o);return this.Us(e,l).next(p=>{p||n.removeEntry(l,pr.min())})}).next(()=>(this.$s=null,n.apply(e)))}updateLimboDocument(e,n){return this.Us(e,n).next(o=>{o?this.Ls.delete(n.toString()):this.Ls.add(n.toString())})}xs(e){return 0}Us(e,n){return lt.or([()=>lt.resolve(this.Fs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ms(e,n)])}}class qp{constructor(e){this.It=e}$(e,n,o,l){const p=new zi("createOrUpgrade",n);var O;o<1&&l>=1&&(e.createObjectStore("owner"),(O=e).createObjectStore("mutationQueues",{keyPath:"userId"}),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Mm,{unique:!0}),O.createObjectStore("documentMutations"),du(e),function(O){O.createObjectStore("remoteDocuments")}(e));let v=lt.resolve();return o<3&&l>=3&&(0!==o&&(function(O){O.deleteObjectStore("targetDocuments"),O.deleteObjectStore("targets"),O.deleteObjectStore("targetGlobal")}(e),du(e)),v=v.next(()=>function(O){const q=O.store("targetGlobal"),ne={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:pr.min().toTimestamp(),targetCount:0};return q.put("targetGlobalKey",ne)}(p))),o<4&&l>=4&&(0!==o&&(v=v.next(()=>function(O,q){return q.store("mutations").W().next(ne=>{O.deleteObjectStore("mutations"),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Mm,{unique:!0});const Ee=q.store("mutations"),ze=ne.map(Dt=>Ee.put(Dt));return lt.waitFor(ze)})}(e,p))),v=v.next(()=>{!function(O){O.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&l>=5&&(v=v.next(()=>this.qs(p))),o<6&&l>=6&&(v=v.next(()=>(function(O){O.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(p)))),o<7&&l>=7&&(v=v.next(()=>this.Gs(p))),o<8&&l>=8&&(v=v.next(()=>this.Qs(e,p))),o<9&&l>=9&&(v=v.next(()=>{!function(O){O.objectStoreNames.contains("remoteDocumentChanges")&&O.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&l>=10&&(v=v.next(()=>this.js(p))),o<11&&l>=11&&(v=v.next(()=>{(function(O){O.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(O){O.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&l>=12&&(v=v.next(()=>{!function(O){const q=O.createObjectStore("documentOverlays",{keyPath:Nm});q.createIndex("collectionPathOverlayIndex",Fm,{unique:!1}),q.createIndex("collectionGroupOverlayIndex",Ph,{unique:!1})}(e)})),o<13&&l>=13&&(v=v.next(()=>function(O){const q=O.createObjectStore("remoteDocumentsV14",{keyPath:Ju});q.createIndex("documentKeyIndex",Rc),q.createIndex("collectionGroupIndex",Om)}(e)).next(()=>this.Ws(e,p)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&l>=14&&(v=v.next(()=>this.zs(e,p))),o<15&&l>=15&&(v=v.next(()=>function(O){O.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),O.createObjectStore("indexState",{keyPath:Rm}).createIndex("sequenceNumberIndex",Ip,{unique:!1}),O.createObjectStore("indexEntries",{keyPath:Tp}).createIndex("documentKeyIndex",kh,{unique:!1})}(e))),v}Ks(e){let n=0;return e.store("remoteDocuments").Z((o,l)=>{n+=Ql(l)}).next(()=>{const o={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}qs(e){const n=e.store("mutationQueues"),o=e.store("mutations");return n.W().next(l=>lt.forEach(l,p=>{const v=IDBKeyRange.bound([p.userId,-1],[p.userId,p.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",v).next(O=>lt.forEach(O,q=>{or(q.userId===p.userId);const ne=El(this.It,q);return Bp(e,p.userId,ne).next(()=>{})}))}))}Gs(e){const n=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(l=>{const p=[];return o.Z((v,O)=>{const q=new Pr(v),ne=[0,ka(q)];p.push(n.get(ne).next(Ee=>Ee?lt.resolve():n.put({targetId:0,path:ka(q),sequenceNumber:l.highestListenSequenceNumber})))}).next(()=>lt.waitFor(p))})}Qs(e,n){e.createObjectStore("collectionParents",{keyPath:Pm});const o=n.store("collectionParents"),l=new Bh,p=v=>{if(l.add(v)){const O=v.lastSegment(),q=v.popLast();return o.put({collectionId:O,parent:ka(q)})}};return n.store("remoteDocuments").Z({X:!0},(v,O)=>{const q=new Pr(v);return p(q.popLast())}).next(()=>n.store("documentMutations").Z({X:!0},([v,O,q],ne)=>{const Ee=wl(O);return p(Ee.popLast())}))}js(e){const n=e.store("targets");return n.Z((o,l)=>{const p=Nc(l),v=xp(this.It,p);return n.put(v)})}Ws(e,n){const o=n.store("remoteDocuments"),l=[];return o.Z((p,v)=>{const O=n.store("remoteDocumentsV14"),q=(ne=v,ne.document?new yn(Pr.fromString(ne.document.name).popFirst(5)):ne.noDocument?yn.fromSegments(ne.noDocument.path):ne.unknownDocument?yn.fromSegments(ne.unknownDocument.path):Wn()).path.toArray();var ne;const Ee={prefixPath:q.slice(0,q.length-2),collectionGroup:q[q.length-2],documentId:q[q.length-1],readTime:v.readTime||[0,0],unknownDocument:v.unknownDocument,noDocument:v.noDocument,document:v.document,hasCommittedMutations:!!v.hasCommittedMutations};l.push(O.put(Ee))}).next(()=>lt.waitFor(l))}zs(e,n){const o=n.store("mutations"),l=Hh(this.It),p=new Wp($c.Bs,this.It.re);return o.W().next(v=>{const O=new Map;return v.forEach(q=>{var ne;let Ee=null!==(ne=O.get(q.userId))&&void 0!==ne?ne:Zr();El(this.It,q).keys().forEach(ze=>Ee=Ee.add(ze)),O.set(q.userId,Ee)}),lt.forEach(O,(q,ne)=>{const Ee=new ci(ne),ze=vd.oe(this.It,Ee),Dt=p.getIndexManager(Ee),qt=cl.oe(Ee,this.It,Dt,p.referenceDelegate);return new Zp(l,qt,ze,Dt).recalculateAndSaveOverlaysForDocumentKeys(new Sp(n,So.at),q).next()})})}}function du(i){i.createObjectStore("targetDocuments",{keyPath:Dp}).createIndex("documentTargetsIndex",km,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",L_,{unique:!0}),i.createObjectStore("targetGlobal")}const Dd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Id{constructor(e,n,o,l,p,v,O,q,ne,Ee,ze=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=o,this.Hs=p,this.window=v,this.document=O,this.Js=ne,this.Ys=Ee,this.Xs=ze,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=Dt=>Promise.resolve(),!Id.C())throw new rn(Mt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zm(this,l),this.ii=n+"main",this.It=new Nh(q),this.ri=new Hs(this.ii,this.Xs,new qp(this.It)),this.Cs=new V_(this.referenceDelegate,this.It),this.remoteDocumentCache=Hh(this.It),this.Ns=new Bm,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===Ee&&Zi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new rn(Mt.FAILED_PRECONDITION,Dd);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new So(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var n=this;return this.si=function(){var o=(0,h.Z)(function*(l){if(n.started)return e(l)});return function(l){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var n=(0,h.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,h.Z)(function*(){n.started&&(yield n.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Gh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(n=>this.isPrimary&&!n?this._i(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(oo(e))return tn("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return tn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Zc(e).get("owner").next(n=>lt.resolve(this.mi(n)))}gi(e){return Gh(e).delete(this.clientId)}yi(){var e=this;return(0,h.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const l=aa(o,"clientMetadata");return l.W().next(p=>{const v=e.Ii(p,18e5),O=p.filter(q=>-1===v.indexOf(q));return lt.forEach(O,q=>l.delete(q.clientId)).next(()=>O)})}).catch(()=>[]);if(e.oi)for(const o of n)e.oi.removeItem(e.Ti(o.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?lt.resolve(!0):Zc(e).get("owner").next(n=>{if(null!==n&&this.pi(n.leaseTimestampMs,5e3)&&!this.Ei(n.ownerId)){if(this.mi(n)&&this.networkEnabled)return!0;if(!this.mi(n)){if(!n.allowTabSynchronization)throw new rn(Mt.FAILED_PRECONDITION,Dd);return!1}}return!(!this.networkEnabled||!this.inForeground)||Gh(e).W().next(o=>void 0===this.Ii(o,5e3).find(l=>{if(this.clientId!==l.clientId){const v=!this.inForeground&&l.inForeground,O=this.networkEnabled===l.networkEnabled;if(!this.networkEnabled&&l.networkEnabled||v&&O)return!0}return!1}))}).next(n=>(this.isPrimary!==n&&tn("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,h.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const o=new Sp(n,So.at);return e._i(o).next(()=>e.gi(o))}),e.ri.close(),e.Pi()})()}Ii(e,n){return e.filter(o=>this.pi(o.updateTimeMs,n)&&!this.Ei(o.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Gh(e).W().next(n=>this.Ii(n,18e5).map(o=>o.clientId)))}get started(){return this.Ds}getMutationQueue(e,n){return cl.oe(e,this.It,n,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Hm(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return vd.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,n,o){tn("IndexedDbPersistence","Starting transaction:",e);const l="readonly"===n?"readonly":"readwrite",p=15===(v=this.Xs)?B_:14===v?Um:13===v?gd:12===v?U_:11===v?Lm:void Wn();var v;let O;return this.ri.runTransaction(e,l,p,q=>(O=new Sp(q,this.Ss?this.Ss.next():So.at),"readwrite-primary"===n?this.fi(O).next(ne=>!!ne||this.di(O)).next(ne=>{if(!ne)throw Zi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new rn(Mt.FAILED_PRECONDITION,Al);return o(O)}).next(ne=>this.wi(O).next(()=>ne)):this.Vi(O).next(()=>o(O)))).then(q=>(O.raiseOnCommittedEvent(),q))}Vi(e){return Zc(e).get("owner").next(n=>{if(null!==n&&this.pi(n.leaseTimestampMs,5e3)&&!this.Ei(n.ownerId)&&!this.mi(n)&&!(this.Ys||this.allowTabSynchronization&&n.allowTabSynchronization))throw new rn(Mt.FAILED_PRECONDITION,Dd)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zc(e).put("owner",n)}static C(){return Hs.C()}_i(e){const n=Zc(e);return n.get("owner").next(o=>this.mi(o)?(tn("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):lt.resolve())}pi(e,n){const o=Date.now();return!(e<o-n||e>o&&(Zi(`Detected an update time that is in the future: ${e} > ${o}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,de.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var n;try{const o=null!==(null===(n=this.oi)||void 0===n?void 0:n.getItem(this.Ti(e)));return tn("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Zi("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Zi("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zc(i){return aa(i,"owner")}function Gh(i){return aa(i,"clientMetadata")}function rc(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class Wh{constructor(e,n,o,l){this.targetId=e,this.fromCache=n,this.Si=o,this.Di=l}static Ci(e,n){let o=Zr(),l=Zr();for(const p of n.docChanges)switch(p.type){case 0:o=o.add(p.doc.key);break;case 1:l=l.add(p.doc.key)}return new Wh(e,n.fromCache,o,l)}}class qh{constructor(){this.xi=!1}initialize(e,n){this.Ni=e,this.indexManager=n,this.xi=!0}getDocumentsMatchingQuery(e,n,o,l){return this.ki(e,n).next(p=>p||this.Oi(e,n,l,o)).next(p=>p||this.Mi(e,n))}ki(e,n){if(I(n))return lt.resolve(null);let o=X(n);return this.indexManager.getIndexType(e,o).next(l=>0===l?null:(null!==n.limit&&1===l&&(n=Ce(n,null,"F"),o=X(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next(p=>{const v=Zr(...p);return this.Ni.getDocuments(e,v).next(O=>this.indexManager.getMinOffset(e,o).next(q=>{const ne=this.Fi(n,O);return this.$i(n,ne,v,q.readTime)?this.ki(e,Ce(n,null,"F")):this.Bi(e,ne,n,q)}))})))}Oi(e,n,o,l){return I(n)||l.isEqual(pr.min())?this.Mi(e,n):this.Ni.getDocuments(e,o).next(p=>{const v=this.Fi(n,p);return this.$i(n,v,o,l)?this.Mi(e,n):(vs()<=d.in.DEBUG&&tn("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),kt(n)),this.Bi(e,v,n,To(l,-1)))})}Fi(e,n){let o=new Si(lr(e));return n.forEach((l,p)=>{Dn(e,p)&&(o=o.add(p))}),o}$i(e,n,o,l){if(null===e.limit)return!1;if(o.size!==n.size)return!0;const p="F"===e.limitType?n.last():n.first();return!!p&&(p.hasPendingWrites||p.version.compareTo(l)>0)}Mi(e,n){return vs()<=d.in.DEBUG&&tn("QueryEngine","Using full collection scan to execute query:",kt(n)),this.Ni.getDocumentsMatchingQuery(e,n,fs.min())}Bi(e,n,o,l){return this.Ni.getDocumentsMatchingQuery(e,o,l).next(p=>(n.forEach(v=>{p=p.insert(v.key,v)}),p))}}class Kp{constructor(e,n,o,l){this.persistence=e,this.Li=n,this.It=l,this.Ui=new Gi(Er),this.qi=new vo(p=>z(p),Re),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(o)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Zp(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ui))}}function Kh(i,e,n,o){return new Kp(i,e,n,o)}function Td(i,e){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,h.Z)(function*(i,e){const n=kn(i);return yield n.persistence.runTransaction("Handle user change","readonly",o=>{let l;return n.mutationQueue.getAllMutationBatches(o).next(p=>(l=p,n.Qi(e),n.mutationQueue.getAllMutationBatches(o))).next(p=>{const v=[],O=[];let q=Zr();for(const ne of l){v.push(ne.batchId);for(const Ee of ne.mutations)q=q.add(Ee.key)}for(const ne of p){O.push(ne.batchId);for(const Ee of ne.mutations)q=q.add(Ee.key)}return n.localDocuments.getDocuments(o,q).next(ne=>({ji:ne,removedBatchIds:v,addedBatchIds:O}))})})}),Sd.apply(this,arguments)}function Ad(i,e){const n=kn(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const l=e.batch.keys(),p=n.Gi.newChangeBuffer({trackRemovals:!0});return function(v,O,q,ne){const Ee=q.batch,ze=Ee.keys();let Dt=lt.resolve();return ze.forEach(qt=>{Dt=Dt.next(()=>ne.getEntry(O,qt)).next(en=>{const qn=q.docVersions.get(qt);or(null!==qn),en.version.compareTo(qn)<0&&(Ee.applyToRemoteDocument(en,q),en.isValidDocument()&&(en.setReadTime(q.commitVersion),ne.addEntry(en)))})}),Dt.next(()=>v.mutationQueue.removeMutationBatch(O,Ee))}(n,o,e,p).next(()=>p.apply(o)).next(()=>n.mutationQueue.performConsistencyCheck(o)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(o,l,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(v){let O=Zr();for(let q=0;q<v.mutationResults.length;++q)v.mutationResults[q].transformResults.length>0&&(O=O.add(v.batch.mutations[q].key));return O}(e))).next(()=>n.localDocuments.getDocuments(o,l))})}function zc(i){const e=kn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Cs.getLastRemoteSnapshotVersion(n))}function Yp(i,e){const n=kn(i),o=e.snapshotVersion;let l=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",p=>{const v=n.Gi.newChangeBuffer({trackRemovals:!0});l=n.Ui;const O=[];e.targetChanges.forEach((Ee,ze)=>{const Dt=l.get(ze);if(!Dt)return;O.push(n.Cs.removeMatchingKeys(p,Ee.removedDocuments,ze).next(()=>n.Cs.addMatchingKeys(p,Ee.addedDocuments,ze)));let qt=Dt.withSequenceNumber(p.currentSequenceNumber);var en,qn,rr;e.targetMismatches.has(ze)?qt=qt.withResumeToken(ps.EMPTY_BYTE_STRING,pr.min()).withLastLimboFreeSnapshotVersion(pr.min()):Ee.resumeToken.approximateByteSize()>0&&(qt=qt.withResumeToken(Ee.resumeToken,o)),l=l.insert(ze,qt),qn=qt,rr=Ee,(0===(en=Dt).resumeToken.approximateByteSize()||qn.snapshotVersion.toMicroseconds()-en.snapshotVersion.toMicroseconds()>=3e8||rr.addedDocuments.size+rr.modifiedDocuments.size+rr.removedDocuments.size>0)&&O.push(n.Cs.updateTargetData(p,qt))});let q=Yo(),ne=Zr();if(e.documentUpdates.forEach(Ee=>{e.resolvedLimboDocuments.has(Ee)&&O.push(n.persistence.referenceDelegate.updateLimboDocument(p,Ee))}),O.push(Md(p,v,e.documentUpdates).next(Ee=>{q=Ee.Wi,ne=Ee.zi})),!o.isEqual(pr.min())){const Ee=n.Cs.getLastRemoteSnapshotVersion(p).next(ze=>n.Cs.setTargetsMetadata(p,p.currentSequenceNumber,o));O.push(Ee)}return lt.waitFor(O).next(()=>v.apply(p)).next(()=>n.localDocuments.getLocalViewOfDocuments(p,q,ne)).next(()=>q)}).then(p=>(n.Ui=l,p))}function Md(i,e,n){let o=Zr(),l=Zr();return n.forEach(p=>o=o.add(p)),e.getEntries(i,o).next(p=>{let v=Yo();return n.forEach((O,q)=>{const ne=p.get(O);q.isFoundDocument()!==ne.isFoundDocument()&&(l=l.add(O)),q.isNoDocument()&&q.version.isEqual(pr.min())?(e.removeEntry(O,q.readTime),v=v.insert(O,q)):!ne.isValidDocument()||q.version.compareTo(ne.version)>0||0===q.version.compareTo(ne.version)&&ne.hasPendingWrites?(e.addEntry(q),v=v.insert(O,q)):tn("LocalStore","Ignoring outdated watch update for ",O,". Current version:",ne.version," Watch version:",q.version)}),{Wi:v,zi:l}})}function Qp(i,e){const n=kn(i);return n.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function hu(i,e){const n=kn(i);return n.persistence.runTransaction("Allocate target","readwrite",o=>{let l;return n.Cs.getTargetData(o,e).next(p=>p?(l=p,lt.resolve(l)):n.Cs.allocateTargetId(o).next(v=>(l=new Pl(e,v,0,o.currentSequenceNumber),n.Cs.addTargetData(o,l).next(()=>l))))}).then(o=>{const l=n.Ui.get(o.targetId);return(null===l||o.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(o.targetId,o),n.qi.set(e,o.targetId)),o})}function Nl(i,e,n){return Yh.apply(this,arguments)}function Yh(){return Yh=(0,h.Z)(function*(i,e,n){const o=kn(i),l=o.Ui.get(e),p=n?"readwrite":"readwrite-primary";try{n||(yield o.persistence.runTransaction("Release target",p,v=>o.persistence.referenceDelegate.removeTarget(v,l)))}catch(v){if(!oo(v))throw v;tn("LocalStore",`Failed to update sequence numbers for target ${e}: ${v}`)}o.Ui=o.Ui.remove(e),o.qi.delete(l.target)}),Yh.apply(this,arguments)}function Gc(i,e,n){const o=kn(i);let l=pr.min(),p=Zr();return o.persistence.runTransaction("Execute query","readonly",v=>function(O,q,ne){const Ee=kn(O),ze=Ee.qi.get(ne);return void 0!==ze?lt.resolve(Ee.Ui.get(ze)):Ee.Cs.getTargetData(q,ne)}(o,v,X(e)).next(O=>{if(O)return l=O.lastLimboFreeSnapshotVersion,o.Cs.getMatchingKeysForTargetId(v,O.targetId).next(q=>{p=q})}).next(()=>o.Li.getDocumentsMatchingQuery(v,e,n?l:pr.min(),n?p:Zr())).next(O=>(Qh(o,Sn(e),O),{documents:O,Hi:p})))}function Jp(i,e){const n=kn(i),o=kn(n.Cs),l=n.Ui.get(e);return l?Promise.resolve(l.target):n.persistence.runTransaction("Get target data","readonly",p=>o.se(p,e).next(v=>v?v.target:null))}function Xp(i,e){const n=kn(i),o=n.Ki.get(e)||pr.min();return n.persistence.runTransaction("Get new document changes","readonly",l=>n.Gi.getAllFromCollectionGroup(l,e,To(o,-1),Number.MAX_SAFE_INTEGER)).then(l=>(Qh(n,e,l),l))}function Qh(i,e,n){let o=i.Ki.get(e)||pr.min();n.forEach((l,p)=>{p.readTime.compareTo(o)>0&&(o=p.readTime)}),i.Ki.set(e,o)}function xd(){return xd=(0,h.Z)(function*(i,e,n,o){const l=kn(i);let p=Zr(),v=Yo();for(const ne of n){const Ee=e.Ji(ne.metadata.name);ne.document&&(p=p.add(Ee));const ze=e.Yi(ne);ze.setReadTime(e.Xi(ne.metadata.readTime)),v=v.insert(Ee,ze)}const O=l.Gi.newChangeBuffer({trackRemovals:!0}),q=yield hu(l,(ne=o,X(kl(Pr.fromString(`__bundle__/docs/${ne}`)))));var ne;return l.persistence.runTransaction("Apply bundle documents","readwrite",ne=>Md(ne,O,v).next(Ee=>(O.apply(ne),Ee)).next(Ee=>l.Cs.removeMatchingKeysForTargetId(ne,q.targetId).next(()=>l.Cs.addMatchingKeys(ne,p,q.targetId)).next(()=>l.localDocuments.getLocalViewOfDocuments(ne,Ee.Wi,Ee.zi)).next(()=>Ee.Wi)))}),xd.apply(this,arguments)}function H_(i,e){return Od.apply(this,arguments)}function Od(){return Od=(0,h.Z)(function*(i,e,n=Zr()){const o=yield hu(i,X(Lh(e.bundledQuery))),l=kn(i);return l.persistence.runTransaction("Save named query","readwrite",p=>{const v=Uo(e.readTime);if(o.snapshotVersion.compareTo(v)>=0)return l.Ns.saveNamedQuery(p,e);const O=o.withResumeToken(ps.EMPTY_BYTE_STRING,v);return l.Ui=l.Ui.insert(O.targetId,O),l.Cs.updateTargetData(p,O).next(()=>l.Cs.removeMatchingKeysForTargetId(p,o.targetId)).next(()=>l.Cs.addMatchingKeys(p,n,o.targetId)).next(()=>l.Ns.saveNamedQuery(p,e))})}),Od.apply(this,arguments)}function eg(i,e){return`firestore_clients_${i}_${e}`}function Xh(i,e,n){let o=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function ef(i,e){return`firestore_targets_${i}_${e}`}class kd{constructor(e,n,o,l){this.user=e,this.batchId=n,this.state=o,this.error=l}static Zi(e,n,o){const l=JSON.parse(o);let p,v="object"==typeof l&&-1!==["pending","acknowledged","rejected"].indexOf(l.state)&&(void 0===l.error||"object"==typeof l.error);return v&&l.error&&(v="string"==typeof l.error.message&&"string"==typeof l.error.code,v&&(p=new rn(l.error.code,l.error.message))),v?new kd(e,n,l.state,p):(Zi("SharedClientState",`Failed to parse mutation state for ID '${n}': ${o}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Na{constructor(e,n,o){this.targetId=e,this.state=n,this.error=o}static Zi(e,n){const o=JSON.parse(n);let l,p="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return p&&o.error&&(p="string"==typeof o.error.message&&"string"==typeof o.error.code,p&&(l=new rn(o.error.code,o.error.message))),p?new Na(e,o.state,l):(Zi("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Pd{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Zi(e,n){const o=JSON.parse(n);let l="object"==typeof o&&o.activeTargetIds instanceof Array,p=Cs();for(let v=0;l&&v<o.activeTargetIds.length;++v)l=Oe(o.activeTargetIds[v]),p=p.add(o.activeTargetIds[v]);return l?new Pd(e,p):(Zi("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Rd{constructor(e,n){this.clientId=e,this.onlineState=n}static Zi(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new Rd(n.clientId,n.onlineState):(Zi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class tf{constructor(){this.activeTargetIds=Cs()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nf{constructor(e,n,o,l,p){this.window=e,this.Hs=n,this.persistenceKey=o,this.sr=l,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Gi(Er),this.started=!1,this.cr=[];const v=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=p,this.ar=eg(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new tf),this.lr=new RegExp(`^firestore_clients_${v}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${v}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${v}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(O){return`firestore_bundle_loaded_v2_${O}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,h.Z)(function*(){const n=yield e.syncEngine.vi();for(const l of n){if(l===e.sr)continue;const p=e.getItem(eg(e.persistenceKey,l));if(p){const v=Pd.Zi(l,p);v&&(e.ur=e.ur.insert(v.clientId,v))}}e.gr();const o=e.storage.getItem(e.wr);if(o){const l=e.yr(o);l&&e.pr(l)}for(const l of e.cr)e.rr(l);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let n=!1;return this.ur.forEach((o,l)=>{l.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,n,o){this.Tr(e,n,o),this.Er(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(ef(this.persistenceKey,e));if(o){const l=Na.Zi(e,o);l&&(n=l.state)}}return this.Ar.er(e),this.gr(),n}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ef(this.persistenceKey,e))}updateQueryState(e,n,o){this.Rr(e,n,o)}handleUserChange(e,n,o){n.forEach(l=>{this.Er(l)}),this.currentUser=e,o.forEach(l=>{this.addPendingMutation(l)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return tn("SharedClientState","READ",e,n),n}setItem(e,n){tn("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){tn("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var n=this;const o=e;if(o.storageArea===this.storage){if(tn("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ar)return void Zi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,h.Z)(function*(){if(n.started){if(null!==o.key)if(n.lr.test(o.key)){if(null==o.newValue){const l=n.vr(o.key);return n.Vr(l,null)}{const l=n.Sr(o.key,o.newValue);if(l)return n.Vr(l.clientId,l)}}else if(n.dr.test(o.key)){if(null!==o.newValue){const l=n.Dr(o.key,o.newValue);if(l)return n.Cr(l)}}else if(n._r.test(o.key)){if(null!==o.newValue){const l=n.Nr(o.key,o.newValue);if(l)return n.kr(l)}}else if(o.key===n.wr){if(null!==o.newValue){const l=n.yr(o.newValue);if(l)return n.pr(l)}}else if(o.key===n.hr){const l=function(p){let v=So.at;if(null!=p)try{const O=JSON.parse(p);or("number"==typeof O),v=O}catch(O){Zi("SharedClientState","Failed to read sequence number from WebStorage",O)}return v}(o.newValue);l!==So.at&&n.sequenceNumberHandler(l)}else if(o.key===n.mr){const l=n.Or(o.newValue);yield Promise.all(l.map(p=>n.syncEngine.Mr(p)))}}else n.cr.push(o)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,n,o){const l=new kd(this.currentUser,e,n,o),p=Xh(this.persistenceKey,this.currentUser,e);this.setItem(p,l.tr())}Er(e){const n=Xh(this.persistenceKey,this.currentUser,e);this.removeItem(n)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,n,o){const l=ef(this.persistenceKey,e),p=new Na(e,n,o);this.setItem(l,p.tr())}Pr(e){const n=JSON.stringify(Array.from(e));this.setItem(this.mr,n)}vr(e){const n=this.lr.exec(e);return n?n[1]:null}Sr(e,n){const o=this.vr(e);return Pd.Zi(o,n)}Dr(e,n){const o=this.dr.exec(e),l=Number(o[1]);return kd.Zi(new ci(void 0!==o[2]?o[2]:null),l,n)}Nr(e,n){const o=this._r.exec(e),l=Number(o[1]);return Na.Zi(l,n)}yr(e){return Rd.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var n=this;return(0,h.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Fr(e.batchId,e.state,e.error);tn("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,n){const o=n?this.ur.insert(e,n):this.ur.remove(e),l=this.Ir(this.ur),p=this.Ir(o),v=[],O=[];return p.forEach(q=>{l.has(q)||v.push(q)}),l.forEach(q=>{p.has(q)||O.push(q)}),this.syncEngine.Br(v,O).then(()=>{this.ur=o})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let n=Cs();return e.forEach((o,l)=>{n=n.unionWith(l.activeTargetIds)}),n}}class tg{constructor(){this.Lr=new tf,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,n,o){this.Ur[e]=n}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new tf,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ym{qr(e){}shutdown(){}}class rf{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){tn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){tn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Qm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Jm{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Xm extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,n,o,l,p){const v=this.ho(e,n);tn("RestConnection","Sending: ",v,o);const O={};return this.lo(O,l,p),this.fo(e,v,O,o).then(q=>(tn("RestConnection","Received: ",q),q),q=>{throw li("RestConnection",`${e} failed with error: `,q,"url: ",v,"request:",o),q})}_o(e,n,o,l,p,v){return this.ao(e,n,o,l,p)}lo(e,n,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+ts,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((l,p)=>e[p]=l),o&&o.headers.forEach((l,p)=>e[p]=l)}ho(e,n){return`${this.oo}/v1/${n}:${Qm[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,n,o,l){return new Promise((p,v)=>{const O=new Ni;O.setWithCredentials(!0),O.listenOnce(Or.COMPLETE,()=>{try{switch(O.getLastErrorCode()){case $r.NO_ERROR:const ne=O.getResponseJson();tn("Connection","XHR received:",JSON.stringify(ne)),p(ne);break;case $r.TIMEOUT:tn("Connection",'RPC "'+e+'" timed out'),v(new rn(Mt.DEADLINE_EXCEEDED,"Request time out"));break;case $r.HTTP_ERROR:const Ee=O.getStatus();if(tn("Connection",'RPC "'+e+'" failed with status:',Ee,"response text:",O.getResponseText()),Ee>0){const ze=O.getResponseJson().error;if(ze&&ze.status&&ze.message){const Dt=function(qt){const en=qt.toLowerCase().replace(/_/g,"-");return Object.values(Mt).indexOf(en)>=0?en:Mt.UNKNOWN}(ze.status);v(new rn(Dt,ze.message))}else v(new rn(Mt.UNKNOWN,"Server responded with status "+O.getStatus()))}else v(new rn(Mt.UNAVAILABLE,"Connection failed."));break;default:Wn()}}finally{tn("Connection",'RPC "'+e+'" completed.')}});const q=JSON.stringify(l);O.send(n,"POST",q,o,15)})}wo(e,n,o){const l=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=Nt(),v=Bn(),O={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(O.xmlHttpFactory=new ds({})),this.lo(O.initMessageHeaders,n,o),O.encodeInitMessageHeaders=!0;const q=l.join("");tn("Connection","Creating WebChannel: "+q,O);const ne=p.createWebChannel(q,O);let Ee=!1,ze=!1;const Dt=new Jm({Hr:en=>{ze?tn("Connection","Not sending because WebChannel is closed:",en):(Ee||(tn("Connection","Opening WebChannel transport."),ne.open(),Ee=!0),tn("Connection","WebChannel sending:",en),ne.send(en))},Jr:()=>ne.close()}),qt=(en,qn,rr)=>{en.listen(qn,Ui=>{try{rr(Ui)}catch(Ds){setTimeout(()=>{throw Ds},0)}})};return qt(ne,qr.EventType.OPEN,()=>{ze||tn("Connection","WebChannel transport opened.")}),qt(ne,qr.EventType.CLOSE,()=>{ze||(ze=!0,tn("Connection","WebChannel transport closed"),Dt.io())}),qt(ne,qr.EventType.ERROR,en=>{ze||(ze=!0,li("Connection","WebChannel transport errored:",en),Dt.io(new rn(Mt.UNAVAILABLE,"The operation could not be completed")))}),qt(ne,qr.EventType.MESSAGE,en=>{var qn;if(!ze){const rr=en.data[0];or(!!rr);const Ui=rr,Ds=Ui.error||(null===(qn=Ui[0])||void 0===qn?void 0:qn.error);if(Ds){tn("Connection","WebChannel received error:",Ds);const Qi=Ds.status;let jo=function(Ji){const ua=_n[Ji];if(void 0!==ua)return rs(ua)}(Qi),gs=Ds.message;void 0===jo&&(jo=Mt.INTERNAL,gs="Unknown error status: "+Qi+" with message "+Ds.message),ze=!0,Dt.io(new rn(jo,gs)),ne.close()}else tn("Connection","WebChannel received:",rr),Dt.ro(rr)}}),qt(v,ii.STAT_EVENT,en=>{en.stat===Wr.PROXY?tn("Connection","Detected buffering proxy"):en.stat===Wr.NOPROXY&&tn("Connection","Detected no buffering proxy")}),setTimeout(()=>{Dt.so()},0),Dt}}function Yr(){return typeof window<"u"?window:null}function Wc(){return typeof document<"u"?document:null}function ic(i){return new kc(i,!0)}class Nd{constructor(e,n,o=1e3,l=1.5,p=6e4){this.Hs=e,this.timerId=n,this.mo=o,this.yo=l,this.po=p,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const n=Math.floor(this.Io+this.bo()),o=Math.max(0,Date.now()-this.Eo),l=Math.max(0,n-o);l>0&&tn("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.Io} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,l,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class ng{constructor(e,n,o,l,p,v,O,q){this.Hs=e,this.vo=o,this.Vo=l,this.connection=p,this.authCredentialsProvider=v,this.appCheckCredentialsProvider=O,this.listener=q,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Nd(e,n)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,h.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,h.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,n){var o=this;return(0,h.Z)(function*(){o.Lo(),o.Uo(),o.xo.cancel(),o.So++,4!==e?o.xo.reset():n&&n.code===Mt.RESOURCE_EXHAUSTED?(Zi(n.toString()),Zi("Using maximum backoff delay to prevent overloading the backend."),o.xo.Ao()):n&&n.code===Mt.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.qo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Zr(n)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,l])=>{this.So===n&&this.Go(o,l)},o=>{e(()=>{const l=new rn(Mt.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Qo(l)})})}Go(e,n){const o=this.Ko(this.So);this.stream=this.jo(e,n),this.stream.Yr(()=>{o(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(l=>{o(()=>this.Qo(l))}),this.stream.onMessage(l=>{o(()=>this.onMessage(l))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,h.Z)(function*(){e.state=0,e.start()}))}Qo(e){return tn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return n=>{this.Hs.enqueueAndForget(()=>this.So===e?n():(tn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ey extends ng{constructor(e,n,o,l,p,v){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,l,v),this.It=p}jo(e,n){return this.connection.wo("Listen",e,n)}onMessage(e){this.xo.reset();const n=function Sh(i,e){let n;if("targetChange"in e){const o="NO_CHANGE"===(q=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===q?1:"REMOVE"===q?2:"CURRENT"===q?3:"RESET"===q?4:Wn(),l=e.targetChange.targetIds||[],p=function(q,ne){return q.gt?(or(void 0===ne||"string"==typeof ne),ps.fromBase64String(ne||"")):(or(void 0===ne||ne instanceof Uint8Array),ps.fromUint8Array(ne||new Uint8Array))}(i,e.targetChange.resumeToken),v=e.targetChange.cause,O=v&&function(q){const ne=void 0===q.code?Mt.UNKNOWN:rs(q.code);return new rn(ne,q.message||"")}(v);n=new fp(o,l,p,O||null)}else if("documentChange"in e){const o=e.documentChange,l=ul(i,o.document.name),p=Uo(o.document.updateTime),v=new Yi({mapValue:{fields:o.document.fields}}),O=xr.newFoundDocument(l,p,v);n=new qu(o.targetIds||[],o.removedTargetIds||[],O.key,O)}else if("documentDelete"in e){const o=e.documentDelete,l=ul(i,o.document),p=o.readTime?Uo(o.readTime):pr.min(),v=xr.newNoDocument(l,p);n=new qu([],o.removedTargetIds||[],v.key,v)}else if("documentRemove"in e){const o=e.documentRemove,l=ul(i,o.document);n=new qu([],o.removedTargetIds||[],l,null)}else{if(!("filter"in e))return Wn();{const o=e.filter,p=new Yt(o.count||0);n=new wh(o.targetId,p)}}var q;return n}(this.It,e),o=function(l){if(!("targetChange"in l))return pr.min();const p=l.targetChange;return p.targetIds&&p.targetIds.length?pr.min():p.readTime?Uo(p.readTime):pr.min()}(e);return this.listener.Wo(n,o)}zo(e){const n={};n.database=xu(this.It),n.addTarget=function(l,p){let v;const O=p.target;return v=ht(O)?{documents:Pc(l,O)}:{query:ql(l,O)},v.targetId=p.targetId,p.resumeToken.approximateByteSize()>0?v.resumeToken=Eh(l,p.resumeToken):p.snapshotVersion.compareTo(pr.min())>0&&(v.readTime=Mu(l,p.snapshotVersion.toTimestamp())),v}(this.It,e);const o=function Oh(i,e){const n=function(o,l){switch(l){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Wn()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);o&&(n.labels=o),this.Bo(n)}Ho(e){const n={};n.database=xu(this.It),n.removeTarget=e,this.Bo(n)}}class rg extends ng{constructor(e,n,o,l,p,v){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,l,v),this.It=p,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,n){return this.connection.wo("Write",e,n)}onMessage(e){if(or(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const n=function Mh(i,e){return i&&i.length>0?(or(void 0!==e),i.map(n=>function(o,l){let p=Uo(o.updateTime?o.updateTime:l);return p.isEqual(pr.min())&&(p=Uo(l)),new Tu(p,o.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),o=Uo(e.commitTime);return this.listener.Zo(o,n)}return or(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=xu(this.It),this.Bo(e)}Xo(e){const n={streamToken:this.lastStreamToken,writes:e.map(o=>lu(this.It,o))};this.Bo(n)}}class ty extends class{}{constructor(e,n,o,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.It=l,this.nu=!1}su(){if(this.nu)throw new rn(Mt.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,n,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,p])=>this.connection.ao(e,n,o,l,p)).catch(l=>{throw"FirebaseError"===l.name?(l.code===Mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new rn(Mt.UNKNOWN,l.toString())})}_o(e,n,o,l){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,v])=>this.connection._o(e,n,o,p,v,l)).catch(p=>{throw"FirebaseError"===p.name?(p.code===Mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new rn(Mt.UNKNOWN,p.toString())})}terminate(){this.nu=!0}}class ny{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Zi(n),this.ou=!1):tn("OnlineStateTracker",n)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class $_{constructor(e,n,o,l,p){var v=this;this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=p,this.mu.qr(O=>{o.enqueueAndForget((0,h.Z)(function*(){var q;Xl(v)&&(tn("RemoteStore","Restarting streams for network reachability change."),yield(q=(0,h.Z)(function*(ne){const Ee=kn(ne);Ee._u.add(4),yield dl(Ee),Ee.gu.set("Unknown"),Ee._u.delete(4),yield sc(Ee)}),function(ne){return q.apply(this,arguments)})(v))}))}),this.gu=new ny(o,l)}}function sc(i){return Fd.apply(this,arguments)}function Fd(){return Fd=(0,h.Z)(function*(i){if(Xl(i))for(const e of i.wu)yield e(!0)}),Fd.apply(this,arguments)}function dl(i){return af.apply(this,arguments)}function af(){return af=(0,h.Z)(function*(i){for(const e of i.wu)yield e(!1)}),af.apply(this,arguments)}function oc(i,e){const n=kn(i);n.du.has(e.targetId)||(n.du.set(e.targetId,e),og(n)?sg(n):Nu(n).ko()&&lf(n,e))}function Ru(i,e){const n=kn(i),o=Nu(n);n.du.delete(e),o.ko()&&ry(n,e),0===n.du.size&&(o.ko()?o.Fo():Xl(n)&&n.gu.set("Unknown"))}function lf(i,e){i.yu.Mt(e.targetId),Nu(i).zo(e)}function ry(i,e){i.yu.Mt(e),Nu(i).Ho(e)}function sg(i){i.yu=new Cm({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),se:e=>i.du.get(e)||null}),Nu(i).start(),i.gu.uu()}function og(i){return Xl(i)&&!Nu(i).No()&&i.du.size>0}function Xl(i){return 0===kn(i)._u.size}function uf(i){i.yu=void 0}function Z_(i){return cf.apply(this,arguments)}function cf(){return cf=(0,h.Z)(function*(i){i.du.forEach((e,n)=>{lf(i,e)})}),cf.apply(this,arguments)}function ac(i,e){return df.apply(this,arguments)}function df(){return df=(0,h.Z)(function*(i,e){uf(i),og(i)?(i.gu.hu(e),sg(i)):i.gu.set("Unknown")}),df.apply(this,arguments)}function ag(i,e,n){return lc.apply(this,arguments)}function lc(){return lc=(0,h.Z)(function*(i,e,n){if(i.gu.set("Online"),e instanceof fp&&2===e.state&&e.cause)try{yield(o=(0,h.Z)(function*(l,p){const v=p.cause;for(const O of p.targetIds)l.du.has(O)&&(yield l.remoteSyncer.rejectListen(O,v),l.du.delete(O),l.yu.removeTarget(O))}),function(l,p){return o.apply(this,arguments)})(i,e)}catch(o){tn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Ld(i,o)}else if(e instanceof qu?i.yu.Gt(e):e instanceof wh?i.yu.Yt(e):i.yu.Wt(e),!n.isEqual(pr.min()))try{const o=yield zc(i.localStore);n.compareTo(o)>=0&&(yield function(l,p){const v=l.yu.te(p);return v.targetChanges.forEach((O,q)=>{if(O.resumeToken.approximateByteSize()>0){const ne=l.du.get(q);ne&&l.du.set(q,ne.withResumeToken(O.resumeToken,p))}}),v.targetMismatches.forEach(O=>{const q=l.du.get(O);if(!q)return;l.du.set(O,q.withResumeToken(ps.EMPTY_BYTE_STRING,q.snapshotVersion)),ry(l,O);const ne=new Pl(q.target,O,1,q.sequenceNumber);lf(l,ne)}),l.remoteSyncer.applyRemoteEvent(v)}(i,n))}catch(o){tn("RemoteStore","Failed to raise snapshot:",o),yield Ld(i,o)}var o}),lc.apply(this,arguments)}function Ld(i,e,n){return Ud.apply(this,arguments)}function Ud(){return Ud=(0,h.Z)(function*(i,e,n){if(!oo(e))throw e;i._u.add(1),yield dl(i),i.gu.set("Offline"),n||(n=()=>zc(i.localStore)),i.asyncQueue.enqueueRetryable((0,h.Z)(function*(){tn("RemoteStore","Retrying IndexedDB access"),yield n(),i._u.delete(1),yield sc(i)}))}),Ud.apply(this,arguments)}function lg(i,e){return e().catch(n=>Ld(i,n,e))}function uc(i){return hf.apply(this,arguments)}function hf(){return hf=(0,h.Z)(function*(i){const e=kn(i),n=pu(e);let o=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;iy(e);)try{const l=yield Qp(e.localStore,o);if(null===l){0===e.fu.length&&n.Fo();break}o=l.batchId,sy(e,l)}catch(l){yield Ld(e,l)}ff(e)&&ug(e)}),hf.apply(this,arguments)}function iy(i){return Xl(i)&&i.fu.length<10}function sy(i,e){i.fu.push(e);const n=pu(i);n.ko()&&n.Yo&&n.Xo(e.mutations)}function ff(i){return Xl(i)&&!pu(i).No()&&i.fu.length>0}function ug(i){pu(i).start()}function cg(i){return Bd.apply(this,arguments)}function Bd(){return Bd=(0,h.Z)(function*(i){pu(i).eu()}),Bd.apply(this,arguments)}function pf(i){return dg.apply(this,arguments)}function dg(){return dg=(0,h.Z)(function*(i){const e=pu(i);for(const n of i.fu)e.Xo(n.mutations)}),dg.apply(this,arguments)}function gf(i,e,n){return mf.apply(this,arguments)}function mf(){return mf=(0,h.Z)(function*(i,e,n){const o=i.fu.shift(),l=Rh.from(o,e,n);yield lg(i,()=>i.remoteSyncer.applySuccessfulWrite(l)),yield uc(i)}),mf.apply(this,arguments)}function z_(i,e){return fu.apply(this,arguments)}function fu(){return fu=(0,h.Z)(function*(i,e){var n;e&&pu(i).Yo&&(yield(n=(0,h.Z)(function*(o,l){if(Xr(p=l.code)&&p!==Mt.ABORTED){const v=o.fu.shift();pu(o).Mo(),yield lg(o,()=>o.remoteSyncer.rejectFailedWrite(v.batchId,l)),yield uc(o)}var p}),function(o,l){return n.apply(this,arguments)})(i,e)),ff(i)&&ug(i)}),fu.apply(this,arguments)}function yf(i,e){return Vd.apply(this,arguments)}function Vd(){return Vd=(0,h.Z)(function*(i,e){const n=kn(i);n.asyncQueue.verifyOperationInProgress(),tn("RemoteStore","RemoteStore received new credentials");const o=Xl(n);n._u.add(3),yield dl(n),o&&n.gu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),yield sc(n)}),Vd.apply(this,arguments)}function cc(i,e){return Xa.apply(this,arguments)}function Xa(){return Xa=(0,h.Z)(function*(i,e){const n=kn(i);e?(n._u.delete(2),yield sc(n)):e||(n._u.add(2),yield dl(n),n.gu.set("Unknown"))}),Xa.apply(this,arguments)}function Nu(i){return i.pu||(i.pu=function(e,n,o){const l=kn(e);return l.su(),new ey(n,l.connection,l.authCredentials,l.appCheckCredentials,l.It,o)}(i.datastore,i.asyncQueue,{Yr:Z_.bind(null,i),Zr:ac.bind(null,i),Wo:ag.bind(null,i)}),i.wu.push(function(){var e=(0,h.Z)(function*(n){n?(i.pu.Mo(),og(i)?sg(i):i.gu.set("Unknown")):(yield i.pu.stop(),uf(i))});return function(n){return e.apply(this,arguments)}}())),i.pu}function pu(i){return i.Iu||(i.Iu=function(e,n,o){const l=kn(e);return l.su(),new rg(n,l.connection,l.authCredentials,l.appCheckCredentials,l.It,o)}(i.datastore,i.asyncQueue,{Yr:cg.bind(null,i),Zr:z_.bind(null,i),tu:pf.bind(null,i),Zo:gf.bind(null,i)}),i.wu.push(function(){var e=(0,h.Z)(function*(n){n?(i.Iu.Mo(),yield uc(i)):(yield i.Iu.stop(),i.fu.length>0&&(tn("RemoteStore",`Stopping write stream with ${i.fu.length} pending writes`),i.fu=[]))});return function(n){return e.apply(this,arguments)}}())),i.Iu}class qc{constructor(e,n,o,l,p){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=l,this.removalCallback=p,this.deferred=new bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(v=>{})}static createAndSchedule(e,n,o,l,p){const v=Date.now()+o,O=new qc(e,n,v,l,p);return O.start(o),O}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new rn(Mt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ha(i,e){if(Zi("AsyncQueue",`${e}: ${i}`),oo(i))return new rn(Mt.UNAVAILABLE,`${e}: ${i}`);throw i}class gu{constructor(e){this.comparator=e?(n,o)=>e(n,o)||yn.comparator(n.key,o.key):(n,o)=>yn.comparator(n.key,o.key),this.keyedMap=Gl(),this.sortedSet=new Gi(this.comparator)}static emptySet(e){return new gu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,o)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof gu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,p=o.getNext().key;if(!l.isEqual(p))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const o=new gu;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class _f{constructor(){this.Tu=new Gi(yn.comparator)}track(e){const n=e.doc.key,o=this.Tu.get(n);o?0!==e.type&&3===o.type?this.Tu=this.Tu.insert(n,e):3===e.type&&1!==o.type?this.Tu=this.Tu.insert(n,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Tu=this.Tu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Tu=this.Tu.remove(n):1===e.type&&2===o.type?this.Tu=this.Tu.insert(n,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):Wn():this.Tu=this.Tu.insert(n,e)}Eu(){const e=[];return this.Tu.inorderTraversal((n,o)=>{e.push(o)}),e}}class mu{constructor(e,n,o,l,p,v,O,q,ne){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=l,this.mutatedKeys=p,this.fromCache=v,this.syncStateChanged=O,this.excludesMetadataChanges=q,this.hasCachedResults=ne}static fromInitialDocuments(e,n,o,l,p){const v=[];return n.forEach(O=>{v.push({type:0,doc:O})}),new mu(e,n,gu.emptySet(n),v,o,l,!0,!1,p)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Le(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==o[l].type||!n[l].doc.isEqual(o[l].doc))return!1;return!0}}class G_{constructor(){this.Au=void 0,this.listeners=[]}}class hg{constructor(){this.queries=new vo(e=>ot(e),Le),this.onlineState="Unknown",this.Ru=new Set}}function fg(i,e){return dc.apply(this,arguments)}function dc(){return dc=(0,h.Z)(function*(i,e){const n=kn(i),o=e.query;let l=!1,p=n.queries.get(o);if(p||(l=!0,p=new G_),l)try{p.Au=yield n.onListen(o)}catch(v){const O=Ha(v,`Initialization of query '${kt(e.query)}' failed`);return void e.onError(O)}n.queries.set(o,p),p.listeners.push(e),e.bu(n.onlineState),p.Au&&e.Pu(p.Au)&&pg(n)}),dc.apply(this,arguments)}function hc(i,e){return Kc.apply(this,arguments)}function Kc(){return Kc=(0,h.Z)(function*(i,e){const n=kn(i),o=e.query;let l=!1;const p=n.queries.get(o);if(p){const v=p.listeners.indexOf(e);v>=0&&(p.listeners.splice(v,1),l=0===p.listeners.length)}if(l)return n.queries.delete(o),n.onUnlisten(o)}),Kc.apply(this,arguments)}function vf(i,e){const n=kn(i);let o=!1;for(const l of e){const v=n.queries.get(l.query);if(v){for(const O of v.listeners)O.Pu(l)&&(o=!0);v.Au=l}}o&&pg(n)}function bf(i,e,n){const o=kn(i),l=o.queries.get(e);if(l)for(const p of l.listeners)p.onError(n);o.queries.delete(e)}function pg(i){i.Ru.forEach(e=>{e.next()})}class wf{constructor(e,n,o){this.query=e,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=o||{}}Pu(e){if(!this.options.includeMetadataChanges){const o=[];for(const l of e.docChanges)3!==l.type&&o.push(l);e=new mu(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),n=!0):this.Cu(e,this.onlineState)&&(this.xu(e),n=!0),this.Su=e,n}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),n=!0),n}Cu(e,n){return!e.fromCache||(!this.options.Nu||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=mu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class oy{constructor(e,n){this.ku=e,this.byteLength=n}Ou(){return"metadata"in this.ku}}class gg{constructor(e){this.It=e}Ji(e){return ul(this.It,e)}Yi(e){return e.metadata.exists?au(this.It,e.document,!1):xr.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Uo(e)}}class ay{constructor(e,n,o){this.Mu=e,this.localStore=n,this.It=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ef(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++n;const o=Pr.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}$u(e){const n=new Map,o=new gg(this.It);for(const l of e)if(l.metadata.queries){const p=o.Ji(l.metadata.name);for(const v of l.metadata.queries){const O=(n.get(v)||Zr()).add(p);n.set(v,O)}}return n}complete(){var e=this;return(0,h.Z)(function*(){const n=yield function Jh(i,e,n,o){return xd.apply(this,arguments)}(e.localStore,new gg(e.It),e.documents,e.Mu.id),o=e.$u(e.documents);for(const l of e.queries)yield H_(e.localStore,l,o.get(l.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:n}})()}}function Ef(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class ly{constructor(e){this.key=e}}class mg{constructor(e){this.key=e}}class uy{constructor(e,n){this.query=e,this.Uu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Zr(),this.mutatedKeys=Zr(),this.Gu=lr(e),this.Qu=new gu(this.Gu)}get ju(){return this.Uu}Wu(e,n){const o=n?n.zu:new _f,l=n?n.Qu:this.Qu;let p=n?n.mutatedKeys:this.mutatedKeys,v=l,O=!1;const q="F"===this.query.limitType&&l.size===this.query.limit?l.last():null,ne="L"===this.query.limitType&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal((Ee,ze)=>{const Dt=l.get(Ee),qt=Dn(this.query,ze)?ze:null,en=!!Dt&&this.mutatedKeys.has(Dt.key),qn=!!qt&&(qt.hasLocalMutations||this.mutatedKeys.has(qt.key)&&qt.hasCommittedMutations);let rr=!1;Dt&&qt?Dt.data.isEqual(qt.data)?en!==qn&&(o.track({type:3,doc:qt}),rr=!0):this.Hu(Dt,qt)||(o.track({type:2,doc:qt}),rr=!0,(q&&this.Gu(qt,q)>0||ne&&this.Gu(qt,ne)<0)&&(O=!0)):!Dt&&qt?(o.track({type:0,doc:qt}),rr=!0):Dt&&!qt&&(o.track({type:1,doc:Dt}),rr=!0,(q||ne)&&(O=!0)),rr&&(qt?(v=v.add(qt),p=qn?p.add(Ee):p.delete(Ee)):(v=v.delete(Ee),p=p.delete(Ee)))}),null!==this.query.limit)for(;v.size>this.query.limit;){const Ee="F"===this.query.limitType?v.last():v.first();v=v.delete(Ee.key),p=p.delete(Ee.key),o.track({type:1,doc:Ee})}return{Qu:v,zu:o,$i:O,mutatedKeys:p}}Hu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o){const l=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const p=e.zu.Eu();p.sort((ne,Ee)=>function(ze,Dt){const qt=en=>{switch(en){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wn()}};return qt(ze)-qt(Dt)}(ne.type,Ee.type)||this.Gu(ne.doc,Ee.doc)),this.Ju(o);const v=n?this.Yu():[],O=0===this.Ku.size&&this.current?1:0,q=O!==this.qu;return this.qu=O,0!==p.length||q?{snapshot:new mu(this.query,e.Qu,l,p,e.mutatedKeys,0===O,q,!1,!!o&&o.resumeToken.approximateByteSize()>0),Xu:v}:{Xu:v}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new _f,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(n=>this.Uu=this.Uu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Uu=this.Uu.delete(n)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Zr(),this.Qu.forEach(o=>{this.Zu(o.key)&&(this.Ku=this.Ku.add(o.key))});const n=[];return e.forEach(o=>{this.Ku.has(o)||n.push(new mg(o))}),this.Ku.forEach(o=>{e.has(o)||n.push(new ly(o))}),n}tc(e){this.Uu=e.Hi,this.Ku=Zr();const n=this.Wu(e.documents);return this.applyChanges(n,!0)}ec(){return mu.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class yg{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class _g{constructor(e){this.key=e,this.nc=!1}}class cy{constructor(e,n,o,l,p,v){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=l,this.currentUser=p,this.maxConcurrentLimboResolutions=v,this.sc={},this.ic=new vo(O=>ot(O),Le),this.rc=new Map,this.oc=new Set,this.uc=new Gi(yn.comparator),this.cc=new Map,this.ac=new $h,this.hc={},this.lc=new Map,this.fc=cu.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function Cf(i,e){return vg.apply(this,arguments)}function vg(){return vg=(0,h.Z)(function*(i,e){const n=Kd(i);let o,l;const p=n.ic.get(e);if(p)o=p.targetId,n.sharedClientState.addLocalQueryTarget(o),l=p.view.ec();else{const v=yield hu(n.localStore,X(e));n.isPrimaryClient&&oc(n.remoteStore,v);const O=n.sharedClientState.addLocalQueryTarget(v.targetId);o=v.targetId,l=yield bg(n,e,o,"current"===O,v.resumeToken)}return l}),vg.apply(this,arguments)}function bg(i,e,n,o,l){return wg.apply(this,arguments)}function wg(){return wg=(0,h.Z)(function*(i,e,n,o,l){i._c=(ze,Dt,qt)=>{return(en=(0,h.Z)(function*(qn,rr,Ui,Ds){let Qi=rr.view.Wu(Ui);Qi.$i&&(Qi=yield Gc(qn.localStore,rr.query,!1).then(({documents:Ji})=>rr.view.Wu(Ji,Qi)));const jo=Ds&&Ds.targetChanges.get(rr.targetId),gs=rr.view.applyChanges(Qi,qn.isPrimaryClient,jo);return Zd(qn,rr.targetId,gs.Xu),gs.snapshot}),function(qn,rr,Ui,Ds){return en.apply(this,arguments)})(i,ze,Dt,qt);var en};const p=yield Gc(i.localStore,e,!0),v=new uy(e,p.Hi),O=v.Wu(p.documents),q=Oc.createSynthesizedTargetChangeForCurrentChange(n,o&&"Offline"!==i.onlineState,l),ne=v.applyChanges(O,i.isPrimaryClient,q);Zd(i,n,ne.Xu);const Ee=new yg(e,n,v);return i.ic.set(e,Ee),i.rc.has(n)?i.rc.get(n).push(e):i.rc.set(n,[e]),ne.snapshot}),wg.apply(this,arguments)}function W_(i,e){return Eg.apply(this,arguments)}function Eg(){return Eg=(0,h.Z)(function*(i,e){const n=kn(i),o=n.ic.get(e),l=n.rc.get(o.targetId);if(l.length>1)return n.rc.set(o.targetId,l.filter(p=>!Le(p,e))),void n.ic.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(o.targetId),n.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Nl(n.localStore,o.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(o.targetId),Ru(n.remoteStore,o.targetId),fc(n,o.targetId)}).catch(ia))):(fc(n,o.targetId),yield Nl(n.localStore,o.targetId,!0))}),Eg.apply(this,arguments)}function Cg(){return Cg=(0,h.Z)(function*(i,e,n){const o=Nf(i);try{const l=yield function(p,v){const O=kn(p),q=ti.now(),ne=v.reduce((Dt,qt)=>Dt.add(qt.key),Zr());let Ee,ze;return O.persistence.runTransaction("Locally write mutations","readwrite",Dt=>{let qt=Yo(),en=Zr();return O.Gi.getEntries(Dt,ne).next(qn=>{qt=qn,qt.forEach((rr,Ui)=>{Ui.isValidDocument()||(en=en.add(rr))})}).next(()=>O.localDocuments.getOverlayedDocuments(Dt,qt)).next(qn=>{Ee=qn;const rr=[];for(const Ui of v){const Ds=oa(Ui,Ee.get(Ui.key).overlayedDocument);null!=Ds&&rr.push(new y(Ui.key,Ds,ou(Ds.value.mapValue),An.exists(!0)))}return O.mutationQueue.addMutationBatch(Dt,q,rr,v)}).next(qn=>{ze=qn;const rr=qn.applyToLocalDocumentSet(Ee,en);return O.documentOverlayCache.saveOverlays(Dt,qn.batchId,rr)})}).then(()=>({batchId:ze.batchId,changes:Mc(Ee)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(l.batchId),function(p,v,O){let q=p.hc[p.currentUser.toKey()];q||(q=new Gi(Er)),q=q.insert(v,O),p.hc[p.currentUser.toKey()]=q}(o,l.batchId,n),yield hl(o,l.changes),yield uc(o.remoteStore)}catch(l){const p=Ha(l,"Failed to persist write");n.reject(p)}}),Cg.apply(this,arguments)}function dy(i,e){return Dg.apply(this,arguments)}function Dg(){return Dg=(0,h.Z)(function*(i,e){const n=kn(i);try{const o=yield Yp(n.localStore,e);e.targetChanges.forEach((l,p)=>{const v=n.cc.get(p);v&&(or(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1),l.addedDocuments.size>0?v.nc=!0:l.modifiedDocuments.size>0?or(v.nc):l.removedDocuments.size>0&&(or(v.nc),v.nc=!1))}),yield hl(n,o,e)}catch(o){yield ia(o)}}),Dg.apply(this,arguments)}function hy(i,e,n){const o=kn(i);if(o.isPrimaryClient&&0===n||!o.isPrimaryClient&&1===n){const l=[];o.ic.forEach((p,v)=>{const O=v.view.bu(e);O.snapshot&&l.push(O.snapshot)}),function(p,v){const O=kn(p);O.onlineState=v;let q=!1;O.queries.forEach((ne,Ee)=>{for(const ze of Ee.listeners)ze.bu(v)&&(q=!0)}),q&&pg(O)}(o.eventManager,e),l.length&&o.sc.Wo(l),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function yu(i,e,n){return Yc.apply(this,arguments)}function Yc(){return Yc=(0,h.Z)(function*(i,e,n){const o=kn(i);o.sharedClientState.updateQueryState(e,"rejected",n);const l=o.cc.get(e),p=l&&l.key;if(p){let v=new Gi(yn.comparator);v=v.insert(p,xr.newNoDocument(p,pr.min()));const O=Zr().add(p),q=new Au(pr.min(),new Map,new Si(Er),v,O);yield dy(o,q),o.uc=o.uc.remove(p),o.cc.delete(e),Sf(o)}else yield Nl(o.localStore,e,!1).then(()=>fc(o,e,n)).catch(ia)}),Yc.apply(this,arguments)}function fy(i,e){return jd.apply(this,arguments)}function jd(){return jd=(0,h.Z)(function*(i,e){const n=kn(i),o=e.batch.batchId;try{const l=yield Ad(n.localStore,e);$d(n,o,null),Fl(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),yield hl(n,l)}catch(l){yield ia(l)}}),jd.apply(this,arguments)}function Df(i,e,n){return Hd.apply(this,arguments)}function Hd(){return Hd=(0,h.Z)(function*(i,e,n){const o=kn(i);try{const l=yield function(p,v){const O=kn(p);return O.persistence.runTransaction("Reject batch","readwrite-primary",q=>{let ne;return O.mutationQueue.lookupMutationBatch(q,v).next(Ee=>(or(null!==Ee),ne=Ee.keys(),O.mutationQueue.removeMutationBatch(q,Ee))).next(()=>O.mutationQueue.performConsistencyCheck(q)).next(()=>O.documentOverlayCache.removeOverlaysForBatchId(q,ne,v)).next(()=>O.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(q,ne)).next(()=>O.localDocuments.getDocuments(q,ne))})}(o.localStore,e);$d(o,e,n),Fl(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),yield hl(o,l)}catch(l){yield ia(l)}}),Hd.apply(this,arguments)}function Tf(){return Tf=(0,h.Z)(function*(i,e){const n=kn(i);Xl(n.remoteStore)||tn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(p){const v=kn(p);return v.persistence.runTransaction("Get highest unacknowledged batch id","readonly",O=>v.mutationQueue.getHighestUnacknowledgedBatchId(O))}(n.localStore);if(-1===o)return void e.resolve();const l=n.lc.get(o)||[];l.push(e),n.lc.set(o,l)}catch(o){const l=Ha(o,"Initialization of waitForPendingWrites() operation failed");e.reject(l)}}),Tf.apply(this,arguments)}function Fl(i,e){(i.lc.get(e)||[]).forEach(n=>{n.resolve()}),i.lc.delete(e)}function $d(i,e,n){const o=kn(i);let l=o.hc[o.currentUser.toKey()];if(l){const p=l.get(e);p&&(n?p.reject(n):p.resolve(),l=l.remove(e)),o.hc[o.currentUser.toKey()]=l}}function fc(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.rc.get(e))i.ic.delete(o),n&&i.sc.wc(o,n);i.rc.delete(e),i.isPrimaryClient&&i.ac.ls(e).forEach(o=>{i.ac.containsKey(o)||Ig(i,o)})}function Ig(i,e){i.oc.delete(e.path.canonicalString());const n=i.uc.get(e);null!==n&&(Ru(i.remoteStore,n),i.uc=i.uc.remove(e),i.cc.delete(n),Sf(i))}function Zd(i,e,n){for(const o of n)o instanceof ly?(i.ac.addReference(o.key,e),py(i,o)):o instanceof mg?(tn("SyncEngine","Document no longer in limbo: "+o.key),i.ac.removeReference(o.key,e),i.ac.containsKey(o.key)||Ig(i,o.key)):Wn()}function py(i,e){const n=e.key,o=n.path.canonicalString();i.uc.get(n)||i.oc.has(o)||(tn("SyncEngine","New document in limbo: "+n),i.oc.add(o),Sf(i))}function Sf(i){for(;i.oc.size>0&&i.uc.size<i.maxConcurrentLimboResolutions;){const e=i.oc.values().next().value;i.oc.delete(e);const n=new yn(Pr.fromString(e)),o=i.fc.next();i.cc.set(o,new _g(n)),i.uc=i.uc.insert(n,o),oc(i.remoteStore,new Pl(X(kl(n.path)),o,2,So.at))}}function hl(i,e,n){return _u.apply(this,arguments)}function _u(){return _u=(0,h.Z)(function*(i,e,n){const o=kn(i),l=[],p=[],v=[];var O;o.ic.isEmpty()||(o.ic.forEach((O,q)=>{v.push(o._c(q,e,n).then(ne=>{if((ne||n)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(q.targetId,ne?.fromCache?"not-current":"current"),ne){l.push(ne);const Ee=Wh.Ci(q.targetId,ne);p.push(Ee)}}))}),yield Promise.all(v),o.sc.Wo(l),yield(O=(0,h.Z)(function*(q,ne){const Ee=kn(q);try{yield Ee.persistence.runTransaction("notifyLocalViewChanges","readwrite",ze=>lt.forEach(ne,Dt=>lt.forEach(Dt.Si,qt=>Ee.persistence.referenceDelegate.addReference(ze,Dt.targetId,qt)).next(()=>lt.forEach(Dt.Di,qt=>Ee.persistence.referenceDelegate.removeReference(ze,Dt.targetId,qt)))))}catch(ze){if(!oo(ze))throw ze;tn("LocalStore","Failed to update sequence numbers: "+ze)}for(const ze of ne){const Dt=ze.targetId;if(!ze.fromCache){const qt=Ee.Ui.get(Dt),qn=qt.withLastLimboFreeSnapshotVersion(qt.snapshotVersion);Ee.Ui=Ee.Ui.insert(Dt,qn)}}}),function(q,ne){return O.apply(this,arguments)})(o.localStore,p))}),_u.apply(this,arguments)}function Af(i,e){return vu.apply(this,arguments)}function vu(){return vu=(0,h.Z)(function*(i,e){const n=kn(i);if(!n.currentUser.isEqual(e)){tn("SyncEngine","User change. New user:",e.toKey());const o=yield Td(n.localStore,e);n.currentUser=e,(l=n).lc.forEach(v=>{v.forEach(O=>{O.reject(new rn(Mt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),l.lc.clear(),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield hl(n,o.ji)}var l}),vu.apply(this,arguments)}function Mf(i,e){const n=kn(i),o=n.cc.get(e);if(o&&o.nc)return Zr().add(o.key);{let l=Zr();const p=n.rc.get(e);if(!p)return l;for(const v of p){const O=n.ic.get(v);l=l.unionWith(O.view.ju)}return l}}function zd(i,e){return Gd.apply(this,arguments)}function Gd(){return Gd=(0,h.Z)(function*(i,e){const n=kn(i),o=yield Gc(n.localStore,e.query,!0),l=e.view.tc(o);return n.isPrimaryClient&&Zd(n,e.targetId,l.Xu),l}),Gd.apply(this,arguments)}function Tg(i,e){return Qc.apply(this,arguments)}function Qc(){return Qc=(0,h.Z)(function*(i,e){const n=kn(i);return Xp(n.localStore,e).then(o=>hl(n,o))}),Qc.apply(this,arguments)}function xf(i,e,n,o){return Wd.apply(this,arguments)}function Wd(){return Wd=(0,h.Z)(function*(i,e,n,o){const l=kn(i),p=yield function(v,O){const q=kn(v),ne=kn(q.mutationQueue);return q.persistence.runTransaction("Lookup mutation documents","readonly",Ee=>ne.Tn(Ee,O).next(ze=>ze?q.localDocuments.getDocuments(Ee,ze):lt.resolve(null)))}(l.localStore,e);var O;null!==p?("pending"===n?yield uc(l.remoteStore):"acknowledged"===n||"rejected"===n?($d(l,e,o||null),Fl(l,e),O=e,kn(kn(l.localStore).mutationQueue).An(O)):Wn(),yield hl(l,p)):tn("SyncEngine","Cannot apply mutation batch with id: "+e)}),Wd.apply(this,arguments)}function kf(){return kf=(0,h.Z)(function*(i,e){const n=kn(i);if(Kd(n),Nf(n),!0===e&&!0!==n.dc){const o=n.sharedClientState.getAllActiveQueryTargets(),l=yield gy(n,o.toArray());n.dc=!0,yield cc(n.remoteStore,!0);for(const p of l)oc(n.remoteStore,p)}else if(!1===e&&!1!==n.dc){const o=[];let l=Promise.resolve();n.rc.forEach((p,v)=>{n.sharedClientState.isLocalQueryTarget(v)?o.push(v):l=l.then(()=>(fc(n,v),Nl(n.localStore,v,!0))),Ru(n.remoteStore,v)}),yield l,yield gy(n,o),function(p){const v=kn(p);v.cc.forEach((O,q)=>{Ru(v.remoteStore,q)}),v.ac.fs(),v.cc=new Map,v.uc=new Gi(yn.comparator)}(n),n.dc=!1,yield cc(n.remoteStore,!1)}}),kf.apply(this,arguments)}function gy(i,e,n){return Pf.apply(this,arguments)}function Pf(){return Pf=(0,h.Z)(function*(i,e,n){const o=kn(i),l=[],p=[];for(const v of e){let O;const q=o.rc.get(v);if(q&&0!==q.length){O=yield hu(o.localStore,X(q[0]));for(const ne of q){const Ee=o.ic.get(ne),ze=yield zd(o,Ee);ze.snapshot&&p.push(ze.snapshot)}}else{const ne=yield Jp(o.localStore,v);O=yield hu(o.localStore,ne),yield bg(o,Rf(ne),v,!1,O.resumeToken)}l.push(O)}return o.sc.Wo(p),l}),Pf.apply(this,arguments)}function Rf(i){return Ac(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function my(i){const e=kn(i);return kn(kn(e.localStore).persistence).vi()}function Sg(i,e,n,o){return qd.apply(this,arguments)}function qd(){return qd=(0,h.Z)(function*(i,e,n,o){const l=kn(i);if(l.dc)return void tn("SyncEngine","Ignoring unexpected query state notification.");const p=l.rc.get(e);if(p&&p.length>0)switch(n){case"current":case"not-current":{const v=yield Xp(l.localStore,Sn(p[0])),O=Au.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,ps.EMPTY_BYTE_STRING);yield hl(l,v,O);break}case"rejected":yield Nl(l.localStore,e,!0),fc(l,e,o);break;default:Wn()}}),qd.apply(this,arguments)}function yy(i,e,n){return Fa.apply(this,arguments)}function Fa(){return Fa=(0,h.Z)(function*(i,e,n){const o=Kd(i);if(o.dc){for(const l of e){if(o.rc.has(l)){tn("SyncEngine","Adding an already active target "+l);continue}const p=yield Jp(o.localStore,l),v=yield hu(o.localStore,p);yield bg(o,Rf(p),v.targetId,!1,v.resumeToken),oc(o.remoteStore,v)}for(const l of n)o.rc.has(l)&&(yield Nl(o.localStore,l,!1).then(()=>{Ru(o.remoteStore,l),fc(o,l)}).catch(ia))}}),Fa.apply(this,arguments)}function Kd(i){const e=kn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=dy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yu.bind(null,e),e.sc.Wo=vf.bind(null,e.eventManager),e.sc.wc=bf.bind(null,e.eventManager),e}function Nf(i){const e=kn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fy.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Df.bind(null,e),e}class Ag{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,h.Z)(function*(){n.It=ic(e.databaseInfo.databaseId),n.sharedClientState=n.gc(e),n.persistence=n.yc(e),yield n.persistence.start(),n.localStore=n.Ic(e),n.gcScheduler=n.Tc(e,n.localStore),n.indexBackfillerScheduler=n.Ec(e,n.localStore)})()}Tc(e,n){return null}Ec(e,n){return null}Ic(e){return Kh(this.persistence,new qh,e.initialUser,this.It)}yc(e){return new Wp($c.Bs,this.It)}gc(e){return new tg}terminate(){var e=this;return(0,h.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Yd extends Ag{constructor(e,n,o){super(),this.Ac=e,this.cacheSizeBytes=n,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,o=this;return(0,h.Z)(function*(){yield n().call(o,e),yield o.Ac.initialize(o,e),yield Nf(o.Ac.syncEngine),yield uc(o.Ac.remoteStore),yield o.persistence.li(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Kh(this.persistence,new qh,e.initialUser,this.It)}Tc(e,n){return new Zm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}Ec(e,n){const o=new Ml(n,this.persistence);return new su(e.asyncQueue,o)}yc(e){const n=rc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?ja.withCacheSize(this.cacheSizeBytes):ja.DEFAULT;return new Id(this.synchronizeTabs,n,e.clientId,o,e.asyncQueue,Yr(),Wc(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new tg}}class Mg extends Yd{constructor(e,n){super(e,n,!1),this.Ac=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,o=this;return(0,h.Z)(function*(){yield n().call(o,e);const l=o.Ac.syncEngine;o.sharedClientState instanceof nf&&(o.sharedClientState.syncEngine={Fr:xf.bind(null,l),$r:Sg.bind(null,l),Br:yy.bind(null,l),vi:my.bind(null,l),Mr:Tg.bind(null,l)},yield o.sharedClientState.start()),yield o.persistence.li(function(){var p=(0,h.Z)(function*(v){yield function Of(i,e){return kf.apply(this,arguments)}(o.Ac.syncEngine,v),o.gcScheduler&&(v&&!o.gcScheduler.started?o.gcScheduler.start():v||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(v&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():v||o.indexBackfillerScheduler.stop())});return function(v){return p.apply(this,arguments)}}())})()}gc(e){const n=Yr();if(!nf.C(n))throw new rn(Mt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=rc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new nf(n,e.asyncQueue,o,e.clientId,e.initialUser)}}class Ff{initialize(e,n){var o=this;return(0,h.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(n),o.remoteStore=o.createRemoteStore(n),o.eventManager=o.createEventManager(n),o.syncEngine=o.createSyncEngine(n,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=l=>hy(o.syncEngine,l,1),o.remoteStore.remoteSyncer.handleCredentialChange=Af.bind(null,o.syncEngine),yield cc(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new hg}createDatastore(e){const n=ic(e.databaseInfo.databaseId),o=new Xm(e.databaseInfo);return new ty(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return n=this.localStore,o=this.datastore,l=e.asyncQueue,p=O=>hy(this.syncEngine,O,0),v=rf.C()?new rf:new Ym,new $_(n,o,l,p,v);var n,o,l,p,v}createSyncEngine(e,n){return function(o,l,p,v,O,q,ne){const Ee=new cy(o,l,p,v,O,q);return ne&&(Ee.dc=!0),Ee}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,h.Z)(function*(n){const o=kn(n);tn("RemoteStore","RemoteStore shutting down."),o._u.add(5),yield dl(o),o.mu.shutdown(),o.gu.set("Unknown")}),function(n){return e.apply(this,arguments)})(this.remoteStore);var e}}function Lf(i,e,n){if(!n)throw new rn(Mt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function xg(i,e,n,o){if(!0===e&&!0===o)throw new rn(Mt.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Uf(i){if(!yn.isDocumentKey(i))throw new rn(Mt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Og(i){if(yn.isDocumentKey(i))throw new rn(Mt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Jc(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(n=i).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof i?"a function":Wn()}function yi(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new rn(Mt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jc(i);throw new rn(Mt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function kg(i,e){if(e<=0)throw new rn(Mt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}const Bf=new Map;class Vf{constructor(e){var n;if(void 0===e.host){if(void 0!==e.ssl)throw new rn(Mt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new rn(Mt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,xg("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xc{constructor(e,n,o,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new rn(Mt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new rn(Mt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vf(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new Vl;switch(n.type){case"gapi":return new ta(n.client,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new rn(Mt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Bf.get(e);n&&(tn("ComponentProvider","Removing Datastore"),Bf.delete(e),n.terminate())}(this),Promise.resolve()}}function Cl(i,e,n,o={}){var l;const p=(i=yi(i,Xc))._getSettings();if("firestore.googleapis.com"!==p.host&&p.host!==e&&li("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},p),{host:`${e}:${n}`,ssl:!1})),o.mockUserToken){let v,O;if("string"==typeof o.mockUserToken)v=o.mockUserToken,O=ci.MOCK_USER;else{v=(0,de.Sg)(o.mockUserToken,null===(l=i._app)||void 0===l?void 0:l.options.projectId);const q=o.mockUserToken.sub||o.mockUserToken.user_id;if(!q)throw new rn(Mt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");O=new ci(q)}i._authCredentials=new jl(new tl(v,O))}}class zs{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ll(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zs(this.firestore,e,this._key)}}class Ia{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Ia(this.firestore,e,this._query)}}class Ll extends Ia{constructor(e,n,o){super(e,n,kl(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zs(this.firestore,null,new yn(e))}withConverter(e){return new Ll(this.firestore,e,this._path)}}function Y_(i,e,...n){if(i=(0,de.m9)(i),Lf("collection","path",e),i instanceof Xc){const o=Pr.fromString(e,...n);return Og(o),new Ll(i,null,o)}{if(!(i instanceof zs||i instanceof Ll))throw new rn(Mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Pr.fromString(e,...n));return Og(o),new Ll(i.firestore,null,o)}}function Pg(i,e){if(i=yi(i,Xc),Lf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new rn(Mt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ia(i,null,(n=e,new sa(Pr.emptyPath(),n)));var n}function Rg(i,e,...n){if(i=(0,de.m9)(i),1===arguments.length&&(e=Fi.R()),Lf("doc","path",e),i instanceof Xc){const o=Pr.fromString(e,...n);return Uf(o),new zs(i,null,new yn(o))}{if(!(i instanceof zs||i instanceof Ll))throw new rn(Mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Pr.fromString(e,...n));return Uf(o),new zs(i.firestore,i instanceof Ll?i.converter:null,new yn(o))}}function _y(i,e){return i=(0,de.m9)(i),e=(0,de.m9)(e),(i instanceof zs||i instanceof Ll)&&(e instanceof zs||e instanceof Ll)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function jf(i,e){return i=(0,de.m9)(i),e=(0,de.m9)(e),i instanceof Ia&&e instanceof Ia&&i.firestore===e.firestore&&Le(i._query,e._query)&&i.converter===e.converter}function Qd(i,e=10240){let n=0;return{read:()=>(0,h.Z)(function*(){if(n<i.byteLength){const o={value:i.slice(n,n+e),done:!1};return n+=e,o}return{done:!0}})(),cancel:()=>(0,h.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Jd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Zi("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class vy{constructor(e,n){this.Pc=e,this.It=n,this.metadata=new bs,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(o=>{o&&o.Ou()?this.metadata.resolve(o.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.ku)}`))},o=>this.metadata.reject(o))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,h.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,h.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,h.Z)(function*(){const n=yield e.Sc();if(null===n)return null;const o=e.vc.decode(n),l=Number(o);isNaN(l)&&e.Dc(`length string (${o}) is not valid number`);const p=yield e.Cc(l);return new oy(JSON.parse(p),n.length+l)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,h.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const n=e.xc();n<0&&e.Dc("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),o})()}Cc(e){var n=this;return(0,h.Z)(function*(){for(;n.buffer.length<e;)(yield n.Nc())&&n.Dc("Reached the end of bundle when more is expected.");const o=n.vc.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),o})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,h.Z)(function*(){const n=yield e.Pc.read();if(!n.done){const o=new Uint8Array(e.buffer.length+n.value.length);o.set(e.buffer),o.set(n.value,e.buffer.length),e.buffer=o}return n.done})()}}class Q_{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,h.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new rn(Mt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(l=(0,h.Z)(function*(p,v){const O=kn(p),q=xu(O.It)+"/documents",ne={documents:v.map(qt=>Ku(O.It,qt))},Ee=yield O._o("BatchGetDocuments",q,ne,v.length),ze=new Map;Ee.forEach(qt=>{const en=function Dm(i,e){return"found"in e?function(n,o){or(!!o.found);const l=ul(n,o.found.name),p=Uo(o.found.updateTime),v=new Yi({mapValue:{fields:o.found.fields}});return xr.newFoundDocument(l,p,v)}(i,e):"missing"in e?function(n,o){or(!!o.missing),or(!!o.readTime);const l=ul(n,o.missing),p=Uo(o.readTime);return xr.newNoDocument(l,p)}(i,e):Wn()}(O.It,qt);ze.set(en.key.toString(),en)});const Dt=[];return v.forEach(qt=>{const en=ze.get(qt.toString());or(!!en),Dt.push(en)}),Dt}),function(p,v){return l.apply(this,arguments)})(n.datastore,e);var l;return o.forEach(l=>n.recordVersion(l)),o})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new ye(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,h.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var o;e.mutations.forEach(o=>{n.delete(o.key.toString())}),n.forEach((o,l)=>{const p=yn.fromPath(l);e.mutations.push(new vt(p,e.precondition(p)))}),yield(o=(0,h.Z)(function*(l,p){const v=kn(l),O=xu(v.It)+"/documents",q={writes:p.map(ne=>lu(v.It,ne))};yield v.ao("Commit",O,q)}),function(l,p){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Wn();n=pr.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!n.isEqual(o))throw new rn(Mt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(pr.min())?An.exists(!1):An.updateTime(n):An.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(pr.min()))throw new rn(Mt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return An.updateTime(n)}return An.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Zf{constructor(e,n,o,l,p){this.asyncQueue=e,this.datastore=n,this.options=o,this.updateFunction=l,this.deferred=p,this.kc=o.maxAttempts,this.xo=new Nd(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,h.Z)(function*(){const n=new Q_(e.datastore),o=e.Mc(n);o&&o.then(l=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(l)}).catch(p=>{e.Fc(p)}))}).catch(l=>{e.Fc(l)})}))}Mc(e){try{const n=this.updateFunction(e);return!$(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||!Xr(n)}return!1}}class J_{constructor(e,n,o,l){var p=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=l,this.user=ci.UNAUTHENTICATED,this.clientId=Fi.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var v=(0,h.Z)(function*(O){tn("FirestoreClient","Received user=",O.uid),yield p.authCredentialListener(O),p.user=O});return function(O){return v.apply(this,arguments)}}()),this.appCheckCredentials.start(o,v=>(tn("FirestoreClient","Received new app check token=",v),this.appCheckCredentialListener(v,this.user)))}getConfiguration(){var e=this;return(0,h.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new rn(Mt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,h.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(o){const l=Ha(o,"Failed to shutdown persistence");n.reject(l)}})),n.promise}}function zf(i,e){return eh.apply(this,arguments)}function eh(){return eh=(0,h.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),tn("FirestoreClient","Initializing OfflineComponentProvider");const n=yield i.getConfiguration();yield e.initialize(n);let o=n.initialUser;i.setCredentialChangeListener(function(){var l=(0,h.Z)(function*(p){o.isEqual(p)||(yield Td(e.localStore,p),o=p)});return function(p){return l.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),eh.apply(this,arguments)}function Gf(i,e){return th.apply(this,arguments)}function th(){return th=(0,h.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const n=yield ed(i);tn("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(n,o),i.setCredentialChangeListener(l=>yf(e.remoteStore,l)),i.setAppCheckTokenChangeListener((l,p)=>yf(e.remoteStore,p)),i.onlineComponents=e}),th.apply(this,arguments)}function ed(i){return Dl.apply(this,arguments)}function Dl(){return Dl=(0,h.Z)(function*(i){return i.offlineComponents||(tn("FirestoreClient","Using default OfflineComponentProvider"),yield zf(i,new Ag)),i.offlineComponents}),Dl.apply(this,arguments)}function Fu(i){return pc.apply(this,arguments)}function pc(){return pc=(0,h.Z)(function*(i){return i.onlineComponents||(tn("FirestoreClient","Using default OnlineComponentProvider"),yield Gf(i,new Ff)),i.onlineComponents}),pc.apply(this,arguments)}function gc(i){return ed(i).then(e=>e.persistence)}function nh(i){return ed(i).then(e=>e.localStore)}function td(i){return Fu(i).then(e=>e.remoteStore)}function rh(i){return Fu(i).then(e=>e.syncEngine)}function mc(i){return Lu.apply(this,arguments)}function Lu(){return Lu=(0,h.Z)(function*(i){const e=yield Fu(i),n=e.eventManager;return n.onListen=Cf.bind(null,e.syncEngine),n.onUnlisten=W_.bind(null,e.syncEngine),n}),Lu.apply(this,arguments)}function Ey(i,e,n={}){const o=new bs;return i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return function(l,p,v,O,q){const ne=new Jd({next:ze=>{p.enqueueAndForget(()=>hc(l,Ee));const Dt=ze.docs.has(v);!Dt&&ze.fromCache?q.reject(new rn(Mt.UNAVAILABLE,"Failed to get document because the client is offline.")):Dt&&ze.fromCache&&O&&"server"===O.source?q.reject(new rn(Mt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):q.resolve(ze)},error:ze=>q.reject(ze)}),Ee=new wf(kl(v.path),ne,{includeMetadataChanges:!0,Nu:!0});return fg(l,Ee)}(yield mc(i),i.asyncQueue,e,n,o)})),o.promise}function Fg(i,e,n={}){const o=new bs;return i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return function(l,p,v,O,q){const ne=new Jd({next:ze=>{p.enqueueAndForget(()=>hc(l,Ee)),ze.fromCache&&"server"===O.source?q.reject(new rn(Mt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):q.resolve(ze)},error:ze=>q.reject(ze)}),Ee=new wf(v,ne,{includeMetadataChanges:!0,Nu:!0});return fg(l,Ee)}(yield mc(i),i.asyncQueue,e,n,o)})),o.promise}class Iy{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Nd(this,"async_queue_retry"),this.Wc=()=>{const n=Wc();n&&tn("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.Po()};const e=Wc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const n=Wc();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const n=new bs;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,h.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(n){if(!oo(n))throw n;tn("AsyncQueue","Operation failed with retryable error: "+n)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const n=this.Bc.then(()=>(this.Gc=!0,e().catch(o=>{throw this.Kc=o,this.Gc=!1,Zi("INTERNAL UNHANDLED ERROR: ",function(p){let v=p.message||"";return p.stack&&(v=p.stack.includes(p.message)?p.stack:p.message+"\n"+p.stack),v}(o)),o}).then(o=>(this.Gc=!1,o))));return this.Bc=n,n}enqueueAfterDelay(e,n,o){this.zc(),this.jc.indexOf(e)>-1&&(n=0);const l=qc.createAndSchedule(this,e,n,o,p=>this.Yc(p));return this.qc.push(l),l}zc(){this.Kc&&Wn()}verifyOperationInProgress(){}Xc(){var e=this;return(0,h.Z)(function*(){let n;do{n=e.Bc,yield n}while(n!==e.Bc)})()}Zc(e){for(const n of this.qc)if(n.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((n,o)=>n.targetTimeMs-o.targetTimeMs);for(const n of this.qc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const n=this.qc.indexOf(e);this.qc.splice(n,1)}}function nd(i){return function(e,n){if("object"!=typeof e||null===e)return!1;const o=e;for(const l of["next","error","complete"])if(l in o&&"function"==typeof o[l])return!0;return!1}(i)}class Ty{constructor(){this._progressObserver={},this._taskCompletionResolver=new bs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,o){this._progressObserver={next:e,error:n,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const Sy=-1;class Ls extends Xc{constructor(e,n,o,l){super(e,n,o,l),this.type="firestore",this._queue=new Iy,this._persistenceKey=l?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||rd(this),this._firestoreClient.terminate()}}function bo(i){return i._firestoreClient||rd(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function rd(i){var e;const n=i._freezeSettings(),o=(p=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new E(i._databaseId,p,i._persistenceKey,(O=n).host,O.ssl,O.experimentalForceLongPolling,O.experimentalAutoDetectLongPolling,O.useFetchStreams));var p,O;i._firestoreClient=new J_(i._authCredentials,i._appCheckCredentials,i._queue,o)}function Uu(i,e){bu(i=yi(i,Ls));const n=bo(i),o=i._freezeSettings(),l=new Ff;return yc(n,l,new Yd(l,o.cacheSizeBytes,e?.forceOwnership))}function nv(i){bu(i=yi(i,Ls));const e=bo(i),n=i._freezeSettings(),o=new Ff;return yc(e,o,new Mg(o,n.cacheSizeBytes))}function yc(i,e,n){const o=new bs;return i.asyncQueue.enqueue((0,h.Z)(function*(){try{yield zf(i,n),yield Gf(i,e),o.resolve()}catch(l){const p=l;if(!("FirebaseError"===(v=p).name?v.code===Mt.FAILED_PRECONDITION||v.code===Mt.UNIMPLEMENTED:!(typeof DOMException<"u"&&v instanceof DOMException)||22===v.code||20===v.code||11===v.code))throw p;li("Error enabling offline persistence. Falling back to persistence disabled: "+p),o.reject(p)}var v})).then(()=>o.promise)}function Ay(i){if(i._initialized&&!i._terminated)throw new rn(Mt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new bs;return i._queue.enqueueAndForgetEvenWhileRestricted((0,h.Z)(function*(){try{yield(n=(0,h.Z)(function*(o){if(!Hs.C())return Promise.resolve();const l=o+"main";yield Hs.delete(l)}),function(o){return n.apply(this,arguments)})(rc(i._databaseId,i._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}function My(i){return function(e){const n=new bs;return e.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return function If(i,e){return Tf.apply(this,arguments)}(yield rh(e),n)})),n.promise}(bo(i=yi(i,Ls)))}function qf(i){return function by(i){return i.asyncQueue.enqueue((0,h.Z)(function*(){const e=yield gc(i),n=yield td(i);return e.setNetworkEnabled(!0),function(o){const l=kn(o);return l._u.delete(0),sc(l)}(n)}))}(bo(i=yi(i,Ls)))}function xy(i){return function X_(i){return i.asyncQueue.enqueue((0,h.Z)(function*(){const e=yield gc(i),n=yield td(i);return e.setNetworkEnabled(!1),(o=(0,h.Z)(function*(l){const p=kn(l);p._u.add(0),yield dl(p),p.gu.set("Offline")}),function(l){return o.apply(this,arguments)})(n);var o}))}(bo(i=yi(i,Ls)))}function id(i,e){const n=bo(i=yi(i,Ls)),o=new Ty;return function Lg(i,e,n,o){const l=function(p,v){let O;return O="string"==typeof p?(new TextEncoder).encode(p):p,q=function(q,ne){if(q instanceof Uint8Array)return Qd(q,void 0);if(q instanceof ArrayBuffer)return Qd(new Uint8Array(q),void 0);if(q instanceof ReadableStream)return q.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(O),new vy(q,v);var q}(n,ic(e));i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){!function K_(i,e,n){const o=kn(i);var l;(l=(0,h.Z)(function*(p,v,O){try{const q=yield v.getMetadata();if(yield function(Dt,qt){const en=kn(Dt),qn=Uo(qt.createTime);return en.persistence.runTransaction("hasNewerBundle","readonly",rr=>en.Ns.getBundleMetadata(rr,qt.id)).then(rr=>!!rr&&rr.createTime.compareTo(qn)>=0)}(p.localStore,q))return yield v.close(),O._completeWith({taskState:"Success",documentsLoaded:(Dt=q).totalDocuments,bytesLoaded:Dt.totalBytes,totalDocuments:Dt.totalDocuments,totalBytes:Dt.totalBytes}),Promise.resolve(new Set);O._updateProgress(Ef(q));const ne=new ay(q,p.localStore,v.It);let Ee=yield v.mc();for(;Ee;){const Dt=yield ne.Fu(Ee);Dt&&O._updateProgress(Dt),Ee=yield v.mc()}const ze=yield ne.complete();return yield hl(p,ze.Lu,void 0),yield function(Dt,qt){const en=kn(Dt);return en.persistence.runTransaction("Save bundle","readwrite",qn=>en.Ns.saveBundleMetadata(qn,qt))}(p.localStore,q),O._completeWith(ze.progress),Promise.resolve(ze.Bu)}catch(q){return li("SyncEngine",`Loading bundle failed with ${q}`),O._failWith(q),Promise.resolve(new Set)}var Dt}),function(p,v,O){return l.apply(this,arguments)})(o,e,n).then(l=>{o.sharedClientState.notifyBundleLoaded(l)})}(yield rh(i),l,o)}))}(n,i._databaseId,e,o),o}function Ta(i,e){return function Wf(i,e){return i.asyncQueue.enqueue((0,h.Z)(function*(){return function(n,o){const l=kn(n);return l.persistence.runTransaction("Get named query","readonly",p=>l.Ns.getNamedQuery(p,o))}(yield nh(i),e)}))}(bo(i=yi(i,Ls)),e).then(n=>n?new Ia(i,null,n.query):null)}function bu(i){if(i._initialized||i._terminated)throw new rn(Mt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Il{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Il(ps.fromBase64String(e))}catch(n){throw new rn(Mt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Il(ps.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Bo{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new rn(Mt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Li(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fl{constructor(e){this._methodName=e}}class tu{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new rn(Mt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new rn(Mt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Er(this._lat,e._lat)||Er(this._long,e._long)}}const _c=/^__.*__$/;class vc{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return null!==this.fieldMask?new y(e,this.data,this.fieldMask,n,this.fieldTransforms):new C(e,this.data,n,this.fieldTransforms)}}class Bu{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new y(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Vu(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wn()}}class nu{constructor(e,n,o,l,p,v){this.settings=e,this.databaseId=n,this.It=o,this.ignoreUndefinedProperties=l,void 0===p&&this.na(),this.fieldTransforms=p||[],this.fieldMask=v||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new nu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),l=this.ia({path:o,oa:!1});return l.ua(e),l}ca(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),l=this.ia({path:o,oa:!1});return l.na(),l}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Hu(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Vu(this.sa)&&_c.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class bc{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.It=o||ic(e)}da(e,n,o,l=!1){return new nu({sa:e,methodName:n,fa:o,path:Li.emptyPath(),oa:!1,la:l},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function pl(i){const e=i._freezeSettings(),n=ic(i._databaseId);return new bc(i._databaseId,!!e.ignoreUndefinedProperties,n)}function sd(i,e,n,o,l,p={}){const v=i.da(p.merge||p.mergeFields?2:0,e,n,l);ah("Data must be an object, but it was:",v,o);const O=Yf(o,v);let q,ne;if(p.merge)q=new As(v.fieldMask),ne=v.fieldTransforms;else if(p.mergeFields){const Ee=[];for(const ze of p.mergeFields){const Dt=od(e,ze,n);if(!v.contains(Dt))throw new rn(Mt.INVALID_ARGUMENT,`Field '${Dt}' is specified in your field mask but missing from your input data.`);ad(Ee,Dt)||Ee.push(Dt)}q=new As(Ee),ne=v.fieldTransforms.filter(ze=>q.covers(ze.field))}else q=null,ne=v.fieldTransforms;return new vc(new Yi(O),q,ne)}class wc extends fl{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wc}}function Kf(i,e,n){return new nu({sa:3,fa:e.settings.fa,methodName:i._methodName,oa:n},e.databaseId,e.It,e.ignoreUndefinedProperties)}class ih extends fl{_toFieldTransform(e){return new lo(e.path,new Da)}isEqual(e){return e instanceof ih}}class Bg extends fl{constructor(e,n){super(e),this._a=n}_toFieldTransform(e){const n=Kf(this,e,!0),o=this._a.map(p=>ju(p,n)),l=new to(o);return new lo(e.path,l)}isEqual(e){return this===e}}class Vg extends fl{constructor(e,n){super(e),this._a=n}_toFieldTransform(e){const n=Kf(this,e,!0),o=this._a.map(p=>ju(p,n)),l=new yo(o);return new lo(e.path,l)}isEqual(e){return this===e}}class jg extends fl{constructor(e,n){super(e),this.wa=n}_toFieldTransform(e){const n=new Lo(e.It,di(e.It,this.wa));return new lo(e.path,n)}isEqual(e){return this===e}}function sh(i,e,n,o){const l=i.da(1,e,n);ah("Data must be an object, but it was:",l,o);const p=[],v=Yi.empty();xa(o,(q,ne)=>{const Ee=lh(e,q,n);ne=(0,de.m9)(ne);const ze=l.ca(Ee);if(ne instanceof wc)p.push(Ee);else{const Dt=ju(ne,ze);null!=Dt&&(p.push(Ee),v.set(Ee,Dt))}});const O=new As(p);return new Bu(v,O,l.fieldTransforms)}function oh(i,e,n,o,l,p){const v=i.da(1,e,n),O=[od(e,o,n)],q=[l];if(p.length%2!=0)throw new rn(Mt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Dt=0;Dt<p.length;Dt+=2)O.push(od(e,p[Dt])),q.push(p[Dt+1]);const ne=[],Ee=Yi.empty();for(let Dt=O.length-1;Dt>=0;--Dt)if(!ad(ne,O[Dt])){const qt=O[Dt];let en=q[Dt];en=(0,de.m9)(en);const qn=v.ca(qt);if(en instanceof wc)ne.push(qt);else{const rr=ju(en,qn);null!=rr&&(ne.push(qt),Ee.set(qt,rr))}}const ze=new As(ne);return new Bu(Ee,ze,v.fieldTransforms)}function Hg(i,e,n,o=!1){return ju(n,i.da(o?4:3,e))}function ju(i,e){if($g(i=(0,de.m9)(i)))return ah("Unsupported field value:",e,i),Yf(i,e);if(i instanceof fl)return function(n,o){if(!Vu(o.sa))throw o.ha(`${n._methodName}() can only be used with update() and set()`);if(!o.path)throw o.ha(`${n._methodName}() is not currently supported inside arrays`);const l=n._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(n,o){const l=[];let p=0;for(const v of n){let O=ju(v,o.aa(p));null==O&&(O={nullValue:"NULL_VALUE"}),l.push(O),p++}return{arrayValue:{values:l}}}(i,e)}return function(n,o){if(null===(n=(0,de.m9)(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return di(o.It,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const l=ti.fromDate(n);return{timestampValue:Mu(o.It,l)}}if(n instanceof ti){const l=new ti(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Mu(o.It,l)}}if(n instanceof tu)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Il)return{bytesValue:Eh(o.It,n._byteString)};if(n instanceof zs){const l=o.databaseId,p=n.firestore._databaseId;if(!p.isEqual(l))throw o.ha(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Ch(n.firestore._databaseId||o.databaseId,n._key.path)}}throw o.ha(`Unsupported field value: ${Jc(n)}`)}(i,e)}function Yf(i,e){const n={};return Ol(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xa(i,(o,l)=>{const p=ju(l,e.ra(o));null!=p&&(n[o]=p)}),{mapValue:{fields:n}}}function $g(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof ti||i instanceof tu||i instanceof Il||i instanceof zs||i instanceof fl)}function ah(i,e,n){if(!$g(n)||"object"!=typeof(o=n)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Jc(n);throw e.ha("an object"===o?i+" a custom object":i+" "+o)}var o}function od(i,e,n){if((e=(0,de.m9)(e))instanceof Bo)return e._internalPath;if("string"==typeof e)return lh(i,e);throw Hu("Field path arguments must be of type string or ",i,!1,void 0,n)}const Qf=new RegExp("[~\\*/\\[\\]]");function lh(i,e,n){if(e.search(Qf)>=0)throw Hu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Bo(...e.split("."))._internalPath}catch{throw Hu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Hu(i,e,n,o,l){const p=o&&!o.isEmpty(),v=void 0!==l;let O=`Function ${e}() called with invalid data`;n&&(O+=" (via `toFirestore()`)"),O+=". ";let q="";return(p||v)&&(q+=" (found",p&&(q+=` in field ${o}`),v&&(q+=` in document ${l}`),q+=")"),new rn(Mt.INVALID_ARGUMENT,O+i+q)}function ad(i,e){return i.some(n=>n.isEqual(e))}class $u{constructor(e,n,o,l,p){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=l,this._converter=p}get id(){return this._key.path.lastSegment()}get ref(){return new zs(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Oy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ec("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class Oy extends $u{data(){return super.data()}}function Ec(i,e){return"string"==typeof e?lh(i,e):e instanceof Bo?e._internalPath:e._delegate._internalPath}function uh(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new rn(Mt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cc{}function Zg(i,...e){for(const n of e)i=n._apply(i);return i}class Jf extends Cc{constructor(e,n,o){super(),this.ma=e,this.ga=n,this.ya=o,this.type="where"}_apply(e){const n=pl(e.firestore),o=function(l,p,v,O,q,ne,Ee){let ze;if(q.isKeyField()){if("array-contains"===ne||"array-contains-any"===ne)throw new rn(Mt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ne}' queries on documentId().`);if("in"===ne||"not-in"===ne){tp(Ee,ne);const qt=[];for(const en of Ee)qt.push(hh(O,l,en));ze={arrayValue:{values:qt}}}else ze=hh(O,l,Ee)}else"in"!==ne&&"not-in"!==ne&&"array-contains-any"!==ne||tp(Ee,ne),ze=Hg(v,"where",Ee,"in"===ne||"not-in"===ne);const Dt=Gn.create(q,ne,ze);return function(qt,en){if(en.dt()){const rr=f(qt);if(null!==rr&&!rr.isEqual(en.field))throw new rn(Mt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${rr.toString()}' and '${en.field.toString()}'`);const Ui=m(qt);null!==Ui&&np(0,en.field,Ui)}const qn=function(rr,Ui){for(const Ds of rr.filters)if(Ui.indexOf(Ds.op)>=0)return Ds.op;return null}(qt,function(rr){switch(rr){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(en.op));if(null!==qn)throw new rn(Mt.INVALID_ARGUMENT,qn===en.op?`Invalid query. You cannot use more than one '${en.op.toString()}' filter.`:`Invalid query. You cannot use '${en.op.toString()}' filters with '${qn.toString()}' filters.`)}(l,Dt),Dt}(e._query,0,n,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Ia(e.firestore,e.converter,function(l,p){const v=l.filters.concat([p]);return new sa(l.path,l.collectionGroup,l.explicitOrderBy.slice(),v,l.limit,l.limitType,l.startAt,l.endAt)}(e._query,o))}}function zg(i,e,n){const o=e,l=Ec("where",i);return new Jf(l,o,n)}class Gg extends Cc{constructor(e,n){super(),this.ma=e,this.pa=n,this.type="orderBy"}_apply(e){const n=function(o,l,p){if(null!==o.startAt)throw new rn(Mt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new rn(Mt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const v=new go(l,p);return function(O,q){if(null===m(O)){const ne=f(O);null!==ne&&np(0,ne,q.field)}}(o,v),v}(e._query,this.ma,this.pa);return new Ia(e.firestore,e.converter,function(o,l){const p=o.explicitOrderBy.concat([l]);return new sa(o.path,o.collectionGroup,p,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function Xf(i,e="asc"){const n=e,o=Ec("orderBy",i);return new Gg(o,n)}class ch extends Cc{constructor(e,n,o){super(),this.type=e,this.Ia=n,this.Ta=o}_apply(e){return new Ia(e.firestore,e.converter,Ce(e._query,this.Ia,this.Ta))}}function ky(i){return kg("limit",i),new ch("limit",i,"F")}function Wg(i){return kg("limitToLast",i),new ch("limitToLast",i,"L")}class ep extends Cc{constructor(e,n,o){super(),this.type=e,this.Ea=n,this.Aa=o}_apply(e){const n=dh(e,this.type,this.Ea,this.Aa);return new Ia(e.firestore,e.converter,(l=n,new sa((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,l,o.endAt)));var o,l}}function qg(...i){return new ep("startAt",i,!0)}function Kg(...i){return new ep("startAfter",i,!1)}class Yg extends Cc{constructor(e,n,o){super(),this.type=e,this.Ea=n,this.Aa=o}_apply(e){const n=dh(e,this.type,this.Ea,this.Aa);return new Ia(e.firestore,e.converter,(l=n,new sa((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,l)));var o,l}}function Qg(...i){return new Yg("endBefore",i,!1)}function Jg(...i){return new Yg("endAt",i,!0)}function dh(i,e,n,o){if(n[0]=(0,de.m9)(n[0]),n[0]instanceof $u)return function(l,p,v,O,q){if(!O)throw new rn(Mt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${v}().`);const ne=[];for(const Ee of B(l))if(Ee.field.isKeyField())ne.push(Ms(p,O.key));else{const ze=O.data.field(Ee.field);if(va(ze))throw new rn(Mt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Ee.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ze){const Dt=Ee.field.canonicalString();throw new rn(Mt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Dt}' (used as the orderBy) does not exist.`)}ne.push(ze)}return new Mo(ne,q)}(i._query,i.firestore._databaseId,e,n[0]._document,o);{const l=pl(i.firestore);return function(p,v,O,q,ne,Ee){const ze=p.explicitOrderBy;if(ne.length>ze.length)throw new rn(Mt.INVALID_ARGUMENT,`Too many arguments provided to ${q}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Dt=[];for(let qt=0;qt<ne.length;qt++){const en=ne[qt];if(ze[qt].field.isKeyField()){if("string"!=typeof en)throw new rn(Mt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${q}(), but got a ${typeof en}`);if(!w(p)&&-1!==en.indexOf("/"))throw new rn(Mt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${q}() must be a plain document ID, but '${en}' contains a slash.`);const qn=p.path.child(Pr.fromString(en));if(!yn.isDocumentKey(qn))throw new rn(Mt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${q}() must result in a valid document path, but '${qn}' is not because it contains an odd number of segments.`);const rr=new yn(qn);Dt.push(Ms(v,rr))}else{const qn=Hg(O,q,en);Dt.push(qn)}}return new Mo(Dt,Ee)}(i._query,i.firestore._databaseId,l,e,n,o)}}function hh(i,e,n){if("string"==typeof(n=(0,de.m9)(n))){if(""===n)throw new rn(Mt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!w(e)&&-1!==n.indexOf("/"))throw new rn(Mt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(Pr.fromString(n));if(!yn.isDocumentKey(o))throw new rn(Mt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Ms(i,new yn(o))}if(n instanceof zs)return Ms(i,n._key);throw new rn(Mt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jc(n)}.`)}function tp(i,e){if(!Array.isArray(i)||0===i.length)throw new rn(Mt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new rn(Mt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function np(i,e,n){if(!n.isEqual(e))throw new rn(Mt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class fh{convertValue(e,n="none"){switch(pn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ai(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(po(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Wn()}}convertObject(e,n){const o={};return xa(e.fields,(l,p)=>{o[l]=this.convertValue(p,n)}),o}convertGeoPoint(e){return new tu(Ai(e.latitude),Ai(e.longitude))}convertArray(e,n){return(e.values||[]).map(o=>this.convertValue(o,n))}convertServerTimestamp(e,n){switch(n){case"previous":const o=D(e);return null==o?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(T(e));default:return null}}convertTimestamp(e){const n=Zs(e);return new ti(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=Pr.fromString(e);or(fd(o));const l=new F(o.get(1),o.get(3)),p=new yn(o.popFirst(5));return l.isEqual(n)||Zi(`Document ${p} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),p}}function ld(i,e,n){let o;return o=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,o}class Xg extends fh{constructor(e){super(),this.firestore=e}convertBytes(e){return new Il(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new zs(this.firestore,null,n)}}class wu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Eu extends $u{constructor(e,n,o,l,p,v){super(e,n,o,l,v),this._firestore=e,this._firestoreImpl=e,this.metadata=p}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Dc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(Ec("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class Dc extends Eu{data(e={}){return super.data(e)}}class Ic{constructor(e,n,o,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new wu(l.hasPendingWrites,l.fromCache),this.query=o}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(o=>{e.call(n,new Dc(this._firestore,this._userDataWriter,o.key,o,new wu(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new rn(Mt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let p=0;return o._snapshot.docChanges.map(v=>({type:"added",doc:new Dc(o._firestore,o._userDataWriter,v.doc.key,v.doc,new wu(o._snapshot.mutatedKeys.has(v.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:p++}))}{let p=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(v=>l||3!==v.type).map(v=>{const O=new Dc(o._firestore,o._userDataWriter,v.doc.key,v.doc,new wu(o._snapshot.mutatedKeys.has(v.doc.key),o._snapshot.fromCache),o.query.converter);let q=-1,ne=-1;return 0!==v.type&&(q=p.indexOf(v.doc.key),p=p.delete(v.doc.key)),1!==v.type&&(p=p.add(v.doc),ne=p.indexOf(v.doc.key)),{type:Py(v.type),doc:O,oldIndex:q,newIndex:ne}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Py(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wn()}}function Ry(i,e){return i instanceof Eu&&e instanceof Eu?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Ic&&e instanceof Ic&&i._firestore===e._firestore&&jf(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function em(i){i=yi(i,zs);const e=yi(i.firestore,Ls);return Ey(bo(e),i._key).then(n=>rp(e,i,n))}class Cu extends fh{constructor(e){super(),this.firestore=e}convertBytes(e){return new Il(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new zs(this.firestore,null,n)}}function Vo(i){i=yi(i,zs);const e=yi(i.firestore,Ls),n=bo(e),o=new Cu(e);return function wy(i,e){const n=new bs;return i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return(o=(0,h.Z)(function*(l,p,v){try{const O=yield function(q,ne){const Ee=kn(q);return Ee.persistence.runTransaction("read document","readonly",ze=>Ee.localDocuments.getDocument(ze,ne))}(l,p);O.isFoundDocument()?v.resolve(O):O.isNoDocument()?v.resolve(null):v.reject(new rn(Mt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(O){const q=Ha(O,`Failed to get document '${p} from cache`);v.reject(q)}}),function(l,p,v){return o.apply(this,arguments)})(yield nh(i),e,n);var o})),n.promise}(n,i._key).then(l=>new Eu(e,o,i._key,l,new wu(null!==l&&l.hasLocalMutations,!0),i.converter))}function tm(i){i=yi(i,zs);const e=yi(i.firestore,Ls);return Ey(bo(e),i._key,{source:"server"}).then(n=>rp(e,i,n))}function Ny(i){i=yi(i,Ia);const e=yi(i.firestore,Ls),n=bo(e),o=new Cu(e);return uh(i._query),Fg(n,i._query).then(l=>new Ic(e,o,i,l))}function Fy(i){i=yi(i,Ia);const e=yi(i.firestore,Ls),n=bo(e),o=new Cu(e);return function Cy(i,e){const n=new bs;return i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return(o=(0,h.Z)(function*(l,p,v){try{const O=yield Gc(l,p,!0),q=new uy(p,O.Hi),ne=q.Wu(O.documents),Ee=q.applyChanges(ne,!1);v.resolve(Ee.snapshot)}catch(O){const q=Ha(O,`Failed to execute query '${p} against cache`);v.reject(q)}}),function(l,p,v){return o.apply(this,arguments)})(yield nh(i),e,n);var o})),n.promise}(n,i._query).then(l=>new Ic(e,o,i,l))}function nm(i){i=yi(i,Ia);const e=yi(i.firestore,Ls),n=bo(e),o=new Cu(e);return Fg(n,i._query,{source:"server"}).then(l=>new Ic(e,o,i,l))}function Ly(i,e,n){i=yi(i,zs);const o=yi(i.firestore,Ls),l=ld(i.converter,e,n);return Zu(o,[sd(pl(o),"setDoc",i._key,l,null!==i.converter,n).toMutation(i._key,An.none())])}function rm(i,e,n,...o){i=yi(i,zs);const l=yi(i.firestore,Ls),p=pl(l);let v;return v="string"==typeof(e=(0,de.m9)(e))||e instanceof Bo?oh(p,"updateDoc",i._key,e,n,o):sh(p,"updateDoc",i._key,e),Zu(l,[v.toMutation(i._key,An.exists(!0))])}function im(i){return Zu(yi(i.firestore,Ls),[new ye(i._key,An.none())])}function Tc(i,e){const n=yi(i.firestore,Ls),o=Rg(i),l=ld(i.converter,e);return Zu(n,[sd(pl(i.firestore),"addDoc",o._key,l,null!==i.converter,{}).toMutation(o._key,An.exists(!1))]).then(()=>o)}function Uy(i,...e){var n,o,l;i=(0,de.m9)(i);let p={includeMetadataChanges:!1},v=0;"object"!=typeof e[v]||nd(e[v])||(p=e[v],v++);const O={includeMetadataChanges:p.includeMetadataChanges};if(nd(e[v])){const ze=e[v];e[v]=null===(n=ze.next)||void 0===n?void 0:n.bind(ze),e[v+1]=null===(o=ze.error)||void 0===o?void 0:o.bind(ze),e[v+2]=null===(l=ze.complete)||void 0===l?void 0:l.bind(ze)}let q,ne,Ee;if(i instanceof zs)ne=yi(i.firestore,Ls),Ee=kl(i._key.path),q={next:ze=>{e[v]&&e[v](rp(ne,i,ze))},error:e[v+1],complete:e[v+2]};else{const ze=yi(i,Ia);ne=yi(ze.firestore,Ls),Ee=ze._query;const Dt=new Cu(ne);q={next:qt=>{e[v]&&e[v](new Ic(ne,Dt,ze,qt))},error:e[v+1],complete:e[v+2]},uh(i._query)}return function(ze,Dt,qt,en){const qn=new Jd(en),rr=new wf(Dt,qn,qt);return ze.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return fg(yield mc(ze),rr)})),()=>{qn.bc(),ze.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return hc(yield mc(ze),rr)}))}}(bo(ne),Ee,O,q)}function By(i,e){return function Dy(i,e){const n=new Jd(e);return i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return o=yield mc(i),l=n,kn(o).Ru.add(l),void l.next();var o,l})),()=>{n.bc(),i.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return o=yield mc(i),l=n,void kn(o).Ru.delete(l);var o,l}))}}(bo(i=yi(i,Ls)),nd(e)?e:{next:e})}function Zu(i,e){return function(n,o){const l=new bs;return n.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return function q_(i,e,n){return Cg.apply(this,arguments)}(yield rh(n),o,l)})),l.promise}(bo(i),e)}function rp(i,e,n){const o=n.docs.get(e._key),l=new Cu(i);return new Eu(i,l,e._key,o,new wu(n.hasPendingWrites,n.fromCache),e.converter)}const sm={maxAttempts:5};class ph{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=pl(e)}set(e,n,o){this._verifyNotCommitted();const l=la(e,this._firestore),p=ld(l.converter,n,o),v=sd(this._dataReader,"WriteBatch.set",l._key,p,null!==l.converter,o);return this._mutations.push(v.toMutation(l._key,An.none())),this}update(e,n,o,...l){this._verifyNotCommitted();const p=la(e,this._firestore);let v;return v="string"==typeof(n=(0,de.m9)(n))||n instanceof Bo?oh(this._dataReader,"WriteBatch.update",p._key,n,o,l):sh(this._dataReader,"WriteBatch.update",p._key,n),this._mutations.push(v.toMutation(p._key,An.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=la(e,this._firestore);return this._mutations=this._mutations.concat(new ye(n._key,An.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new rn(Mt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function la(i,e){if((i=(0,de.m9)(i)).firestore!==e)throw new rn(Mt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class jy extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=pl(e)}get(e){const n=la(e,this._firestore),o=new Xg(this._firestore);return this._transaction.lookup([n._key]).then(l=>{if(!l||1!==l.length)return Wn();const p=l[0];if(p.isFoundDocument())return new $u(this._firestore,o,p.key,p,n.converter);if(p.isNoDocument())return new $u(this._firestore,o,n._key,null,n.converter);throw Wn()})}set(e,n,o){const l=la(e,this._firestore),p=ld(l.converter,n,o),v=sd(this._dataReader,"Transaction.set",l._key,p,null!==l.converter,o);return this._transaction.set(l._key,v),this}update(e,n,o,...l){const p=la(e,this._firestore);let v;return v="string"==typeof(n=(0,de.m9)(n))||n instanceof Bo?oh(this._dataReader,"Transaction.update",p._key,n,o,l):sh(this._dataReader,"Transaction.update",p._key,n),this._transaction.update(p._key,v),this}delete(e){const n=la(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=la(e,this._firestore),o=new Cu(this._firestore);return super.get(e).then(l=>new Eu(this._firestore,o,n._key,l._document,new wu(!1,!1),n.converter))}}function Hy(i,e,n){i=yi(i,Ls);const o=Object.assign(Object.assign({},sm),n);return function(l){if(l.maxAttempts<1)throw new rn(Mt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(l,p,v){const O=new bs;return l.asyncQueue.enqueueAndForget((0,h.Z)(function*(){const q=yield function Ng(i){return Fu(i).then(e=>e.datastore)}(l);new Zf(l.asyncQueue,q,v,p,O).run()})),O.promise}(bo(i),l=>e(new jy(i,l)),o)}function Ul(){return new wc("deleteField")}function Tl(){return new ih("serverTimestamp")}function Sl(...i){return new Bg("arrayUnion",i)}function om(...i){return new Vg("arrayRemove",i)}function am(i){return new jg("increment",i)}!function(i,e=!0){ts=c.SDK_VERSION,(0,c._registerComponent)(new S.wA("firestore",(n,{instanceIdentifier:o,options:l})=>{const p=n.getProvider("app").getImmediate(),v=new Ls(new hs(n.getProvider("auth-internal")),new La(n.getProvider("app-check-internal")),function(O,q){if(!Object.prototype.hasOwnProperty.apply(O.options,["projectId"]))throw new rn(Mt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new F(O.options.projectId,q)}(p,o),p);return l=Object.assign({useFetchStreams:e},l),v._setSettings(l),v},"PUBLIC").setMultipleInstances(!0)),(0,c.registerVersion)(Io,"3.7.2",i),(0,c.registerVersion)(Io,"3.7.2","esm2017")}()},2090:(Jt,Qe,k)=>{k.d(Qe,{$s:()=>ge,BH:()=>cn,G6:()=>rt,L:()=>fe,LL:()=>Nn,Pz:()=>Mn,Sg:()=>Rt,UG:()=>He,US:()=>Ae,ZB:()=>be,ZR:()=>Zn,aH:()=>Qt,b$:()=>ft,eu:()=>qe,hl:()=>Pt,jU:()=>Tt,m9:()=>ln,ne:()=>_r,pd:()=>_i,q4:()=>Lt,r3:()=>Cr,ru:()=>gt,tV:()=>Fe,uI:()=>mt,vZ:()=>Ht,w1:()=>Gt,xO:()=>nr,xb:()=>Rr,z$:()=>st,zI:()=>it,zd:()=>Nr});const d=function(Ne){const xe=[];let $e=0;for(let De=0;De<Ne.length;De++){let ie=Ne.charCodeAt(De);ie<128?xe[$e++]=ie:ie<2048?(xe[$e++]=ie>>6|192,xe[$e++]=63&ie|128):55296==(64512&ie)&&De+1<Ne.length&&56320==(64512&Ne.charCodeAt(De+1))?(ie=65536+((1023&ie)<<10)+(1023&Ne.charCodeAt(++De)),xe[$e++]=ie>>18|240,xe[$e++]=ie>>12&63|128,xe[$e++]=ie>>6&63|128,xe[$e++]=63&ie|128):(xe[$e++]=ie>>12|224,xe[$e++]=ie>>6&63|128,xe[$e++]=63&ie|128)}return xe},Ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Ne,xe){if(!Array.isArray(Ne))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $e=xe?this.byteToCharMapWebSafe_:this.byteToCharMap_,De=[];for(let ie=0;ie<Ne.length;ie+=3){const we=Ne[ie],ut=ie+1<Ne.length,Bt=ut?Ne[ie+1]:0,gn=ie+2<Ne.length,hn=gn?Ne[ie+2]:0;let W=(15&Bt)<<2|hn>>6,te=63&hn;gn||(te=64,ut||(W=64)),De.push($e[we>>2],$e[(3&we)<<4|Bt>>4],$e[W],$e[te])}return De.join("")},encodeString(Ne,xe){return this.HAS_NATIVE_SUPPORT&&!xe?btoa(Ne):this.encodeByteArray(d(Ne),xe)},decodeString(Ne,xe){return this.HAS_NATIVE_SUPPORT&&!xe?atob(Ne):function(Ne){const xe=[];let $e=0,De=0;for(;$e<Ne.length;){const ie=Ne[$e++];if(ie<128)xe[De++]=String.fromCharCode(ie);else if(ie>191&&ie<224){const we=Ne[$e++];xe[De++]=String.fromCharCode((31&ie)<<6|63&we)}else if(ie>239&&ie<365){const gn=((7&ie)<<18|(63&Ne[$e++])<<12|(63&Ne[$e++])<<6|63&Ne[$e++])-65536;xe[De++]=String.fromCharCode(55296+(gn>>10)),xe[De++]=String.fromCharCode(56320+(1023&gn))}else{const we=Ne[$e++],ut=Ne[$e++];xe[De++]=String.fromCharCode((15&ie)<<12|(63&we)<<6|63&ut)}}return xe.join("")}(this.decodeStringToByteArray(Ne,xe))},decodeStringToByteArray(Ne,xe){this.init_();const $e=xe?this.charToByteMapWebSafe_:this.charToByteMap_,De=[];for(let ie=0;ie<Ne.length;){const we=$e[Ne.charAt(ie++)],Bt=ie<Ne.length?$e[Ne.charAt(ie)]:0;++ie;const hn=ie<Ne.length?$e[Ne.charAt(ie)]:64;++ie;const Y=ie<Ne.length?$e[Ne.charAt(ie)]:64;if(++ie,null==we||null==Bt||null==hn||null==Y)throw Error();De.push(we<<2|Bt>>4),64!==hn&&(De.push(Bt<<4&240|hn>>2),64!==Y&&De.push(hn<<6&192|Y))}return De},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Ne=0;Ne<this.ENCODED_VALS.length;Ne++)this.byteToCharMap_[Ne]=this.ENCODED_VALS.charAt(Ne),this.charToByteMap_[this.byteToCharMap_[Ne]]=Ne,this.byteToCharMapWebSafe_[Ne]=this.ENCODED_VALS_WEBSAFE.charAt(Ne),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Ne]]=Ne,Ne>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Ne)]=Ne,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Ne)]=Ne)}}},fe=function(Ne){return function(Ne){const xe=d(Ne);return Ae.encodeByteArray(xe,!0)}(Ne).replace(/\./g,"")},Fe=function(Ne){try{return Ae.decodeString(Ne,!0)}catch(xe){console.error("base64Decode failed: ",xe)}return null};function be(Ne,xe){if(!(xe instanceof Object))return xe;switch(xe.constructor){case Date:return new Date(xe.getTime());case Object:void 0===Ne&&(Ne={});break;case Array:Ne=[];break;default:return xe}for(const $e in xe)!xe.hasOwnProperty($e)||!Pe($e)||(Ne[$e]=be(Ne[$e],xe[$e]));return Ne}function Pe(Ne){return"__proto__"!==Ne}function st(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function mt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(st())}function He(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Tt(){return"object"==typeof self&&self.self===self}function gt(){const Ne="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Ne&&void 0!==Ne.id}function ft(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Gt(){const Ne=st();return Ne.indexOf("MSIE ")>=0||Ne.indexOf("Trident/")>=0}function rt(){return!He()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pt(){return"object"==typeof indexedDB}function qe(){return new Promise((Ne,xe)=>{try{let $e=!0;const De="validate-browser-context-for-indexeddb-analytics-module",ie=self.indexedDB.open(De);ie.onsuccess=()=>{ie.result.close(),$e||self.indexedDB.deleteDatabase(De),Ne(!0)},ie.onupgradeneeded=()=>{$e=!1},ie.onerror=()=>{var we;xe((null===(we=ie.error)||void 0===we?void 0:we.message)||"")}}catch($e){xe($e)}})}function it(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const dt=()=>{try{return function ct(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Ne=process.env.__FIREBASE_DEFAULTS__;return Ne?JSON.parse(Ne):void 0})()||(()=>{if(typeof document>"u")return;let Ne;try{Ne=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const xe=Ne&&Fe(Ne[1]);return xe&&JSON.parse(xe)})()}catch(Ne){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Ne}`)}},Lt=Ne=>{var xe,$e;return null===($e=null===(xe=dt())||void 0===xe?void 0:xe.emulatorHosts)||void 0===$e?void 0:$e[Ne]},Qt=()=>{var Ne;return null===(Ne=dt())||void 0===Ne?void 0:Ne.config},Mn=Ne=>{var xe;return null===(xe=dt())||void 0===xe?void 0:xe[`_${Ne}`]};class cn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((xe,$e)=>{this.resolve=xe,this.reject=$e})}wrapCallback(xe){return($e,De)=>{$e?this.reject($e):this.resolve(De),"function"==typeof xe&&(this.promise.catch(()=>{}),1===xe.length?xe($e):xe($e,De))}}}function Rt(Ne,xe){if(Ne.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const De=xe||"demo-project",ie=Ne.iat||0,we=Ne.sub||Ne.user_id;if(!we)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ut=Object.assign({iss:`https://securetoken.google.com/${De}`,aud:De,iat:ie,exp:ie+3600,auth_time:ie,sub:we,user_id:we,firebase:{sign_in_provider:"custom",identities:{}}},Ne);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(ut)),""].join(".")}class Zn extends Error{constructor(xe,$e,De){super($e),this.code=xe,this.customData=De,this.name="FirebaseError",Object.setPrototypeOf(this,Zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nn.prototype.create)}}class Nn{constructor(xe,$e,De){this.service=xe,this.serviceName=$e,this.errors=De}create(xe,...$e){const De=$e[0]||{},ie=`${this.service}/${xe}`,we=this.errors[xe],ut=we?function In(Ne,xe){return Ne.replace(Wt,($e,De)=>{const ie=xe[De];return null!=ie?String(ie):`<${De}?>`})}(we,De):"Error";return new Zn(ie,`${this.serviceName}: ${ut} (${ie}).`,De)}}const Wt=/\{\$([^}]+)}/g;function Cr(Ne,xe){return Object.prototype.hasOwnProperty.call(Ne,xe)}function Rr(Ne){for(const xe in Ne)if(Object.prototype.hasOwnProperty.call(Ne,xe))return!1;return!0}function Ht(Ne,xe){if(Ne===xe)return!0;const $e=Object.keys(Ne),De=Object.keys(xe);for(const ie of $e){if(!De.includes(ie))return!1;const we=Ne[ie],ut=xe[ie];if(cr(we)&&cr(ut)){if(!Ht(we,ut))return!1}else if(we!==ut)return!1}for(const ie of De)if(!$e.includes(ie))return!1;return!0}function cr(Ne){return null!==Ne&&"object"==typeof Ne}function nr(Ne){const xe=[];for(const[$e,De]of Object.entries(Ne))Array.isArray(De)?De.forEach(ie=>{xe.push(encodeURIComponent($e)+"="+encodeURIComponent(ie))}):xe.push(encodeURIComponent($e)+"="+encodeURIComponent(De));return xe.length?"&"+xe.join("&"):""}function Nr(Ne){const xe={};return Ne.replace(/^\?/,"").split("&").forEach(De=>{if(De){const[ie,we]=De.split("=");xe[decodeURIComponent(ie)]=decodeURIComponent(we)}}),xe}function _i(Ne){const xe=Ne.indexOf("?");if(!xe)return"";const $e=Ne.indexOf("#",xe);return Ne.substring(xe,$e>0?$e:void 0)}function _r(Ne,xe){const $e=new fr(Ne,xe);return $e.subscribe.bind($e)}class fr{constructor(xe,$e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$e,this.task.then(()=>{xe(this)}).catch(De=>{this.error(De)})}next(xe){this.forEachObserver($e=>{$e.next(xe)})}error(xe){this.forEachObserver($e=>{$e.error(xe)}),this.close(xe)}complete(){this.forEachObserver(xe=>{xe.complete()}),this.close()}subscribe(xe,$e,De){let ie;if(void 0===xe&&void 0===$e&&void 0===De)throw new Error("Missing Observer.");ie=function Tn(Ne,xe){if("object"!=typeof Ne||null===Ne)return!1;for(const $e of xe)if($e in Ne&&"function"==typeof Ne[$e])return!0;return!1}(xe,["next","error","complete"])?xe:{next:xe,error:$e,complete:De},void 0===ie.next&&(ie.next=On),void 0===ie.error&&(ie.error=On),void 0===ie.complete&&(ie.complete=On);const we=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ie.error(this.finalError):ie.complete()}catch{}}),this.observers.push(ie),we}unsubscribeOne(xe){void 0===this.observers||void 0===this.observers[xe]||(delete this.observers[xe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(xe){if(!this.finalized)for(let $e=0;$e<this.observers.length;$e++)this.sendOne($e,xe)}sendOne(xe,$e){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[xe])try{$e(this.observers[xe])}catch(De){typeof console<"u"&&console.error&&console.error(De)}})}close(xe){this.finalized||(this.finalized=!0,void 0!==xe&&(this.finalError=xe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function On(){}function ge(Ne,xe=1e3,$e=2){const De=xe*Math.pow($e,Ne),ie=Math.round(.5*De*(Math.random()-.5)*2);return Math.min(144e5,De+ie)}function ln(Ne){return Ne&&Ne._delegate?Ne._delegate:Ne}},1825:(Jt,Qe,k)=>{k.d(Qe,{e:()=>Pe});var h=k(8247),Ae=(k(2090),k(9681),k(1877),k(4859),k(5577)),_e=k(9646),fe=k(515),Fe=k(4650),pe=k(2861),be=k(1205);let Pe=(()=>{class st{constructor(He,Tt){this.emitService=He,this.afAuth=Tt,this.isAdminUid=!1,this.userData=null,this.userDataId="",this.authState()}authAdminUid(){return this.afAuth.authState.pipe((0,Ae.z)(He=>He&&He.uid&&"WQbaNd6UecNyeqtnjV0WXguenSi2"==He.uid?(0,_e.of)(!0):fe.E))}authUserUid(){return this.afAuth.authState.pipe((0,Ae.z)(He=>He&&He.uid?(0,_e.of)(!0):fe.E))}authState(){this.subscr2||(this.subscr2=this.authAdminUid().subscribe(He=>this.isAdminUid=He)),this.subscr||(this.subscr=this.afAuth.authState.subscribe(He=>{He?(this.userData=He,this.userDataId=He.uid,localStorage.setItem("user",JSON.stringify(this.userData))):(this.userData=null,this.userDataId="",localStorage.setItem("user","null")),this.emitService.emitAuthState(this.userDataId)}))}get isAdmin(){return this.isLoggedIn&&this.isAdminUid}get isLoggedIn(){const He=this.userData;return JSON.parse(localStorage.getItem("user")),null!==He&&He?.emailVerified}updateEmail(He,Tt){(0,h.ag)((0,h.n)().currentUser,He).then(()=>{this.afAuth.signOut().then(()=>{this.afAuth.signInWithEmailAndPassword(He,Tt).then(gt=>{this.SendVerificationMail(),this.authState()})}),this.emitService.emitUpdateEmail("success")}).catch(gt=>{this.emitService.emitUpdateEmail(gt.code)})}updatePassword(He){(0,h.ah)((0,h.n)().currentUser,He).then(()=>{this.emitService.emitUpdatePassword("success")}).catch(Tt=>{this.emitService.emitUpdatePassword(Tt.code)})}signIn(He,Tt){this.afAuth.signInWithEmailAndPassword(He,Tt).then(()=>{this.authState(),this.emitService.emitSignInCode("success")}).catch(gt=>{this.emitService.emitSignInCode(gt.code)})}sendResetPasswordEmail(He){this.afAuth.sendPasswordResetEmail(He).then(()=>{this.emitService.emitSendResetPasswordEmail("success")}).catch(Tt=>{this.emitService.emitSendResetPasswordEmail(Tt.code)})}SendVerificationMail(){this.afAuth.currentUser.then(He=>He.sendEmailVerification()).then(()=>{})}signOut(){this.isAdminUid=!1,this.afAuth.signOut().then(()=>{})}createUser(He,Tt,gt){this.afAuth.createUserWithEmailAndPassword(Tt,gt).then(ft=>{ft.user&&(this.SendVerificationMail(),(0,h.af)((0,h.n)().currentUser,{displayName:He}).then(()=>{})),this.emitService.emitCreateUser("success")}).catch(ft=>{this.emitService.emitCreateUser(ft.code)})}ngOnDestroy(){this.subscr&&this.subscr.unsubscribe(),this.subscr2&&this.subscr2.unsubscribe()}}return st.\u0275fac=function(He){return new(He||st)(Fe.LFG(pe.A),Fe.LFG(be.zQ))},st.\u0275prov=Fe.Yz7({token:st,factory:st.\u0275fac,providedIn:"root"}),st})()},8932:(Jt,Qe,k)=>{k.d(Qe,{k:()=>d});var h=k(8996),c=k(4650),S=k(6185);let d=(()=>{class de{constructor(_e){this.afs=_e,this.userDataCollection=_e.collection("users"),this.orderCollection=_e.collection("orders"),this.BooksOrderedCollection=_e.collection("books")}getUserOrderBooks(_e,fe){return this.afs.doc(`users/${_e}`).collection("orders").doc(`${fe}`).collection("books").valueChanges({idField:"bookId"})}getOrdersNumber(){return this.afs.doc("ordersnumber/0").valueChanges()}updateOrdersNumber(_e){return(0,h.D)(this.afs.doc("ordersnumber/0").update({lastNumber:_e}))}getUserOrderData(_e,fe){return this.afs.doc(`users/${_e}/orders/${fe}`).valueChanges()}getUserOrders(_e){return this.afs.doc(`users/${_e}`).collection("orders").valueChanges({idField:"orderId"})}getBooksOrdered(){return this.BooksOrderedCollection.valueChanges({idField:"bookId"})}setBooksOrdered(_e){return(0,h.D)(this.afs.doc(`books/${_e.bookId}`).set(Object.assign({},_e)))}getOrders(){return this.orderCollection.valueChanges({idField:"orderId"})}getOrderData(_e){return this.afs.doc(`orders/${_e}`).valueChanges()}setOrder(_e){return(0,h.D)(this.afs.doc(`orders/${_e.orderId}`).set(Object.assign({},_e)))}deleteBooksOrdered(_e){return(0,h.D)(this.afs.doc(`books/${_e}`).delete())}deleteOrderReturned(_e){return(0,h.D)(this.afs.doc(`orders/${_e}`).delete())}updateBooksOrderedReturned(_e,fe){return(0,h.D)(this.afs.doc(`books/${_e}`).update({returned:!0,returneDate:fe}))}updateBooksOrderedReceived(_e,fe){return(0,h.D)(this.afs.doc(`books/${_e}`).update({received:!0,receiveDate:fe}))}updateOrderSentEmail(_e,fe){return(0,h.D)(this.afs.doc(`orders/${_e}`).update({sentEmail:!0,sentEmailDate:fe}))}updateOrderReceived(_e,fe){return(0,h.D)(this.afs.doc(`orders/${_e}`).update({received:!0,receiveDate:fe}))}updateOrderReturned(_e,fe){return(0,h.D)(this.afs.doc(`orders/${_e}`).update({returned:!0,returneDate:fe}))}updateUserOrderReturned(_e,fe,Fe){return(0,h.D)(this.afs.doc(`users/${_e}`).collection("orders").doc(`${fe}`).update({returned:!0,returneDate:Fe}))}updateUserOrderReceived(_e,fe,Fe){return(0,h.D)(this.afs.doc(`users/${_e}`).collection("orders").doc(`${fe}`).update({received:!0,receiveDate:Fe}))}updateUserOrderSentEmail(_e,fe,Fe){return(0,h.D)(this.afs.doc(`users/${_e}`).collection("orders").doc(`${fe}`).update({sentEmail:!0,sentEmailDate:Fe}))}setOrderBooks(_e,fe){return(0,h.D)(this.afs.doc(`orders/${_e}`).collection("books").doc(`${fe.bookId}`).set(Object.assign({},fe)))}setUserData(_e){return(0,h.D)(this.afs.doc(`users/${_e.userId}`).set(Object.assign({},_e)))}updateUserBlocked(_e,fe){return(0,h.D)(this.afs.doc(`users/${_e}`).update({userBlocked:fe}))}getUserData(_e){return this.afs.doc(`users/${_e}`).valueChanges()}getUsersDatas(){return this.userDataCollection.valueChanges({idField:"userId"})}setUserOrderBooks(_e){return(0,h.D)(this.afs.doc(`users/${_e.userId}`).collection("orders").doc(`${_e.orderId}`).collection("books").doc(`${_e.bookId}`).set(Object.assign({},_e)))}setUserOrderData(_e){return(0,h.D)(this.afs.doc(`users/${_e.userId}`).collection("orders").doc(`${_e.orderId}`).set(Object.assign({},_e)))}setUserBooksData(_e,fe){return(0,h.D)(this.afs.doc(`users/${_e}`).collection("books").doc(`${fe.bookId}`).set(Object.assign({},fe)))}updateUserBooksDataAllowed(_e,fe,Fe){return(0,h.D)(this.afs.doc(`users/${_e}`).collection("books").doc(`${fe}`).update({allowed:Fe}))}updateUserBooksDataReserved(_e,fe,Fe){return(0,h.D)(this.afs.doc(`users/${_e}`).collection("books").doc(`${fe}`).update({reserved:!Fe}))}updateUserBooksDataOrdered(_e,fe,Fe,pe){return(0,h.D)(this.afs.doc(`users/${_e}`).collection("books").doc(`${fe}`).update({ordered:Fe,orderDate:pe}))}getUserBooksData(_e,fe){return this.afs.doc(`users/${_e}/books/${fe}`).valueChanges()}getUserBooksDatas(_e){return this.afs.doc(`users/${_e}`).collection("books").valueChanges({idField:"bookId"})}}return de.\u0275fac=function(_e){return new(_e||de)(c.LFG(S.ST))},de.\u0275prov=c.Yz7({token:de,factory:de.\u0275fac,providedIn:"root"}),de})()},2861:(Jt,Qe,k)=>{k.d(Qe,{A:()=>c});var h=k(4650);let c=(()=>{class S{constructor(){this.data=new h.vpe(!0),this.error=new h.vpe(!0),this.signIn=new h.vpe(!0),this.createUser=new h.vpe(!0),this.sendSignInEmail=new h.vpe(!0),this.signOut=new h.vpe(!0),this.sendCodeEmail=new h.vpe(!0),this.sendResetPasswordEmail=new h.vpe(!0),this.updatePassword=new h.vpe(!0),this.updateEmail=new h.vpe(!0),this.showButtonMakeOrder=new h.vpe(!0),this.authState=new h.vpe(!0),this.adminUserDetail=new h.vpe(!0),this.bookshelfCurrentOffset=new h.vpe(!0),this.bookshelfCurrentPage=new h.vpe(!0),this.bookshelfTotalPages=new h.vpe(!0),this.bookshelfTotalDataLength=new h.vpe(!0),this.linkBack=null,this.linkBackUsers=null,this.errorMessage="Please, close this message.",this.errorMessColor="",this.index=-1}emitShowButtonMakeOrder(de){this.showButtonMakeOrder.emit(de)}getShowButtonMakeOrder(){return this.showButtonMakeOrder}emitBookshelfCurrentOffset(de){this.bookshelfCurrentOffset.emit(de)}getBookshelfCurrentOffset(){return this.bookshelfCurrentOffset}emitBookshelfCurrentPage(de){this.bookshelfCurrentPage.emit(de)}getBookshelfCurrentPage(){return this.bookshelfCurrentPage}emitBookshelfTotalPages(de){this.bookshelfTotalPages.emit(de)}getBookshelfTotalPages(){return this.bookshelfTotalPages}emitBookshelfTotalDataLength(de){this.bookshelfTotalDataLength.emit(de)}getBookshelfTotalDataLength(){return this.bookshelfTotalDataLength}getErrorMessColor(){return this.errorMessColor}saveErrorMessColor(de){this.errorMessColor=de}saveLinkBackUsers(de){this.linkBackUsers=de}getLinkBackUsers(){return this.linkBackUsers}saveLinkBack(de){this.linkBack=de}getLinkBack(){return this.linkBack}saveErrorMessage(de){this.errorMessage=de}getErrorMessage(){return this.errorMessage}saveIndex(de){this.index=de}getIndex(){return this.index}saveOrderId(de){this.orderId=de}getOrderId(){return this.orderId}saveUserId(de){this.userId=de}getUserId(){return this.userId}emitAdminUserDetail(de){this.adminUserDetail.emit(de)}getAdminUserDetail(){return this.adminUserDetail}emitAuthState(de){this.authState.emit(de)}getAuthState(){return this.authState}emitUpdateEmail(de){this.updateEmail.emit(de)}getUpdateEmail(){return this.updateEmail}emitUpdatePassword(de){this.updatePassword.emit(de)}getUpdatePassword(){return this.updatePassword}emitSendResetPasswordEmail(de){this.sendResetPasswordEmail.emit(de)}getSendResetPasswordEmail(){return this.sendResetPasswordEmail}emitSendCodeEmail(de){this.signIn.emit(de)}getSendCodeEmail(){return this.signIn}emitSignInCode(de){this.signIn.emit(de)}getSignInCode(){return this.signIn}emitSendSignInEmail(de){this.sendSignInEmail.emit(de)}getSendSignInEmail(){return this.sendSignInEmail}emitCreateUser(de){this.createUser.emit(de)}getCreateUser(){return this.createUser}emitEvent(de){this.data.emit(de)}getEmitter(){return this.data}emitError(de){this.error.emit(de)}getError(){return this.error}saveData(de,Ae,_e,fe){this.selectedPage=de,this.totalPages=Ae,this.offset=_e,this.totalDataLength=fe}saveUserBookedBooksData(de){this.selectedUserBookedBooksPage=de}getUserBookedBooksSelectedPage(){return this.selectedUserBookedBooksPage}saveUserBooksData(de){this.selectedUserBooksPage=de}getUserBooksSelectedPage(){return this.selectedUserBooksPage}getSelectedPage(){return this.selectedPage}getTotalPages(){return this.totalPages}getOffset(){return this.offset}getTotalDataLength(){return this.totalDataLength}}return S.\u0275fac=function(de){return new(de||S)},S.\u0275prov=h.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})()},4466:(Jt,Qe,k)=>{k.d(Qe,{m:()=>de});var h=k(6895),c=k(5916),S=k(9101),d=k(4650);let de=(()=>{class Ae{}return Ae.\u0275fac=function(fe){return new(fe||Ae)},Ae.\u0275mod=d.oAB({type:Ae}),Ae.\u0275inj=d.cJS({imports:[h.ez,c.Is,S.ot]}),Ae})()},3370:(Jt,Qe,k)=>{k.d(Qe,{A:()=>c});var h=k(4650);let c=(()=>{class S{transform(de,Ae,_e){const fe=document.documentElement.clientWidth;switch(_e){default:case"title":return de.length>25?de.slice(0,22)+"\u2026":de;case"text":return de.length>Ae&&fe<=1600?de.slice(0,Ae)+"\u2026":de}}}return S.\u0275fac=function(de){return new(de||S)},S.\u0275pipe=h.Yjl({name:"shrinkText",type:S,pure:!0}),S})()},1799:(Jt,Qe,k)=>{k.d(Qe,{T:()=>h});class h{constructor(S,d,de,Ae,_e,fe,Fe,pe,be,Pe,st){this.userId=S,this.userLogin=d,this.userNickname=de,this.userName=Ae,this.userEmail=_e,this.userBirthDate=fe,this.userZipCode=Fe,this.userCountry=pe,this.userCity=be,this.userAddress=Pe,this.userBlocked=st}}},8076:(Jt,Qe,k)=>{k.d(Qe,{o:()=>h});class h{constructor(S,d,de,Ae,_e,fe,Fe,pe,be,Pe,st,mt,He,Tt,gt){this.orderId=S,this.userId=d,this.userName=de,this.userEmail=Ae,this.userZipCode=_e,this.userCountry=fe,this.userCity=Fe,this.userAddress=pe,this.sentEmail=be,this.sentEmailDate=Pe,this.orderDate=st,this.received=mt,this.receiveDate=He,this.returned=Tt,this.returneDate=gt}}},244:(Jt,Qe,k)=>{k.r(Qe),k.d(Qe,{UsercabinetModule:()=>Tr});var h=k(6895),c=k(433),S=k(7887),d=k(4650),de=k(6451),Ae=k(2861),_e=k(1825),fe=k(8932);function Fe(Ie,At){if(1&Ie&&(d.TgZ(0,"div",24)(1,"button",25),d._uU(2," Make an Order "),d.qZA()()),2&Ie){const oe=d.oxw();d.xp6(1),d.Q6J("disabled",oe.desabledMakeOrder)}}function pe(Ie,At){if(1&Ie&&(d.TgZ(0,"span",26),d._uU(1),d.qZA()),2&Ie){const oe=d.oxw();d.xp6(1),d.Oqu(oe.showTextBlock)}}function be(Ie,At){if(1&Ie&&(d.TgZ(0,"span",0),d._uU(1,"OK"),d.qZA()),2&Ie){const oe=d.oxw();d.Q6J("ngClass","text-success fw-bold "+oe.getClasses("span"))}}let Pe=(()=>{class Ie{constructor(oe,ke,yt){this.emitService=oe,this.authService=ke,this.dbService=yt,this.textBlock="",this.showButtonMakeOrder=!1,this.desabledMakeOrder=!0,this.allowedNumber=0,this.orderedNumber="0",this.reservedNumber="0",this.viewedNumber="0",this.reservedNumNumber=0,this.userBlocked=!0,this.orders=[],this.books=[],this.authService.userDataId&&this.getUserBooksOrders(this.authService.userDataId),this.authService.authState(),this.subscr=this.emitService.getAuthState().subscribe(Zt=>{this.getUserBooksOrders(Zt)}),this.getShowButtonMakeOrder()}getClasses(oe){const ke=document.documentElement.clientWidth;let yt="",Zt="";switch(oe){default:case"div":yt="nav-fixed",Zt="nav-fixed-small";break;case"span":yt="",Zt=ke<1280?"ms-3":"";break;case"user":yt="col-3",ke<1360&&(Zt="col-2");break;case"but":yt="col-2",Zt="col-1 mt-4";break;case"userblock":yt="col-4",Zt="col-4 m-0 p-0 mt-2"}return ke<1600?Zt:yt}shrinkText(oe,ke){return document.documentElement.clientWidth<1360&&oe.length>ke?oe.slice(0,ke)+"\u2026":oe}getShowButtonMakeOrder(){this.subscr4=this.emitService.getShowButtonMakeOrder().subscribe(oe=>{this.showButtonMakeOrder="booked"==oe})}getUserBooksOrders(oe){this.subscr2||(this.subscr2=(0,de.T)(this.dbService.getUserBooksDatas(oe),this.dbService.getUserOrders(oe),this.dbService.getUserData(oe)).subscribe(ke=>{if(ke instanceof Array)ke.length&&"bookId"in ke[0]&&(this.books=ke,this.allowedNumber=this.books.filter(yt=>yt.allowed&&yt.reserved).length,this.reservedNumber=String(this.books.filter(yt=>yt.reserved).length),this.viewedNumber=String(this.books.length),this.orderedNumber=String(this.books.filter(yt=>yt.ordered).length),this.isDesabledMakeOrder()),ke.length&&"orderId"in ke[0]&&(this.orders=ke,this.isDesabledMakeOrder());else{const yt=ke;yt&&(this.userBlocked=yt.userBlocked,this.isDesabledMakeOrder())}}))}isDesabledMakeOrder(){this.desabledMakeOrder=this.orders&&this.orders.length?!(this.allowedNumber>0&&0==this.orders.filter(oe=>!oe.returned).length&&!this.userBlocked):!(this.allowedNumber>0&&!this.userBlocked)}get showTextBlock(){const oe=document.documentElement.clientWidth;return oe<1900&&oe>=1600?"block":"BLOCK"}get userName(){return this.shrinkText(this.authService.userData?.displayName,5)}ngOnInit(){}ngOnDestroy(){this.subscr&&this.subscr.unsubscribe(),this.subscr2&&this.subscr2.unsubscribe(),this.subscr3&&this.subscr3.unsubscribe(),this.subscr4&&this.subscr4.unsubscribe(),this.subscr5&&this.subscr5.unsubscribe()}}return Ie.\u0275fac=function(oe){return new(oe||Ie)(d.Y36(Ae.A),d.Y36(_e.e),d.Y36(fe.k))},Ie.\u0275cmp=d.Xpm({type:Ie,selectors:[["app-user-cabinet-nav"]],decls:67,vars:14,consts:[[3,"ngClass"],[1,"table","m-0"],[1,"bg-light"],[1,"col-4","m-2"],[1,"nav"],["routerLink","/usercabinet/user-cabinet-viewed","routerLinkActive","active"],["routerLink","/usercabinet/user-cabinet-booked","routerLinkActive","active"],["routerLink","/usercabinet/user-orders","routerLinkActive","active"],["routerLink","/usercabinet/user-cabinet-personaldata","routerLinkActive","active"],["routerLink","/usercabinet/user-cabinet-change-email","routerLinkActive","active"],["routerLink","/usercabinet/user-cabinet-change-password","routerLinkActive","active"],[1,"col-1","caption","m-0","p-0"],["class","mt-1 ms-2 p-0",4,"ngIf"],[1,"table","table-borderless"],[1,"mt-2"],[1,"ms-1"],[1,"text-primary","fw-bold"],[1,"col-2","m-0","p-0"],[1,"ms-0"],["class","text-danger fw-bold",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"col-1"],[1,"mt-1"],["type","button","routerLink","/bookshelf",1,"btn","btn-danger","btn-sm","mx-1"],[1,"mt-1","ms-2","p-0"],["type","button","routerLink","/usercabinet/user-order",1,"btn","btn-success","btn-sm",3,"disabled"],[1,"text-danger","fw-bold"]],template:function(oe,ke){1&oe&&(d.TgZ(0,"div",0)(1,"table",1)(2,"tbody")(3,"tr",2)(4,"td",3)(5,"ul",4)(6,"li")(7,"a",5),d._uU(8,"Viewed"),d.qZA()(),d.TgZ(9,"li")(10,"a",6),d._uU(11,"Booked"),d.qZA()(),d.TgZ(12,"li")(13,"a",7),d._uU(14,"Orders"),d.qZA()(),d.TgZ(15,"li")(16,"a",8),d._uU(17,"Profile"),d.qZA()(),d.TgZ(18,"li")(19,"a",9),d._uU(20,"Change Email"),d.qZA()(),d.TgZ(21,"li")(22,"a",10),d._uU(23,"Change Password"),d.qZA()()()(),d.TgZ(24,"td",11)(25,"span"),d._uU(26,"BookShop"),d.qZA()(),d.TgZ(27,"td",0),d.YNc(28,Fe,3,1,"div",12),d.qZA(),d.TgZ(29,"td",0)(30,"table",13)(31,"tbody")(32,"tr")(33,"td",0)(34,"div",14)(35,"span",15),d._uU(36,"User: "),d.qZA(),d.TgZ(37,"span",16),d._uU(38),d.qZA()()(),d.TgZ(39,"td",17)(40,"div",14)(41,"span",18),d._uU(42,"Status: "),d.qZA(),d.YNc(43,pe,2,1,"span",19),d.YNc(44,be,2,1,"span",20),d.qZA()(),d.TgZ(45,"td",17)(46,"div",14)(47,"span",15),d._uU(48,"Viewed: "),d.qZA(),d.TgZ(49,"span",0),d._uU(50),d.qZA()()(),d.TgZ(51,"td",17)(52,"div",14)(53,"span",15),d._uU(54,"Booked: "),d.qZA(),d.TgZ(55,"span",0),d._uU(56),d.qZA()()(),d.TgZ(57,"td",17)(58,"div",14)(59,"span",15),d._uU(60,"Ordered: "),d.qZA(),d.TgZ(61,"span",0),d._uU(62),d.qZA()()()()()()(),d.TgZ(63,"td",21)(64,"div",22)(65,"button",23),d._uU(66," Exit Cabinet "),d.qZA()()()()()()()),2&oe&&(d.Q6J("ngClass",ke.getClasses("div")),d.xp6(27),d.Q6J("ngClass",ke.getClasses("but")),d.xp6(1),d.Q6J("ngIf",ke.showButtonMakeOrder),d.xp6(1),d.Q6J("ngClass",ke.getClasses("userblock")),d.xp6(4),d.Q6J("ngClass",ke.getClasses("user")+" m-0 p-0"),d.xp6(5),d.Oqu(ke.userName),d.xp6(5),d.Q6J("ngIf",ke.userBlocked),d.xp6(1),d.Q6J("ngIf",!ke.userBlocked),d.xp6(5),d.Q6J("ngClass",ke.getClasses("span")+" text-primary fw-bold"),d.xp6(1),d.Oqu(ke.viewedNumber),d.xp6(5),d.Q6J("ngClass",ke.getClasses("span")+" text-primary fw-bold"),d.xp6(1),d.Oqu(ke.reservedNumber),d.xp6(5),d.Q6J("ngClass",ke.getClasses("span")+" text-primary fw-bold"),d.xp6(1),d.Oqu(ke.orderedNumber))},dependencies:[h.mk,h.O5,S.rH,S.yS,S.Od],styles:["ul.nav[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}.nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left}ul.nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;text-decoration:none;padding:5px;margin:0 5px;text-align:center}ul.nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#00f}.active[_ngcontent-%COMP%]{border-radius:5px;background-color:#0d6efd;color:#f4f4f4}.nav-fixed[_ngcontent-%COMP%]{position:fixed;right:0;left:0;top:0;height:50px}.nav-fixed-small[_ngcontent-%COMP%]{position:fixed;right:0;left:0;top:0;height:100px}.caption[_ngcontent-%COMP%]{font-family:annabelle,cursive;font-weight:700;font-size:2em;color:#f3cd26;text-shadow:2px 2px 0 rgba(0,0,0,.3)}"]}),Ie})(),st=(()=>{class Ie{constructor(){}ngOnInit(){}}return Ie.\u0275fac=function(oe){return new(oe||Ie)},Ie.\u0275cmp=d.Xpm({type:Ie,selectors:[["app-usercabinet"]],decls:2,vars:0,template:function(oe,ke){1&oe&&d._UZ(0,"app-user-cabinet-nav")(1,"router-outlet")},dependencies:[S.lC,Pe]}),Ie})();var mt=k(9300),He=k(3370);function Tt(Ie,At){1&Ie&&(d.TgZ(0,"p",25)(1,"small"),d._uU(2,"Allowed"),d.qZA()())}function gt(Ie,At){1&Ie&&(d.TgZ(0,"p",26)(1,"small"),d._uU(2,"Not Allowed"),d.qZA()())}const ft=function(Ie,At,oe,ke,yt){return{isbn:Ie,imgsrc:At,title:oe,author:ke,key:yt}},Ye=function(Ie){return["/userbooked/bookdetail",Ie]};function Gt(Ie,At){if(1&Ie){const oe=d.EpF();d.TgZ(0,"div",8)(1,"a",9)(2,"table")(3,"tr",10)(4,"td",11),d._UZ(5,"img",12),d.qZA()(),d.TgZ(6,"tr",13)(7,"td",14)(8,"p",15)(9,"small"),d._uU(10),d.ALo(11,"shrinkText"),d.qZA()()()(),d.TgZ(12,"tr",13)(13,"td",16)(14,"p",17)(15,"small"),d._uU(16),d.ALo(17,"shrinkText"),d.qZA()()()(),d.TgZ(18,"tr",18)(19,"td",19),d.YNc(20,Tt,3,0,"p",20),d.YNc(21,gt,3,0,"p",21),d.qZA()()()(),d.TgZ(22,"div",22)(23,"div",23)(24,"button",24),d.NdJ("click",function(){const Zt=d.CHM(oe).$implicit,Xt=d.oxw();return d.KtG(Xt.deleteBook(Zt.bookId))}),d._uU(25,"Delete"),d.qZA()()()()}if(2&Ie){const oe=At.$implicit;d.xp6(1),d.Q6J("routerLink",d.VKq(20,Ye,d.qbA(14,ft,oe.bookId,oe.coverId,oe.title,oe.authorName,oe.key))),d.xp6(4),d.s9C("src",oe.coverId,d.LSH),d.xp6(5),d.Oqu(d.Dn7(11,6,oe.title,25,"title")),d.xp6(6),d.Oqu(d.Dn7(17,10,oe.authorName,25,"title")),d.xp6(4),d.Q6J("ngIf",oe.allowed),d.xp6(1),d.Q6J("ngIf",!oe.allowed)}}let Ge=(()=>{class Ie{constructor(oe,ke,yt,Zt){this.router=oe,this.emitService=ke,this.authService=yt,this.dbService=Zt,this.booksPerPage=22,this.nextDisabled=!1,this.prevDisabled=!1,this.userBooks=[],this.booksOrdered=[],this.userId="",this.subscr2=oe.events.pipe((0,mt.h)(Xt=>Xt instanceof S.OD)).subscribe(Xt=>{Xt.url.startsWith("/bookdetail")&&this.saveParams()}),this.authService.authState(),this.authService.userDataId&&this.getUserBooksOrders(this.authService.userDataId),this.subscr=this.emitService.getAuthState().subscribe(Xt=>{this.getUserBooksOrders(Xt)})}deleteBook(oe){this.subscr=this.dbService.updateUserBooksDataReserved(this.userId,oe,!0).subscribe()}getBooks(){const oe=(this.selectedPage-1)*this.booksPerPage;return this.userBooks.slice(oe,oe+this.booksPerPage)}changePage(oe){switch(oe){default:case"next":this.prevDisabled=!1,this.selectedPage==this.totalPages?this.nextDisabled=!0:this.selectedPage++;break;case"prev":this.nextDisabled=!1,1==this.selectedPage?this.prevDisabled=!0:this.selectedPage--}}saveParams(){this.emitService.saveUserBookedBooksData(this.selectedPage)}getParams(){const oe=this.emitService.getUserBookedBooksSelectedPage();this.selectedPage=typeof oe<"u"?oe:1}getFilteredBooks(oe){return oe.filter(ke=>ke.reserved)}getUserBooksOrders(oe){oe&&(this.emitService.emitShowButtonMakeOrder("booked"),this.userId=oe,this.subscr3=this.dbService.getUserBooksDatas(this.userId).subscribe(ke=>{const yt=this.getFilteredBooks(ke);this.totalPages=Math.ceil(yt.length/this.booksPerPage),this.userBooks=yt,this.isBooksAllowed()}))}isBooksAllowed(){this.subscr5||(this.subscr5=this.dbService.getBooksOrdered().subscribe(oe=>{this.userBooks.forEach((ke,yt)=>{this.userBooks[yt].allowed=!oe.map(Zt=>Zt.bookId).includes(ke.bookId),this.updateUserBooksAllowed(yt)}),this.subscr5.unsubscribe()}))}updateUserBooksAllowed(oe){this.subscr6=this.dbService.updateUserBooksDataAllowed(this.userId,this.userBooks[oe].bookId,this.userBooks[oe].allowed).subscribe()}getHeight(){const oe=document.documentElement.clientHeight;return{height:(document.documentElement.clientWidth<=1600?oe-85:oe-51).toString()+"px"}}getClasses(){return document.documentElement.clientWidth<=1600?"div-fixed-small":"div-fixed"}ngOnInit(){this.getParams()}ngOnDestroy(){this.saveParams(),this.emitService.emitShowButtonMakeOrder("end"),this.subscr&&this.subscr.unsubscribe(),this.subscr2&&this.subscr2.unsubscribe(),this.subscr3&&this.subscr3.unsubscribe(),this.subscr4&&this.subscr4.unsubscribe(),this.subscr5&&this.subscr5.unsubscribe(),this.subscr6&&this.subscr6.unsubscribe()}}return Ie.\u0275fac=function(oe){return new(oe||Ie)(d.Y36(S.F0),d.Y36(Ae.A),d.Y36(_e.e),d.Y36(fe.k))},Ie.\u0275cmp=d.Xpm({type:Ie,selectors:[["app-user-cabinet-booked"]],decls:13,vars:5,consts:[[3,"ngClass"],[1,"div-over",3,"ngStyle"],[1,"table","table-borderless","mt-0"],[1,"height-726"],[1,"col-1","v-a-m"],["type","button",1,"btn","btn-secondary","btn-lg",3,"disabled","click"],[1,"col-10"],["id","book","class","d-inline-block p-1 mx-1 mb-0 rounded-2 border border-2 bg-light",4,"ngFor","ngForOf"],["id","book",1,"d-inline-block","p-1","mx-1","mb-0","rounded-2","border","border-2","bg-light"],[3,"routerLink"],[1,"height-190"],[1,"bg-light","height-190","p-0"],["height","200","width","117",3,"src"],[1,"height-74"],[1,"bg-light","height-70","v-a-m"],[1,"p-0","m-0","text-center","fw-bold"],[1,"bg-light","v-a-m"],[1,"p-0","m-0","text-center"],[1,"height-30"],[1,"bg-light","height-15","v-a-m"],["class","p-0 m-0 text-center mb-1 p-0 text-success",4,"ngIf"],["class","p-0 m-0 text-center mb-1 p-0 text-danger",4,"ngIf"],[1,"height-30","m-0","p-0"],[1,"bg-light","d-flex","justify-content-center","height-30","v-a-m"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"p-0","m-0","text-center","mb-1","p-0","text-success"],[1,"p-0","m-0","text-center","mb-1","p-0","text-danger"]],template:function(oe,ke){1&oe&&(d.TgZ(0,"div",0)(1,"div",1)(2,"table",2)(3,"tbody")(4,"tr",3)(5,"td",4)(6,"button",5),d.NdJ("click",function(){return ke.changePage("prev")}),d._uU(7,"<<"),d.qZA()(),d.TgZ(8,"td",6),d.YNc(9,Gt,26,22,"div",7),d.qZA(),d.TgZ(10,"td",4)(11,"button",5),d.NdJ("click",function(){return ke.changePage("next")}),d._uU(12,">>"),d.qZA()()()()()()()),2&oe&&(d.Q6J("ngClass",ke.getClasses()+" bg-primary"),d.xp6(1),d.Q6J("ngStyle",ke.getHeight()),d.xp6(5),d.Q6J("disabled",ke.prevDisabled),d.xp6(3),d.Q6J("ngForOf",ke.getBooks()),d.xp6(2),d.Q6J("disabled",ke.nextDisabled))},dependencies:[h.mk,h.sg,h.O5,h.PC,S.yS,He.A],styles:["a[_ngcontent-%COMP%]{text-decoration:none;color:#000}#book[_ngcontent-%COMP%]{word-break:normal;overflow:hidden;height:430px;width:130px}.height-726[_ngcontent-%COMP%]{height:726px}.height-190[_ngcontent-%COMP%]{height:190px}.height-74[_ngcontent-%COMP%]{height:74px}.height-60[_ngcontent-%COMP%]{height:70px}.height-30[_ngcontent-%COMP%]{height:30px}.height-15[_ngcontent-%COMP%]{height:15px}.v-a-m[_ngcontent-%COMP%]{vertical-align:middle}.div-over[_ngcontent-%COMP%]{position:relative;overflow:auto}.div-fixed[_ngcontent-%COMP%]{position:fixed;top:51px;left:0;right:0;height:100%}.div-fixed-small[_ngcontent-%COMP%]{position:fixed;top:89px;left:0;right:0;height:100%}"]}),Ie})();const Me=function(Ie,At,oe,ke,yt){return{isbn:Ie,imgsrc:At,title:oe,author:ke,key:yt}},rt=function(Ie){return["/uservewed/bookdetail",Ie]};function Pt(Ie,At){if(1&Ie&&(d.TgZ(0,"div",8)(1,"a",9)(2,"table")(3,"tr",10)(4,"td",11),d._UZ(5,"img",12),d.qZA()(),d.TgZ(6,"tr",13)(7,"td",14)(8,"p",15)(9,"small"),d._uU(10),d.ALo(11,"shrinkText"),d.qZA()()()(),d.TgZ(12,"tr",13)(13,"td",14)(14,"p",16)(15,"small"),d._uU(16),d.ALo(17,"shrinkText"),d.qZA()()()()()()()),2&Ie){const oe=At.$implicit;d.xp6(1),d.Q6J("routerLink",d.VKq(18,rt,d.qbA(12,Me,oe.bookId,oe.coverId,oe.title,oe.authorName,oe.key))),d.xp6(4),d.s9C("src",oe.coverId,d.LSH),d.xp6(5),d.Oqu(d.Dn7(11,4,oe.title,25,"title")),d.xp6(6),d.Oqu(d.Dn7(17,8,oe.authorName,25,"title"))}}let qe=(()=>{class Ie{constructor(oe,ke,yt,Zt,Xt){this.router=ke,this.emitService=yt,this.dbService=Zt,this.authService=Xt,this.booksPerPage=22,this.nextDisabled=!1,this.prevDisabled=!1,this.userBooks=[],this.subscr=ke.events.pipe((0,mt.h)(dr=>dr instanceof S.OD)).subscribe(dr=>{dr.url.startsWith("/bookdetail")&&this.saveParams()}),this.authService.authState(),void 0!==typeof this.authService.userDataId&&this.getUserBooks(this.authService.userDataId),this.subscr=this.emitService.getAuthState().subscribe(dr=>{this.getUserBooks(dr)})}getBooks(){const oe=(this.selectedPage-1)*this.booksPerPage;return this.userBooks.slice(oe,oe+this.booksPerPage)}changePage(oe){switch(oe){default:case"next":this.prevDisabled=!1,this.selectedPage==this.totalPages?this.nextDisabled=!0:this.selectedPage++;break;case"prev":this.nextDisabled=!1,1==this.selectedPage?this.prevDisabled=!0:this.selectedPage--}}saveParams(){this.emitService.saveUserBooksData(this.selectedPage)}getParams(){const oe=this.emitService.getUserBooksSelectedPage();return typeof oe<"u"?(this.selectedPage=oe,!0):(this.selectedPage=1,!1)}getUserBooks(oe){oe&&(this.subscr2=this.dbService.getUserBooksDatas(oe).subscribe(ke=>{this.userBooks=ke,this.totalPages=Math.ceil(this.userBooks.length/this.booksPerPage)}))}getHeight(){const oe=document.documentElement.clientHeight;return{height:(document.documentElement.clientWidth<=1600?oe-85:oe-51).toString()+"px"}}getClasses(){return document.documentElement.clientWidth<=1600?"div-fixed-small":"div-fixed"}ngOnInit(){this.getParams()}ngOnDestroy(){this.saveParams(),this.subscr&&this.subscr.unsubscribe(),this.subscr2&&this.subscr2.unsubscribe(),this.subscr3&&this.subscr3.unsubscribe()}}return Ie.\u0275fac=function(oe){return new(oe||Ie)(d.Y36(S.gz),d.Y36(S.F0),d.Y36(Ae.A),d.Y36(fe.k),d.Y36(_e.e))},Ie.\u0275cmp=d.Xpm({type:Ie,selectors:[["app-user-cabinet-viewed"]],decls:13,vars:5,consts:[[3,"ngClass"],[1,"div-over",3,"ngStyle"],[1,"table","mt-1","table-borderless"],[1,"height-726"],[1,"col-1","v-a-m"],["type","button",1,"btn","btn-secondary","btn-lg",3,"disabled","click"],[1,"col-10"],["id","book","class","d-inline-block p-1 mx-1 rounded-2 border border-2 bg-light",4,"ngFor","ngForOf"],["id","book",1,"d-inline-block","p-1","mx-1","rounded-2","border","border-2","bg-light"],[3,"routerLink"],[1,"height-190"],[1,"bg-light","height-190","pb-3"],["height","200","width","117",3,"src"],[1,"height-74"],[1,"bg-light","height-74","v-a-m"],[1,"p-0","m-0","text-center","fw-bold"],[1,"p-0","m-0","text-center"]],template:function(oe,ke){1&oe&&(d.TgZ(0,"div",0)(1,"div",1)(2,"table",2)(3,"tbody")(4,"tr",3)(5,"td",4)(6,"button",5),d.NdJ("click",function(){return ke.changePage("prev")}),d._uU(7,"<<"),d.qZA()(),d.TgZ(8,"td",6),d.YNc(9,Pt,18,20,"div",7),d.qZA(),d.TgZ(10,"td",4)(11,"button",5),d.NdJ("click",function(){return ke.changePage("next")}),d._uU(12,">>"),d.qZA()()()()()()()),2&oe&&(d.Q6J("ngClass",ke.getClasses()+" bg-primary"),d.xp6(1),d.Q6J("ngStyle",ke.getHeight()),d.xp6(5),d.Q6J("disabled",ke.prevDisabled),d.xp6(3),d.Q6J("ngForOf",ke.getBooks()),d.xp6(2),d.Q6J("disabled",ke.nextDisabled))},dependencies:[h.mk,h.sg,h.PC,S.yS,He.A],styles:["a[_ngcontent-%COMP%]{text-decoration:none;color:#000}#book[_ngcontent-%COMP%]{word-break:normal;overflow:hidden;height:430px;width:130px}.height-726[_ngcontent-%COMP%]{height:726px}.height-190[_ngcontent-%COMP%]{height:190px}.height-74[_ngcontent-%COMP%]{height:74px}.v-a-m[_ngcontent-%COMP%]{vertical-align:middle}.div-over[_ngcontent-%COMP%]{position:relative;overflow:auto}.div-fixed[_ngcontent-%COMP%]{position:fixed;top:51px;right:0;left:0;height:100%}.div-fixed-small[_ngcontent-%COMP%]{position:fixed;top:85px;right:0;left:0;height:100%}"]}),Ie})();var it=k(1799),ct=k(2731);function We(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Value required"),d.qZA())}function je(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Only ['A-Z', 'a-z', '0-9', '-', ' '] available"),d.qZA())}function pt(Ie,At){if(1&Ie&&(d.TgZ(0,"ul",18),d.YNc(1,We,2,0,"li",19),d.YNc(2,je,2,0,"li",19),d.qZA()),2&Ie){d.oxw();const oe=d.MAs(6);d.xp6(1),d.Q6J("ngIf",null==oe.controls.userName.errors?null:oe.controls.userName.errors.required),d.xp6(1),d.Q6J("ngIf",null==oe.controls.userName.errors?null:oe.controls.userName.errors.pattern)}}function dt(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Value required"),d.qZA())}function Lt(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Do not match email specification"),d.qZA())}function $t(Ie,At){if(1&Ie&&(d.TgZ(0,"ul",18),d.YNc(1,dt,2,0,"li",19),d.YNc(2,Lt,2,0,"li",19),d.qZA()),2&Ie){d.oxw();const oe=d.MAs(6);d.xp6(1),d.Q6J("ngIf",null==oe.controls.userEmail.errors?null:oe.controls.userEmail.errors.required),d.xp6(1),d.Q6J("ngIf",null==oe.controls.userEmail.errors?null:oe.controls.userEmail.errors.pattern)}}function Qt(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Value required"),d.qZA())}function Mn(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Only ['0-9'] available"),d.qZA())}function cn(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Min length is 6 characters"),d.qZA())}function Rt(Ie,At){if(1&Ie&&(d.TgZ(0,"ul",18),d.YNc(1,Qt,2,0,"li",19),d.YNc(2,Mn,2,0,"li",19),d.YNc(3,cn,2,0,"li",19),d.qZA()),2&Ie){d.oxw();const oe=d.MAs(6);d.xp6(1),d.Q6J("ngIf",null==oe.controls.userZipCode.errors?null:oe.controls.userZipCode.errors.required),d.xp6(1),d.Q6J("ngIf",null==oe.controls.userZipCode.errors?null:oe.controls.userZipCode.errors.pattern),d.xp6(1),d.Q6J("ngIf",null==oe.controls.userZipCode.errors?null:oe.controls.userZipCode.errors.minlength)}}function Pn(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Value required"),d.qZA())}function Zn(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Only ['A-Z', 'a-z', '-', '()', ' '] available"),d.qZA())}function Nn(Ie,At){if(1&Ie&&(d.TgZ(0,"ul",18),d.YNc(1,Pn,2,0,"li",19),d.YNc(2,Zn,2,0,"li",19),d.qZA()),2&Ie){d.oxw();const oe=d.MAs(6);d.xp6(1),d.Q6J("ngIf",null==oe.controls.userCountry.errors?null:oe.controls.userCountry.errors.required),d.xp6(1),d.Q6J("ngIf",null==oe.controls.userCountry.errors?null:oe.controls.userCountry.errors.pattern)}}function In(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Value required"),d.qZA())}function Wt(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Only ['A-Z', 'a-z', '0-9', '-', ' '] available"),d.qZA())}function dn(Ie,At){if(1&Ie&&(d.TgZ(0,"ul",18),d.YNc(1,In,2,0,"li",19),d.YNc(2,Wt,2,0,"li",19),d.qZA()),2&Ie){d.oxw();const oe=d.MAs(6);d.xp6(1),d.Q6J("ngIf",null==oe.controls.userCity.errors?null:oe.controls.userCity.errors.required),d.xp6(1),d.Q6J("ngIf",null==oe.controls.userCity.errors?null:oe.controls.userCity.errors.pattern)}}function vr(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Value required"),d.qZA())}function Ar(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Only ['A-Z', 'a-z', '0-9', '-', ' ' . , /] available"),d.qZA())}function br(Ie,At){if(1&Ie&&(d.TgZ(0,"ul",18),d.YNc(1,vr,2,0,"li",19),d.YNc(2,Ar,2,0,"li",19),d.qZA()),2&Ie){d.oxw();const oe=d.MAs(6);d.xp6(1),d.Q6J("ngIf",null==oe.controls.userAddress.errors?null:oe.controls.userAddress.errors.required),d.xp6(1),d.Q6J("ngIf",null==oe.controls.userAddress.errors?null:oe.controls.userAddress.errors.pattern)}}let ir=(()=>{class Ie{constructor(oe,ke,yt,Zt){this.router=oe,this.emitService=ke,this.authService=yt,this.dbService=Zt,this.date=new Date("2000-01-01"),this.userProfile=new it.T("","","","","",new ct.EK(+this.date/1e3,0),"","","","",!1),this.userProfileOriginal=new it.T("","","","","",new ct.EK(+this.date/1e3,0),"","","","",!1),this.authService.authState(),void 0!==typeof this.authService.userDataId&&this.getUserData(this.authService.userDataId),this.subscr=this.emitService.getAuthState().subscribe(Xt=>{this.getUserData(Xt)})}getUserData(oe){if(oe){const ke=this.authService.userData;this.subscr2=this.dbService.getUserData(oe).subscribe(yt=>{yt.userId?(this.userProfile=yt,Object.assign(this.userProfileOriginal,this.userProfile)):(this.userProfile=new it.T(oe,ke.email,ke.displayName,ke.displayName,ke.email,new ct.EK(+this.date/1e3,0),"","","","",!1),this.userProfileOriginal=new it.T(oe,ke.email,ke.displayName,ke.displayName,ke.email,new ct.EK(+this.date/1e3,0),"","","","",!1)),this.userBirthDate=new Date(1e3*this.userProfile.userBirthDate.seconds).toISOString().substring(0,10)})}}submitForm(oe){oe.valid&&(this.userProfile.userBirthDate=new ct.EK(Date.parse(this.userBirthDate)/1e3,0),this.userProfileOriginal=this.userProfile,this.subscr=this.dbService.setUserData(this.userProfile).subscribe(ke=>{this.emitService.saveErrorMessage("Your Profile has been successfully saved."),this.router.navigate([{outlets:{popup:["message"]}}])}))}getStyle(){const oe=document.documentElement.clientWidth,ke=document.documentElement.clientHeight;return oe<=1600?{height:(ke-85).toString()+"px"}:{height:(ke-51).toString()+"px"}}getClasses(oe){const ke=document.documentElement.clientWidth;let yt="",Zt="";switch(oe){default:case"doc":yt="div-fixed",Zt="div-fixed-small";break;case"div":yt="div-body",Zt="div-body-small"}return ke<=1600?Zt:yt}resetForm(){}ngOnInit(){}ngOnDestroy(){this.subscr&&this.subscr.unsubscribe(),this.subscr2&&this.subscr2.unsubscribe()}}return Ie.\u0275fac=function(oe){return new(oe||Ie)(d.Y36(S.F0),d.Y36(Ae.A),d.Y36(_e.e),d.Y36(fe.k))},Ie.\u0275cmp=d.Xpm({type:Ie,selectors:[["app-user-cabinet-set-personaldata"]],decls:39,vars:17,consts:[[3,"ngClass","ngStyle"],[3,"ngClass"],[1,"border","rounded"],[1,"text-center","text-secondary","p-0","m-0"],["novalidate","",1,"m-3","mt-0",3,"ngSubmit"],["form","ngForm"],[1,"mt-2","mx-1","text-secondary"],["name","userName","required","","maxlength","10","pattern","^[A-Za-z0-9\\- ]+$",1,"form-control","form-control-sm","m-1",3,"ngModel","ngModelChange"],["class","text-danger p-0",4,"ngIf"],["name","userEmail","required","","pattern","[a-zA-Z0-9\\.\\-_]+@[a-z]+\\.[a-z]{2,3}",1,"form-control","form-control-sm","m-1",3,"ngModel","ngModelChange"],["type","date","name","userBirthDate","required","",1,"form-control","form-control-sm","m-1",3,"ngModel","ngModelChange"],["name","userZipCode","required","","minlength","6","maxlength","6","pattern","^[0-9]+$",1,"form-control","form-control-sm","m-1",3,"ngModel","ngModelChange"],["name","userCountry","required","","pattern","^[A-Za-z\\- \\(\\)]+$",1,"form-control","form-control-sm","m-1",3,"ngModel","ngModelChange"],["name","userCity","required","","pattern","^[A-Za-z0-9\\- ]+$",1,"form-control","form-control-sm","m-1",3,"ngModel","ngModelChange"],["name","userAddress","required","","pattern","^[A-Za-z0-9.,\\- \\/]+$",1,"form-control","form-control-sm","m-1",3,"ngModel","ngModelChange"],[1,"col-12","d-flex","justify-content-center","mt-4"],["type","submit",1,"btn","btn-success","btn-sm","me-2",3,"disabled"],["type","button","routerLink","/usercabinet",1,"btn","btn-secondary","btn-sm","me-2"],[1,"text-danger","p-0"],[4,"ngIf"]],template:function(oe,ke){if(1&oe){const yt=d.EpF();d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),d._uU(4,"Profile"),d.qZA(),d.TgZ(5,"form",4,5),d.NdJ("ngSubmit",function(){d.CHM(yt);const Xt=d.MAs(6);return d.KtG(ke.submitForm(Xt))}),d.TgZ(7,"label",6),d._uU(8,"Name"),d.qZA(),d.TgZ(9,"input",7),d.NdJ("ngModelChange",function(Xt){return ke.userProfile.userName=Xt}),d.qZA(),d.YNc(10,pt,3,2,"ul",8),d.TgZ(11,"label",6),d._uU(12,"Email"),d.qZA(),d.TgZ(13,"input",9),d.NdJ("ngModelChange",function(Xt){return ke.userProfile.userEmail=Xt}),d.qZA(),d.YNc(14,$t,3,2,"ul",8),d.TgZ(15,"label",6),d._uU(16,"BirthDate"),d.qZA(),d.TgZ(17,"input",10),d.NdJ("ngModelChange",function(Xt){return ke.userBirthDate=Xt}),d.qZA(),d.TgZ(18,"label",6),d._uU(19,"ZipCode"),d.qZA(),d.TgZ(20,"input",11),d.NdJ("ngModelChange",function(Xt){return ke.userProfile.userZipCode=Xt}),d.qZA(),d.YNc(21,Rt,4,3,"ul",8),d.TgZ(22,"label",6),d._uU(23,"Country"),d.qZA(),d.TgZ(24,"input",12),d.NdJ("ngModelChange",function(Xt){return ke.userProfile.userCountry=Xt}),d.qZA(),d.YNc(25,Nn,3,2,"ul",8),d.TgZ(26,"label",6),d._uU(27,"City"),d.qZA(),d.TgZ(28,"input",13),d.NdJ("ngModelChange",function(Xt){return ke.userProfile.userCity=Xt}),d.qZA(),d.YNc(29,dn,3,2,"ul",8),d.TgZ(30,"label",6),d._uU(31,"Address"),d.qZA(),d.TgZ(32,"input",14),d.NdJ("ngModelChange",function(Xt){return ke.userProfile.userAddress=Xt}),d.qZA(),d.YNc(33,br,3,2,"ul",8),d.TgZ(34,"div",15)(35,"button",16),d._uU(36," Submit "),d.qZA(),d.TgZ(37,"button",17),d._uU(38,"Cancel"),d.qZA()()()()()()}if(2&oe){const yt=d.MAs(6);d.Q6J("ngClass",ke.getClasses("doc")+" bg-primary")("ngStyle",ke.getStyle()),d.xp6(1),d.Q6J("ngClass",ke.getClasses("div")+" bg-white rounded"),d.xp6(8),d.Q6J("ngModel",ke.userProfile.userName),d.xp6(1),d.Q6J("ngIf",yt.controls.userName.dirty&&yt.controls.userName.invalid),d.xp6(3),d.Q6J("ngModel",ke.userProfile.userEmail),d.xp6(1),d.Q6J("ngIf",yt.controls.userEmail.dirty&&yt.controls.userEmail.invalid),d.xp6(3),d.Q6J("ngModel",ke.userBirthDate),d.xp6(3),d.Q6J("ngModel",ke.userProfile.userZipCode),d.xp6(1),d.Q6J("ngIf",yt.controls.userZipCode.dirty&&yt.controls.userZipCode.invalid),d.xp6(3),d.Q6J("ngModel",ke.userProfile.userCountry),d.xp6(1),d.Q6J("ngIf",yt.controls.userCountry.dirty&&yt.controls.userCountry.invalid),d.xp6(3),d.Q6J("ngModel",ke.userProfile.userCity),d.xp6(1),d.Q6J("ngIf",yt.controls.userCity.dirty&&yt.controls.userCity.invalid),d.xp6(3),d.Q6J("ngModel",ke.userProfile.userAddress),d.xp6(1),d.Q6J("ngIf",yt.controls.userAddress.dirty&&yt.controls.userAddress.invalid),d.xp6(2),d.Q6J("disabled",yt.invalid)}},dependencies:[h.mk,h.O5,h.PC,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.wO,c.nD,c.c5,c.On,c.F,S.rH],styles:["input.ng-dirty.ng-invalid[_ngcontent-%COMP%]{border:2px solid #ff0000}input.ng-dirty.ng-valid[_ngcontent-%COMP%]{border:2px solid #6bc502}.div-fixed-small[_ngcontent-%COMP%]{position:fixed;top:85px;right:0;left:0;height:100%;overflow:auto}.div-body[_ngcontent-%COMP%]{padding:20px;margin-top:24px;margin-left:680px;margin-right:680px}.div-body-small[_ngcontent-%COMP%]{padding:20px;margin-top:24px;margin-left:220px;margin-right:220px}.div-fixed[_ngcontent-%COMP%]{position:fixed;top:51px;right:0;left:0;height:100%}ul[_ngcontent-%COMP%]{list-style-type:none;font-size:small;margin:0;padding:0}li[_ngcontent-%COMP%]{display:inline;margin-right:16px}"]}),Ie})();var sr=k(3473);let Vn=(()=>{class Ie{validate(oe){return(0,sr.Q)(oe)}}return Ie.\u0275fac=function(oe){return new(oe||Ie)},Ie.\u0275dir=d.lG2({type:Ie,selectors:[["","appIdentityValidation",""]],features:[d._Bn([{provide:c.Cf,useExisting:Ie,multi:!0}])]}),Ie})();function Cr(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Value required"),d.qZA())}function yr(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Min length is 6 characters"),d.qZA())}function Rr(Ie,At){if(1&Ie&&(d.TgZ(0,"ul",14),d.YNc(1,Cr,2,0,"li",15),d.YNc(2,yr,2,0,"li",15),d.qZA()),2&Ie){d.oxw();const oe=d.MAs(6);d.xp6(1),d.Q6J("ngIf",null==oe.controls.userPassword.errors?null:oe.controls.userPassword.errors.required),d.xp6(1),d.Q6J("ngIf",null==oe.controls.userPassword.errors?null:oe.controls.userPassword.errors.minlength)}}function er(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Confirmed Password is not the same as Password"),d.qZA())}function Ht(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Value required"),d.qZA())}function cr(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Min length is 6 characters"),d.qZA())}function tr(Ie,At){if(1&Ie&&(d.TgZ(0,"ul",14),d.YNc(1,er,2,0,"li",15),d.YNc(2,Ht,2,0,"li",15),d.YNc(3,cr,2,0,"li",15),d.qZA()),2&Ie){d.oxw();const oe=d.MAs(6);d.xp6(1),d.Q6J("ngIf",oe.controls.userConfirmPassword.value!==oe.controls.userPassword.value),d.xp6(1),d.Q6J("ngIf",null==oe.controls.userConfirmPassword.errors?null:oe.controls.userConfirmPassword.errors.required),d.xp6(1),d.Q6J("ngIf",null==oe.controls.userConfirmPassword.errors?null:oe.controls.userConfirmPassword.errors.minlength)}}let nr=(()=>{class Ie{constructor(oe,ke,yt){this.router=oe,this.authService=ke,this.emitService=yt,this.userPassword="",this.userConfirmPassword="",this.typePassword="password",this.showPassword=!1}setTypePassword(oe){this.typePassword=this.showPassword?"text":"password"}getStyle(){return this.userConfirmPassword&&this.userPassword?this.userConfirmPassword==this.userPassword?{border:"2px solid #6bc502"}:{border:"2px solid #ff0000"}:{}}getClasses(oe){const ke=document.documentElement.clientWidth;let yt="",Zt="";switch(oe){default:case"doc":yt="div-fixed",Zt="div-fixed-small";break;case"div":yt="div-body",Zt="div-body-small"}return ke<=1600?Zt:yt}resetForm(){}submitForm(oe){oe.valid&&(this.authService.updatePassword(this.userPassword),this.subscr=this.emitService.getUpdatePassword().subscribe(ke=>{"success"==ke?this.emitService.saveErrorMessage("Password was successfully updated."):(this.emitService.saveErrorMessColor("text-danger"),this.emitService.saveErrorMessage("Failed update Password. Please SignOut, then SignIn again and try once more.")),this.router.navigate([{outlets:{popup:["message"]}}])}))}ngOnInit(){}}return Ie.\u0275fac=function(oe){return new(oe||Ie)(d.Y36(S.F0),d.Y36(_e.e),d.Y36(Ae.A))},Ie.\u0275cmp=d.Xpm({type:Ie,selectors:[["app-user-cabinet-change-password"]],decls:23,vars:11,consts:[[3,"ngClass"],[1,"border","rounded"],[1,"text-center","text-secondary","p-0","m-0"],["novalidate","","appIdentityValidation","",1,"m-3","mt-0",3,"ngSubmit","reset"],["form","ngForm"],[1,"mt-2","mx-1","text-secondary"],["name","userPassword","required","","minlength","6",1,"form-control","form-control-sm","mx-1",3,"type","ngModel","ngModelChange"],["class","text-danger p-0",4,"ngIf"],["name","userConfirmPassword","required","","minlength","6",1,"form-control","form-control-sm","m-1",3,"type","ngStyle","ngModel","ngModelChange"],["type","checkbox","name","showPassword","id","showPassword","value","true",1,"mx-1",3,"ngModel","ngModelChange","change"],["for","showPassword",1,"mt-2","mx-1"],[1,"col-12","d-flex","justify-content-center","mt-4"],["type","submit",1,"btn","btn-success","btn-sm","me-2",3,"disabled"],["type","reset","routerLink","/usercabinet",1,"btn","btn-secondary","btn-sm","me-2"],[1,"text-danger","p-0"],[4,"ngIf"]],template:function(oe,ke){if(1&oe){const yt=d.EpF();d.TgZ(0,"div",0)(1,"div",0)(2,"div",1)(3,"h3",2),d._uU(4,"Change password"),d.qZA(),d.TgZ(5,"form",3,4),d.NdJ("ngSubmit",function(){d.CHM(yt);const Xt=d.MAs(6);return d.KtG(ke.submitForm(Xt))})("reset",function(){return ke.resetForm()}),d.TgZ(7,"label",5),d._uU(8,"New Password"),d.qZA(),d.TgZ(9,"input",6),d.NdJ("ngModelChange",function(Xt){return ke.userPassword=Xt}),d.qZA(),d.YNc(10,Rr,3,2,"ul",7),d.TgZ(11,"label",5),d._uU(12,"Confirm Password"),d.qZA(),d.TgZ(13,"input",8),d.NdJ("ngModelChange",function(Xt){return ke.userConfirmPassword=Xt}),d.qZA(),d.YNc(14,tr,4,3,"ul",7),d.TgZ(15,"input",9),d.NdJ("ngModelChange",function(Xt){return ke.showPassword=Xt})("change",function(){d.CHM(yt);const Xt=d.MAs(6);return d.KtG(ke.setTypePassword(Xt))}),d.qZA(),d.TgZ(16,"label",10),d._uU(17," Show Password"),d.qZA(),d.TgZ(18,"div",11)(19,"button",12),d._uU(20,"Submit"),d.qZA(),d.TgZ(21,"button",13),d._uU(22,"Cancel"),d.qZA()()()()()()}if(2&oe){const yt=d.MAs(6);d.Q6J("ngClass",ke.getClasses("doc")+" bg-primary"),d.xp6(1),d.Q6J("ngClass",ke.getClasses("div")+" bg-white rounded"),d.xp6(8),d.Q6J("type",ke.typePassword)("ngModel",ke.userPassword),d.xp6(1),d.Q6J("ngIf",yt.controls.userPassword.dirty&&yt.controls.userPassword.invalid),d.xp6(3),d.Q6J("type",ke.typePassword)("ngStyle",ke.getStyle())("ngModel",ke.userConfirmPassword),d.xp6(1),d.Q6J("ngIf",yt.controls.userConfirmPassword.dirty&&yt.invalid),d.xp6(1),d.Q6J("ngModel",ke.showPassword),d.xp6(4),d.Q6J("disabled",yt.invalid)}},dependencies:[h.mk,h.O5,h.PC,c._Y,c.Fj,c.Wl,c.JJ,c.JL,c.Q7,c.wO,c.On,c.F,S.rH,Vn],styles:["input.ng-dirty.ng-invalid[_ngcontent-%COMP%]{border:2px solid #ff0000}input.ng-dirty.ng-valid[_ngcontent-%COMP%]{border:2px solid #6bc502}.div-fixed-small[_ngcontent-%COMP%]{position:fixed;top:85px;right:0;left:0;height:100%}.div-body[_ngcontent-%COMP%]{padding:20px;margin-top:24px;margin-left:680px;margin-right:680px}.div-body-small[_ngcontent-%COMP%]{padding:20px;margin-top:24px;margin-left:220px;margin-right:220px}.div-fixed[_ngcontent-%COMP%]{position:fixed;top:51px;right:0;left:0;height:100%}ul[_ngcontent-%COMP%]{list-style-type:none;font-size:small;margin:0;padding:0}li[_ngcontent-%COMP%]{display:inline;margin-right:16px}"]}),Ie})();function Nr(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Value required"),d.qZA())}function _i(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Do not match email specification"),d.qZA())}function Ir(Ie,At){if(1&Ie&&(d.TgZ(0,"ul",14),d.YNc(1,Nr,2,0,"li",15),d.YNc(2,_i,2,0,"li",15),d.qZA()),2&Ie){d.oxw();const oe=d.MAs(6);d.xp6(1),d.Q6J("ngIf",null==oe.controls.newEmail.errors?null:oe.controls.newEmail.errors.required),d.xp6(1),d.Q6J("ngIf",null==oe.controls.newEmail.errors?null:oe.controls.newEmail.errors.pattern)}}function _r(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Value required"),d.qZA())}function fr(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Min length is 6 characters"),d.qZA())}function mn(Ie,At){if(1&Ie&&(d.TgZ(0,"ul",14),d.YNc(1,_r,2,0,"li",15),d.YNc(2,fr,2,0,"li",15),d.qZA()),2&Ie){d.oxw();const oe=d.MAs(6);d.xp6(1),d.Q6J("ngIf",null==oe.controls.userPassword.errors?null:oe.controls.userPassword.errors.required),d.xp6(1),d.Q6J("ngIf",null==oe.controls.userPassword.errors?null:oe.controls.userPassword.errors.minlength)}}let Tn=(()=>{class Ie{constructor(oe,ke,yt){this.router=oe,this.authService=ke,this.emitService=yt,this.newEmail="",this.typePassword="password",this.showPassword=!1,this.userPassword=""}setTypePassword(oe){this.typePassword=this.showPassword?"text":"password"}getClasses(oe){const ke=document.documentElement.clientWidth;let yt="",Zt="";switch(oe){default:case"doc":yt="div-fixed",Zt="div-fixed-small";break;case"div":yt="div-body",Zt="div-body-small"}return ke<=1600?Zt:yt}resetForm(){}submitForm(oe){oe.valid&&(this.authService.updateEmail(this.newEmail,this.userPassword),this.subscr=this.emitService.getUpdateEmail().subscribe(ke=>{"success"==ke?this.emitService.saveErrorMessage("We have sent a confirmation email to "+this.newEmail+". Please check your mailbox and click on the link to complete your SignUp."):(this.emitService.saveErrorMessColor("text-danger"),this.emitService.saveErrorMessage("Failed update Email. Please SignOut, then SignIn again and try once more.")),this.router.navigate([{outlets:{popup:["message"]}}])}))}ngOnInit(){}}return Ie.\u0275fac=function(oe){return new(oe||Ie)(d.Y36(S.F0),d.Y36(_e.e),d.Y36(Ae.A))},Ie.\u0275cmp=d.Xpm({type:Ie,selectors:[["app-user-cabinet-change-email"]],decls:23,vars:9,consts:[[3,"ngClass"],[1,"border","rounded"],[1,"text-center","text-secondary","p-0","m-0"],["novalidate","",1,"m-3","mt-0",3,"ngSubmit","reset"],["form","ngForm"],[1,"mt-2","mx-1","text-secondary"],["name","newEmail","required","","pattern","[a-zA-Z0-9\\.\\-_]+@[a-z]+\\.[a-z]{2,3}",1,"form-control","form-control-sm","mx-1",3,"ngModel","ngModelChange"],["class","text-danger p-0",4,"ngIf"],["name","userPassword","required","","minlength","6",1,"form-control","form-control-sm","mx-1",3,"type","ngModel","ngModelChange"],["type","checkbox","name","showPassword","id","showPassword","value","true",1,"mx-1",3,"ngModel","ngModelChange","change"],["for","showPassword",1,"mt-2","mx-1"],[1,"col-12","d-flex","justify-content-center","mt-4"],["type","submit",1,"btn","btn-success","btn-sm","me-2",3,"disabled"],["type","reset","routerLink","/usercabinet",1,"btn","btn-secondary","btn-sm","me-2"],[1,"text-danger","p-0"],[4,"ngIf"]],template:function(oe,ke){if(1&oe){const yt=d.EpF();d.TgZ(0,"div",0)(1,"div",0)(2,"div",1)(3,"h3",2),d._uU(4,"Change email"),d.qZA(),d.TgZ(5,"form",3,4),d.NdJ("ngSubmit",function(){d.CHM(yt);const Xt=d.MAs(6);return d.KtG(ke.submitForm(Xt))})("reset",function(){return ke.resetForm()}),d.TgZ(7,"label",5),d._uU(8,"Email"),d.qZA(),d.TgZ(9,"input",6),d.NdJ("ngModelChange",function(Xt){return ke.newEmail=Xt}),d.qZA(),d.YNc(10,Ir,3,2,"ul",7),d.TgZ(11,"label",5),d._uU(12,"Password"),d.qZA(),d.TgZ(13,"input",8),d.NdJ("ngModelChange",function(Xt){return ke.userPassword=Xt}),d.qZA(),d.YNc(14,mn,3,2,"ul",7),d.TgZ(15,"input",9),d.NdJ("ngModelChange",function(Xt){return ke.showPassword=Xt})("change",function(Xt){return ke.setTypePassword(Xt)}),d.qZA(),d.TgZ(16,"label",10),d._uU(17," Show Password"),d.qZA(),d.TgZ(18,"div",11)(19,"button",12),d._uU(20,"Submit"),d.qZA(),d.TgZ(21,"button",13),d._uU(22,"Cancel"),d.qZA()()()()()()}if(2&oe){const yt=d.MAs(6);d.Q6J("ngClass",ke.getClasses("doc")+" bg-primary"),d.xp6(1),d.Q6J("ngClass",ke.getClasses("div")+" bg-white rounded"),d.xp6(8),d.Q6J("ngModel",ke.newEmail),d.xp6(1),d.Q6J("ngIf",yt.controls.newEmail.dirty&&yt.controls.newEmail.invalid),d.xp6(3),d.Q6J("type",ke.typePassword)("ngModel",ke.userPassword),d.xp6(1),d.Q6J("ngIf",yt.controls.userPassword.dirty&&yt.controls.userPassword.invalid),d.xp6(1),d.Q6J("ngModel",ke.showPassword),d.xp6(4),d.Q6J("disabled",yt.invalid)}},dependencies:[h.mk,h.O5,c._Y,c.Fj,c.Wl,c.JJ,c.JL,c.Q7,c.wO,c.c5,c.On,c.F,S.rH],styles:["input.ng-dirty.ng-invalid[_ngcontent-%COMP%]{border:2px solid #ff0000}input.ng-dirty.ng-valid[_ngcontent-%COMP%]{border:2px solid #6bc502}.div-fixed-small[_ngcontent-%COMP%]{position:fixed;top:85px;right:0;left:0;height:100%}.div-body[_ngcontent-%COMP%]{padding:20px;margin-top:24px;margin-left:680px;margin-right:680px}.div-body-small[_ngcontent-%COMP%]{padding:20px;margin-top:24px;margin-left:220px;margin-right:220px}.div-fixed[_ngcontent-%COMP%]{position:fixed;top:51px;right:0;left:0;height:100%}ul[_ngcontent-%COMP%]{list-style-type:none;font-size:small;margin:0;padding:0}li[_ngcontent-%COMP%]{display:inline;margin-right:16px}"]}),Ie})();var On=k(7414),wr=k(2035),bn=k(8996),zr=k(5577),Kn=k(262);class zt{constructor(At,oe,ke,yt,Zt,Xt,dr,pi,Fr,gi){this.orderId=At,this.userId=oe,this.userLogin=ke,this.sentEmail=yt,this.sentEmailDate=Zt,this.orderDate=Xt,this.received=dr,this.receiveDate=pi,this.returned=Fr,this.returneDate=gi}}class Ve{constructor(At,oe,ke){this.orderId=At,this.bookId=oe,this.userId=ke}}var tt=k(8076);class St{constructor(At,oe,ke,yt,Zt){this.orderId=At,this.bookId=oe,this.userId=ke,this.title=yt,this.authorName=Zt}}class Rn{constructor(At,oe,ke,yt,Zt,Xt,dr,pi,Fr,gi,ms,ki){this.orderId=At,this.bookId=oe,this.userId=ke,this.userLogin=yt,this.title=Zt,this.authorName=Xt,this.ordered=dr,this.orderDate=pi,this.received=Fr,this.receiveDate=gi,this.returned=ms,this.returneDate=ki}}function Jn(Ie,At){1&Ie&&(d.TgZ(0,"p",24),d._uU(1,"Not all items have been added to your order"),d.qZA())}function Je(Ie,At){if(1&Ie&&(d.TgZ(0,"tr")(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.TgZ(5,"td"),d._uU(6),d.qZA(),d.TgZ(7,"td"),d._uU(8),d.qZA()()),2&Ie){const oe=At.$implicit,ke=At.index;d.xp6(2),d.Oqu(ke+1),d.xp6(2),d.Oqu(oe.title),d.xp6(2),d.Oqu(oe.authorName),d.xp6(2),d.Oqu(oe.bookId)}}function J(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Value required"),d.qZA())}function ge(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Only ['A-Z', 'a-z', '0-9', '-', ' '] available"),d.qZA())}function Xe(Ie,At){if(1&Ie&&(d.TgZ(0,"ul",25),d.YNc(1,J,2,0,"li",26),d.YNc(2,ge,2,0,"li",26),d.qZA()),2&Ie){d.oxw();const oe=d.MAs(21);d.xp6(1),d.Q6J("ngIf",null==oe.controls.userName.errors?null:oe.controls.userName.errors.required),d.xp6(1),d.Q6J("ngIf",null==oe.controls.userName.errors?null:oe.controls.userName.errors.pattern)}}function _t(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Value required"),d.qZA())}function ln(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Do not match email specification"),d.qZA())}function Ne(Ie,At){if(1&Ie&&(d.TgZ(0,"ul",25),d.YNc(1,_t,2,0,"li",26),d.YNc(2,ln,2,0,"li",26),d.qZA()),2&Ie){d.oxw();const oe=d.MAs(21);d.xp6(1),d.Q6J("ngIf",null==oe.controls.userEmail.errors?null:oe.controls.userEmail.errors.required),d.xp6(1),d.Q6J("ngIf",null==oe.controls.userEmail.errors?null:oe.controls.userEmail.errors.pattern)}}function xe(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Value required"),d.qZA())}function $e(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Only ['0-9'] available"),d.qZA())}function De(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Min length is 6 characters"),d.qZA())}function ie(Ie,At){if(1&Ie&&(d.TgZ(0,"ul",25),d.YNc(1,xe,2,0,"li",26),d.YNc(2,$e,2,0,"li",26),d.YNc(3,De,2,0,"li",26),d.qZA()),2&Ie){d.oxw();const oe=d.MAs(21);d.xp6(1),d.Q6J("ngIf",null==oe.controls.userZipCode.errors?null:oe.controls.userZipCode.errors.required),d.xp6(1),d.Q6J("ngIf",null==oe.controls.userZipCode.errors?null:oe.controls.userZipCode.errors.pattern),d.xp6(1),d.Q6J("ngIf",null==oe.controls.userZipCode.errors?null:oe.controls.userZipCode.errors.minlength)}}function we(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Value required"),d.qZA())}function ut(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Only ['A-Z', 'a-z', '-', '()', ' '] available"),d.qZA())}function Bt(Ie,At){if(1&Ie&&(d.TgZ(0,"ul",25),d.YNc(1,we,2,0,"li",26),d.YNc(2,ut,2,0,"li",26),d.qZA()),2&Ie){d.oxw();const oe=d.MAs(21);d.xp6(1),d.Q6J("ngIf",null==oe.controls.userCountry.errors?null:oe.controls.userCountry.errors.required),d.xp6(1),d.Q6J("ngIf",null==oe.controls.userCountry.errors?null:oe.controls.userCountry.errors.pattern)}}function gn(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Value required"),d.qZA())}function hn(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Only ['A-Z', 'a-z', '0-9', '-', ' '] available"),d.qZA())}function Se(Ie,At){if(1&Ie&&(d.TgZ(0,"ul",25),d.YNc(1,gn,2,0,"li",26),d.YNc(2,hn,2,0,"li",26),d.qZA()),2&Ie){d.oxw();const oe=d.MAs(21);d.xp6(1),d.Q6J("ngIf",null==oe.controls.userCity.errors?null:oe.controls.userCity.errors.required),d.xp6(1),d.Q6J("ngIf",null==oe.controls.userCity.errors?null:oe.controls.userCity.errors.pattern)}}function Y(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Value required"),d.qZA())}function W(Ie,At){1&Ie&&(d.TgZ(0,"li"),d._uU(1,"Only ['A-Z', 'a-z', '0-9', '-', ' ' . , /] available"),d.qZA())}function te(Ie,At){if(1&Ie&&(d.TgZ(0,"ul",25),d.YNc(1,Y,2,0,"li",26),d.YNc(2,W,2,0,"li",26),d.qZA()),2&Ie){d.oxw();const oe=d.MAs(21);d.xp6(1),d.Q6J("ngIf",null==oe.controls.userAddress.errors?null:oe.controls.userAddress.errors.required),d.xp6(1),d.Q6J("ngIf",null==oe.controls.userAddress.errors?null:oe.controls.userAddress.errors.pattern)}}function me(Ie,At){1&Ie&&(d.TgZ(0,"div",27)(1,"div",28),d._UZ(2,"div",29),d.qZA()())}let Ke=(()=>{class Ie{constructor(oe,ke,yt,Zt){this.emitService=oe,this.authService=ke,this.dbService=yt,this.router=Zt,this.dateMillis=+new Date/1e3,this.notAllowMess="",this.allAllowed=!0,this.modalSpin=!1,this.submitDesable=!1,this.userId="",this.ordersNumber=0,this.newOrdersNumber="",this.orders=[],this.userBooks=[];const Xt=new Date("2000-01-01");this.userProfile=new it.T("","","","","",new ct.EK(+Xt/1e3,0),"","","",""),this.authService.authState(),this.authService.userDataId&&this.getUserDataBooks(this.authService.userDataId),this.subscr=this.emitService.getAuthState().subscribe(dr=>{this.getUserDataBooks(dr)})}getUserDataBooks(oe){const ke=new Date("2000-01-01");oe&&(this.userId=oe,this.userData=this.authService.userData,this.subscr2=this.dbService.getUserData(oe).subscribe(yt=>{this.userProfile=yt||new it.T(oe,this.userData.email,this.userData.displayName,this.userData.displayName,this.userData.email,new ct.EK(+ke/1e3,0),"","","",""),this.subscr2.unsubscribe()}),this.subscr3=this.dbService.getUserBooksDatas(oe).subscribe(yt=>{const Zt=yt.filter(Xt=>Xt.reserved);this.userBooks=yt.filter(Xt=>Xt.reserved&&Xt.allowed),this.userBooks.length<Zt.length&&(this.allAllowed=!1,this.notAllowMess=", but not all items have been added to your order!"),this.subscr3.unsubscribe()}))}submitForm(oe){oe.valid&&(this.modalSpin=!0,this.subscr5=this.dbService.getOrdersNumber().pipe((0,On.V)(1e4)).subscribe({next:ke=>{this.subscr5.unsubscribe(),ke.lastNumber&&(this.ordersNumber=ke.lastNumber),this.ordersNumber++,this.newOrdersNumber=String(this.ordersNumber);const yt=this.setOrderData(),Zt=this.setUserOrderData();this.subscr6=(0,de.T)(this.dbService.updateOrdersNumber(this.ordersNumber),this.dbService.setOrder(yt),this.dbService.setUserOrderData(Zt)).pipe((0,On.V)(1e4),(0,wr.h)(1)).subscribe({next:()=>{this.subscr6.unsubscribe(),this.updateUsersBooksOrdersDatas()},error:()=>{this.modalSpin=!1,this.showErrorMess(),this.subscr5.unsubscribe(),this.subscr6.unsubscribe()}})},error:()=>{this.modalSpin=!1,this.showErrorMess(),this.subscr6.unsubscribe()}}))}updateUsersBooksOrdersDatas(){this.subscr4=(0,bn.D)(this.userBooks).pipe((0,zr.z)(oe=>(0,de.T)(this.dbService.updateUserBooksDataOrdered(this.userId,oe.bookId,!0,new ct.EK(this.dateMillis,0)).pipe((0,On.V)(1e4)),this.dbService.updateUserBooksDataReserved(this.userId,oe.bookId,!0).pipe((0,On.V)(1e4)),this.dbService.setOrderBooks(this.newOrdersNumber,new Ve(this.newOrdersNumber,oe.bookId,this.userId)).pipe((0,On.V)(1e4)),this.dbService.setUserOrderBooks(this.setUserOrderBooks(oe.bookId)).pipe((0,On.V)(1e4)),this.dbService.setBooksOrdered(this.setBooksOrderedData(oe.bookId)).pipe((0,On.V)(1e4)))),(0,wr.h)(1),(0,Kn.K)(()=>(0,bn.D)("e"))).subscribe({next:oe=>{this.modalSpin=!1,oe?(this.subscr4.unsubscribe(),this.showErrorMess()):(this.emitService.saveErrorMessage("Your Order has been successfully placed"+this.notAllowMess),this.router.navigate([{outlets:{popup:["message"]}}]),this.submitDesable=!0)}})}setOrderData(){return new zt(this.newOrdersNumber,this.userId,this.userData.email,!1,null,new ct.EK(this.dateMillis,0),!1,null,!1,null)}setUserOrderData(){return new tt.o(this.newOrdersNumber,this.userId,this.userProfile.userName,this.userProfile.userEmail,this.userProfile.userZipCode,this.userProfile.userCountry,this.userProfile.userCity,this.userProfile.userAddress,!1,null,new ct.EK(this.dateMillis,0),!1,null,!1,null)}setBooksOrderedData(oe){return new Rn(this.newOrdersNumber,oe,this.userId,this.userData.email,this.userBooks[this.getBookIndex(oe)].title,this.userBooks[this.getBookIndex(oe)].authorName,!0,new ct.EK(this.dateMillis,0),!1,null,!1,null)}setUserOrderBooks(oe){return new St(this.newOrdersNumber,oe,this.userId,this.userBooks[this.getBookIndex(oe)].title,this.userBooks[this.getBookIndex(oe)].authorName)}showErrorMess(){this.emitService.saveErrorMessage("Failed making your Order."),this.router.navigate([{outlets:{popup:["message"]}}])}getBookIndex(oe){return this.userBooks.findIndex(ke=>ke.bookId==oe)}getClasses(oe){const ke=document.documentElement.clientWidth;let yt="",Zt="";switch(oe){default:case"div":yt="div-fixed",Zt="div-fixed-small";break;case"but":yt="col-1",Zt="col-2"}return ke<1600?Zt:yt}getStyleOrders(oe){const ke=document.documentElement.clientHeight;let Zt=document.documentElement.clientWidth<=1600?ke-85-2*oe:ke-51-2*oe;return Zt=Zt-100-47,{height:Zt.toString()+"px","overflow-y":"auto"}}getStyle(oe){const ke=document.documentElement.clientHeight,yt=document.documentElement.clientWidth;let Xt=yt-2*oe;return{height:(yt<=1600?ke-85-2*oe:ke-51-2*oe).toString()+"px",width:Xt.toString()+"px","overflow-y":"auto"}}resetForm(){}ngOnInit(){}ngOnDestroy(){this.subscr&&this.subscr.unsubscribe(),this.subscr2&&this.subscr2.unsubscribe(),this.subscr3&&this.subscr3.unsubscribe(),this.subscr4&&this.subscr4.unsubscribe(),this.subscr5&&this.subscr5.unsubscribe(),this.subscr6&&this.subscr6.unsubscribe()}}return Ie.\u0275fac=function(oe){return new(oe||Ie)(d.Y36(Ae.A),d.Y36(_e.e),d.Y36(fe.k),d.Y36(S.F0))},Ie.\u0275cmp=d.Xpm({type:Ie,selectors:[["app-user-order"]],decls:54,vars:21,consts:[[3,"ngClass"],[1,"bg-white","mt-3","pt-0",3,"ngStyle"],[1,"fs-2","fw-bold","text-center"],["class","fs-5 fw-bold text-center text-danger",4,"ngIf"],[1,"d-flex","justify-content-center"],[1,"col-7","border","mx-2","bg-light","rounded",3,"ngStyle"],[1,"table","m-0"],[1,"text-primary","bg-grey"],[4,"ngFor","ngForOf"],[1,"col-4","border","mx-2","bg-light","rounded"],["novalidate","",1,"m-3",3,"ngSubmit","reset"],["form","ngForm"],[1,"mt-2","mx-1","text-secondary"],["name","userName","required","","maxlength","10","pattern","^[A-Za-z0-9\\- ]+$",1,"form-control","form-control-sm","m-1",3,"ngModel","ngModelChange"],["class","text-danger p-0",4,"ngIf"],["name","userEmail","required","","pattern","[a-zA-Z0-9\\.\\-_]+@[a-z]+\\.[a-z]{2,3}",1,"form-control","form-control-sm","m-1",3,"ngModel","ngModelChange"],["name","userZipCode","required","","minlength","6","maxlength","6","pattern","^[0-9]+$",1,"form-control","form-control-sm","m-1",3,"ngModel","ngModelChange"],["name","userCountry","required","","pattern","^[A-Za-z\\-\\(\\) ]+$",1,"form-control","form-control-sm","m-1",3,"ngModel","ngModelChange"],["name","userCity","required","","pattern","^[A-Za-z0-9\\- ]+$",1,"form-control","form-control-sm","m-1",3,"ngModel","ngModelChange"],["name","userAddress","required","","pattern","^[A-Za-z0-9.,\\-\\/ ]+$",1,"form-control","form-control-sm","m-1",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-center","mt-4","mb-2"],["type","button",1,"btn","btn-success","btn-sm",3,"disabled","click"],["type","button","routerLink","/usercabinet/user-cabinet-booked",1,"btn","btn-secondary","btn-sm"],["class","user-entry-mess",4,"ngIf"],[1,"fs-5","fw-bold","text-center","text-danger"],[1,"text-danger","p-0"],[4,"ngIf"],[1,"user-entry-mess"],[1,"user-entry-body-spin"],["role","status",1,"d-inline-block","col-3","m-2","spinner-border","text-primary"]],template:function(oe,ke){if(1&oe){const yt=d.EpF();d.TgZ(0,"div",0)(1,"div",1)(2,"p",2),d._uU(3,"Making an Order"),d.qZA(),d.YNc(4,Jn,2,0,"p",3),d.TgZ(5,"div",4)(6,"div",5)(7,"table",6)(8,"tbody")(9,"tr",7)(10,"td"),d._uU(11,"#"),d.qZA(),d.TgZ(12,"td"),d._uU(13,"Title"),d.qZA(),d.TgZ(14,"td"),d._uU(15,"Author"),d.qZA(),d.TgZ(16,"td"),d._uU(17,"ISBN"),d.qZA()(),d.YNc(18,Je,9,4,"tr",8),d.qZA()()(),d.TgZ(19,"div",9)(20,"form",10,11),d.NdJ("ngSubmit",function(){d.CHM(yt);const Xt=d.MAs(21);return d.KtG(ke.submitForm(Xt))})("reset",function(){return ke.resetForm()}),d.TgZ(22,"label",12),d._uU(23,"Name"),d.qZA(),d.TgZ(24,"input",13),d.NdJ("ngModelChange",function(Xt){return ke.userProfile.userName=Xt}),d.qZA(),d.YNc(25,Xe,3,2,"ul",14),d.TgZ(26,"label",12),d._uU(27,"Email"),d.qZA(),d.TgZ(28,"input",15),d.NdJ("ngModelChange",function(Xt){return ke.userProfile.userEmail=Xt}),d.qZA(),d.YNc(29,Ne,3,2,"ul",14),d.TgZ(30,"label",12),d._uU(31,"ZipCode"),d.qZA(),d.TgZ(32,"input",16),d.NdJ("ngModelChange",function(Xt){return ke.userProfile.userZipCode=Xt}),d.qZA(),d.YNc(33,ie,4,3,"ul",14),d.TgZ(34,"label",12),d._uU(35,"Country"),d.qZA(),d.TgZ(36,"input",17),d.NdJ("ngModelChange",function(Xt){return ke.userProfile.userCountry=Xt}),d.qZA(),d.YNc(37,Bt,3,2,"ul",14),d.TgZ(38,"label",12),d._uU(39,"City"),d.qZA(),d.TgZ(40,"input",18),d.NdJ("ngModelChange",function(Xt){return ke.userProfile.userCity=Xt}),d.qZA(),d.YNc(41,Se,3,2,"ul",14),d.TgZ(42,"label",12),d._uU(43,"Address"),d.qZA(),d.TgZ(44,"input",19),d.NdJ("ngModelChange",function(Xt){return ke.userProfile.userAddress=Xt}),d.qZA(),d.YNc(45,te,3,2,"ul",14),d.qZA()()(),d.TgZ(46,"div",20)(47,"div",0)(48,"button",21),d.NdJ("click",function(){d.CHM(yt);const Xt=d.MAs(21);return d.KtG(ke.submitForm(Xt))}),d._uU(49," Make an Order "),d.qZA()(),d.TgZ(50,"div",0)(51,"button",22),d._uU(52,"Cancel"),d.qZA()()()()(),d.YNc(53,me,3,0,"div",23)}if(2&oe){const yt=d.MAs(21);d.Q6J("ngClass",ke.getClasses("div")+" bg-primary d-flex justify-content-center"),d.xp6(1),d.Q6J("ngStyle",ke.getStyle(16)),d.xp6(3),d.Q6J("ngIf",!ke.allAllowed),d.xp6(2),d.Q6J("ngStyle",ke.getStyleOrders(16)),d.xp6(12),d.Q6J("ngForOf",ke.userBooks),d.xp6(6),d.Q6J("ngModel",ke.userProfile.userName),d.xp6(1),d.Q6J("ngIf",yt.controls.userName.dirty&&yt.controls.userName.invalid),d.xp6(3),d.Q6J("ngModel",ke.userProfile.userEmail),d.xp6(1),d.Q6J("ngIf",yt.controls.userEmail.dirty&&yt.controls.userEmail.invalid),d.xp6(3),d.Q6J("ngModel",ke.userProfile.userZipCode),d.xp6(1),d.Q6J("ngIf",yt.controls.userZipCode.dirty&&yt.controls.userZipCode.invalid),d.xp6(3),d.Q6J("ngModel",ke.userProfile.userCountry),d.xp6(1),d.Q6J("ngIf",yt.controls.userCountry.dirty&&yt.controls.userCountry.invalid),d.xp6(3),d.Q6J("ngModel",ke.userProfile.userCity),d.xp6(1),d.Q6J("ngIf",yt.controls.userCity.dirty&&yt.controls.userCity.invalid),d.xp6(3),d.Q6J("ngModel",ke.userProfile.userAddress),d.xp6(1),d.Q6J("ngIf",yt.controls.userAddress.dirty&&yt.controls.userAddress.invalid),d.xp6(2),d.Q6J("ngClass",ke.getClasses("but")+" d-grid mx-1"),d.xp6(1),d.Q6J("disabled",yt.invalid||ke.submitDesable),d.xp6(2),d.Q6J("ngClass",ke.getClasses("but")+" d-grid mx-1"),d.xp6(3),d.Q6J("ngIf",ke.modalSpin)}},dependencies:[h.mk,h.sg,h.O5,h.PC,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.wO,c.nD,c.c5,c.On,c.F,S.rH],styles:["input.ng-dirty.ng-invalid[_ngcontent-%COMP%]{border:2px solid #ff0000}input.ng-dirty.ng-valid[_ngcontent-%COMP%]{border:2px solid #6bc502}.user-entry-mess[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:950}.user-entry-body-spin[_ngcontent-%COMP%]{padding:20px;margin:250px 735px 200px;z-index:960}.user-entry-body-spin-small[_ngcontent-%COMP%]{padding:20px;margin:250px 200px 200px;z-index:960}.bg-grey[_ngcontent-%COMP%]{background-color:#f0eeee}.div-users[_ngcontent-%COMP%]{height:635px;overflow-y:scroll}.div-fixed[_ngcontent-%COMP%]{position:fixed;top:51px;right:0;left:0;height:100%}.div-fixed-small[_ngcontent-%COMP%]{position:fixed;top:85px;right:0;left:0;height:100%}ul[_ngcontent-%COMP%]{list-style-type:none;font-size:small;margin:0;padding:0}li[_ngcontent-%COMP%]{display:inline;margin-right:16px}"]}),Ie})();const Ft=function(Ie){return{orderId:Ie}},on=function(Ie){return["/usercabinet/user-order-detail",Ie]};function Fn(Ie,At){if(1&Ie&&(d.TgZ(0,"tr")(1,"td")(2,"div",5),d._uU(3),d.qZA()(),d.TgZ(4,"td"),d._uU(5),d.qZA(),d.TgZ(6,"td"),d._uU(7),d.ALo(8,"date"),d.qZA(),d.TgZ(9,"td"),d._uU(10),d.ALo(11,"date"),d.qZA(),d.TgZ(12,"td"),d._uU(13),d.ALo(14,"date"),d.qZA(),d.TgZ(15,"td")(16,"button",7),d._uU(17,"Detals"),d.qZA()()()),2&Ie){const oe=At.$implicit,ke=At.index;d.xp6(3),d.Oqu(ke+1),d.xp6(2),d.hij("BS-",oe.orderId,""),d.xp6(2),d.Oqu(d.lcZ(8,6,null==oe.orderDate?null:oe.orderDate.toDate())),d.xp6(3),d.Oqu(d.lcZ(11,8,null==oe.receiveDate?null:oe.receiveDate.toDate())),d.xp6(3),d.Oqu(d.lcZ(14,10,null==oe.returneDate?null:oe.returneDate.toDate())),d.xp6(3),d.Q6J("routerLink",d.VKq(14,on,d.VKq(12,Ft,oe.orderId)))}}let Gr=(()=>{class Ie{constructor(oe,ke,yt){this.emitService=oe,this.authService=ke,this.dbService=yt,this.userOrders=[],this.authService.authState(),void 0!==typeof this.authService.userDataId&&this.getUserOrders(this.authService.userDataId),this.subscr=this.emitService.getAuthState().subscribe(Zt=>{this.getUserOrders(Zt)})}getUserOrders(oe){oe&&(this.subscr2=this.dbService.getUserOrders(oe).subscribe(ke=>{this.userOrders=ke.sort((yt,Zt)=>Number(Zt.orderId)-Number(yt.orderId))}))}getHeight(oe){const ke=document.documentElement.clientHeight;return{height:(document.documentElement.clientWidth<=1600?ke-85-2*oe:ke-51-2*oe).toString()+"px"}}getClasses(){return document.documentElement.clientWidth<=1600?"div-fixed-small":"div-fixed"}ngOnInit(){}ngOnDestroy(){this.subscr&&this.subscr.unsubscribe(),this.subscr2&&this.subscr2.unsubscribe()}}return Ie.\u0275fac=function(oe){return new(oe||Ie)(d.Y36(Ae.A),d.Y36(_e.e),d.Y36(fe.k))},Ie.\u0275cmp=d.Xpm({type:Ie,selectors:[["app-user-orders"]],decls:20,vars:3,consts:[[3,"ngClass"],[1,"d-flex","justify-content-center","mt-3"],[1,"border","mx-2","bg-white","rounded","div-orders",3,"ngStyle"],[1,"table"],[1,"text-primary","bg-grey"],[1,"mx-3"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-info","btn-sm",3,"routerLink"]],template:function(oe,ke){1&oe&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"table",3)(4,"tbody")(5,"tr",4)(6,"td")(7,"div",5),d._uU(8,"#"),d.qZA()(),d.TgZ(9,"td"),d._uU(10,"Order ID"),d.qZA(),d.TgZ(11,"td"),d._uU(12,"Order Date"),d.qZA(),d.TgZ(13,"td"),d._uU(14,"Receive Date"),d.qZA(),d.TgZ(15,"td"),d._uU(16,"Returne Date"),d.qZA(),d.TgZ(17,"td"),d._uU(18,"Show Details"),d.qZA()(),d.YNc(19,Fn,18,16,"tr",6),d.qZA()()()()()),2&oe&&(d.Q6J("ngClass",ke.getClasses()+" bg-primary"),d.xp6(2),d.Q6J("ngStyle",ke.getHeight(16)),d.xp6(17),d.Q6J("ngForOf",ke.userOrders))},dependencies:[h.mk,h.sg,h.PC,S.rH,h.uU],styles:["td[_ngcontent-%COMP%]{text-align:center}.bg-grey[_ngcontent-%COMP%]{background-color:#f0eeee}.div-fixed[_ngcontent-%COMP%]{position:fixed;top:51px;right:0;left:0;height:100%}.div-fixed-small[_ngcontent-%COMP%]{position:fixed;top:85px;right:0;left:0;height:100%}.div-orders[_ngcontent-%COMP%]{width:70%;overflow-y:scroll}"]}),Ie})();function un(Ie,At){if(1&Ie&&(d.TgZ(0,"tr")(1,"td")(2,"div",13),d._uU(3),d.qZA()(),d.TgZ(4,"td"),d._uU(5),d.qZA(),d.TgZ(6,"td"),d._uU(7),d.qZA(),d.TgZ(8,"td"),d._uU(9),d.qZA()()),2&Ie){const oe=At.$implicit,ke=At.index;d.xp6(3),d.Oqu(ke+1),d.xp6(2),d.Oqu(oe.title),d.xp6(2),d.Oqu(oe.authorName),d.xp6(2),d.Oqu(oe.bookId)}}let si=(()=>{class Ie{constructor(oe,ke,yt,Zt){this.activRoute=oe,this.emitService=ke,this.authService=yt,this.dbService=Zt,this.userOrderBooks=[],this.userOrder=new tt.o("","","","","","","","",!1,null,null,!1,null,!1,null),this.authService.authState(),void 0!==typeof this.authService.userDataId&&this.getUserOrderData(this.authService.userDataId),this.subscr=this.emitService.getAuthState().subscribe(Xt=>{this.getUserOrderData(Xt)})}getUserOrderData(oe){if(oe){const ke=this.activRoute.snapshot.params.orderId;this.subscr2=this.dbService.getUserOrderData(oe,ke).subscribe(yt=>{this.userOrder=yt}),this.subscr3=this.dbService.getUserOrderBooks(oe,ke).subscribe(yt=>{this.userOrderBooks=yt})}}getStyle(oe){const ke=document.documentElement.clientHeight,yt=document.documentElement.clientWidth;let Xt=yt-2*oe;return{height:(yt<=1600?ke-85-2*oe:ke-51-2*oe).toString()+"px",width:Xt.toString()+"px",overflow:"hidden"}}getStyleOrders(oe){const ke=document.documentElement.clientHeight;let Zt=document.documentElement.clientWidth<=1600?ke-85-2*oe:ke-51-2*oe;return Zt=Zt-85-70,{height:Zt.toString()+"px","overflow-y":"auto"}}getClasses(){return document.documentElement.clientWidth<=1600?"div-fixed-small":"div-fixed"}ngOnInit(){}ngOnDestroy(){this.subscr&&this.subscr.unsubscribe(),this.subscr2&&this.subscr2.unsubscribe(),this.subscr3&&this.subscr3.unsubscribe()}}return Ie.\u0275fac=function(oe){return new(oe||Ie)(d.Y36(S.gz),d.Y36(Ae.A),d.Y36(_e.e),d.Y36(fe.k))},Ie.\u0275cmp=d.Xpm({type:Ie,selectors:[["app-user-order-detail"]],decls:86,vars:22,consts:[[3,"ngClass"],[1,"bg-white","mt-3","pt-0",3,"ngStyle"],[1,"table","table-borderless","mb-2","p-0"],["colspan","4",1,"m-0","p-0","t-a-c"],[1,"fs-2","fw-bold","m-0"],[1,"fs-5","fw-bold","mx-2"],["id","tborder"],[1,"fs-5","mx-2"],[1,"fs-5","mx-2","text-primary"],[1,"d-flex","justify-content-center"],[1,"col-7","border","mx-2","bg-light","rounded",3,"ngStyle"],[1,"table","m-0"],[1,"text-primary","bg-grey"],[1,"mx-3"],[4,"ngFor","ngForOf"],[1,"col-4","border","mx-2","bg-light","rounded"],[1,"table","table-borderless"],["id","tbuser"],[1,"col-1","d-grid","mt-3"],["routerLink","/usercabinet/user-orders",1,"btn","btn-secondary"]],template:function(oe,ke){1&oe&&(d.TgZ(0,"div",0)(1,"div",1)(2,"table",2)(3,"tbody")(4,"tr")(5,"td",3)(6,"span",4),d._uU(7),d.qZA(),d.TgZ(8,"span",5),d._uU(9),d.ALo(10,"date"),d.qZA()()(),d.TgZ(11,"tr",6)(12,"td")(13,"span",7),d._uU(14,"Received:"),d.qZA(),d.TgZ(15,"span",8),d._uU(16),d.qZA()(),d.TgZ(17,"td")(18,"span",7),d._uU(19,"Receive Date:"),d.qZA(),d.TgZ(20,"span",8),d._uU(21),d.ALo(22,"date"),d.qZA()(),d.TgZ(23,"td")(24,"span",7),d._uU(25,"Returned:"),d.qZA(),d.TgZ(26,"span",8),d._uU(27),d.qZA()(),d.TgZ(28,"td")(29,"span",7),d._uU(30,"Returne Date:"),d.qZA(),d.TgZ(31,"span",8),d._uU(32),d.ALo(33,"date"),d.qZA()()()()(),d.TgZ(34,"div",9)(35,"div",10)(36,"table",11)(37,"tbody")(38,"tr",12)(39,"td")(40,"div",13),d._uU(41,"#"),d.qZA()(),d.TgZ(42,"td"),d._uU(43,"Title"),d.qZA(),d.TgZ(44,"td"),d._uU(45,"Author"),d.qZA(),d.TgZ(46,"td"),d._uU(47,"ISBN"),d.qZA()(),d.YNc(48,un,10,4,"tr",14),d.qZA()()(),d.TgZ(49,"div",15)(50,"table",16)(51,"tbody",17)(52,"tr")(53,"td"),d._uU(54,"Name:"),d.qZA(),d.TgZ(55,"td"),d._uU(56),d.qZA()(),d.TgZ(57,"tr")(58,"td"),d._uU(59,"Email:"),d.qZA(),d.TgZ(60,"td"),d._uU(61),d.qZA()(),d.TgZ(62,"tr")(63,"td"),d._uU(64,"ZipCode:"),d.qZA(),d.TgZ(65,"td"),d._uU(66),d.qZA()(),d.TgZ(67,"tr")(68,"td"),d._uU(69,"Country:"),d.qZA(),d.TgZ(70,"td"),d._uU(71),d.qZA()(),d.TgZ(72,"tr")(73,"td"),d._uU(74,"City:"),d.qZA(),d.TgZ(75,"td"),d._uU(76),d.qZA()(),d.TgZ(77,"tr")(78,"td"),d._uU(79,"Address:"),d.qZA(),d.TgZ(80,"td"),d._uU(81),d.qZA()()()()()(),d.TgZ(82,"div",9)(83,"div",18)(84,"button",19),d._uU(85,"Return"),d.qZA()()()()()),2&oe&&(d.Q6J("ngClass",ke.getClasses()+" bg-primary d-flex justify-content-center"),d.xp6(1),d.Q6J("ngStyle",ke.getStyle(16)),d.xp6(6),d.hij("Order # BS-",ke.userOrder.orderId,""),d.xp6(2),d.hij(" from ",d.lcZ(10,16,null==ke.userOrder.orderDate?null:ke.userOrder.orderDate.toDate()),""),d.xp6(7),d.Oqu(ke.userOrder.received),d.xp6(5),d.Oqu(d.lcZ(22,18,null==ke.userOrder.receiveDate?null:ke.userOrder.receiveDate.toDate())),d.xp6(6),d.Oqu(ke.userOrder.returned),d.xp6(5),d.Oqu(d.lcZ(33,20,null==ke.userOrder.returneDate?null:ke.userOrder.returneDate.toDate())),d.xp6(3),d.Q6J("ngStyle",ke.getStyleOrders(16)),d.xp6(13),d.Q6J("ngForOf",ke.userOrderBooks),d.xp6(8),d.Oqu(ke.userOrder.userName),d.xp6(5),d.Oqu(ke.userOrder.userEmail),d.xp6(5),d.Oqu(ke.userOrder.userZipCode),d.xp6(5),d.Oqu(ke.userOrder.userCountry),d.xp6(5),d.Oqu(ke.userOrder.userCity),d.xp6(5),d.Oqu(ke.userOrder.userAddress))},dependencies:[h.mk,h.sg,h.PC,S.rH,h.uU],styles:["#tborder[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;margin:0;padding:0}#tbuser[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2n+1){color:#0d6efd;text-align:right}.t-a-c[_ngcontent-%COMP%]{text-align:center}.bg-grey[_ngcontent-%COMP%]{background-color:#f0eeee}.div-users[_ngcontent-%COMP%]{height:100%;overflow-y:scroll}.div-fixed[_ngcontent-%COMP%]{position:fixed;top:51px;right:0;left:0;height:100%}.div-fixed-small[_ngcontent-%COMP%]{position:fixed;top:85px;right:0;left:0;height:100%}"]}),Ie})();var vi=k(9646),bi=k(5916),Xi=k(9101);let ni=(()=>{class Ie{constructor(){}ngOnInit(){}}return Ie.\u0275fac=function(oe){return new(oe||Ie)},Ie.\u0275cmp=d.Xpm({type:Ie,selectors:[["app-dialog"]],decls:12,vars:2,consts:[["mat-dialog-title","","align","center"],["align","center"],[1,"m-4"],["mat-flat-button","","color","primary",3,"mat-dialog-close"],["mat-flat-button","","color","warn",3,"mat-dialog-close"]],template:function(oe,ke){1&oe&&(d.TgZ(0,"h1",0)(1,"b"),d._uU(2,"Are you sure?"),d.qZA()(),d.TgZ(3,"mat-dialog-content")(4,"h5",1),d._uU(5,"You data will not be saved"),d.qZA()(),d.TgZ(6,"mat-dialog-actions",1)(7,"div",2)(8,"button",3),d._uU(9,"Cancel"),d.qZA(),d.TgZ(10,"button",4),d._uU(11,"Ok"),d.qZA()()()),2&oe&&(d.xp6(8),d.Q6J("mat-dialog-close",!1),d.xp6(2),d.Q6J("mat-dialog-close",!0))},dependencies:[bi.ZT,bi.uh,bi.xY,bi.H8,Xi.lW]}),Ie})();const fi=[{path:"",component:st,children:[{path:"user-cabinet-nav",component:Pe},{path:"user-cabinet-booked",component:Ge},{path:"user-cabinet-viewed",component:qe},{path:"user-order",component:Ke},{path:"user-orders",component:Gr},{path:"user-order-detail",component:si},{path:"user-cabinet-personaldata",component:ir,canDeactivate:[(()=>{class Ie{constructor(oe){this.dialog=oe}canDeactivate(oe){for(let ke in oe.userProfileOriginal)if(oe.userProfileOriginal[ke]!=oe.userProfile[ke])return this.dialog.open(ni,{height:"210px",width:"420px",enterAnimationDuration:"0ms",exitAnimationDuration:"0ms",hasBackdrop:!1,disableClose:!0}).afterClosed();return(0,vi.of)(!0)}}return Ie.\u0275fac=function(oe){return new(oe||Ie)(d.LFG(bi.uw))},Ie.\u0275prov=d.Yz7({token:Ie,factory:Ie.\u0275fac,providedIn:"root"}),Ie})()]},{path:"user-cabinet-change-password",component:nr},{path:"user-cabinet-change-email",component:Tn},{path:"",redirectTo:"user-cabinet-viewed",pathMatch:"full"}]}];let Oi=(()=>{class Ie{}return Ie.\u0275fac=function(oe){return new(oe||Ie)},Ie.\u0275mod=d.oAB({type:Ie}),Ie.\u0275inj=d.cJS({imports:[S.Bz.forChild(fi),S.Bz]}),Ie})();var ri=k(4466),ss=k(198);let Tr=(()=>{class Ie{}return Ie.\u0275fac=function(oe){return new(oe||Ie)},Ie.\u0275mod=d.oAB({type:Ie}),Ie.\u0275inj=d.cJS({imports:[h.ez,c.u5,c.UX,S.Bz,Oi,ri.m,ss.F]}),Ie})()},3473:(Jt,Qe,k)=>{k.d(Qe,{Q:()=>h});const h=c=>{const S=c.get("userPassword"),d=c.get("userConfirmPassword");return S?.value===d?.value?null:{confirmPassword:{value:c.value}}}},198:(Jt,Qe,k)=>{k.d(Qe,{F:()=>S});var h=k(6895),c=k(4650);let S=(()=>{class d{}return d.\u0275fac=function(Ae){return new(Ae||d)},d.\u0275mod=c.oAB({type:d}),d.\u0275inj=c.cJS({imports:[h.ez]}),d})()},665:(Jt,Qe,k)=>{var h=k(1481),c=k(4650),S=k(7340);function de(I){return new c.vHH(3e3,!1)}function Wt(){return typeof window<"u"&&typeof window.document<"u"}function dn(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function vr(I){switch(I.length){case 0:return new S.ZN;case 1:return I[0];default:return new S.ZE(I)}}function Ar(I,m,f,w,B=new Map,X=new Map){const Ce=[],Le=[];let ot=-1,kt=null;if(w.forEach(Dn=>{const Sn=Dn.get("offset"),lr=Sn==ot,Qn=lr&&kt||new Map;Dn.forEach((xn,gr)=>{let di=gr,Vr=xn;if("offset"!==gr)switch(di=m.normalizePropertyName(di,Ce),Vr){case S.k1:Vr=B.get(gr);break;case S.l3:Vr=X.get(gr);break;default:Vr=m.normalizeStyleValue(gr,di,Vr,Ce)}Qn.set(di,Vr)}),lr||Le.push(Qn),kt=Qn,ot=Sn}),Ce.length)throw function je(I){return new c.vHH(3502,!1)}();return Le}function br(I,m,f,w){switch(m){case"start":I.onStart(()=>w(f&&ir(f,"start",I)));break;case"done":I.onDone(()=>w(f&&ir(f,"done",I)));break;case"destroy":I.onDestroy(()=>w(f&&ir(f,"destroy",I)))}}function ir(I,m,f){const X=sr(I.element,I.triggerName,I.fromState,I.toState,m||I.phaseName,f.totalTime??I.totalTime,!!f.disabled),Ce=I._data;return null!=Ce&&(X._data=Ce),X}function sr(I,m,f,w,B="",X=0,Ce){return{element:I,triggerName:m,fromState:f,toState:w,phaseName:B,totalTime:X,disabled:!!Ce}}function Vn(I,m,f){let w=I.get(m);return w||I.set(m,w=f),w}function Cr(I){const m=I.indexOf(":");return[I.substring(1,m),I.slice(m+1)]}let yr=(I,m)=>!1,Rr=(I,m,f)=>[],er=null;function Ht(I){const m=I.parentNode||I.host;return m===er?null:m}(dn()||typeof Element<"u")&&(Wt()?(er=(()=>document.documentElement)(),yr=(I,m)=>{for(;m;){if(m===I)return!0;m=Ht(m)}return!1}):yr=(I,m)=>I.contains(m),Rr=(I,m,f)=>{if(f)return Array.from(I.querySelectorAll(m));const w=I.querySelector(m);return w?[w]:[]});let nr=null,Nr=!1;const fr=yr,mn=Rr;let On=(()=>{class I{validateStyleProperty(f){return function _i(I){nr||(nr=function _r(){return typeof document<"u"?document.body:null}()||{},Nr=!!nr.style&&"WebkitAppearance"in nr.style);let m=!0;return nr.style&&!function tr(I){return"ebkit"==I.substring(1,6)}(I)&&(m=I in nr.style,!m&&Nr&&(m="Webkit"+I.charAt(0).toUpperCase()+I.slice(1)in nr.style)),m}(f)}matchesElement(f,w){return!1}containsElement(f,w){return fr(f,w)}getParentElement(f){return Ht(f)}query(f,w,B){return mn(f,w,B)}computeStyle(f,w,B){return B||""}animate(f,w,B,X,Ce,Le=[],ot){return new S.ZN(B,X)}}return I.\u0275fac=function(f){return new(f||I)},I.\u0275prov=c.Yz7({token:I,factory:I.\u0275fac}),I})(),wr=(()=>{class I{}return I.NOOP=new On,I})();const zt="ng-enter",Ve="ng-leave",tt="ng-trigger",St=".ng-trigger",Rn="ng-animating",Jn=".ng-animating";function Je(I){if("number"==typeof I)return I;const m=I.match(/^(-?[\.\d]+)(m?s)/);return!m||m.length<2?0:J(parseFloat(m[1]),m[2])}function J(I,m){return"s"===m?1e3*I:I}function ge(I,m,f){return I.hasOwnProperty("duration")?I:function Xe(I,m,f){let B,X=0,Ce="";if("string"==typeof I){const Le=I.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Le)return m.push(de()),{duration:0,delay:0,easing:""};B=J(parseFloat(Le[1]),Le[2]);const ot=Le[3];null!=ot&&(X=J(parseFloat(ot),Le[4]));const kt=Le[5];kt&&(Ce=kt)}else B=I;if(!f){let Le=!1,ot=m.length;B<0&&(m.push(function Ae(){return new c.vHH(3100,!1)}()),Le=!0),X<0&&(m.push(function _e(){return new c.vHH(3101,!1)}()),Le=!0),Le&&m.splice(ot,0,de())}return{duration:B,delay:X,easing:Ce}}(I,m,f)}function _t(I,m={}){return Object.keys(I).forEach(f=>{m[f]=I[f]}),m}function ln(I){const m=new Map;return Object.keys(I).forEach(f=>{m.set(f,I[f])}),m}function $e(I,m=new Map,f){if(f)for(let[w,B]of f)m.set(w,B);for(let[w,B]of I)m.set(w,B);return m}function De(I,m,f){return f?m+":"+f+";":""}function ie(I){let m="";for(let f=0;f<I.style.length;f++){const w=I.style.item(f);m+=De(0,w,I.style.getPropertyValue(w))}for(const f in I.style)I.style.hasOwnProperty(f)&&!f.startsWith("_")&&(m+=De(0,Ke(f),I.style[f]));I.setAttribute("style",m)}function we(I,m,f){I.style&&(m.forEach((w,B)=>{const X=me(B);f&&!f.has(B)&&f.set(B,I.style[X]),I.style[X]=w}),dn()&&ie(I))}function ut(I,m){I.style&&(m.forEach((f,w)=>{const B=me(w);I.style[B]=""}),dn()&&ie(I))}function Bt(I){return Array.isArray(I)?1==I.length?I[0]:(0,S.vP)(I):I}const hn=new RegExp("{{\\s*(.+?)\\s*}}","g");function Se(I){let m=[];if("string"==typeof I){let f;for(;f=hn.exec(I);)m.push(f[1]);hn.lastIndex=0}return m}function Y(I,m,f){const w=I.toString(),B=w.replace(hn,(X,Ce)=>{let Le=m[Ce];return null==Le&&(f.push(function Fe(I){return new c.vHH(3003,!1)}()),Le=""),Le.toString()});return B==w?I:B}function W(I){const m=[];let f=I.next();for(;!f.done;)m.push(f.value),f=I.next();return m}const te=/-+([a-z0-9])/g;function me(I){return I.replace(te,(...m)=>m[1].toUpperCase())}function Ke(I){return I.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Fn(I,m,f){switch(m.type){case 7:return I.visitTrigger(m,f);case 0:return I.visitState(m,f);case 1:return I.visitTransition(m,f);case 2:return I.visitSequence(m,f);case 3:return I.visitGroup(m,f);case 4:return I.visitAnimate(m,f);case 5:return I.visitKeyframes(m,f);case 6:return I.visitStyle(m,f);case 8:return I.visitReference(m,f);case 9:return I.visitAnimateChild(m,f);case 10:return I.visitAnimateRef(m,f);case 11:return I.visitQuery(m,f);case 12:return I.visitStagger(m,f);default:throw function pe(I){return new c.vHH(3004,!1)}()}}function Gr(I,m){return window.getComputedStyle(I)[m]}function Oi(I,m){const f=[];return"string"==typeof I?I.split(/\s*,\s*/).forEach(w=>function ri(I,m,f){if(":"==I[0]){const ot=function ss(I,m){switch(I){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(f,w)=>parseFloat(w)>parseFloat(f);case":decrement":return(f,w)=>parseFloat(w)<parseFloat(f);default:return m.push(function qe(I){return new c.vHH(3016,!1)}()),"* => *"}}(I,f);if("function"==typeof ot)return void m.push(ot);I=ot}const w=I.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==w||w.length<4)return f.push(function Pt(I){return new c.vHH(3015,!1)}()),m;const B=w[1],X=w[2],Ce=w[3];m.push(At(B,Ce));"<"==X[0]&&!("*"==B&&"*"==Ce)&&m.push(At(Ce,B))}(w,f,m)):f.push(I),f}const Tr=new Set(["true","1"]),Ie=new Set(["false","0"]);function At(I,m){const f=Tr.has(I)||Ie.has(I),w=Tr.has(m)||Ie.has(m);return(B,X)=>{let Ce="*"==I||I==B,Le="*"==m||m==X;return!Ce&&f&&"boolean"==typeof B&&(Ce=B?Tr.has(I):Ie.has(I)),!Le&&w&&"boolean"==typeof X&&(Le=X?Tr.has(m):Ie.has(m)),Ce&&Le}}const ke=new RegExp("s*:selfs*,?","g");function yt(I,m,f,w){return new Xt(I).build(m,f,w)}class Xt{constructor(m){this._driver=m}build(m,f,w){const B=new Fr(f);return this._resetContextStyleTimingState(B),Fn(this,Bt(m),B)}_resetContextStyleTimingState(m){m.currentQuerySelector="",m.collectedStyles=new Map,m.collectedStyles.set("",new Map),m.currentTime=0}visitTrigger(m,f){let w=f.queryCount=0,B=f.depCount=0;const X=[],Ce=[];return"@"==m.name.charAt(0)&&f.errors.push(function Pe(){return new c.vHH(3006,!1)}()),m.definitions.forEach(Le=>{if(this._resetContextStyleTimingState(f),0==Le.type){const ot=Le,kt=ot.name;kt.toString().split(/\s*,\s*/).forEach(Dn=>{ot.name=Dn,X.push(this.visitState(ot,f))}),ot.name=kt}else if(1==Le.type){const ot=this.visitTransition(Le,f);w+=ot.queryCount,B+=ot.depCount,Ce.push(ot)}else f.errors.push(function st(){return new c.vHH(3007,!1)}())}),{type:7,name:m.name,states:X,transitions:Ce,queryCount:w,depCount:B,options:null}}visitState(m,f){const w=this.visitStyle(m.styles,f),B=m.options&&m.options.params||null;if(w.containsDynamicStyles){const X=new Set,Ce=B||{};w.styles.forEach(Le=>{Le instanceof Map&&Le.forEach(ot=>{Se(ot).forEach(kt=>{Ce.hasOwnProperty(kt)||X.add(kt)})})}),X.size&&(W(X.values()),f.errors.push(function mt(I,m){return new c.vHH(3008,!1)}()))}return{type:0,name:m.name,style:w,options:B?{params:B}:null}}visitTransition(m,f){f.queryCount=0,f.depCount=0;const w=Fn(this,Bt(m.animation),f);return{type:1,matchers:Oi(m.expr,f.errors),animation:w,queryCount:f.queryCount,depCount:f.depCount,options:ki(m.options)}}visitSequence(m,f){return{type:2,steps:m.steps.map(w=>Fn(this,w,f)),options:ki(m.options)}}visitGroup(m,f){const w=f.currentTime;let B=0;const X=m.steps.map(Ce=>{f.currentTime=w;const Le=Fn(this,Ce,f);return B=Math.max(B,f.currentTime),Le});return f.currentTime=B,{type:3,steps:X,options:ki(m.options)}}visitAnimate(m,f){const w=function ms(I,m){if(I.hasOwnProperty("duration"))return I;if("number"==typeof I)return xs(ge(I,m).duration,0,"");const f=I;if(f.split(/\s+/).some(X=>"{"==X.charAt(0)&&"{"==X.charAt(1))){const X=xs(0,0,"");return X.dynamic=!0,X.strValue=f,X}const B=ge(f,m);return xs(B.duration,B.delay,B.easing)}(m.timings,f.errors);f.currentAnimateTimings=w;let B,X=m.styles?m.styles:(0,S.oB)({});if(5==X.type)B=this.visitKeyframes(X,f);else{let Ce=m.styles,Le=!1;if(!Ce){Le=!0;const kt={};w.easing&&(kt.easing=w.easing),Ce=(0,S.oB)(kt)}f.currentTime+=w.duration+w.delay;const ot=this.visitStyle(Ce,f);ot.isEmptyStep=Le,B=ot}return f.currentAnimateTimings=null,{type:4,timings:w,style:B,options:null}}visitStyle(m,f){const w=this._makeStyleAst(m,f);return this._validateStyleAst(w,f),w}_makeStyleAst(m,f){const w=[],B=Array.isArray(m.styles)?m.styles:[m.styles];for(let Le of B)"string"==typeof Le?Le===S.l3?w.push(Le):f.errors.push(new c.vHH(3002,!1)):w.push(ln(Le));let X=!1,Ce=null;return w.forEach(Le=>{if(Le instanceof Map&&(Le.has("easing")&&(Ce=Le.get("easing"),Le.delete("easing")),!X))for(let ot of Le.values())if(ot.toString().indexOf("{{")>=0){X=!0;break}}),{type:6,styles:w,easing:Ce,offset:m.offset,containsDynamicStyles:X,options:null}}_validateStyleAst(m,f){const w=f.currentAnimateTimings;let B=f.currentTime,X=f.currentTime;w&&X>0&&(X-=w.duration+w.delay),m.styles.forEach(Ce=>{"string"!=typeof Ce&&Ce.forEach((Le,ot)=>{const kt=f.collectedStyles.get(f.currentQuerySelector),Dn=kt.get(ot);let Sn=!0;Dn&&(X!=B&&X>=Dn.startTime&&B<=Dn.endTime&&(f.errors.push(function gt(I,m,f,w,B){return new c.vHH(3010,!1)}()),Sn=!1),X=Dn.startTime),Sn&&kt.set(ot,{startTime:X,endTime:B}),f.options&&function gn(I,m,f){const w=m.params||{},B=Se(I);B.length&&B.forEach(X=>{w.hasOwnProperty(X)||f.push(function fe(I){return new c.vHH(3001,!1)}())})}(Le,f.options,f.errors)})})}visitKeyframes(m,f){const w={type:5,styles:[],options:null};if(!f.currentAnimateTimings)return f.errors.push(function ft(){return new c.vHH(3011,!1)}()),w;let X=0;const Ce=[];let Le=!1,ot=!1,kt=0;const Dn=m.steps.map(Vr=>{const ns=this._makeStyleAst(Vr,f);let eo=null!=ns.offset?ns.offset:function gi(I){if("string"==typeof I)return null;let m=null;if(Array.isArray(I))I.forEach(f=>{if(f instanceof Map&&f.has("offset")){const w=f;m=parseFloat(w.get("offset")),w.delete("offset")}});else if(I instanceof Map&&I.has("offset")){const f=I;m=parseFloat(f.get("offset")),f.delete("offset")}return m}(ns.styles),Fs=0;return null!=eo&&(X++,Fs=ns.offset=eo),ot=ot||Fs<0||Fs>1,Le=Le||Fs<kt,kt=Fs,Ce.push(Fs),ns});ot&&f.errors.push(function Ye(){return new c.vHH(3012,!1)}()),Le&&f.errors.push(function Gt(){return new c.vHH(3200,!1)}());const Sn=m.steps.length;let lr=0;X>0&&X<Sn?f.errors.push(function Ge(){return new c.vHH(3202,!1)}()):0==X&&(lr=1/(Sn-1));const Qn=Sn-1,xn=f.currentTime,gr=f.currentAnimateTimings,di=gr.duration;return Dn.forEach((Vr,ns)=>{const eo=lr>0?ns==Qn?1:lr*ns:Ce[ns],Fs=eo*di;f.currentTime=xn+gr.delay+Fs,gr.duration=Fs,this._validateStyleAst(Vr,f),Vr.offset=eo,w.styles.push(Vr)}),w}visitReference(m,f){return{type:8,animation:Fn(this,Bt(m.animation),f),options:ki(m.options)}}visitAnimateChild(m,f){return f.depCount++,{type:9,options:ki(m.options)}}visitAnimateRef(m,f){return{type:10,animation:this.visitReference(m.animation,f),options:ki(m.options)}}visitQuery(m,f){const w=f.currentQuerySelector,B=m.options||{};f.queryCount++,f.currentQuery=m;const[X,Ce]=function dr(I){const m=!!I.split(/\s*,\s*/).find(f=>":self"==f);return m&&(I=I.replace(ke,"")),I=I.replace(/@\*/g,St).replace(/@\w+/g,f=>St+"-"+f.slice(1)).replace(/:animating/g,Jn),[I,m]}(m.selector);f.currentQuerySelector=w.length?w+" "+X:X,Vn(f.collectedStyles,f.currentQuerySelector,new Map);const Le=Fn(this,Bt(m.animation),f);return f.currentQuery=null,f.currentQuerySelector=w,{type:11,selector:X,limit:B.limit||0,optional:!!B.optional,includeSelf:Ce,animation:Le,originalSelector:m.selector,options:ki(m.options)}}visitStagger(m,f){f.currentQuery||f.errors.push(function Me(){return new c.vHH(3013,!1)}());const w="full"===m.timings?{duration:0,delay:0,easing:"full"}:ge(m.timings,f.errors,!0);return{type:12,animation:Fn(this,Bt(m.animation),f),timings:w,options:null}}}class Fr{constructor(m){this.errors=m,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ki(I){return I?(I=_t(I)).params&&(I.params=function pi(I){return I?_t(I):null}(I.params)):I={},I}function xs(I,m,f){return{duration:I,delay:m,easing:f}}function mi(I,m,f,w,B,X,Ce=null,Le=!1){return{type:1,element:I,keyframes:m,preStyleProps:f,postStyleProps:w,duration:B,delay:X,totalTime:B+X,easing:Ce,subTimeline:Le}}class no{constructor(){this._map=new Map}get(m){return this._map.get(m)||[]}append(m,f){let w=this._map.get(m);w||this._map.set(m,w=[]),w.push(...f)}has(m){return this._map.has(m)}clear(){this._map.clear()}}const Eo=new RegExp(":enter","g"),os=new RegExp(":leave","g");function at(I,m,f,w,B,X=new Map,Ce=new Map,Le,ot,kt=[]){return(new et).buildKeyframes(I,m,f,w,B,X,Ce,Le,ot,kt)}class et{buildKeyframes(m,f,w,B,X,Ce,Le,ot,kt,Dn=[]){kt=kt||new no;const Sn=new Ut(m,f,kt,B,X,Dn,[]);Sn.options=ot;const lr=ot.delay?Je(ot.delay):0;Sn.currentTimeline.delayNextStep(lr),Sn.currentTimeline.setStyles([Ce],null,Sn.errors,ot),Fn(this,w,Sn);const Qn=Sn.timelines.filter(xn=>xn.containsAnimation());if(Qn.length&&Le.size){let xn;for(let gr=Qn.length-1;gr>=0;gr--){const di=Qn[gr];if(di.element===f){xn=di;break}}xn&&!xn.allowOnlyTimelineStyles()&&xn.setStyles([Le],null,Sn.errors,ot)}return Qn.length?Qn.map(xn=>xn.buildKeyframes()):[mi(f,[],[],[],0,lr,"",!1)]}visitTrigger(m,f){}visitState(m,f){}visitTransition(m,f){}visitAnimateChild(m,f){const w=f.subInstructions.get(f.element);if(w){const B=f.createSubContext(m.options),X=f.currentTimeline.currentTime,Ce=this._visitSubInstructions(w,B,B.options);X!=Ce&&f.transformIntoNewTimeline(Ce)}f.previousNode=m}visitAnimateRef(m,f){const w=f.createSubContext(m.options);w.transformIntoNewTimeline(),this._applyAnimationRefDelays([m.options,m.animation.options],f,w),this.visitReference(m.animation,w),f.transformIntoNewTimeline(w.currentTimeline.currentTime),f.previousNode=m}_applyAnimationRefDelays(m,f,w){for(const B of m){const X=B?.delay;if(X){const Ce="number"==typeof X?X:Je(Y(X,B?.params??{},f.errors));w.delayNextStep(Ce)}}}_visitSubInstructions(m,f,w){let X=f.currentTimeline.currentTime;const Ce=null!=w.duration?Je(w.duration):null,Le=null!=w.delay?Je(w.delay):null;return 0!==Ce&&m.forEach(ot=>{const kt=f.appendInstructionToTimeline(ot,Ce,Le);X=Math.max(X,kt.duration+kt.delay)}),X}visitReference(m,f){f.updateOptions(m.options,!0),Fn(this,m.animation,f),f.previousNode=m}visitSequence(m,f){const w=f.subContextCount;let B=f;const X=m.options;if(X&&(X.params||X.delay)&&(B=f.createSubContext(X),B.transformIntoNewTimeline(),null!=X.delay)){6==B.previousNode.type&&(B.currentTimeline.snapshotCurrentStyles(),B.previousNode=bt);const Ce=Je(X.delay);B.delayNextStep(Ce)}m.steps.length&&(m.steps.forEach(Ce=>Fn(this,Ce,B)),B.currentTimeline.applyStylesToKeyframe(),B.subContextCount>w&&B.transformIntoNewTimeline()),f.previousNode=m}visitGroup(m,f){const w=[];let B=f.currentTimeline.currentTime;const X=m.options&&m.options.delay?Je(m.options.delay):0;m.steps.forEach(Ce=>{const Le=f.createSubContext(m.options);X&&Le.delayNextStep(X),Fn(this,Ce,Le),B=Math.max(B,Le.currentTimeline.currentTime),w.push(Le.currentTimeline)}),w.forEach(Ce=>f.currentTimeline.mergeTimelineCollectedStyles(Ce)),f.transformIntoNewTimeline(B),f.previousNode=m}_visitTiming(m,f){if(m.dynamic){const w=m.strValue;return ge(f.params?Y(w,f.params,f.errors):w,f.errors)}return{duration:m.duration,delay:m.delay,easing:m.easing}}visitAnimate(m,f){const w=f.currentAnimateTimings=this._visitTiming(m.timings,f),B=f.currentTimeline;w.delay&&(f.incrementTime(w.delay),B.snapshotCurrentStyles());const X=m.style;5==X.type?this.visitKeyframes(X,f):(f.incrementTime(w.duration),this.visitStyle(X,f),B.applyStylesToKeyframe()),f.currentAnimateTimings=null,f.previousNode=m}visitStyle(m,f){const w=f.currentTimeline,B=f.currentAnimateTimings;!B&&w.hasCurrentStyleProperties()&&w.forwardFrame();const X=B&&B.easing||m.easing;m.isEmptyStep?w.applyEmptyStep(X):w.setStyles(m.styles,X,f.errors,f.options),f.previousNode=m}visitKeyframes(m,f){const w=f.currentAnimateTimings,B=f.currentTimeline.duration,X=w.duration,Le=f.createSubContext().currentTimeline;Le.easing=w.easing,m.styles.forEach(ot=>{Le.forwardTime((ot.offset||0)*X),Le.setStyles(ot.styles,ot.easing,f.errors,f.options),Le.applyStylesToKeyframe()}),f.currentTimeline.mergeTimelineCollectedStyles(Le),f.transformIntoNewTimeline(B+X),f.previousNode=m}visitQuery(m,f){const w=f.currentTimeline.currentTime,B=m.options||{},X=B.delay?Je(B.delay):0;X&&(6===f.previousNode.type||0==w&&f.currentTimeline.hasCurrentStyleProperties())&&(f.currentTimeline.snapshotCurrentStyles(),f.previousNode=bt);let Ce=w;const Le=f.invokeQuery(m.selector,m.originalSelector,m.limit,m.includeSelf,!!B.optional,f.errors);f.currentQueryTotal=Le.length;let ot=null;Le.forEach((kt,Dn)=>{f.currentQueryIndex=Dn;const Sn=f.createSubContext(m.options,kt);X&&Sn.delayNextStep(X),kt===f.element&&(ot=Sn.currentTimeline),Fn(this,m.animation,Sn),Sn.currentTimeline.applyStylesToKeyframe(),Ce=Math.max(Ce,Sn.currentTimeline.currentTime)}),f.currentQueryIndex=0,f.currentQueryTotal=0,f.transformIntoNewTimeline(Ce),ot&&(f.currentTimeline.mergeTimelineCollectedStyles(ot),f.currentTimeline.snapshotCurrentStyles()),f.previousNode=m}visitStagger(m,f){const w=f.parentContext,B=f.currentTimeline,X=m.timings,Ce=Math.abs(X.duration),Le=Ce*(f.currentQueryTotal-1);let ot=Ce*f.currentQueryIndex;switch(X.duration<0?"reverse":X.easing){case"reverse":ot=Le-ot;break;case"full":ot=w.currentStaggerTime}const Dn=f.currentTimeline;ot&&Dn.delayNextStep(ot);const Sn=Dn.currentTime;Fn(this,m.animation,f),f.previousNode=m,w.currentStaggerTime=B.currentTime-Sn+(B.startTime-w.currentTimeline.startTime)}}const bt={};class Ut{constructor(m,f,w,B,X,Ce,Le,ot){this._driver=m,this.element=f,this.subInstructions=w,this._enterClassName=B,this._leaveClassName=X,this.errors=Ce,this.timelines=Le,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=bt,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=ot||new sn(this._driver,f,0),Le.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(m,f){if(!m)return;const w=m;let B=this.options;null!=w.duration&&(B.duration=Je(w.duration)),null!=w.delay&&(B.delay=Je(w.delay));const X=w.params;if(X){let Ce=B.params;Ce||(Ce=this.options.params={}),Object.keys(X).forEach(Le=>{(!f||!Ce.hasOwnProperty(Le))&&(Ce[Le]=Y(X[Le],Ce,this.errors))})}}_copyOptions(){const m={};if(this.options){const f=this.options.params;if(f){const w=m.params={};Object.keys(f).forEach(B=>{w[B]=f[B]})}}return m}createSubContext(m=null,f,w){const B=f||this.element,X=new Ut(this._driver,B,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(B,w||0));return X.previousNode=this.previousNode,X.currentAnimateTimings=this.currentAnimateTimings,X.options=this._copyOptions(),X.updateOptions(m),X.currentQueryIndex=this.currentQueryIndex,X.currentQueryTotal=this.currentQueryTotal,X.parentContext=this,this.subContextCount++,X}transformIntoNewTimeline(m){return this.previousNode=bt,this.currentTimeline=this.currentTimeline.fork(this.element,m),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(m,f,w){const B={duration:f??m.duration,delay:this.currentTimeline.currentTime+(w??0)+m.delay,easing:""},X=new En(this._driver,m.element,m.keyframes,m.preStyleProps,m.postStyleProps,B,m.stretchStartingKeyframe);return this.timelines.push(X),B}incrementTime(m){this.currentTimeline.forwardTime(this.currentTimeline.duration+m)}delayNextStep(m){m>0&&this.currentTimeline.delayNextStep(m)}invokeQuery(m,f,w,B,X,Ce){let Le=[];if(B&&Le.push(this.element),m.length>0){m=(m=m.replace(Eo,"."+this._enterClassName)).replace(os,"."+this._leaveClassName);let kt=this._driver.query(this.element,m,1!=w);0!==w&&(kt=w<0?kt.slice(kt.length+w,kt.length):kt.slice(0,w)),Le.push(...kt)}return!X&&0==Le.length&&Ce.push(function rt(I){return new c.vHH(3014,!1)}()),Le}}class sn{constructor(m,f,w,B){this._driver=m,this.element=f,this.startTime=w,this._elementTimelineStylesLookup=B,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(f),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(f,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(m){const f=1===this._keyframes.size&&this._pendingStyles.size;this.duration||f?(this.forwardTime(this.currentTime+m),f&&this.snapshotCurrentStyles()):this.startTime+=m}fork(m,f){return this.applyStylesToKeyframe(),new sn(this._driver,m,f||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(m){this.applyStylesToKeyframe(),this.duration=m,this._loadKeyframe()}_updateStyle(m,f){this._localTimelineStyles.set(m,f),this._globalTimelineStyles.set(m,f),this._styleSummary.set(m,{time:this.currentTime,value:f})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(m){m&&this._previousKeyframe.set("easing",m);for(let[f,w]of this._globalTimelineStyles)this._backFill.set(f,w||S.l3),this._currentKeyframe.set(f,S.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(m,f,w,B){f&&this._previousKeyframe.set("easing",f);const X=B&&B.params||{},Ce=function oi(I,m){const f=new Map;let w;return I.forEach(B=>{if("*"===B){w=w||m.keys();for(let X of w)f.set(X,S.l3)}else $e(B,f)}),f}(m,this._globalTimelineStyles);for(let[Le,ot]of Ce){const kt=Y(ot,X,w);this._pendingStyles.set(Le,kt),this._localTimelineStyles.has(Le)||this._backFill.set(Le,this._globalTimelineStyles.get(Le)??S.l3),this._updateStyle(Le,kt)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((m,f)=>{this._currentKeyframe.set(f,m)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((m,f)=>{this._currentKeyframe.has(f)||this._currentKeyframe.set(f,m)}))}snapshotCurrentStyles(){for(let[m,f]of this._localTimelineStyles)this._pendingStyles.set(m,f),this._updateStyle(m,f)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const m=[];for(let f in this._currentKeyframe)m.push(f);return m}mergeTimelineCollectedStyles(m){m._styleSummary.forEach((f,w)=>{const B=this._styleSummary.get(w);(!B||f.time>B.time)&&this._updateStyle(w,f.value)})}buildKeyframes(){this.applyStylesToKeyframe();const m=new Set,f=new Set,w=1===this._keyframes.size&&0===this.duration;let B=[];this._keyframes.forEach((Le,ot)=>{const kt=$e(Le,new Map,this._backFill);kt.forEach((Dn,Sn)=>{Dn===S.k1?m.add(Sn):Dn===S.l3&&f.add(Sn)}),w||kt.set("offset",ot/this.duration),B.push(kt)});const X=m.size?W(m.values()):[],Ce=f.size?W(f.values()):[];if(w){const Le=B[0],ot=new Map(Le);Le.set("offset",0),ot.set("offset",1),B=[Le,ot]}return mi(this.element,B,X,Ce,this.duration,this.startTime,this.easing,!1)}}class En extends sn{constructor(m,f,w,B,X,Ce,Le=!1){super(m,f,Ce.delay),this.keyframes=w,this.preStyleProps=B,this.postStyleProps=X,this._stretchStartingKeyframe=Le,this.timings={duration:Ce.duration,delay:Ce.delay,easing:Ce.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let m=this.keyframes,{delay:f,duration:w,easing:B}=this.timings;if(this._stretchStartingKeyframe&&f){const X=[],Ce=w+f,Le=f/Ce,ot=$e(m[0]);ot.set("offset",0),X.push(ot);const kt=$e(m[0]);kt.set("offset",Yn(Le)),X.push(kt);const Dn=m.length-1;for(let Sn=1;Sn<=Dn;Sn++){let lr=$e(m[Sn]);const Qn=lr.get("offset");lr.set("offset",Yn((f+Qn*w)/Ce)),X.push(lr)}w=Ce,f=0,B="",m=X}return mi(this.element,m,this.preStyleProps,this.postStyleProps,w,f,B,!0)}}function Yn(I,m=3){const f=Math.pow(10,m-1);return Math.round(I*f)/f}class es{}const Bi=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Co extends es{normalizePropertyName(m,f){return me(m)}normalizeStyleValue(m,f,w,B){let X="";const Ce=w.toString().trim();if(Bi.has(f)&&0!==w&&"0"!==w)if("number"==typeof w)X="px";else{const Le=w.match(/^[+-]?[\d\.]+([a-z]*)$/);Le&&0==Le[1].length&&B.push(function be(I,m){return new c.vHH(3005,!1)}())}return Ce+X}}function Vi(I,m,f,w,B,X,Ce,Le,ot,kt,Dn,Sn,lr){return{type:0,element:I,triggerName:m,isRemovalTransition:B,fromState:f,fromStyles:X,toState:w,toStyles:Ce,timelines:Le,queriedElements:ot,preStyleProps:kt,postStyleProps:Dn,totalTime:Sn,errors:lr}}const wi={};class Ho{constructor(m,f,w){this._triggerName=m,this.ast=f,this._stateStyles=w}match(m,f,w,B){return function Ti(I,m,f,w,B){return I.some(X=>X(m,f,w,B))}(this.ast.matchers,m,f,w,B)}buildStyles(m,f,w){let B=this._stateStyles.get("*");return void 0!==m&&(B=this._stateStyles.get(m?.toString())||B),B?B.buildStyles(f,w):new Map}build(m,f,w,B,X,Ce,Le,ot,kt,Dn){const Sn=[],lr=this.ast.options&&this.ast.options.params||wi,xn=this.buildStyles(w,Le&&Le.params||wi,Sn),gr=ot&&ot.params||wi,di=this.buildStyles(B,gr,Sn),Vr=new Set,ns=new Map,eo=new Map,Fs="void"===B,Da={params:Lr(gr,lr),delay:this.ast.options?.delay},to=Dn?[]:at(m,f,this.ast.animation,X,Ce,xn,di,Da,kt,Sn);let mo=0;if(to.forEach(Va=>{mo=Math.max(Va.duration+Va.delay,mo)}),Sn.length)return Vi(f,this._triggerName,w,B,Fs,xn,di,[],[],ns,eo,mo,Sn);to.forEach(Va=>{const Lo=Va.element,Iu=Vn(ns,Lo,new Set);Va.preStyleProps.forEach(lo=>Iu.add(lo));const ll=Vn(eo,Lo,new Set);Va.postStyleProps.forEach(lo=>ll.add(lo)),Lo!==f&&Vr.add(Lo)});const yo=W(Vr.values());return Vi(f,this._triggerName,w,B,Fs,xn,di,to,yo,ns,eo,mo)}}function Lr(I,m){const f=_t(m);for(const w in I)I.hasOwnProperty(w)&&null!=I[w]&&(f[w]=I[w]);return f}class as{constructor(m,f,w){this.styles=m,this.defaultParams=f,this.normalizer=w}buildStyles(m,f){const w=new Map,B=_t(this.defaultParams);return Object.keys(m).forEach(X=>{const Ce=m[X];null!==Ce&&(B[X]=Ce)}),this.styles.styles.forEach(X=>{"string"!=typeof X&&X.forEach((Ce,Le)=>{Ce&&(Ce=Y(Ce,B,f));const ot=this.normalizer.normalizePropertyName(Le,f);Ce=this.normalizer.normalizeStyleValue(Le,ot,Ce,f),w.set(ot,Ce)})}),w}}class Is{constructor(m,f,w){this.name=m,this.ast=f,this._normalizer=w,this.transitionFactories=[],this.states=new Map,f.states.forEach(B=>{this.states.set(B.name,new as(B.style,B.options&&B.options.params||{},w))}),ko(this.states,"true","1"),ko(this.states,"false","0"),f.transitions.forEach(B=>{this.transitionFactories.push(new Ho(m,B,this.states))}),this.fallbackTransition=function Us(I,m,f){return new Ho(I,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Ce,Le)=>!0],options:null,queryCount:0,depCount:0},m)}(m,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(m,f,w,B){return this.transitionFactories.find(Ce=>Ce.match(m,f,w,B))||null}matchStyles(m,f,w){return this.fallbackTransition.buildStyles(m,f,w)}}function ko(I,m,f){I.has(m)?I.has(f)||I.set(f,I.get(m)):I.has(f)&&I.set(m,I.get(f))}const ks=new no;class Jo{constructor(m,f,w){this.bodyNode=m,this._driver=f,this._normalizer=w,this._animations=new Map,this._playersById=new Map,this.players=[]}register(m,f){const w=[],X=yt(this._driver,f,w,[]);if(w.length)throw function pt(I){return new c.vHH(3503,!1)}();this._animations.set(m,X)}_buildPlayer(m,f,w){const B=m.element,X=Ar(0,this._normalizer,0,m.keyframes,f,w);return this._driver.animate(B,X,m.duration,m.delay,m.easing,[],!0)}create(m,f,w={}){const B=[],X=this._animations.get(m);let Ce;const Le=new Map;if(X?(Ce=at(this._driver,f,X,zt,Ve,new Map,new Map,w,ks,B),Ce.forEach(Dn=>{const Sn=Vn(Le,Dn.element,new Map);Dn.postStyleProps.forEach(lr=>Sn.set(lr,null))})):(B.push(function dt(){return new c.vHH(3300,!1)}()),Ce=[]),B.length)throw function Lt(I){return new c.vHH(3504,!1)}();Le.forEach((Dn,Sn)=>{Dn.forEach((lr,Qn)=>{Dn.set(Qn,this._driver.computeStyle(Sn,Qn,S.l3))})});const kt=vr(Ce.map(Dn=>{const Sn=Le.get(Dn.element);return this._buildPlayer(Dn,new Map,Sn)}));return this._playersById.set(m,kt),kt.onDestroy(()=>this.destroy(m)),this.players.push(kt),kt}destroy(m){const f=this._getPlayer(m);f.destroy(),this._playersById.delete(m);const w=this.players.indexOf(f);w>=0&&this.players.splice(w,1)}_getPlayer(m){const f=this._playersById.get(m);if(!f)throw function $t(I){return new c.vHH(3301,!1)}();return f}listen(m,f,w,B){const X=sr(f,"","","");return br(this._getPlayer(m),w,X,B),()=>{}}command(m,f,w,B){if("register"==w)return void this.register(m,B[0]);if("create"==w)return void this.create(m,f,B[0]||{});const X=this._getPlayer(m);switch(w){case"play":X.play();break;case"pause":X.pause();break;case"reset":X.reset();break;case"restart":X.restart();break;case"finish":X.finish();break;case"init":X.init();break;case"setPosition":X.setPosition(parseFloat(B[0]));break;case"destroy":this.destroy(m)}}}const ls="ng-animate-queued",Ei="ng-animate-disabled",Xo=[],Ws={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ci={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Hi="__ng_removed";class Po{constructor(m,f=""){this.namespaceId=f;const w=m&&m.hasOwnProperty("value");if(this.value=function Do(I){return I??null}(w?m.value:m),w){const X=_t(m);delete X.value,this.options=X}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(m){const f=m.params;if(f){const w=this.options.params;Object.keys(f).forEach(B=>{null==w[B]&&(w[B]=f[B])})}}}const Pi="void",Mi=new Po(Pi);class Vs{constructor(m,f,w){this.id=m,this.hostElement=f,this._engine=w,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+m,ue(f,this._hostClassName)}listen(m,f,w,B){if(!this._triggers.has(f))throw function Qt(I,m){return new c.vHH(3302,!1)}();if(null==w||0==w.length)throw function Mn(I){return new c.vHH(3303,!1)}();if(!function ve(I){return"start"==I||"done"==I}(w))throw function cn(I,m){return new c.vHH(3400,!1)}();const X=Vn(this._elementListeners,m,[]),Ce={name:f,phase:w,callback:B};X.push(Ce);const Le=Vn(this._engine.statesByElement,m,new Map);return Le.has(f)||(ue(m,tt),ue(m,tt+"-"+f),Le.set(f,Mi)),()=>{this._engine.afterFlush(()=>{const ot=X.indexOf(Ce);ot>=0&&X.splice(ot,1),this._triggers.has(f)||Le.delete(f)})}}register(m,f){return!this._triggers.has(m)&&(this._triggers.set(m,f),!0)}_getTrigger(m){const f=this._triggers.get(m);if(!f)throw function Rt(I){return new c.vHH(3401,!1)}();return f}trigger(m,f,w,B=!0){const X=this._getTrigger(f),Ce=new $i(this.id,f,m);let Le=this._engine.statesByElement.get(m);Le||(ue(m,tt),ue(m,tt+"-"+f),this._engine.statesByElement.set(m,Le=new Map));let ot=Le.get(f);const kt=new Po(w,this.id);if(!(w&&w.hasOwnProperty("value"))&&ot&&kt.absorbOptions(ot.options),Le.set(f,kt),ot||(ot=Mi),kt.value!==Pi&&ot.value===kt.value){if(!function Ln(I,m){const f=Object.keys(I),w=Object.keys(m);if(f.length!=w.length)return!1;for(let B=0;B<f.length;B++){const X=f[B];if(!m.hasOwnProperty(X)||I[X]!==m[X])return!1}return!0}(ot.params,kt.params)){const gr=[],di=X.matchStyles(ot.value,ot.params,gr),Vr=X.matchStyles(kt.value,kt.params,gr);gr.length?this._engine.reportError(gr):this._engine.afterFlush(()=>{ut(m,di),we(m,Vr)})}return}const lr=Vn(this._engine.playersByElement,m,[]);lr.forEach(gr=>{gr.namespaceId==this.id&&gr.triggerName==f&&gr.queued&&gr.destroy()});let Qn=X.matchTransition(ot.value,kt.value,m,kt.params),xn=!1;if(!Qn){if(!B)return;Qn=X.fallbackTransition,xn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:m,triggerName:f,transition:Qn,fromState:ot,toState:kt,player:Ce,isFallbackTransition:xn}),xn||(ue(m,ls),Ce.onStart(()=>{Ze(m,ls)})),Ce.onDone(()=>{let gr=this.players.indexOf(Ce);gr>=0&&this.players.splice(gr,1);const di=this._engine.playersByElement.get(m);if(di){let Vr=di.indexOf(Ce);Vr>=0&&di.splice(Vr,1)}}),this.players.push(Ce),lr.push(Ce),Ce}deregister(m){this._triggers.delete(m),this._engine.statesByElement.forEach(f=>f.delete(m)),this._elementListeners.forEach((f,w)=>{this._elementListeners.set(w,f.filter(B=>B.name!=m))})}clearElementCache(m){this._engine.statesByElement.delete(m),this._elementListeners.delete(m);const f=this._engine.playersByElement.get(m);f&&(f.forEach(w=>w.destroy()),this._engine.playersByElement.delete(m))}_signalRemovalForInnerTriggers(m,f){const w=this._engine.driver.query(m,St,!0);w.forEach(B=>{if(B[Hi])return;const X=this._engine.fetchNamespacesByElement(B);X.size?X.forEach(Ce=>Ce.triggerLeaveAnimation(B,f,!1,!0)):this.clearElementCache(B)}),this._engine.afterFlushAnimationsDone(()=>w.forEach(B=>this.clearElementCache(B)))}triggerLeaveAnimation(m,f,w,B){const X=this._engine.statesByElement.get(m),Ce=new Map;if(X){const Le=[];if(X.forEach((ot,kt)=>{if(Ce.set(kt,ot.value),this._triggers.has(kt)){const Dn=this.trigger(m,kt,Pi,B);Dn&&Le.push(Dn)}}),Le.length)return this._engine.markElementAsRemoved(this.id,m,!0,f,Ce),w&&vr(Le).onDone(()=>this._engine.processLeaveNode(m)),!0}return!1}prepareLeaveAnimationListeners(m){const f=this._elementListeners.get(m),w=this._engine.statesByElement.get(m);if(f&&w){const B=new Set;f.forEach(X=>{const Ce=X.name;if(B.has(Ce))return;B.add(Ce);const ot=this._triggers.get(Ce).fallbackTransition,kt=w.get(Ce)||Mi,Dn=new Po(Pi),Sn=new $i(this.id,Ce,m);this._engine.totalQueuedPlayers++,this._queue.push({element:m,triggerName:Ce,transition:ot,fromState:kt,toState:Dn,player:Sn,isFallbackTransition:!0})})}}removeNode(m,f){const w=this._engine;if(m.childElementCount&&this._signalRemovalForInnerTriggers(m,f),this.triggerLeaveAnimation(m,f,!0))return;let B=!1;if(w.totalAnimations){const X=w.players.length?w.playersByQueriedElement.get(m):[];if(X&&X.length)B=!0;else{let Ce=m;for(;Ce=Ce.parentNode;)if(w.statesByElement.get(Ce)){B=!0;break}}}if(this.prepareLeaveAnimationListeners(m),B)w.markElementAsRemoved(this.id,m,!1,f);else{const X=m[Hi];(!X||X===Ws)&&(w.afterFlush(()=>this.clearElementCache(m)),w.destroyInnerAnimations(m),w._onRemovalComplete(m,f))}}insertNode(m,f){ue(m,this._hostClassName)}drainQueuedTransitions(m){const f=[];return this._queue.forEach(w=>{const B=w.player;if(B.destroyed)return;const X=w.element,Ce=this._elementListeners.get(X);Ce&&Ce.forEach(Le=>{if(Le.name==w.triggerName){const ot=sr(X,w.triggerName,w.fromState.value,w.toState.value);ot._data=m,br(w.player,Le.phase,ot,Le.callback)}}),B.markedForDestroy?this._engine.afterFlush(()=>{B.destroy()}):f.push(w)}),this._queue=[],f.sort((w,B)=>{const X=w.transition.ast.depCount,Ce=B.transition.ast.depCount;return 0==X||0==Ce?X-Ce:this._engine.driver.containsElement(w.element,B.element)?1:-1})}destroy(m){this.players.forEach(f=>f.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,m)}elementContainsData(m){let f=!1;return this._elementListeners.has(m)&&(f=!0),f=!!this._queue.find(w=>w.element===m)||f,f}}class ho{constructor(m,f,w){this.bodyNode=m,this.driver=f,this._normalizer=w,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(B,X)=>{}}_onRemovalComplete(m,f){this.onRemovalComplete(m,f)}get queuedPlayers(){const m=[];return this._namespaceList.forEach(f=>{f.players.forEach(w=>{w.queued&&m.push(w)})}),m}createNamespace(m,f){const w=new Vs(m,f,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,f)?this._balanceNamespaceList(w,f):(this.newHostElements.set(f,w),this.collectEnterElement(f)),this._namespaceLookup[m]=w}_balanceNamespaceList(m,f){const w=this._namespaceList,B=this.namespacesByHostElement;if(w.length-1>=0){let Ce=!1,Le=this.driver.getParentElement(f);for(;Le;){const ot=B.get(Le);if(ot){const kt=w.indexOf(ot);w.splice(kt+1,0,m),Ce=!0;break}Le=this.driver.getParentElement(Le)}Ce||w.unshift(m)}else w.push(m);return B.set(f,m),m}register(m,f){let w=this._namespaceLookup[m];return w||(w=this.createNamespace(m,f)),w}registerTrigger(m,f,w){let B=this._namespaceLookup[m];B&&B.register(f,w)&&this.totalAnimations++}destroy(m,f){if(!m)return;const w=this._fetchNamespace(m);this.afterFlush(()=>{this.namespacesByHostElement.delete(w.hostElement),delete this._namespaceLookup[m];const B=this._namespaceList.indexOf(w);B>=0&&this._namespaceList.splice(B,1)}),this.afterFlushAnimationsDone(()=>w.destroy(f))}_fetchNamespace(m){return this._namespaceLookup[m]}fetchNamespacesByElement(m){const f=new Set,w=this.statesByElement.get(m);if(w)for(let B of w.values())if(B.namespaceId){const X=this._fetchNamespace(B.namespaceId);X&&f.add(X)}return f}trigger(m,f,w,B){if(_s(f)){const X=this._fetchNamespace(m);if(X)return X.trigger(f,w,B),!0}return!1}insertNode(m,f,w,B){if(!_s(f))return;const X=f[Hi];if(X&&X.setForRemoval){X.setForRemoval=!1,X.setForMove=!0;const Ce=this.collectedLeaveElements.indexOf(f);Ce>=0&&this.collectedLeaveElements.splice(Ce,1)}if(m){const Ce=this._fetchNamespace(m);Ce&&Ce.insertNode(f,w)}B&&this.collectEnterElement(f)}collectEnterElement(m){this.collectedEnterElements.push(m)}markElementAsDisabled(m,f){f?this.disabledNodes.has(m)||(this.disabledNodes.add(m),ue(m,Ei)):this.disabledNodes.has(m)&&(this.disabledNodes.delete(m),Ze(m,Ei))}removeNode(m,f,w,B){if(_s(f)){const X=m?this._fetchNamespace(m):null;if(X?X.removeNode(f,B):this.markElementAsRemoved(m,f,!1,B),w){const Ce=this.namespacesByHostElement.get(f);Ce&&Ce.id!==m&&Ce.removeNode(f,B)}}else this._onRemovalComplete(f,B)}markElementAsRemoved(m,f,w,B,X){this.collectedLeaveElements.push(f),f[Hi]={namespaceId:m,setForRemoval:B,hasAnimation:w,removedBeforeQueried:!1,previousTriggersValues:X}}listen(m,f,w,B,X){return _s(f)?this._fetchNamespace(m).listen(f,w,B,X):()=>{}}_buildInstruction(m,f,w,B,X){return m.transition.build(this.driver,m.element,m.fromState.value,m.toState.value,w,B,m.fromState.options,m.toState.options,f,X)}destroyInnerAnimations(m){let f=this.driver.query(m,St,!0);f.forEach(w=>this.destroyActiveAnimationsForElement(w)),0!=this.playersByQueriedElement.size&&(f=this.driver.query(m,Jn,!0),f.forEach(w=>this.finishActiveQueriedAnimationOnElement(w)))}destroyActiveAnimationsForElement(m){const f=this.playersByElement.get(m);f&&f.forEach(w=>{w.queued?w.markedForDestroy=!0:w.destroy()})}finishActiveQueriedAnimationOnElement(m){const f=this.playersByQueriedElement.get(m);f&&f.forEach(w=>w.finish())}whenRenderingDone(){return new Promise(m=>{if(this.players.length)return vr(this.players).onDone(()=>m());m()})}processLeaveNode(m){const f=m[Hi];if(f&&f.setForRemoval){if(m[Hi]=Ws,f.namespaceId){this.destroyInnerAnimations(m);const w=this._fetchNamespace(f.namespaceId);w&&w.clearElementCache(m)}this._onRemovalComplete(m,f.setForRemoval)}m.classList?.contains(Ei)&&this.markElementAsDisabled(m,!1),this.driver.query(m,".ng-animate-disabled",!0).forEach(w=>{this.markElementAsDisabled(w,!1)})}flush(m=-1){let f=[];if(this.newHostElements.size&&(this.newHostElements.forEach((w,B)=>this._balanceNamespaceList(w,B)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let w=0;w<this.collectedEnterElements.length;w++)ue(this.collectedEnterElements[w],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const w=[];try{f=this._flushAnimations(w,m)}finally{for(let B=0;B<w.length;B++)w[B]()}}else for(let w=0;w<this.collectedLeaveElements.length;w++)this.processLeaveNode(this.collectedLeaveElements[w]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(w=>w()),this._flushFns=[],this._whenQuietFns.length){const w=this._whenQuietFns;this._whenQuietFns=[],f.length?vr(f).onDone(()=>{w.forEach(B=>B())}):w.forEach(B=>B())}}reportError(m){throw function Pn(I){return new c.vHH(3402,!1)}()}_flushAnimations(m,f){const w=new no,B=[],X=new Map,Ce=[],Le=new Map,ot=new Map,kt=new Map,Dn=new Set;this.disabledNodes.forEach(An=>{Dn.add(An);const mr=this.driver.query(An,".ng-animate-queued",!0);for(let Dr=0;Dr<mr.length;Dr++)Dn.add(mr[Dr])});const Sn=this.bodyNode,lr=Array.from(this.statesByElement.keys()),Qn=Q(lr,this.collectedEnterElements),xn=new Map;let gr=0;Qn.forEach((An,mr)=>{const Dr=zt+gr++;xn.set(mr,Dr),An.forEach(hi=>ue(hi,Dr))});const di=[],Vr=new Set,ns=new Set;for(let An=0;An<this.collectedLeaveElements.length;An++){const mr=this.collectedLeaveElements[An],Dr=mr[Hi];Dr&&Dr.setForRemoval&&(di.push(mr),Vr.add(mr),Dr.hasAnimation?this.driver.query(mr,".ng-star-inserted",!0).forEach(hi=>Vr.add(hi)):ns.add(mr))}const eo=new Map,Fs=Q(lr,Array.from(Vr));Fs.forEach((An,mr)=>{const Dr=Ve+gr++;eo.set(mr,Dr),An.forEach(hi=>ue(hi,Dr))}),m.push(()=>{Qn.forEach((An,mr)=>{const Dr=xn.get(mr);An.forEach(hi=>Ze(hi,Dr))}),Fs.forEach((An,mr)=>{const Dr=eo.get(mr);An.forEach(hi=>Ze(hi,Dr))}),di.forEach(An=>{this.processLeaveNode(An)})});const Da=[],to=[];for(let An=this._namespaceList.length-1;An>=0;An--)this._namespaceList[An].drainQueuedTransitions(f).forEach(Dr=>{const hi=Dr.player,_o=Dr.element;if(Da.push(hi),this.collectedEnterElements.length){const x=_o[Hi];if(x&&x.setForMove){if(x.previousTriggersValues&&x.previousTriggersValues.has(Dr.triggerName)){const re=x.previousTriggersValues.get(Dr.triggerName),ye=this.statesByElement.get(Dr.element);if(ye&&ye.has(Dr.triggerName)){const vt=ye.get(Dr.triggerName);vt.value=re,ye.set(Dr.triggerName,vt)}}return void hi.destroy()}}const xo=!Sn||!this.driver.containsElement(Sn,_o),oa=eo.get(_o),Qa=xn.get(_o),C=this._buildInstruction(Dr,w,Qa,oa,xo);if(C.errors&&C.errors.length)return void to.push(C);if(xo)return hi.onStart(()=>ut(_o,C.fromStyles)),hi.onDestroy(()=>we(_o,C.toStyles)),void B.push(hi);if(Dr.isFallbackTransition)return hi.onStart(()=>ut(_o,C.fromStyles)),hi.onDestroy(()=>we(_o,C.toStyles)),void B.push(hi);const y=[];C.timelines.forEach(x=>{x.stretchStartingKeyframe=!0,this.disabledNodes.has(x.element)||y.push(x)}),C.timelines=y,w.append(_o,C.timelines),Ce.push({instruction:C,player:hi,element:_o}),C.queriedElements.forEach(x=>Vn(Le,x,[]).push(hi)),C.preStyleProps.forEach((x,re)=>{if(x.size){let ye=ot.get(re);ye||ot.set(re,ye=new Set),x.forEach((vt,Yt)=>ye.add(Yt))}}),C.postStyleProps.forEach((x,re)=>{let ye=kt.get(re);ye||kt.set(re,ye=new Set),x.forEach((vt,Yt)=>ye.add(Yt))})});if(to.length){const An=[];to.forEach(mr=>{An.push(function Nn(I,m){return new c.vHH(3505,!1)}())}),Da.forEach(mr=>mr.destroy()),this.reportError(An)}const mo=new Map,yo=new Map;Ce.forEach(An=>{const mr=An.element;w.has(mr)&&(yo.set(mr,mr),this._beforeAnimationBuild(An.player.namespaceId,An.instruction,mo))}),B.forEach(An=>{const mr=An.element;this._getPreviousPlayers(mr,!1,An.namespaceId,An.triggerName,null).forEach(hi=>{Vn(mo,mr,[]).push(hi),hi.destroy()})});const Va=di.filter(An=>jn(An,ot,kt)),Lo=new Map;P(Lo,this.driver,ns,kt,S.l3).forEach(An=>{jn(An,ot,kt)&&Va.push(An)});const ll=new Map;Qn.forEach((An,mr)=>{P(ll,this.driver,new Set(An),ot,S.k1)}),Va.forEach(An=>{const mr=Lo.get(An),Dr=ll.get(An);Lo.set(An,new Map([...Array.from(mr?.entries()??[]),...Array.from(Dr?.entries()??[])]))});const lo=[],vl=[],Tu={};Ce.forEach(An=>{const{element:mr,player:Dr,instruction:hi}=An;if(w.has(mr)){if(Dn.has(mr))return Dr.onDestroy(()=>we(mr,hi.toStyles)),Dr.disabled=!0,Dr.overrideTotalTime(hi.totalTime),void B.push(Dr);let _o=Tu;if(yo.size>1){let oa=mr;const Qa=[];for(;oa=oa.parentNode;){const C=yo.get(oa);if(C){_o=C;break}Qa.push(oa)}Qa.forEach(C=>yo.set(C,_o))}const xo=this._buildAnimation(Dr.namespaceId,hi,mo,X,ll,Lo);if(Dr.setRealPlayer(xo),_o===Tu)lo.push(Dr);else{const oa=this.playersByElement.get(_o);oa&&oa.length&&(Dr.parentPlayer=vr(oa)),B.push(Dr)}}else ut(mr,hi.fromStyles),Dr.onDestroy(()=>we(mr,hi.toStyles)),vl.push(Dr),Dn.has(mr)&&B.push(Dr)}),vl.forEach(An=>{const mr=X.get(An.element);if(mr&&mr.length){const Dr=vr(mr);An.setRealPlayer(Dr)}}),B.forEach(An=>{An.parentPlayer?An.syncPlayerEvents(An.parentPlayer):An.destroy()});for(let An=0;An<di.length;An++){const mr=di[An],Dr=mr[Hi];if(Ze(mr,Ve),Dr&&Dr.hasAnimation)continue;let hi=[];if(Le.size){let xo=Le.get(mr);xo&&xo.length&&hi.push(...xo);let oa=this.driver.query(mr,Jn,!0);for(let Qa=0;Qa<oa.length;Qa++){let C=Le.get(oa[Qa]);C&&C.length&&hi.push(...C)}}const _o=hi.filter(xo=>!xo.destroyed);_o.length?Et(this,mr,_o):this.processLeaveNode(mr)}return di.length=0,lo.forEach(An=>{this.players.push(An),An.onDone(()=>{An.destroy();const mr=this.players.indexOf(An);this.players.splice(mr,1)}),An.play()}),lo}elementContainsData(m,f){let w=!1;const B=f[Hi];return B&&B.setForRemoval&&(w=!0),this.playersByElement.has(f)&&(w=!0),this.playersByQueriedElement.has(f)&&(w=!0),this.statesByElement.has(f)&&(w=!0),this._fetchNamespace(m).elementContainsData(f)||w}afterFlush(m){this._flushFns.push(m)}afterFlushAnimationsDone(m){this._whenQuietFns.push(m)}_getPreviousPlayers(m,f,w,B,X){let Ce=[];if(f){const Le=this.playersByQueriedElement.get(m);Le&&(Ce=Le)}else{const Le=this.playersByElement.get(m);if(Le){const ot=!X||X==Pi;Le.forEach(kt=>{kt.queued||!ot&&kt.triggerName!=B||Ce.push(kt)})}}return(w||B)&&(Ce=Ce.filter(Le=>!(w&&w!=Le.namespaceId||B&&B!=Le.triggerName))),Ce}_beforeAnimationBuild(m,f,w){const X=f.element,Ce=f.isRemovalTransition?void 0:m,Le=f.isRemovalTransition?void 0:f.triggerName;for(const ot of f.timelines){const kt=ot.element,Dn=kt!==X,Sn=Vn(w,kt,[]);this._getPreviousPlayers(kt,Dn,Ce,Le,f.toState).forEach(Qn=>{const xn=Qn.getRealPlayer();xn.beforeDestroy&&xn.beforeDestroy(),Qn.destroy(),Sn.push(Qn)})}ut(X,f.fromStyles)}_buildAnimation(m,f,w,B,X,Ce){const Le=f.triggerName,ot=f.element,kt=[],Dn=new Set,Sn=new Set,lr=f.timelines.map(xn=>{const gr=xn.element;Dn.add(gr);const di=gr[Hi];if(di&&di.removedBeforeQueried)return new S.ZN(xn.duration,xn.delay);const Vr=gr!==ot,ns=function Vt(I){const m=[];return fn(I,m),m}((w.get(gr)||Xo).map(mo=>mo.getRealPlayer())).filter(mo=>!!mo.element&&mo.element===gr),eo=X.get(gr),Fs=Ce.get(gr),Da=Ar(0,this._normalizer,0,xn.keyframes,eo,Fs),to=this._buildPlayer(xn,Da,ns);if(xn.subTimeline&&B&&Sn.add(gr),Vr){const mo=new $i(m,Le,gr);mo.setRealPlayer(to),kt.push(mo)}return to});kt.forEach(xn=>{Vn(this.playersByQueriedElement,xn.element,[]).push(xn),xn.onDone(()=>function Hr(I,m,f){let w=I.get(m);if(w){if(w.length){const B=w.indexOf(f);w.splice(B,1)}0==w.length&&I.delete(m)}return w}(this.playersByQueriedElement,xn.element,xn))}),Dn.forEach(xn=>ue(xn,Rn));const Qn=vr(lr);return Qn.onDestroy(()=>{Dn.forEach(xn=>Ze(xn,Rn)),we(ot,f.toStyles)}),Sn.forEach(xn=>{Vn(B,xn,[]).push(Qn)}),Qn}_buildPlayer(m,f,w){return f.length>0?this.driver.animate(m.element,f,m.duration,m.delay,m.easing,w):new S.ZN(m.duration,m.delay)}}class $i{constructor(m,f,w){this.namespaceId=m,this.triggerName=f,this.element=w,this._player=new S.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(m){this._containsRealPlayer||(this._player=m,this._queuedCallbacks.forEach((f,w)=>{f.forEach(B=>br(m,w,void 0,B))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(m.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(m){this.totalTime=m}syncPlayerEvents(m){const f=this._player;f.triggerCallback&&m.onStart(()=>f.triggerCallback("start")),m.onDone(()=>this.finish()),m.onDestroy(()=>this.destroy())}_queueEvent(m,f){Vn(this._queuedCallbacks,m,[]).push(f)}onDone(m){this.queued&&this._queueEvent("done",m),this._player.onDone(m)}onStart(m){this.queued&&this._queueEvent("start",m),this._player.onStart(m)}onDestroy(m){this.queued&&this._queueEvent("destroy",m),this._player.onDestroy(m)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(m){this.queued||this._player.setPosition(m)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(m){const f=this._player;f.triggerCallback&&f.triggerCallback(m)}}function _s(I){return I&&1===I.nodeType}function L(I,m){const f=I.style.display;return I.style.display=m??"none",f}function P(I,m,f,w,B){const X=[];f.forEach(ot=>X.push(L(ot)));const Ce=[];w.forEach((ot,kt)=>{const Dn=new Map;ot.forEach(Sn=>{const lr=m.computeStyle(kt,Sn,B);Dn.set(Sn,lr),(!lr||0==lr.length)&&(kt[Hi]=Ci,Ce.push(kt))}),I.set(kt,Dn)});let Le=0;return f.forEach(ot=>L(ot,X[Le++])),Ce}function Q(I,m){const f=new Map;if(I.forEach(Le=>f.set(Le,[])),0==m.length)return f;const B=new Set(m),X=new Map;function Ce(Le){if(!Le)return 1;let ot=X.get(Le);if(ot)return ot;const kt=Le.parentNode;return ot=f.has(kt)?kt:B.has(kt)?1:Ce(kt),X.set(Le,ot),ot}return m.forEach(Le=>{const ot=Ce(Le);1!==ot&&f.get(ot).push(Le)}),f}function ue(I,m){I.classList?.add(m)}function Ze(I,m){I.classList?.remove(m)}function Et(I,m,f){vr(f).onDone(()=>I.processLeaveNode(m))}function fn(I,m){for(let f=0;f<I.length;f++){const w=I[f];w instanceof S.ZE?fn(w.players,m):m.push(w)}}function jn(I,m,f){const w=f.get(I);if(!w)return!1;let B=m.get(I);return B?w.forEach(X=>B.add(X)):m.set(I,w),f.delete(I),!0}class zn{constructor(m,f,w){this.bodyNode=m,this._driver=f,this._normalizer=w,this._triggerCache={},this.onRemovalComplete=(B,X)=>{},this._transitionEngine=new ho(m,f,w),this._timelineEngine=new Jo(m,f,w),this._transitionEngine.onRemovalComplete=(B,X)=>this.onRemovalComplete(B,X)}registerTrigger(m,f,w,B,X){const Ce=m+"-"+B;let Le=this._triggerCache[Ce];if(!Le){const ot=[],Dn=yt(this._driver,X,ot,[]);if(ot.length)throw function We(I,m){return new c.vHH(3404,!1)}();Le=function ai(I,m,f){return new Is(I,m,f)}(B,Dn,this._normalizer),this._triggerCache[Ce]=Le}this._transitionEngine.registerTrigger(f,B,Le)}register(m,f){this._transitionEngine.register(m,f)}destroy(m,f){this._transitionEngine.destroy(m,f)}onInsert(m,f,w,B){this._transitionEngine.insertNode(m,f,w,B)}onRemove(m,f,w,B){this._transitionEngine.removeNode(m,f,B||!1,w)}disableAnimations(m,f){this._transitionEngine.markElementAsDisabled(m,f)}process(m,f,w,B){if("@"==w.charAt(0)){const[X,Ce]=Cr(w);this._timelineEngine.command(X,f,Ce,B)}else this._transitionEngine.trigger(m,f,w,B)}listen(m,f,w,B,X){if("@"==w.charAt(0)){const[Ce,Le]=Cr(w);return this._timelineEngine.listen(Ce,f,Le,X)}return this._transitionEngine.listen(m,f,w,B,X)}flush(m=-1){this._transitionEngine.flush(m)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let jt=(()=>{class I{constructor(f,w,B){this._element=f,this._startStyles=w,this._endStyles=B,this._state=0;let X=I.initialStylesByElement.get(f);X||I.initialStylesByElement.set(f,X=new Map),this._initialStyles=X}start(){this._state<1&&(this._startStyles&&we(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(we(this._element,this._initialStyles),this._endStyles&&(we(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(I.initialStylesByElement.delete(this._element),this._startStyles&&(ut(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ut(this._element,this._endStyles),this._endStyles=null),we(this._element,this._initialStyles),this._state=3)}}return I.initialStylesByElement=new WeakMap,I})();function Xn(I){let m=null;return I.forEach((f,w)=>{(function cs(I){return"display"===I||"position"===I})(w)&&(m=m||new Map,m.set(w,f))}),m}class qs{constructor(m,f,w,B){this.element=m,this.keyframes=f,this.options=w,this._specialStyles=B,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=w.duration,this._delay=w.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(m=>m()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const m=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,m,this.options),this._finalKeyframe=m.length?m[m.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(m){const f=[];return m.forEach(w=>{f.push(Object.fromEntries(w))}),f}_triggerWebAnimation(m,f,w){return m.animate(this._convertKeyframesToObject(f),w)}onStart(m){this._originalOnStartFns.push(m),this._onStartFns.push(m)}onDone(m){this._originalOnDoneFns.push(m),this._onDoneFns.push(m)}onDestroy(m){this._onDestroyFns.push(m)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(m=>m()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(m=>m()),this._onDestroyFns=[])}setPosition(m){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=m*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const m=new Map;this.hasStarted()&&this._finalKeyframe.forEach((w,B)=>{"offset"!==B&&m.set(B,this._finished?w:Gr(this.element,B))}),this.currentSnapshot=m}triggerCallback(m){const f="start"===m?this._onStartFns:this._onDoneFns;f.forEach(w=>w()),f.length=0}}class Ri{validateStyleProperty(m){return!0}validateAnimatableStyleProperty(m){return!0}matchesElement(m,f){return!1}containsElement(m,f){return fr(m,f)}getParentElement(m){return Ht(m)}query(m,f,w){return mn(m,f,w)}computeStyle(m,f,w){return window.getComputedStyle(m)[f]}animate(m,f,w,B,X,Ce=[]){const ot={duration:w,delay:B,fill:0==B?"both":"forwards"};X&&(ot.easing=X);const kt=new Map,Dn=Ce.filter(Qn=>Qn instanceof qs);(function Ft(I,m){return 0===I||0===m})(w,B)&&Dn.forEach(Qn=>{Qn.currentSnapshot.forEach((xn,gr)=>kt.set(gr,xn))});let Sn=function Ne(I){return I.length?I[0]instanceof Map?I:I.map(m=>ln(m)):[]}(f).map(Qn=>$e(Qn));Sn=function on(I,m,f){if(f.size&&m.length){let w=m[0],B=[];if(f.forEach((X,Ce)=>{w.has(Ce)||B.push(Ce),w.set(Ce,X)}),B.length)for(let X=1;X<m.length;X++){let Ce=m[X];B.forEach(Le=>Ce.set(Le,Gr(I,Le)))}}return m}(m,Sn,kt);const lr=function us(I,m){let f=null,w=null;return Array.isArray(m)&&m.length?(f=Xn(m[0]),m.length>1&&(w=Xn(m[m.length-1]))):m instanceof Map&&(f=Xn(m)),f||w?new jt(I,f,w):null}(m,Sn);return new qs(m,Sn,ot,lr)}}var ei=k(6895);let $o=(()=>{class I extends S._j{constructor(f,w){super(),this._nextAnimationId=0,this._renderer=f.createRenderer(w.body,{id:"0",encapsulation:c.ifc.None,styles:[],data:{animation:[]}})}build(f){const w=this._nextAnimationId.toString();this._nextAnimationId++;const B=Array.isArray(f)?(0,S.vP)(f):f;return Zo(this._renderer,null,w,"register",[B]),new Ts(w,this._renderer)}}return I.\u0275fac=function(f){return new(f||I)(c.LFG(c.FYo),c.LFG(ei.K0))},I.\u0275prov=c.Yz7({token:I,factory:I.\u0275fac}),I})();class Ts extends S.LC{constructor(m,f){super(),this._id=m,this._renderer=f}create(m,f){return new Ks(this._id,m,f||{},this._renderer)}}class Ks{constructor(m,f,w,B){this.id=m,this.element=f,this._renderer=B,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",w)}_listen(m,f){return this._renderer.listen(this.element,`@@${this.id}:${m}`,f)}_command(m,...f){return Zo(this._renderer,this.element,this.id,m,f)}onDone(m){this._listen("done",m)}onStart(m){this._listen("start",m)}onDestroy(m){this._listen("destroy",m)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(m){this._command("setPosition",m)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Zo(I,m,f,w,B){return I.setProperty(m,`@@${f}:${w}`,B)}const fo="@.disabled";let G=(()=>{class I{constructor(f,w,B){this.delegate=f,this.engine=w,this._zone=B,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),w.onRemovalComplete=(X,Ce)=>{const Le=Ce?.parentNode(X);Le&&Ce.removeChild(Le,X)}}createRenderer(f,w){const X=this.delegate.createRenderer(f,w);if(!(f&&w&&w.data&&w.data.animation)){let Dn=this._rendererCache.get(X);return Dn||(Dn=new H("",X,this.engine),this._rendererCache.set(X,Dn)),Dn}const Ce=w.id,Le=w.id+"-"+this._currentId;this._currentId++,this.engine.register(Le,f);const ot=Dn=>{Array.isArray(Dn)?Dn.forEach(ot):this.engine.registerTrigger(Ce,Le,f,Dn.name,Dn)};return w.data.animation.forEach(ot),new U(this,Le,X,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(f,w,B){f>=0&&f<this._microtaskId?this._zone.run(()=>w(B)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(X=>{const[Ce,Le]=X;Ce(Le)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([w,B]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return I.\u0275fac=function(f){return new(f||I)(c.LFG(c.FYo),c.LFG(zn),c.LFG(c.R0b))},I.\u0275prov=c.Yz7({token:I,factory:I.\u0275fac}),I})();class H{constructor(m,f,w){this.namespaceId=m,this.delegate=f,this.engine=w,this.destroyNode=this.delegate.destroyNode?B=>f.destroyNode(B):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(m,f){return this.delegate.createElement(m,f)}createComment(m){return this.delegate.createComment(m)}createText(m){return this.delegate.createText(m)}appendChild(m,f){this.delegate.appendChild(m,f),this.engine.onInsert(this.namespaceId,f,m,!1)}insertBefore(m,f,w,B=!0){this.delegate.insertBefore(m,f,w),this.engine.onInsert(this.namespaceId,f,m,B)}removeChild(m,f,w){this.engine.onRemove(this.namespaceId,f,this.delegate,w)}selectRootElement(m,f){return this.delegate.selectRootElement(m,f)}parentNode(m){return this.delegate.parentNode(m)}nextSibling(m){return this.delegate.nextSibling(m)}setAttribute(m,f,w,B){this.delegate.setAttribute(m,f,w,B)}removeAttribute(m,f,w){this.delegate.removeAttribute(m,f,w)}addClass(m,f){this.delegate.addClass(m,f)}removeClass(m,f){this.delegate.removeClass(m,f)}setStyle(m,f,w,B){this.delegate.setStyle(m,f,w,B)}removeStyle(m,f,w){this.delegate.removeStyle(m,f,w)}setProperty(m,f,w){"@"==f.charAt(0)&&f==fo?this.disableAnimations(m,!!w):this.delegate.setProperty(m,f,w)}setValue(m,f){this.delegate.setValue(m,f)}listen(m,f,w){return this.delegate.listen(m,f,w)}disableAnimations(m,f){this.engine.disableAnimations(m,f)}}class U extends H{constructor(m,f,w,B){super(f,w,B),this.factory=m,this.namespaceId=f}setProperty(m,f,w){"@"==f.charAt(0)?"."==f.charAt(1)&&f==fo?this.disableAnimations(m,w=void 0===w||!!w):this.engine.process(this.namespaceId,m,f.slice(1),w):this.delegate.setProperty(m,f,w)}listen(m,f,w){if("@"==f.charAt(0)){const B=function he(I){switch(I){case"body":return document.body;case"document":return document;case"window":return window;default:return I}}(m);let X=f.slice(1),Ce="";return"@"!=X.charAt(0)&&([X,Ce]=function Ot(I){const m=I.indexOf(".");return[I.substring(0,m),I.slice(m+1)]}(X)),this.engine.listen(this.namespaceId,B,X,Ce,Le=>{this.factory.scheduleListenerCallback(Le._data||-1,w,Le)})}return this.delegate.listen(m,f,w)}}const Ss=[{provide:S._j,useClass:$o},{provide:es,useFactory:function Jr(){return new Co}},{provide:zn,useClass:(()=>{class I extends zn{constructor(f,w,B,X){super(f.body,w,B)}ngOnDestroy(){this.flush()}}return I.\u0275fac=function(f){return new(f||I)(c.LFG(ei.K0),c.LFG(wr),c.LFG(es),c.LFG(c.z2F))},I.\u0275prov=c.Yz7({token:I,factory:I.\u0275fac}),I})()},{provide:c.FYo,useFactory:function Ps(I,m,f){return new G(I,m,f)},deps:[h.se,zn,c.R0b]}],io=[{provide:wr,useFactory:()=>new Ri},{provide:c.QbO,useValue:"BrowserAnimations"},...Ss],zo=[{provide:wr,useClass:On},{provide:c.QbO,useValue:"NoopAnimations"},...Ss];let Ys=(()=>{class I{static withConfig(f){return{ngModule:I,providers:f.disableAnimations?zo:io}}}return I.\u0275fac=function(f){return new(f||I)},I.\u0275mod=c.oAB({type:I}),I.\u0275inj=c.cJS({providers:io,imports:[h.b2]}),I})();var Ro=k(9646),pa=k(9751),so=k(4351),$a=k(9300),No=k(4004);class Za{}class R{}class ee{constructor(m){this.normalizedNames=new Map,this.lazyUpdate=null,m?this.lazyInit="string"==typeof m?()=>{this.headers=new Map,m.split("\n").forEach(f=>{const w=f.indexOf(":");if(w>0){const B=f.slice(0,w),X=B.toLowerCase(),Ce=f.slice(w+1).trim();this.maybeSetNormalizedName(B,X),this.headers.has(X)?this.headers.get(X).push(Ce):this.headers.set(X,[Ce])}})}:()=>{this.headers=new Map,Object.keys(m).forEach(f=>{let w=m[f];const B=f.toLowerCase();"string"==typeof w&&(w=[w]),w.length>0&&(this.headers.set(B,w),this.maybeSetNormalizedName(f,B))})}:this.headers=new Map}has(m){return this.init(),this.headers.has(m.toLowerCase())}get(m){this.init();const f=this.headers.get(m.toLowerCase());return f&&f.length>0?f[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(m){return this.init(),this.headers.get(m.toLowerCase())||null}append(m,f){return this.clone({name:m,value:f,op:"a"})}set(m,f){return this.clone({name:m,value:f,op:"s"})}delete(m,f){return this.clone({name:m,value:f,op:"d"})}maybeSetNormalizedName(m,f){this.normalizedNames.has(f)||this.normalizedNames.set(f,m)}init(){this.lazyInit&&(this.lazyInit instanceof ee?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(m=>this.applyUpdate(m)),this.lazyUpdate=null))}copyFrom(m){m.init(),Array.from(m.headers.keys()).forEach(f=>{this.headers.set(f,m.headers.get(f)),this.normalizedNames.set(f,m.normalizedNames.get(f))})}clone(m){const f=new ee;return f.lazyInit=this.lazyInit&&this.lazyInit instanceof ee?this.lazyInit:this,f.lazyUpdate=(this.lazyUpdate||[]).concat([m]),f}applyUpdate(m){const f=m.name.toLowerCase();switch(m.op){case"a":case"s":let w=m.value;if("string"==typeof w&&(w=[w]),0===w.length)return;this.maybeSetNormalizedName(m.name,f);const B=("a"===m.op?this.headers.get(f):void 0)||[];B.push(...w),this.headers.set(f,B);break;case"d":const X=m.value;if(X){let Ce=this.headers.get(f);if(!Ce)return;Ce=Ce.filter(Le=>-1===X.indexOf(Le)),0===Ce.length?(this.headers.delete(f),this.normalizedNames.delete(f)):this.headers.set(f,Ce)}else this.headers.delete(f),this.normalizedNames.delete(f)}}forEach(m){this.init(),Array.from(this.normalizedNames.keys()).forEach(f=>m(this.normalizedNames.get(f),this.headers.get(f)))}}class le{encodeKey(m){return Bn(m)}encodeValue(m){return Bn(m)}decodeKey(m){return decodeURIComponent(m)}decodeValue(m){return decodeURIComponent(m)}}const Ct=/%(\d[a-f0-9])/gi,Nt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Bn(I){return encodeURIComponent(I).replace(Ct,(m,f)=>Nt[f]??m)}function $r(I){return`${I}`}class Or{constructor(m={}){if(this.updates=null,this.cloneFrom=null,this.encoder=m.encoder||new le,m.fromString){if(m.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Ue(I,m){const f=new Map;return I.length>0&&I.replace(/^\?/,"").split("&").forEach(B=>{const X=B.indexOf("="),[Ce,Le]=-1==X?[m.decodeKey(B),""]:[m.decodeKey(B.slice(0,X)),m.decodeValue(B.slice(X+1))],ot=f.get(Ce)||[];ot.push(Le),f.set(Ce,ot)}),f}(m.fromString,this.encoder)}else m.fromObject?(this.map=new Map,Object.keys(m.fromObject).forEach(f=>{const w=m.fromObject[f],B=Array.isArray(w)?w.map($r):[$r(w)];this.map.set(f,B)})):this.map=null}has(m){return this.init(),this.map.has(m)}get(m){this.init();const f=this.map.get(m);return f?f[0]:null}getAll(m){return this.init(),this.map.get(m)||null}keys(){return this.init(),Array.from(this.map.keys())}append(m,f){return this.clone({param:m,value:f,op:"a"})}appendAll(m){const f=[];return Object.keys(m).forEach(w=>{const B=m[w];Array.isArray(B)?B.forEach(X=>{f.push({param:w,value:X,op:"a"})}):f.push({param:w,value:B,op:"a"})}),this.clone(f)}set(m,f){return this.clone({param:m,value:f,op:"s"})}delete(m,f){return this.clone({param:m,value:f,op:"d"})}toString(){return this.init(),this.keys().map(m=>{const f=this.encoder.encodeKey(m);return this.map.get(m).map(w=>f+"="+this.encoder.encodeValue(w)).join("&")}).filter(m=>""!==m).join("&")}clone(m){const f=new Or({encoder:this.encoder});return f.cloneFrom=this.cloneFrom||this,f.updates=(this.updates||[]).concat(m),f}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(m=>this.map.set(m,this.cloneFrom.map.get(m))),this.updates.forEach(m=>{switch(m.op){case"a":case"s":const f=("a"===m.op?this.map.get(m.param):void 0)||[];f.push($r(m.value)),this.map.set(m.param,f);break;case"d":if(void 0===m.value){this.map.delete(m.param);break}{let w=this.map.get(m.param)||[];const B=w.indexOf($r(m.value));-1!==B&&w.splice(B,1),w.length>0?this.map.set(m.param,w):this.map.delete(m.param)}}}),this.cloneFrom=this.updates=null)}}class Wr{constructor(){this.map=new Map}set(m,f){return this.map.set(m,f),this}get(m){return this.map.has(m)||this.map.set(m,m.defaultValue()),this.map.get(m)}delete(m){return this.map.delete(m),this}has(m){return this.map.has(m)}keys(){return this.map.keys()}}function qr(I){return typeof ArrayBuffer<"u"&&I instanceof ArrayBuffer}function Ni(I){return typeof Blob<"u"&&I instanceof Blob}function Io(I){return typeof FormData<"u"&&I instanceof FormData}class ts{constructor(m,f,w,B){let X;if(this.url=f,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=m.toUpperCase(),function ds(I){switch(I){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||B?(this.body=void 0!==w?w:null,X=B):X=w,X&&(this.reportProgress=!!X.reportProgress,this.withCredentials=!!X.withCredentials,X.responseType&&(this.responseType=X.responseType),X.headers&&(this.headers=X.headers),X.context&&(this.context=X.context),X.params&&(this.params=X.params)),this.headers||(this.headers=new ee),this.context||(this.context=new Wr),this.params){const Ce=this.params.toString();if(0===Ce.length)this.urlWithParams=f;else{const Le=f.indexOf("?");this.urlWithParams=f+(-1===Le?"?":Le<f.length-1?"&":"")+Ce}}else this.params=new Or,this.urlWithParams=f}serializeBody(){return null===this.body?null:qr(this.body)||Ni(this.body)||Io(this.body)||function ci(I){return typeof URLSearchParams<"u"&&I instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Or?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Io(this.body)?null:Ni(this.body)?this.body.type||null:qr(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Or?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(m={}){const f=m.method||this.method,w=m.url||this.url,B=m.responseType||this.responseType,X=void 0!==m.body?m.body:this.body,Ce=void 0!==m.withCredentials?m.withCredentials:this.withCredentials,Le=void 0!==m.reportProgress?m.reportProgress:this.reportProgress;let ot=m.headers||this.headers,kt=m.params||this.params;const Dn=m.context??this.context;return void 0!==m.setHeaders&&(ot=Object.keys(m.setHeaders).reduce((Sn,lr)=>Sn.set(lr,m.setHeaders[lr]),ot)),m.setParams&&(kt=Object.keys(m.setParams).reduce((Sn,lr)=>Sn.set(lr,m.setParams[lr]),kt)),new ts(f,w,X,{params:kt,headers:ot,context:Dn,reportProgress:Le,responseType:B,withCredentials:Ce})}}var Kr=(()=>((Kr=Kr||{})[Kr.Sent=0]="Sent",Kr[Kr.UploadProgress=1]="UploadProgress",Kr[Kr.ResponseHeader=2]="ResponseHeader",Kr[Kr.DownloadProgress=3]="DownloadProgress",Kr[Kr.Response=4]="Response",Kr[Kr.User=5]="User",Kr))();class vs{constructor(m,f=200,w="OK"){this.headers=m.headers||new ee,this.status=void 0!==m.status?m.status:f,this.statusText=m.statusText||w,this.url=m.url||null,this.ok=this.status>=200&&this.status<300}}class Rs extends vs{constructor(m={}){super(m),this.type=Kr.ResponseHeader}clone(m={}){return new Rs({headers:m.headers||this.headers,status:void 0!==m.status?m.status:this.status,statusText:m.statusText||this.statusText,url:m.url||this.url||void 0})}}class tn extends vs{constructor(m={}){super(m),this.type=Kr.Response,this.body=void 0!==m.body?m.body:null}clone(m={}){return new tn({body:void 0!==m.body?m.body:this.body,headers:m.headers||this.headers,status:void 0!==m.status?m.status:this.status,statusText:m.statusText||this.statusText,url:m.url||this.url||void 0})}}class Zi extends vs{constructor(m){super(m,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${m.url||"(unknown url)"}`:`Http failure response for ${m.url||"(unknown url)"}: ${m.status} ${m.statusText}`,this.error=m.error||null}}function li(I,m){return{body:m,headers:I.headers,context:I.context,observe:I.observe,params:I.params,reportProgress:I.reportProgress,responseType:I.responseType,withCredentials:I.withCredentials}}let ga=(()=>{class I{constructor(f){this.handler=f}request(f,w,B={}){let X;if(f instanceof ts)X=f;else{let ot,kt;ot=B.headers instanceof ee?B.headers:new ee(B.headers),B.params&&(kt=B.params instanceof Or?B.params:new Or({fromObject:B.params})),X=new ts(f,w,void 0!==B.body?B.body:null,{headers:ot,context:B.context,params:kt,reportProgress:B.reportProgress,responseType:B.responseType||"json",withCredentials:B.withCredentials})}const Ce=(0,Ro.of)(X).pipe((0,so.b)(ot=>this.handler.handle(ot)));if(f instanceof ts||"events"===B.observe)return Ce;const Le=Ce.pipe((0,$a.h)(ot=>ot instanceof tn));switch(B.observe||"body"){case"body":switch(X.responseType){case"arraybuffer":return Le.pipe((0,No.U)(ot=>{if(null!==ot.body&&!(ot.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return ot.body}));case"blob":return Le.pipe((0,No.U)(ot=>{if(null!==ot.body&&!(ot.body instanceof Blob))throw new Error("Response is not a Blob.");return ot.body}));case"text":return Le.pipe((0,No.U)(ot=>{if(null!==ot.body&&"string"!=typeof ot.body)throw new Error("Response is not a string.");return ot.body}));default:return Le.pipe((0,No.U)(ot=>ot.body))}case"response":return Le;default:throw new Error(`Unreachable: unhandled observe type ${B.observe}}`)}}delete(f,w={}){return this.request("DELETE",f,w)}get(f,w={}){return this.request("GET",f,w)}head(f,w={}){return this.request("HEAD",f,w)}jsonp(f,w){return this.request("JSONP",f,{params:(new Or).append(w,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(f,w={}){return this.request("OPTIONS",f,w)}patch(f,w,B={}){return this.request("PATCH",f,li(B,w))}post(f,w,B={}){return this.request("POST",f,li(B,w))}put(f,w,B={}){return this.request("PUT",f,li(B,w))}}return I.\u0275fac=function(f){return new(f||I)(c.LFG(Za))},I.\u0275prov=c.Yz7({token:I,factory:I.\u0275fac}),I})();class Wn{constructor(m,f){this.next=m,this.interceptor=f}handle(m){return this.interceptor.intercept(m,this.next)}}const or=new c.OlP("HTTP_INTERCEPTORS");let gl=(()=>{class I{intercept(f,w){return w.handle(f)}}return I.\u0275fac=function(f){return new(f||I)},I.\u0275prov=c.Yz7({token:I,factory:I.\u0275fac}),I})();const ta=/^\)\]\}',?\n/;let La=(()=>{class I{constructor(f){this.xhrFactory=f}handle(f){if("JSONP"===f.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new pa.y(w=>{const B=this.xhrFactory.build();if(B.open(f.method,f.urlWithParams),f.withCredentials&&(B.withCredentials=!0),f.headers.forEach((Qn,xn)=>B.setRequestHeader(Qn,xn.join(","))),f.headers.has("Accept")||B.setRequestHeader("Accept","application/json, text/plain, */*"),!f.headers.has("Content-Type")){const Qn=f.detectContentTypeHeader();null!==Qn&&B.setRequestHeader("Content-Type",Qn)}if(f.responseType){const Qn=f.responseType.toLowerCase();B.responseType="json"!==Qn?Qn:"text"}const X=f.serializeBody();let Ce=null;const Le=()=>{if(null!==Ce)return Ce;const Qn=B.statusText||"OK",xn=new ee(B.getAllResponseHeaders()),gr=function ml(I){return"responseURL"in I&&I.responseURL?I.responseURL:/^X-Request-URL:/m.test(I.getAllResponseHeaders())?I.getResponseHeader("X-Request-URL"):null}(B)||f.url;return Ce=new Rs({headers:xn,status:B.status,statusText:Qn,url:gr}),Ce},ot=()=>{let{headers:Qn,status:xn,statusText:gr,url:di}=Le(),Vr=null;204!==xn&&(Vr=typeof B.response>"u"?B.responseText:B.response),0===xn&&(xn=Vr?200:0);let ns=xn>=200&&xn<300;if("json"===f.responseType&&"string"==typeof Vr){const eo=Vr;Vr=Vr.replace(ta,"");try{Vr=""!==Vr?JSON.parse(Vr):null}catch(Fs){Vr=eo,ns&&(ns=!1,Vr={error:Fs,text:Vr})}}ns?(w.next(new tn({body:Vr,headers:Qn,status:xn,statusText:gr,url:di||void 0})),w.complete()):w.error(new Zi({error:Vr,headers:Qn,status:xn,statusText:gr,url:di||void 0}))},kt=Qn=>{const{url:xn}=Le(),gr=new Zi({error:Qn,status:B.status||0,statusText:B.statusText||"Unknown Error",url:xn||void 0});w.error(gr)};let Dn=!1;const Sn=Qn=>{Dn||(w.next(Le()),Dn=!0);let xn={type:Kr.DownloadProgress,loaded:Qn.loaded};Qn.lengthComputable&&(xn.total=Qn.total),"text"===f.responseType&&!!B.responseText&&(xn.partialText=B.responseText),w.next(xn)},lr=Qn=>{let xn={type:Kr.UploadProgress,loaded:Qn.loaded};Qn.lengthComputable&&(xn.total=Qn.total),w.next(xn)};return B.addEventListener("load",ot),B.addEventListener("error",kt),B.addEventListener("timeout",kt),B.addEventListener("abort",kt),f.reportProgress&&(B.addEventListener("progress",Sn),null!==X&&B.upload&&B.upload.addEventListener("progress",lr)),B.send(X),w.next({type:Kr.Sent}),()=>{B.removeEventListener("error",kt),B.removeEventListener("abort",kt),B.removeEventListener("load",ot),B.removeEventListener("timeout",kt),f.reportProgress&&(B.removeEventListener("progress",Sn),null!==X&&B.upload&&B.upload.removeEventListener("progress",lr)),B.readyState!==B.DONE&&B.abort()}})}}return I.\u0275fac=function(f){return new(f||I)(c.LFG(ei.JF))},I.\u0275prov=c.Yz7({token:I,factory:I.\u0275fac}),I})();const za=new c.OlP("XSRF_COOKIE_NAME"),nl=new c.OlP("XSRF_HEADER_NAME");class Fi{}let Er=(()=>{class I{constructor(f,w,B){this.doc=f,this.platform=w,this.cookieName=B,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const f=this.doc.cookie||"";return f!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,ei.Mx)(f,this.cookieName),this.lastCookieString=f),this.lastToken}}return I.\u0275fac=function(f){return new(f||I)(c.LFG(ei.K0),c.LFG(c.Lbi),c.LFG(za))},I.\u0275prov=c.Yz7({token:I,factory:I.\u0275fac}),I})(),qi=(()=>{class I{constructor(f,w){this.tokenService=f,this.headerName=w}intercept(f,w){const B=f.url.toLowerCase();if("GET"===f.method||"HEAD"===f.method||B.startsWith("http://")||B.startsWith("https://"))return w.handle(f);const X=this.tokenService.getToken();return null!==X&&!f.headers.has(this.headerName)&&(f=f.clone({headers:f.headers.set(this.headerName,X)})),w.handle(f)}}return I.\u0275fac=function(f){return new(f||I)(c.LFG(Fi),c.LFG(nl))},I.\u0275prov=c.Yz7({token:I,factory:I.\u0275fac}),I})(),Ga=(()=>{class I{constructor(f,w){this.backend=f,this.injector=w,this.chain=null}handle(f){if(null===this.chain){const w=this.injector.get(or,[]);this.chain=w.reduceRight((B,X)=>new Wn(B,X),this.backend)}return this.chain.handle(f)}}return I.\u0275fac=function(f){return new(f||I)(c.LFG(R),c.LFG(c.zs3))},I.\u0275prov=c.Yz7({token:I,factory:I.\u0275fac}),I})(),Sa=(()=>{class I{static disable(){return{ngModule:I,providers:[{provide:qi,useClass:gl}]}}static withOptions(f={}){return{ngModule:I,providers:[f.cookieName?{provide:za,useValue:f.cookieName}:[],f.headerName?{provide:nl,useValue:f.headerName}:[]]}}}return I.\u0275fac=function(f){return new(f||I)},I.\u0275mod=c.oAB({type:I}),I.\u0275inj=c.cJS({providers:[qi,{provide:or,useExisting:qi,multi:!0},{provide:Fi,useClass:Er},{provide:za,useValue:"XSRF-TOKEN"},{provide:nl,useValue:"X-XSRF-TOKEN"}]}),I})(),Pr=(()=>{class I{}return I.\u0275fac=function(f){return new(f||I)},I.\u0275mod=c.oAB({type:I}),I.\u0275inj=c.cJS({providers:[ga,{provide:Za,useClass:Ga},La,{provide:R,useExisting:La}],imports:[Sa.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),I})();var yn=k(4482),Go=k(5403),na=k(4671),ra=k(2805),Ki=k(8421),Wo=k(7414),ya=k(262);let To=(()=>{class I{constructor(f){this.http=f,this.headers=new ee,this.params=new Or}getData(){return this.sendRequest("GET",this.urlReq,this.params)}sendRequest(f,w,B){return this.http.request(f,w,{observe:"events",params:B,responseType:"json"}).pipe(function ma(I=1/0){let m;m=I&&"object"==typeof I?I:{count:I};const{count:f=1/0,delay:w,resetOnSuccess:B=!1}=m;return f<=0?na.y:(0,yn.e)((X,Ce)=>{let ot,Le=0;const kt=()=>{let Dn=!1;ot=X.subscribe((0,Go.x)(Ce,Sn=>{B&&(Le=0),Ce.next(Sn)},void 0,Sn=>{if(Le++<f){const lr=()=>{ot?(ot.unsubscribe(),ot=null,kt()):Dn=!0};if(null!=w){const Qn="number"==typeof w?(0,ra.H)(w):(0,Ki.Xf)(w(Sn,Le)),xn=(0,Go.x)(Ce,()=>{xn.unsubscribe(),lr()},()=>{Ce.complete()});Qn.subscribe(xn)}else lr()}else Ce.error(Sn)})),Dn&&(ot.unsubscribe(),ot=null,kt())};kt()})}(3),(0,Wo.V)(3e4),(0,ya.K)(X=>{throw new Error(`Network Error: ${w.slice(0,23)} ${X.statusText} (${X.status})`)}))}}return I.\u0275fac=function(f){return new(f||I)(c.LFG(ga))},I.\u0275prov=c.Yz7({token:I,factory:I.\u0275fac}),I})();class Aa{constructor(m,f,w,B,X){this.isbn=m,this.title=f,this.authorName=w,this.coverId=B,this.key=X}}class fs{constructor(m,f,w,B,X,Ce,Le,ot,kt){this.name=m,this.body=f,this.imgsrc=w,this.title=B,this.author=X,this.key=Ce,this.selectedPage=Le,this.totalPages=ot,this.offset=kt}}var js=k(2861);let Al=(()=>{class I{constructor(f,w){this.booksSource=f,this.emitService=w,this.books=new Array,this.totalDataLength=0}getData(f,w){this.booksSource.urlReq=f,this.booksSource.params=w,this.subscr=this.booksSource.getData().subscribe(B=>{if(B.type===Kr.Response){let X=B.body;this.totalDataLength=X.numFound,this.books=new Array,X=X.docs.forEach((Ce,Le)=>{this.books[Le]=new Aa(Ce.isbn?Ce.isbn[0]:null,Ce.title?Ce.title:"",Ce.author_name?Ce.author_name[0]:"",Ce.cover_i?"https://covers.openlibrary.org/b/id/"+Ce.cover_i+"-M.jpg":"",Ce.key?Ce.key:null)}),this.emitService.emitEvent(new fs("book"))}})}getBooks(){return this.books.filter(f=>f.coverId&&f.isbn)}getTotalLength(){return this.totalDataLength}getBooksFilteredLength(){return this.books.filter(f=>f.coverId&&f.isbn).length}ngOnDestroy(){this.subscr.unsubscribe()}}return I.\u0275fac=function(f){return new(f||I)(c.LFG(To),c.LFG(js.A))},I.\u0275prov=c.Yz7({token:I,factory:I.\u0275fac}),I})();class _a{constructor(m,f,w,B,X,Ce){this.places=m,this.subjects=f,this.people=w,this.times=B,this.description=X,this.sentence=Ce}}let ia=(()=>{class I{constructor(f,w){this.booksSource=f,this.emitService=w,this.bookDetail=new _a(null,null,null,null,null,null)}getData(f,w){this.booksSource.urlReq=f,this.booksSource.params=w,this.subscr=this.booksSource.getData().subscribe(B=>{if(B.type===Kr.Response){let X=B.body;this.bookDetail=new _a(null,null,null,null,null,null),this.bookDetail=new _a(X.subject_places?X.subject_places:null,X.subjects?X.subjects:null,X.subject_people?X.subject_people:null,X.subject_times?X.subject_times:null,X.description?X.description:null,X.first_sentence?X.first_sentence:null)}})}getBookDetail(){return this.bookDetail}}return I.\u0275fac=function(f){return new(f||I)(c.LFG(To),c.LFG(js.A))},I.\u0275prov=c.Yz7({token:I,factory:I.\u0275fac}),I})();var Di=k(7887),lt=k(433);let zi=(()=>{class I{constructor(f){this.emitService=f,this.booksError=""}handleError(f){let w=f instanceof Error?f.message:f.toString();this.emitService.emitError(w),console.log(w),w.includes("openlibrary")&&(this.booksError=w)}}return I.\u0275fac=function(f){return new(f||I)(c.LFG(js.A))},I.\u0275prov=c.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();var Hs=k(244),Fo=k(4466),Qs=k(198);let oo=(()=>{class I{}return I.\u0275fac=function(f){return new(f||I)},I.\u0275mod=c.oAB({type:I}),I.\u0275inj=c.cJS({providers:[{provide:c.qLn,useClass:zi}],imports:[ei.ez,lt.u5,lt.UX,Di.Bz,Hs.UsercabinetModule,Fo.m,Qs.F]}),I})(),Ua=(()=>{class I{}return I.\u0275fac=function(f){return new(f||I)},I.\u0275mod=c.oAB({type:I}),I.\u0275inj=c.cJS({providers:[To,Al,ia,{provide:c.qLn,useClass:zi}],imports:[ei.ez,Pr,lt.u5,Di.Bz,oo,Fo.m]}),I})();var xi=k(1825),Ma=k(8932);let ui=(()=>{class I{constructor(f,w){this.template=f,this.container=w}set appBookshopIf(f){f?this.container.createEmbeddedView(this.template):this.container.clear()}}return I.\u0275fac=function(f){return new(f||I)(c.Y36(c.Rgc),c.Y36(c.s_b))},I.\u0275dir=c.lG2({type:I,selectors:[["","appBookshopIf",""]],inputs:{appBookshopIf:"appBookshopIf"}}),I})();function su(I,m){1&I&&(c.TgZ(0,"td",9),c._uU(1,"BLOCKED"),c.qZA())}function Ml(I,m){1&I&&(c.TgZ(0,"td",10),c._uU(1,"OK"),c.qZA())}function So(I,m){if(1&I){const f=c.EpF();c.TgZ(0,"div")(1,"button",11),c.NdJ("click",function(B){c.CHM(f);const X=c.oxw();return c.KtG(X.signOut(B))}),c._uU(2," LogOut "),c.qZA()()}}function xl(I,m){1&I&&(c.TgZ(0,"div")(1,"button",12),c._uU(2," LogIn "),c.qZA()())}let xa=(()=>{class I{constructor(f,w,B){this.authService=f,this.emitService=w,this.dbService=B,this.userId="",this.userBlocked=!1,this.userBlockedShow=0,this.reservedNumber="",this.viewedNumber="",this.orderedNumber="",this.authService.authState(),this.authService.userDataId&&this.getUserDataBooksDatas(this.authService.userDataId),this.subscr=this.emitService.getAuthState().subscribe(X=>{this.getUserDataBooksDatas(X)})}getUserDataBooksDatas(f){f&&this.isLoggedIn?(this.userId=f,(!this.subscr2||this.subscr2.closed)&&(this.subscr2=this.dbService.getUserBooksDatas(this.userId).subscribe(w=>{this.reservedNumber=String(w.filter(B=>B.reserved).length),this.viewedNumber=String(w.length),this.orderedNumber=String(w.filter(B=>B.ordered).length)})),(!this.subscr3||this.subscr3.closed)&&(this.subscr3=this.dbService.getUserData(this.userId).subscribe(w=>{this.userBlocked=w.userBlocked,this.userBlockedShow=1,this.userBlocked&&(this.userBlockedShow=-1)}))):(this.userBlocked=!1,this.userBlockedShow=0,this.userId="",this.reservedNumber="",this.viewedNumber="",this.orderedNumber="",this.subscr2&&this.subscr2.unsubscribe(),this.subscr3&&this.subscr3.unsubscribe())}get userName(){return this.isLoggedIn?this.shrinkText(this.authService.userData.displayName,6,1600):""}shrinkText(f,w,B){const X=document.documentElement.clientWidth;return f.length>w&&X<=B?f.slice(0,w-1)+"\u2026":f}get isLoggedIn(){return this.authService.isLoggedIn}signOut(f){this.authService.signOut()}ngOnInit(){}ngOnDestroy(){this.subscr&&this.subscr.unsubscribe(),this.subscr2&&this.subscr2.unsubscribe(),this.subscr3&&this.subscr3.unsubscribe()}}return I.\u0275fac=function(f){return new(f||I)(c.Y36(xi.e),c.Y36(js.A),c.Y36(Ma.k))},I.\u0275cmp=c.Xpm({type:I,selectors:[["app-userblock"]],decls:29,vars:9,consts:[[1,"border","rounded"],[2,"height","30px"],[1,"col-2","text-center"],[1,"col-2","text-center","text-primary","fw-bold","fs-5"],["class","col-2 text-center fw-bold text-danger",4,"ngIf"],["class","col-2 text-center fw-bold text-success",4,"ngIf"],[1,"d-flex","justify-content-center"],[4,"appBookshopIf"],["type","button","routerLink","/usercabinet",1,"btn","btn-primary","btn-sm","mt-4",3,"disabled"],[1,"col-2","text-center","fw-bold","text-danger"],[1,"col-2","text-center","fw-bold","text-success"],["type","button","routerLink","/bookshelf",1,"btn","btn-danger","btn-sm","mt-4","mx-2",3,"click"],["type","button","routerLink","/bookshelf/entry",1,"btn","btn-primary","btn-sm","mt-4","mx-2"]],template:function(f,w){1&f&&(c.TgZ(0,"div",0)(1,"table")(2,"tbody")(3,"tr",1)(4,"td",2),c._uU(5,"User"),c.qZA(),c.TgZ(6,"td",2),c._uU(7,"Viewed"),c.qZA(),c.TgZ(8,"td",2),c._uU(9,"Booked"),c.qZA(),c.TgZ(10,"td",2),c._uU(11,"Ordered"),c.qZA()(),c.TgZ(12,"tr",1)(13,"td",3),c._uU(14),c.qZA(),c.TgZ(15,"td",3),c._uU(16),c.qZA(),c.TgZ(17,"td",3),c._uU(18),c.qZA(),c.TgZ(19,"td",3),c._uU(20),c.qZA()(),c.TgZ(21,"tr",1),c.YNc(22,su,2,0,"td",4),c.YNc(23,Ml,2,0,"td",5),c.qZA()()()(),c.TgZ(24,"div",6),c.YNc(25,So,3,0,"div",7),c.YNc(26,xl,3,0,"div",7),c.TgZ(27,"button",8),c._uU(28," Cabinet "),c.qZA()()),2&f&&(c.xp6(14),c.Oqu(w.userName),c.xp6(2),c.Oqu(w.viewedNumber),c.xp6(2),c.Oqu(w.reservedNumber),c.xp6(2),c.Oqu(w.orderedNumber),c.xp6(2),c.Q6J("ngIf",-1==w.userBlockedShow&&w.isLoggedIn),c.xp6(1),c.Q6J("ngIf",1==w.userBlockedShow&&w.isLoggedIn),c.xp6(2),c.Q6J("appBookshopIf",w.isLoggedIn),c.xp6(1),c.Q6J("appBookshopIf",!w.isLoggedIn),c.xp6(1),c.Q6J("disabled",!w.isLoggedIn))},dependencies:[ei.O5,Di.rH,ui]}),I})();var Ol=k(3370);const Gi=function(I,m,f,w,B){return{isbn:I,imgsrc:m,title:f,author:w,key:B}},Oa=function(I){return["/bookshelf/bookdetail",I]};function $s(I,m){if(1&I&&(c.TgZ(0,"div",7)(1,"a",8)(2,"table")(3,"tr",9)(4,"td",10)(5,"p",11),c._UZ(6,"img",12),c.qZA()()(),c.TgZ(7,"tr",13)(8,"td",14)(9,"p",15)(10,"small"),c._uU(11),c.ALo(12,"shrinkText"),c.qZA()()()(),c.TgZ(13,"tr",13)(14,"td",14)(15,"p",16)(16,"small"),c._uU(17),c.ALo(18,"shrinkText"),c.qZA()()()()()()()),2&I){const f=m.$implicit;c.xp6(1),c.Q6J("routerLink",c.VKq(18,Oa,c.qbA(12,Gi,f.isbn,f.coverId,f.title,f.authorName,f.key))),c.xp6(5),c.s9C("src",f.coverId,c.LSH),c.xp6(5),c.Oqu(c.Dn7(12,4,f.title,25,"title")),c.xp6(6),c.Oqu(c.Dn7(18,8,f.authorName,25,"title"))}}function Si(I,m){if(1&I){const f=c.EpF();c.TgZ(0,"div",23)(1,"button",24),c.NdJ("click",function(){c.CHM(f);const B=c.oxw(2);return c.KtG(B.repeatLoading())}),c._uU(2,"Repeat"),c.qZA(),c.TgZ(3,"button",25),c.NdJ("click",function(){c.CHM(f);const B=c.oxw(2);return c.KtG(B.stopLoading())}),c._uU(4,"Cancel"),c.qZA()()}}function ws(I,m){if(1&I&&(c.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20)(4,"h1"),c._uU(5),c.qZA()(),c._UZ(6,"div",21),c.YNc(7,Si,5,0,"div",22),c.qZA()()()),2&I){const f=c.oxw();c.xp6(1),c.Q6J("ngClass",f.getClasses("modal")),c.xp6(4),c.Oqu(f.errorMess),c.xp6(2),c.Q6J("ngIf",f.failedLoad)}}let qo=(()=>{class I{constructor(f,w,B,X){this.booksModel=w,this.emitService=B,this.ref=X,this.modalMess=!1,this.booksPerPage=22,this.limit=200,this.query="language:eng",this.totalDataLength=0,this.nextDisabled=!1,this.prevDisabled=!1,this.errorMess1="Loading data...",this.errorMess2="Failed to load data",this.errorMess=this.errorMess1,this.failedLoad=!1,this.booksUrl="https://openlibrary.org/search.json",this.subscr3=f.events.pipe((0,$a.h)(Ce=>Ce instanceof Di.OD)).subscribe(Ce=>{Ce.url.startsWith("/bookdetail")&&this.saveParams()}),this.subscr2=this.emitService.getEmitter().subscribe(Ce=>{"search"==Ce.name&&Ce.body&&this.getSearchData(Ce.body,1)}),this.subscrError=this.emitService.getError().subscribe(Ce=>{this.errorMess=this.errorMess2,this.failedLoad=!0,this.ref.detectChanges()})}getBooks(){let f=(this.selectedPage-1)*this.booksPerPage;return this.booksModel.getBooks().slice(f,f+this.booksPerPage)}changePage(f){switch(f){default:case"next":this.prevDisabled=!1,this.selectedPage==this.totalPages?this.totalDataLength>this.offset+this.limit?this.moveNextOffset(f):this.nextDisabled=!0:(this.selectedPage++,this.emitService.emitBookshelfCurrentPage(this.selectedPage));break;case"prev":this.nextDisabled=!1,1==this.selectedPage?this.offset>=this.limit?this.moveNextOffset(f):this.prevDisabled=!0:(this.selectedPage--,this.emitService.emitBookshelfCurrentPage(this.selectedPage))}}moveNextOffset(f){this.modalMess=!0,this.prevDisabled=this.nextDisabled=!0,this.getNewOffsetData(f),this.subscr=this.emitService.getEmitter().subscribe(w=>{if("book"==w.name){switch(this.failedLoad=!1,this.totalPages=this.getTotalPages(),this.emitService.emitBookshelfTotalPages(this.totalPages),f){default:case"prev":this.selectedPage=this.totalPages,this.emitService.emitBookshelfCurrentPage(this.selectedPage);break;case"next":this.selectedPage=1,this.emitService.emitBookshelfCurrentPage(this.selectedPage)}this.modalMess=!1,this.prevDisabled=this.nextDisabled=!1,this.ref.detectChanges()}this.subscr.unsubscribe()})}getNewOffsetData(f){"next"==f?this.offset+=this.limit:this.offset-=this.limit,this.emitService.emitBookshelfCurrentOffset(this.offset),this.booksModel.getData(this.booksUrl,this.setHttpParams())}setHttpParams(){return new Or({fromObject:{q:this.query,fields:"isbn,title,author_name,cover_i,key",offset:this.offset,limit:this.limit}})}getLength(){return this.booksModel.getTotalLength()}getTotalPages(){return Math.ceil(this.booksModel.getBooksFilteredLength()/this.booksPerPage)}getSearchData(f,w){this.offset=0,this.query=f,this.selectedPage=w,this.emitService.emitBookshelfCurrentPage(this.selectedPage),this.modalMess=!0,this.prevDisabled=this.nextDisabled=!0,this.booksModel.getData(this.booksUrl,this.setHttpParams()),this.subscrSearch=this.emitService.getEmitter().subscribe(B=>{"book"==B.name&&(this.failedLoad=!1,this.modalMess=!1,this.prevDisabled=this.nextDisabled=!1,this.totalPages=this.getTotalPages(),this.totalDataLength=this.getLength(),this.emitService.emitBookshelfTotalPages(this.totalPages),this.emitService.emitBookshelfTotalDataLength(this.totalDataLength),this.emitService.emitBookshelfCurrentPage(this.selectedPage),this.emitService.emitBookshelfCurrentOffset(this.offset),this.ref.detectChanges()),this.subscrSearch.unsubscribe()})}saveParams(){this.emitService.saveData(this.selectedPage,this.totalPages,this.offset,this.totalDataLength)}getParams(){const f=this.emitService.getSelectedPage(),w=this.emitService.getTotalPages(),B=this.emitService.getOffset(),X=this.emitService.getTotalDataLength();return typeof f<"u"&&typeof w<"u"&&typeof B<"u"&&typeof X<"u"?(this.selectedPage=f,this.emitService.emitBookshelfCurrentPage(this.selectedPage),this.totalPages=w,this.emitService.emitBookshelfTotalPages(this.totalPages),this.offset=B,this.emitService.emitBookshelfCurrentOffset(this.offset),this.totalDataLength=X,this.emitService.emitBookshelfTotalDataLength(this.totalDataLength),!0):(this.selectedPage=1,this.emitService.emitBookshelfCurrentPage(this.selectedPage),this.offset=0,!1)}getClasses(f){let B="",X="";return B="modal-mess-body-small",X="modal-mess-body",document.documentElement.clientWidth<=1600?"modal-mess-body-small":"modal-mess-body"}repeatLoading(){this.errorMess=this.errorMess1,this.ref.detectChanges(),this.booksModel.getData(this.booksUrl,this.setHttpParams())}stopLoading(){this.modalMess=!1,this.errorMess=this.errorMess1,this.ref.detectChanges()}ngOnInit(){this.getParams()||this.getSearchData("language:eng",this.selectedPage)}ngOnDestroy(){this.saveParams(),this.subscr&&this.subscr.unsubscribe(),this.subscr2&&this.subscr2.unsubscribe(),this.subscr2&&this.subscr2.unsubscribe(),this.subscrError&&this.subscrError.unsubscribe(),this.subscrSearch&&this.subscrSearch.unsubscribe()}}return I.\u0275fac=function(f){return new(f||I)(c.Y36(Di.F0),c.Y36(Al),c.Y36(js.A),c.Y36(c.sBO))},I.\u0275cmp=c.Xpm({type:I,selectors:[["app-bookshelf"]],decls:12,vars:4,consts:[[1,"table","bg-primary","m-0"],[1,"height-756"],[1,"col-1","v-a-m"],["type","button",1,"btn","btn-secondary","btn-lg",3,"disabled","click"],[1,"col-10","pb-0"],["id","book","class","d-inline-block p-1 m-1 rounded-2 border border-2 bg-light",4,"ngFor","ngForOf"],["class","modal-mess",4,"ngIf"],["id","book",1,"d-inline-block","p-1","m-1","rounded-2","border","border-2","bg-light"],[3,"routerLink"],[1,"height-190"],[1,"bg-light","height-190"],[1,"p-0","m-0"],["height","200","width","117",3,"src"],[1,"height-70"],[1,"bg-light","height-70","v-a-m"],[1,"p-0","m-0","text-center","fw-bold"],[1,"p-0","m-0","text-center"],[1,"modal-mess"],[3,"ngClass"],[1,"row","bg-white","p-5","shadow","shadow-lg","rounded"],[1,"d-inline-block","col-9"],["role","status",1,"d-inline-block","col-3","m-2","spinner-border","text-primary"],["class","col-12 d-flex justify-content-center mt-4",4,"ngIf"],[1,"col-12","d-flex","justify-content-center","mt-4"],["type","button",1,"btn","btn-primary","btn-sm","me-2",3,"click"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(f,w){1&f&&(c.TgZ(0,"table",0)(1,"tbody")(2,"tr",1)(3,"td",2)(4,"button",3),c.NdJ("click",function(){return w.changePage("prev")}),c._uU(5,"<<"),c.qZA()(),c.TgZ(6,"td",4),c.YNc(7,$s,19,20,"div",5),c.qZA(),c.TgZ(8,"td",2)(9,"button",3),c.NdJ("click",function(){return w.changePage("next")}),c._uU(10,">>"),c.qZA()()()()(),c.YNc(11,ws,8,3,"div",6)),2&f&&(c.xp6(4),c.Q6J("disabled",w.prevDisabled),c.xp6(3),c.Q6J("ngForOf",w.getBooks()),c.xp6(2),c.Q6J("disabled",w.nextDisabled),c.xp6(2),c.Q6J("ngIf",w.modalMess))},dependencies:[ei.mk,ei.sg,ei.O5,Di.yS,Ol.A],styles:[".modal-mess[_ngcontent-%COMP%]{position:fixed;top:220;right:0;bottom:0;left:0;z-index:900}.modal-mess-body[_ngcontent-%COMP%]{padding:20px;margin:180px 500px 400px;z-index:990}.modal-mess-body-small[_ngcontent-%COMP%]{padding:20px;margin:180px 100px 200px;z-index:990}a[_ngcontent-%COMP%]{text-decoration:none;color:#000}#book[_ngcontent-%COMP%]{word-break:normal;overflow:hidden;height:357px;width:130px}.height-756[_ngcontent-%COMP%]{height:756px}.height-190[_ngcontent-%COMP%]{height:190px}.height-70[_ngcontent-%COMP%]{height:70px}.v-a-m[_ngcontent-%COMP%]{vertical-align:middle}"]}),I})();class As{constructor(m,f,w){this.query=m,this.title=f,this.authorName=w}}let yl=(()=>{class I{constructor(f){this.emitService=f,this.bookSearch=new As("","",""),this.text1="Author Name"}resetBookSearchForm(){this.bookSearch=new As("","","")}shrinkText(f,w,B){const X=document.documentElement.clientWidth;return f.length>w&&X<=B?f.slice(0,w-1)+"\u2026":f}submitBookSearchForm(f){if(f.valid){let w="language:eng";this.bookSearch.title&&(w+=" title:"+this.bookSearch.title),this.bookSearch.authorName&&(w+=" author:"+this.bookSearch.authorName),this.bookSearch.query&&(w+=" subject:"+this.bookSearch.query),this.emitService.emitEvent(new fs("search",w))}}ngOnInit(){this.bookSearch=new As("","","")}}return I.\u0275fac=function(f){return new(f||I)(c.Y36(js.A))},I.\u0275cmp=c.Xpm({type:I,selectors:[["app-booksearch"]],decls:23,vars:5,consts:[[1,"row"],["novalidate","",1,"border","rounded",3,"ngSubmit","reset"],["form","ngForm"],[1,"row","mt-1"],["for","title",1,"col-sm-3","col-form-label","text-secondary"],[1,"col-sm-9"],["id","title","name","title","pattern","^[A-Za-z0-9 ]+$",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","authorname",1,"col-sm-3","col-form-label","text-secondary"],["id","authorname","name","authorname","pattern","^[A-Za-z0-9 ]+$",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["for","query",1,"col-sm-3","col-form-label","text-secondary"],["id","query","name","query","pattern","^[A-Za-z0-9 ]+$",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"col-12","d-flex","justify-content-center","mt-1","mb-2"],["type","submit",1,"btn","btn-primary","btn-sm","me-2",3,"disabled"],["type","reset",1,"btn","btn-secondary","btn-sm"]],template:function(f,w){if(1&f){const B=c.EpF();c.TgZ(0,"div",0)(1,"form",1,2),c.NdJ("ngSubmit",function(){c.CHM(B);const Ce=c.MAs(2);return c.KtG(w.submitBookSearchForm(Ce))})("reset",function(){return w.resetBookSearchForm()}),c.TgZ(3,"div",3)(4,"label",4),c._uU(5,"Title"),c.qZA(),c.TgZ(6,"div",5)(7,"input",6),c.NdJ("ngModelChange",function(Ce){return w.bookSearch.title=Ce}),c.qZA()()(),c.TgZ(8,"div",0)(9,"label",7),c._uU(10),c.qZA(),c.TgZ(11,"div",5)(12,"input",8),c.NdJ("ngModelChange",function(Ce){return w.bookSearch.authorName=Ce}),c.qZA()()(),c.TgZ(13,"div",0)(14,"label",9),c._uU(15,"Subject"),c.qZA(),c.TgZ(16,"div",5)(17,"input",10),c.NdJ("ngModelChange",function(Ce){return w.bookSearch.query=Ce}),c.qZA()()(),c.TgZ(18,"div",11)(19,"button",12),c._uU(20,"Search"),c.qZA(),c.TgZ(21,"button",13),c._uU(22,"Cancel"),c.qZA()()()()}if(2&f){const B=c.MAs(2);c.xp6(7),c.Q6J("ngModel",w.bookSearch.title),c.xp6(3),c.Oqu(w.shrinkText(w.text1,7,1600)),c.xp6(2),c.Q6J("ngModel",w.bookSearch.authorName),c.xp6(5),c.Q6J("ngModel",w.bookSearch.query),c.xp6(2),c.Q6J("disabled",B.invalid)}},dependencies:[lt._Y,lt.Fj,lt.JJ,lt.JL,lt.c5,lt.On,lt.F],styles:["input.ng-dirty.ng-invalid[_ngcontent-%COMP%]{border:2px solid #ff0000}input.ng-dirty.ng-valid[_ngcontent-%COMP%]{border:2px solid #6bc502}"]}),I})();function ps(I,m){if(1&I&&(c.TgZ(0,"div",18)(1,"button",19),c._uU(2," Admin "),c.qZA()()),2&I){const f=c.oxw();c.xp6(1),c.Q6J("ngClass","btn btn-danger "+f.getClasses("but"))}}let Js=(()=>{class I{constructor(f,w){this.emitService=f,this.authService=w,this.text1="Total books founded:",this.text2="Current offset:",this.text3="Total pages in this offset:",this.text4="Current page in this offset:",this.bookshelfTotalDataLength=0,this.bookshelfTotalPages=0,this.bookshelfCurrentPage=0,this.bookshelfCurrentOffset=0}ngOnInit(){this.subscr=this.emitService.getBookshelfTotalDataLength().subscribe(f=>this.bookshelfTotalDataLength=f),this.subscr2=this.emitService.getBookshelfTotalPages().subscribe(f=>this.bookshelfTotalPages=f),this.subscr3=this.emitService.getBookshelfCurrentPage().subscribe(f=>this.bookshelfCurrentPage=f),this.subscr4=this.emitService.getBookshelfCurrentOffset().subscribe(f=>this.bookshelfCurrentOffset=f)}shrinkText(f,w,B){const X=document.documentElement.clientWidth;return f.length>w&&X<=B?f.slice(0,w-1)+"\u2026":f}getClasses(f){const w=document.documentElement.clientWidth;let B="",X="";switch(f){default:case"cap":B="caption",X="caption-small",B+=this.isAdmin?" col-4":" col-6";break;case"but":B="btn-lg",X="btn-sm"}return w<=1600?X:B}get isAdmin(){return this.authService.isAdmin}ngOnDestroy(){this.subscr&&this.subscr.unsubscribe(),this.subscr2&&this.subscr2.unsubscribe(),this.subscr3&&this.subscr3.unsubscribe(),this.subscr4&&this.subscr4.unsubscribe(),this.subscr5&&this.subscr5.unsubscribe()}}return I.\u0275fac=function(f){return new(f||I)(c.Y36(js.A),c.Y36(xi.e))},I.\u0275cmp=c.Xpm({type:I,selectors:[["app-books"]],decls:41,vars:10,consts:[[1,"table","table-borderless","m-0"],["height","180px",1,"bg-light"],[1,"col-5"],[1,"border","rounded"],[1,"table","table-borderless","m-0","p-0"],[1,"m-0","p-0"],[1,"col-6","p-0","m-0"],[1,"text-end","p-0","col-7"],[1,"p-0","m-0"],[1,"me-1"],["id","bookshelf-page",1,"text-start","p-0","col-5"],[1,"ms-2"],[2,"height","160px","vertical-align","middle",3,"ngClass"],[1,"m-0","p-0","mb-2","pb-2"],[1,"col-2",2,"height","160px","vertical-align","middle"],["class","text-center p-0 m-0",4,"ngIf"],[1,"col-4"],[1,"col-3"],[1,"text-center","p-0","m-0"],["type","button","routerLink","/admin",3,"ngClass"]],template:function(f,w){1&f&&(c.TgZ(0,"table",0)(1,"tbody")(2,"tr",1)(3,"td",2)(4,"div",3)(5,"table",4)(6,"tbody",5)(7,"td",6)(8,"table",4)(9,"tbody",5)(10,"tr",5)(11,"td",7)(12,"div",8)(13,"p",9),c._uU(14),c.qZA(),c.TgZ(15,"p",9),c._uU(16),c.qZA(),c.TgZ(17,"p",9),c._uU(18),c.qZA(),c.TgZ(19,"p",9),c._uU(20),c.qZA()()(),c.TgZ(21,"td",10)(22,"p",11),c._uU(23),c.qZA(),c.TgZ(24,"p",11),c._uU(25),c.qZA(),c.TgZ(26,"p",11),c._uU(27),c.qZA(),c.TgZ(28,"p",11),c._uU(29),c.qZA()()()()()(),c.TgZ(30,"td",12)(31,"div",13),c._uU(32,"BookShop"),c.qZA()(),c.TgZ(33,"td",14),c.YNc(34,ps,3,1,"div",15),c.qZA()()()()(),c.TgZ(35,"td",16),c._UZ(36,"app-booksearch"),c.qZA(),c.TgZ(37,"td",17),c._UZ(38,"app-userblock"),c.qZA()()()(),c._UZ(39,"app-bookshelf")(40,"router-outlet")),2&f&&(c.xp6(14),c.Oqu(w.shrinkText(w.text1,11,1600)),c.xp6(2),c.Oqu(w.shrinkText(w.text2,11,1600)),c.xp6(2),c.Oqu(w.shrinkText(w.text3,11,1600)),c.xp6(2),c.Oqu(w.shrinkText(w.text4,11,1600)),c.xp6(3),c.Oqu(w.bookshelfTotalDataLength),c.xp6(2),c.Oqu(w.bookshelfCurrentOffset),c.xp6(2),c.Oqu(w.bookshelfTotalPages),c.xp6(2),c.Oqu(w.bookshelfCurrentPage),c.xp6(1),c.Q6J("ngClass",w.getClasses("cap")+" m-0 p-0"),c.xp6(4),c.Q6J("ngIf",w.isAdmin))},dependencies:[ei.mk,ei.O5,Di.lC,Di.rH,xa,qo,yl],styles:["#bookshelf-page[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#0d6efd;font-weight:700}.caption[_ngcontent-%COMP%]{font-family:annabelle,cursive;font-weight:700;font-size:4em;padding:20px 10px 10px;color:#f3cd26;text-shadow:2px 2px 0 rgba(0,0,0,.3)}.caption-small[_ngcontent-%COMP%]{font-family:annabelle,cursive;font-weight:700;font-size:1.8em;padding-top:40px;color:#f3cd26;text-shadow:2px 2px 0 rgba(0,0,0,.3)}"]}),I})();class Zs{constructor(m,f,w,B,X,Ce,Le,ot,kt,Dn,Sn,lr,Qn,xn,gr){this.bookId=m,this.userId=f,this.title=w,this.authorName=B,this.coverId=X,this.key=Ce,this.viewed=Le,this.reserved=ot,this.allowed=kt,this.ordered=Dn,this.orderDate=Sn,this.received=lr,this.receiveDate=Qn,this.returned=xn,this.returneDate=gr}}function Ai(I,m){1&I&&(c.TgZ(0,"p",23),c._uU(1," Places:"),c.qZA())}function po(I,m){if(1&I&&(c.TgZ(0,"span",24),c._uU(1),c.qZA()),2&I){const f=m.$implicit;c.xp6(1),c.hij("",f," ")}}function va(I,m){1&I&&(c.TgZ(0,"p",25),c._uU(1," Subjects:"),c.qZA())}function D(I,m){if(1&I&&(c.TgZ(0,"span",26),c._uU(1),c.qZA()),2&I){const f=m.$implicit;c.xp6(1),c.hij("",f," ")}}function T(I,m){1&I&&(c.TgZ(0,"p",25),c._uU(1," People:"),c.qZA())}function E(I,m){if(1&I&&(c.TgZ(0,"span",26),c._uU(1),c.qZA()),2&I){const f=m.$implicit;c.xp6(1),c.hij("",f," ")}}function F(I,m){1&I&&(c.TgZ(0,"p",25),c._uU(1," Times:"),c.qZA())}function $(I,m){if(1&I&&(c.TgZ(0,"span",26),c._uU(1),c.qZA()),2&I){const f=m.$implicit;c.xp6(1),c.hij("",f," ")}}function ae(I,m){1&I&&(c.TgZ(0,"p",25),c._uU(1," Description:"),c.qZA())}function Oe(I,m){1&I&&(c.TgZ(0,"div",4)(1,"p",27),c._uU(2,"RESERVED"),c.qZA()())}function Be(I,m){if(1&I){const f=c.EpF();c.TgZ(0,"div",28)(1,"button",29),c.NdJ("click",function(B){c.CHM(f);const X=c.oxw();return c.KtG(X.reserveBook(B))}),c._uU(2," Reserve "),c.qZA()()}}function xt(I,m){if(1&I){const f=c.EpF();c.TgZ(0,"div",28)(1,"button",30),c.NdJ("click",function(B){c.CHM(f);const X=c.oxw();return c.KtG(X.reserveBook(B))}),c._uU(2," UnReserve "),c.qZA()()}}let pn=(()=>{class I{constructor(f,w,B,X,Ce,Le){this.route=f,this.activRoute=w,this.bookDetailModel=B,this.authService=X,this.dbService=Ce,this.emitService=Le,this.isbn="",this.imgsrc="",this.title="",this.author="",this.isLogged=!1,this.activRoutePath="",this.key="",this.bookDetailUrl="https://openlibrary.org",this.description="",this.userId="",this.src="",this.isReserved=!1,this.authService.authState(),this.activRoutePath=w.snapshot.url[0].path,this.getBookData(),this.authService.userDataId&&this.updateUserBookData(this.authService.userDataId),this.subscr=this.emitService.getAuthState().subscribe(ot=>{this.updateUserBookData(ot)})}getBookData(){const f=this.activRoute.snapshot.params.isbn,w=this.activRoute.snapshot.params.imgsrc,B=this.activRoute.snapshot.params.title,X=this.activRoute.snapshot.params.author,Ce=this.activRoute.snapshot.params.key;null!=f&&null!=w&&null!=B&&null!=X&&null!=Ce&&(this.src=w,this.isbn=f,this.imgsrc=w.substr(0,w.length-5)+"L.jpg",this.title=B,this.author=X,this.key=Ce,this.bookDetailUrl=this.bookDetailUrl+this.key+".json"),this.key&&this.bookDetailModel.getData(this.bookDetailUrl,this.setHttpParams())}getBookDetail(){const f=this.bookDetailModel.getBookDetail();return f.description&&Object.keys(f.description).includes("value")&&(this.description=f.description.value),f}setHttpParams(){return new Or({fromObject:{}})}updateUserBookData(f){this.isLoggedIn&&f&&(this.userId=f,this.subscr=this.dbService.getUserBooksData(this.userId,this.isbn).subscribe(w=>{w?this.userBooksModel=w:(this.userBooksModel=new Zs(this.isbn,this.userId,this.title,this.author,this.src,this.key,!0,!1,!0,!1,null,!1,null,!1,null),this.subscr2=this.dbService.setUserBooksData(this.userId,this.userBooksModel).subscribe()),this.isReserved=this.userBooksModel.reserved}))}reserveBook(f){this.subscr3=this.dbService.updateUserBooksDataReserved(this.userId,this.isbn,this.isReserved).subscribe(),this.isReserved=!this.isReserved}get isLoggedIn(){return this.authService.isLoggedIn}getClasses(f){const w=document.documentElement.clientWidth;let B="",X="";switch(f){default:case"img":X="col-3",B="col-4";break;case"div":X="col-7",B="col-6";break;case"but":X="col-1",B=w<1280?"col-2":"col-1"}return w<=1600?B:X}ngOnInit(){}linkBack(f){switch(this.activRoutePath){default:case"bookshelf":this.route.navigateByUrl("/bookshelf");break;case"uservewed":this.route.navigateByUrl("/usercabinet/user-cabinet-viewed");break;case"userbooked":this.route.navigateByUrl("/usercabinet/user-cabinet-booked")}}ngOnDestroy(){this.subscr&&this.subscr.unsubscribe(),this.subscr2&&this.subscr2.unsubscribe(),this.subscr3&&this.subscr3.unsubscribe(),this.subscr4&&this.subscr4.unsubscribe()}}return I.\u0275fac=function(f){return new(f||I)(c.Y36(Di.F0),c.Y36(Di.gz),c.Y36(ia),c.Y36(xi.e),c.Y36(Ma.k),c.Y36(js.A))},I.\u0275cmp=c.Xpm({type:I,selectors:[["app-bookdetail"]],decls:50,vars:19,consts:[[1,"bg-primary","vh-100"],[1,"bg-primary","col-12","absolute-0-0"],[1,"col-12","height-30"],[1,"row"],[1,"col-1"],[3,"ngClass"],["height","475",1,"m-2",3,"src"],["id","details",3,"ngClass"],[1,"fw-bold","ms-5","mt-1"],[1,"fs-5","ms-5","mt-1"],[1,"fw-bold","fs-4","ms-1","mt-1"],["class","fs-6 ms-5 mt-4 fw-bold",4,"ngIf"],[1,"ms-5"],["class","fs-6 ",4,"ngFor","ngForOf"],["class","fs-6 ms-5  mt-2 fw-bold",4,"ngIf"],["class","fs-6 m-1",4,"ngFor","ngForOf"],[1,"fs-6","ms-5"],[1,"col-10","bg-white","d-flex","flex-row"],[1,"col-2","d-flex","justify-content-center"],["class","col-1",4,"ngIf"],[1,"col-3"],["type","button",1,"btn","btn-secondary","ms-5","my-2",3,"click"],["class","col-1 d-grid gap-2",4,"ngIf"],[1,"fs-6","ms-5","mt-4","fw-bold"],[1,"fs-6"],[1,"fs-6","ms-5","mt-2","fw-bold"],[1,"fs-6","m-1"],[1,"badge","bg-success","fs-6","ms-5","mt-2","fw-bold","rounded-pill"],[1,"col-1","d-grid","gap-2"],["type","button",1,"btn","btn-primary","ms-5","my-2",3,"click"],["type","button",1,"btn","btn-danger","ms-5","my-2",3,"click"]],template:function(f,w){1&f&&(c._UZ(0,"div",0),c.TgZ(1,"div",1)(2,"div",2),c._UZ(3,"h1"),c.qZA(),c.TgZ(4,"div",3)(5,"div",4),c._UZ(6,"span"),c.qZA(),c.TgZ(7,"div",5),c._UZ(8,"img",6),c.qZA(),c.TgZ(9,"div",7)(10,"h1",8),c._uU(11),c.qZA(),c.TgZ(12,"span",9),c._uU(13,"Written by: "),c.qZA(),c.TgZ(14,"span",10),c._uU(15),c.qZA(),c.YNc(16,Ai,2,0,"p",11),c.TgZ(17,"div",12),c.YNc(18,po,2,1,"span",13),c.qZA(),c.YNc(19,va,2,0,"p",14),c.TgZ(20,"div",12),c.YNc(21,D,2,1,"span",15),c.qZA(),c.YNc(22,T,2,0,"p",14),c.TgZ(23,"div",12),c.YNc(24,E,2,1,"span",15),c.qZA(),c.YNc(25,F,2,0,"p",14),c.TgZ(26,"div",12),c.YNc(27,$,2,1,"span",15),c.qZA(),c.YNc(28,ae,2,0,"p",14),c.TgZ(29,"p",16),c._uU(30),c.qZA()(),c.TgZ(31,"div",4),c._UZ(32,"span"),c.qZA()(),c.TgZ(33,"div",3)(34,"div",4),c._UZ(35,"span"),c.qZA(),c.TgZ(36,"div",17)(37,"div",18),c.YNc(38,Oe,3,0,"div",19),c.qZA(),c.TgZ(39,"div",20),c._UZ(40,"span"),c.qZA(),c.TgZ(41,"div",5)(42,"button",21),c.NdJ("click",function(X){return w.linkBack(X)}),c._uU(43," Back "),c.qZA()(),c.YNc(44,Be,3,0,"div",22),c.YNc(45,xt,3,0,"div",22),c.qZA(),c.TgZ(46,"div",4),c._UZ(47,"span"),c.qZA()(),c.TgZ(48,"div",2),c._UZ(49,"h1"),c.qZA()()),2&f&&(c.xp6(7),c.Q6J("ngClass",w.getClasses("img")+" bg-white border rounded-2 d-flex justify-content-center"),c.xp6(1),c.s9C("src",w.imgsrc,c.LSH),c.xp6(1),c.Q6J("ngClass",w.getClasses("div")+" bg-white"),c.xp6(2),c.Oqu(w.title),c.xp6(4),c.Oqu(w.author),c.xp6(1),c.Q6J("ngIf",w.getBookDetail().places),c.xp6(2),c.Q6J("ngForOf",w.getBookDetail().places),c.xp6(1),c.Q6J("ngIf",w.getBookDetail().subjects),c.xp6(2),c.Q6J("ngForOf",w.getBookDetail().subjects),c.xp6(1),c.Q6J("ngIf",w.getBookDetail().people),c.xp6(2),c.Q6J("ngForOf",w.getBookDetail().people),c.xp6(1),c.Q6J("ngIf",w.getBookDetail().times),c.xp6(2),c.Q6J("ngForOf",w.getBookDetail().times),c.xp6(1),c.Q6J("ngIf",w.description),c.xp6(2),c.Oqu(w.description),c.xp6(8),c.Q6J("ngIf",w.isReserved&&w.isLoggedIn),c.xp6(3),c.Q6J("ngClass",w.getClasses("but")+" d-grid gap-2"),c.xp6(3),c.Q6J("ngIf",!w.isReserved&&w.isLoggedIn),c.xp6(1),c.Q6J("ngIf",w.isReserved&&w.isLoggedIn))},dependencies:[ei.mk,ei.sg,ei.O5],styles:["#details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0}.absolute-0-0[_ngcontent-%COMP%]{position:absolute;top:0;left:0;overflow-x:hidden}.height-30[_ngcontent-%COMP%]{height:30px}"]}),I})();var hr=k(1799),Un=k(2731);class Ur{static isValid(){return m=>new RegExp("[a-zA-Z0-9._-]+@[a-z]+\\.[a-z]{2,3}").test(m.value)?null:{userLogin:{value:m.value}}}}function Ns(I,m){1&I&&(c.TgZ(0,"li"),c._uU(1,"Value required"),c.qZA())}function Xs(I,m){1&I&&(c.TgZ(0,"li"),c._uU(1,"Do not match email specification"),c.qZA())}function ba(I,m){if(1&I&&(c.TgZ(0,"ul",19),c.YNc(1,Ns,2,0,"li",20),c.YNc(2,Xs,2,0,"li",20),c.qZA()),2&I){const f=c.oxw();let w,B;c.xp6(1),c.Q6J("ngIf",null==(w=f.userEntryForm.get("userLogin"))||null==w.errors?null:w.errors.required),c.xp6(1),c.Q6J("ngIf",null==(B=f.userEntryForm.get("userLogin"))||null==B.errors?null:B.errors.userLogin)}}function Ms(I,m){1&I&&(c.TgZ(0,"li"),c._uU(1,"Value required"),c.qZA())}function wa(I,m){1&I&&(c.TgZ(0,"li"),c._uU(1,"Min length is 6 characters"),c.qZA())}function Ao(I,m){if(1&I&&(c.TgZ(0,"ul",19),c.YNc(1,Ms,2,0,"li",20),c.YNc(2,wa,2,0,"li",20),c.qZA()),2&I){const f=c.oxw();let w;c.xp6(1),c.Q6J("ngIf",null==(w=f.userEntryForm.get("userPassword"))||null==w.errors?null:w.errors.required),c.xp6(1),c.Q6J("ngIf",f.getFormControlValue)}}let Ko=(()=>{class I{constructor(f,w,B,X,Ce){this.ref=f,this.emitService=w,this.router=B,this.authService=X,this.dbService=Ce,this.userId="",this.userLogin="",this.typePassword="password",this.showPassword=!1,this.userEntryForm=new lt.cw({userLogin:new lt.NI("",[lt.kI.required,Ur.isValid()]),userPassword:new lt.NI("",[lt.kI.required,lt.kI.minLength(6)]),showPassword:new lt.NI("")})}setTypePassword(f){this.typePassword=this.userEntryForm.get("showPassword")?.value?"text":"password"}resetUserEntryForm(){}submitUserEntryForm(){this.userEntryForm.valid&&(this.authService.signOut(),this.userLogin=this.userEntryForm.get("userLogin")?.value,this.authService.signIn(this.userEntryForm.get("userLogin")?.value,this.userEntryForm.get("userPassword")?.value),this.subscr=this.emitService.getSignInCode().subscribe(f=>{switch(f){default:case"success":this.subscr2||(this.subscr2=this.emitService.getAuthState().subscribe(()=>{this.createNewUserDataAndClose()}));break;case"auth/wrong-password":this.emitErrorMessage("Wrong password. If you forgot your password - \u0441lick on Forgot Password to recover.");break;case"auth/user-not-found":this.emitErrorMessage("Account not found. SignUp, please.")}this.subscr.unsubscribe()}))}emitErrorMessage(f){this.emitService.saveErrorMessage(f),this.emitService.saveErrorMessColor("text-danger"),this.router.navigate([{outlets:{popup:["message"]}}])}createNewUserDataAndClose(){this.userId=this.authService.userDataId;const f=this.authService.userData;f.emailVerified?(this.setUserProfile(f),this.subscr3=this.dbService.getUserData(this.userId).subscribe(w=>{this.subscr3.unsubscribe(),(null==w||!w.userId)&&(this.subscr4=this.dbService.setUserData(this.userProfile).subscribe()),this.router.navigateByUrl("/")})):this.emitErrorMessage('Your email address is not confirmed. Please check your mailbox and click on the link to complete your SignUp. If you have not received email, please send it once more by clicking "SendEmail" button.')}setUserProfile(f){const w=new Date("2000-01-01");this.userProfile=new hr.T(f.uid,f.email,f.displayName,f.displayName,f.email,new Un.EK(+w/1e3,0),"","","","",!1)}sendVerificationEmail(f){this.authService.SendVerificationMail(),this.emitService.saveErrorMessage("We have sent a confirmation email to "+this.userLogin+". Please check your mailbox and click on the link to complete your SignUp"),this.router.navigate([{outlets:{popup:["message"]}}])}getFormControlValue(){return this.userEntryForm.get("userPassword")?.errors?.minLength}getClasses(){return document.documentElement.clientWidth<=1600?"user-entry-body-small":"user-entry-body"}ngOnInit(){}ngOnDestroy(){this.subscr&&this.subscr.unsubscribe(),this.subscr2&&this.subscr2.unsubscribe(),this.subscr3&&this.subscr3.unsubscribe(),this.subscr4&&this.subscr4.unsubscribe()}}return I.\u0275fac=function(f){return new(f||I)(c.Y36(c.sBO),c.Y36(js.A),c.Y36(Di.F0),c.Y36(xi.e),c.Y36(Ma.k))},I.\u0275cmp=c.Xpm({type:I,selectors:[["app-user-entry"]],decls:29,vars:7,consts:[[1,"user-entry"],[3,"ngClass"],[1,"border","rounded"],[1,"text-center","text-secondary","p-0","m-0"],["novalidate","",1,"m-3","mt-0",3,"formGroup","ngSubmit","reset"],["for","userLogin",1,"mt-2","mx-1","text-secondary"],["id","userLogin","formControlName","userLogin",1,"form-control","form-control-sm","mx-1"],["class","text-danger ms-1 p-0",4,"ngIf"],["for","userPassword",1,"mt-2","mx-1","text-secondary"],["id","userPassword","formControlName","userPassword",1,"form-control","form-control-sm","mx-1",3,"type"],["type","checkbox","id","showPassword","formControlName","showPassword","value","true",1,"mx-1",3,"change"],["for","showPassword",1,"mt-2","mx-1"],[1,"col-12","d-flex","justify-content-center","mt-4"],["type","submit",1,"btn","btn-success","btn-sm","me-2",3,"disabled"],["type","reset","routerLink","/bookshelf",1,"btn","btn-secondary","btn-sm","me-2"],["type","button","routerLink","/bookshelf/registration",1,"btn","btn-primary","btn-sm","me-2"],["type","button",1,"btn","btn-primary","btn-sm","me-2",3,"disabled","click"],["type","button","routerLink","/bookshelf/forgotpassword",1,"button-href"],[1,"user-entry-background"],[1,"text-danger","ms-1","p-0"],[4,"ngIf"]],template:function(f,w){if(1&f&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),c._uU(4,"Log In"),c.qZA(),c.TgZ(5,"form",4),c.NdJ("ngSubmit",function(){return w.submitUserEntryForm()})("reset",function(){return w.resetUserEntryForm()}),c.TgZ(6,"label",5),c._uU(7,"Email"),c.qZA(),c._UZ(8,"input",6),c.YNc(9,ba,3,2,"ul",7),c.TgZ(10,"label",8),c._uU(11,"Password"),c.qZA(),c._UZ(12,"input",9),c.YNc(13,Ao,3,2,"ul",7),c.TgZ(14,"input",10),c.NdJ("change",function(X){return w.setTypePassword(X)}),c.qZA(),c.TgZ(15,"label",11),c._uU(16," Show Password"),c.qZA(),c.TgZ(17,"div",12)(18,"button",13),c._uU(19,"LogIn"),c.qZA(),c.TgZ(20,"button",14),c._uU(21,"Cancel"),c.qZA(),c.TgZ(22,"button",15),c._uU(23,"SignUp"),c.qZA(),c.TgZ(24,"button",16),c.NdJ("click",function(X){return w.sendVerificationEmail(X)}),c._uU(25,"SendEmail"),c.qZA(),c.TgZ(26,"button",17),c._uU(27,"Forgot your password?"),c.qZA()()()()()(),c._UZ(28,"div",18)),2&f){let B,X;c.xp6(1),c.Q6J("ngClass",w.getClasses()+" bg-white rounded"),c.xp6(4),c.Q6J("formGroup",w.userEntryForm),c.xp6(4),c.Q6J("ngIf",(null==(B=w.userEntryForm.get("userLogin"))?null:B.dirty)&&(null==(B=w.userEntryForm.get("userLogin"))?null:B.invalid)),c.xp6(3),c.Q6J("type",w.typePassword),c.xp6(1),c.Q6J("ngIf",(null==(X=w.userEntryForm.get("userPassword"))?null:X.dirty)&&(null==(X=w.userEntryForm.get("userPassword"))?null:X.invalid)),c.xp6(5),c.Q6J("disabled",w.userEntryForm.invalid),c.xp6(6),c.Q6J("disabled",!w.userId)}},dependencies:[ei.mk,ei.O5,lt._Y,lt.Fj,lt.Wl,lt.JJ,lt.JL,lt.sg,lt.u,Di.rH],styles:["input.ng-dirty.ng-invalid[_ngcontent-%COMP%]{border:2px solid #ff0000}input.ng-dirty.ng-valid[_ngcontent-%COMP%]{border:2px solid #6bc502}.user-entry[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:901}.user-entry-body[_ngcontent-%COMP%]{padding:20px;margin:200px 680px;z-index:902}.user-entry-body-small[_ngcontent-%COMP%]{padding:20px;margin:130px 250px;z-index:902}.user-entry-background[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#000;opacity:.75;z-index:900}.button-href[_ngcontent-%COMP%]{background:none!important;border:none;padding:0!important;font-family:arial,sans-serif;font-size:13px;color:#069;text-decoration:underline;cursor:pointer}ul[_ngcontent-%COMP%]{list-style-type:none;font-size:small;margin:0;padding:0}li[_ngcontent-%COMP%]{display:inline;margin-right:8px}"]}),I})();var qa=k(3473);let rl=(()=>{class I{validate(f){return(0,qa.Q)(f)}}return I.\u0275fac=function(f){return new(f||I)},I.\u0275dir=c.lG2({type:I,selectors:[["","appIdentityValidation2",""]],features:[c._Bn([{provide:lt.Cf,useExisting:I,multi:!0}])]}),I})();function Ea(I,m){1&I&&(c.TgZ(0,"li"),c._uU(1,"Value required"),c.qZA())}function Ca(I,m){1&I&&(c.TgZ(0,"li"),c._uU(1,"Only ['A-Z', 'a-z', '0-9', '-', ' '] available"),c.qZA())}function Hl(I,m){if(1&I&&(c.TgZ(0,"ul",20),c.YNc(1,Ea,2,0,"li",21),c.YNc(2,Ca,2,0,"li",21),c.qZA()),2&I){c.oxw();const f=c.MAs(6);c.xp6(1),c.Q6J("ngIf",null==f.controls.userName.errors?null:f.controls.userName.errors.required),c.xp6(1),c.Q6J("ngIf",null==f.controls.userName.errors?null:f.controls.userName.errors.pattern)}}function Ka(I,m){1&I&&(c.TgZ(0,"li"),c._uU(1,"Value required"),c.qZA())}function $l(I,m){1&I&&(c.TgZ(0,"li"),c._uU(1,"Do not match email specification"),c.qZA())}function il(I,m){if(1&I&&(c.TgZ(0,"ul",20),c.YNc(1,Ka,2,0,"li",21),c.YNc(2,$l,2,0,"li",21),c.qZA()),2&I){c.oxw();const f=c.MAs(6);c.xp6(1),c.Q6J("ngIf",null==f.controls.userLogin.errors?null:f.controls.userLogin.errors.required),c.xp6(1),c.Q6J("ngIf",null==f.controls.userLogin.errors?null:f.controls.userLogin.errors.pattern)}}function Yi(I,m){1&I&&(c.TgZ(0,"li"),c._uU(1,"Value required"),c.qZA())}function ou(I,m){1&I&&(c.TgZ(0,"li"),c._uU(1,"Min length is 6 characters"),c.qZA())}function xr(I,m){if(1&I&&(c.TgZ(0,"ul",20),c.YNc(1,Yi,2,0,"li",21),c.YNc(2,ou,2,0,"li",21),c.qZA()),2&I){c.oxw();const f=c.MAs(6);c.xp6(1),c.Q6J("ngIf",null==f.controls.userPassword.errors?null:f.controls.userPassword.errors.required),c.xp6(1),c.Q6J("ngIf",null==f.controls.userPassword.errors?null:f.controls.userPassword.errors.minlength)}}function Zl(I,m){1&I&&(c.TgZ(0,"li"),c._uU(1,"Confirmed Password is not the same as Password"),c.qZA())}function j(I,m){1&I&&(c.TgZ(0,"li"),c._uU(1,"Value required"),c.qZA())}function z(I,m){1&I&&(c.TgZ(0,"li"),c._uU(1,"Min length is 6 characters"),c.qZA())}function se(I,m){if(1&I&&(c.TgZ(0,"ul",20),c.YNc(1,Zl,2,0,"li",21),c.YNc(2,j,2,0,"li",21),c.YNc(3,z,2,0,"li",21),c.qZA()),2&I){c.oxw();const f=c.MAs(6);c.xp6(1),c.Q6J("ngIf",f.controls.userConfirmPassword.value!==f.controls.userPassword.value),c.xp6(1),c.Q6J("ngIf",null==f.controls.userConfirmPassword.errors?null:f.controls.userConfirmPassword.errors.required),c.xp6(1),c.Q6J("ngIf",null==f.controls.userConfirmPassword.errors?null:f.controls.userConfirmPassword.errors.minlength)}}let Re=(()=>{class I{constructor(f,w,B){this.router=f,this.emitService=w,this.authService=B,this.userLogin="",this.userPassword="",this.userConfirmPassword="",this.userName="",this.userAgreement=!1,this.errorCode="",this.modalMess=!1,this.errorMess="",this.typePassword="password",this.showPassword=!1}submitUserRegistrationForm(f){f.valid&&(this.authService.createUser(this.userName,this.userLogin,this.userPassword),this.subscr3=this.emitService.getCreateUser().subscribe(w=>{switch(this.emitService.saveLinkBack("/bookshelf/entry"),w){case"success":this.emitService.saveErrorMessage("We have sent a confirmation email to "+this.userLogin+". Please check your mailbox and click on the link to complete your SignUp"),this.router.navigate([{outlets:{popup:["message"]}}]);break;default:this.emitErrorMessage("Failed creation of your account. Try again, please.");break;case"auth/email-already-in-use":this.emitErrorMessage("Account with this email already exists. Sign in, please.")}}))}emitErrorMessage(f){this.emitService.saveErrorMessage(f),this.emitService.saveErrorMessColor("text-danger"),this.router.navigate([{outlets:{popup:["message"]}}])}getClasses(){return document.documentElement.clientWidth<=1600?"user-entry-body-small":"user-entry-body"}getStyle(){return this.userConfirmPassword&&this.userPassword?this.userConfirmPassword==this.userPassword?{border:"2px solid #6bc502"}:{border:"2px solid #ff0000"}:{}}setTypePassword(f){this.typePassword=this.showPassword?"text":"password"}resetUserregistrationForm(){}ngOnInit(){}ngOnDestroy(){}}return I.\u0275fac=function(f){return new(f||I)(c.Y36(Di.F0),c.Y36(js.A),c.Y36(xi.e))},I.\u0275cmp=c.Xpm({type:I,selectors:[["app-user-registration"]],decls:37,vars:15,consts:[[1,"user-entry"],[3,"ngClass"],[1,"border","m-0","rounded"],[1,"text-center","text-secondary","p-0","m-0"],["novalidate","","appIdentityValidation2","",1,"m-3","mt-0",3,"ngSubmit","reset"],["form","ngForm"],[1,"mt-2","mx-1","text-secondary"],["name","userName","required","","maxlength","10","pattern","^[A-Za-z0-9\\- ]+$",1,"form-control","form-control-sm","m-1",3,"ngModel","ngModelChange"],["class","text-danger p-0",4,"ngIf"],["name","userLogin","required","","pattern","[a-zA-Z0-9\\.\\-_]+@[a-z]+\\.[a-z]{2,3}",1,"form-control","form-control-sm","m-1",3,"ngModel","ngModelChange"],["name","userPassword","required","","minlength","6",1,"form-control","form-control-sm","m-1",3,"type","ngModel","ngModelChange"],["name","userConfirmPassword","required","","minlength","6",1,"form-control","form-control-sm","m-1",3,"type","ngStyle","ngModel","ngModelChange"],["type","checkbox","name","showPassword","id","showPassword","value","true",1,"mx-1",3,"ngModel","ngModelChange","change"],["for","showPassword",1,"mt-2","mx-1"],["type","checkbox","name","userAgreement","id","userAgreement","value","true",1,"mx-1",3,"ngModel","ngModelChange"],["for","userAgreement",1,"mt-2","mx-1"],[1,"col-12","d-flex","justify-content-center","mt-4"],["type","submit",1,"btn","btn-success","btn-sm","me-2",3,"disabled"],["type","reset","routerLink","/bookshelf/entry",1,"btn","btn-secondary","btn-sm","me-2"],[1,"user-entry-background"],[1,"text-danger","p-0"],[4,"ngIf"]],template:function(f,w){if(1&f){const B=c.EpF();c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),c._uU(4,"Sign Up"),c.qZA(),c.TgZ(5,"form",4,5),c.NdJ("ngSubmit",function(){c.CHM(B);const Ce=c.MAs(6);return c.KtG(w.submitUserRegistrationForm(Ce))})("reset",function(){return w.resetUserregistrationForm()}),c.TgZ(7,"label",6),c._uU(8,"Name"),c.qZA(),c.TgZ(9,"input",7),c.NdJ("ngModelChange",function(Ce){return w.userName=Ce}),c.qZA(),c.YNc(10,Hl,3,2,"ul",8),c.TgZ(11,"label",6),c._uU(12,"Email"),c.qZA(),c.TgZ(13,"input",9),c.NdJ("ngModelChange",function(Ce){return w.userLogin=Ce}),c.qZA(),c.YNc(14,il,3,2,"ul",8),c.TgZ(15,"label",6),c._uU(16,"Password"),c.qZA(),c.TgZ(17,"input",10),c.NdJ("ngModelChange",function(Ce){return w.userPassword=Ce}),c.qZA(),c.YNc(18,xr,3,2,"ul",8),c.TgZ(19,"label",6),c._uU(20,"Confirm Password"),c.qZA(),c.TgZ(21,"input",11),c.NdJ("ngModelChange",function(Ce){return w.userConfirmPassword=Ce}),c.qZA(),c.YNc(22,se,4,3,"ul",8),c.TgZ(23,"input",12),c.NdJ("ngModelChange",function(Ce){return w.showPassword=Ce})("change",function(Ce){return w.setTypePassword(Ce)}),c.qZA(),c.TgZ(24,"label",13),c._uU(25," Show password"),c.qZA(),c._UZ(26,"br"),c.TgZ(27,"input",14),c.NdJ("ngModelChange",function(Ce){return w.userAgreement=Ce}),c.qZA(),c.TgZ(28,"span")(29,"label",15),c._uU(30," I agree with rules and conditions"),c.qZA()(),c.TgZ(31,"div",16)(32,"button",17),c._uU(33,"SignUp"),c.qZA(),c.TgZ(34,"button",18),c._uU(35,"Cancel"),c.qZA()()()()()(),c._UZ(36,"div",19)}if(2&f){const B=c.MAs(6);c.xp6(1),c.Q6J("ngClass",w.getClasses()+" bg-white rounded"),c.xp6(8),c.Q6J("ngModel",w.userName),c.xp6(1),c.Q6J("ngIf",B.controls.userName.dirty&&B.controls.userName.invalid),c.xp6(3),c.Q6J("ngModel",w.userLogin),c.xp6(1),c.Q6J("ngIf",B.controls.userLogin.dirty&&B.controls.userLogin.invalid),c.xp6(3),c.Q6J("type",w.typePassword)("ngModel",w.userPassword),c.xp6(1),c.Q6J("ngIf",B.controls.userPassword.dirty&&B.controls.userPassword.invalid),c.xp6(3),c.Q6J("type",w.typePassword)("ngStyle",w.getStyle())("ngModel",w.userConfirmPassword),c.xp6(1),c.Q6J("ngIf",B.controls.userConfirmPassword.dirty&&B.invalid),c.xp6(1),c.Q6J("ngModel",w.showPassword),c.xp6(4),c.Q6J("ngModel",w.userAgreement),c.xp6(5),c.Q6J("disabled",B.invalid||!w.userAgreement)}},dependencies:[ei.mk,ei.O5,ei.PC,lt._Y,lt.Fj,lt.Wl,lt.JJ,lt.JL,lt.Q7,lt.wO,lt.nD,lt.c5,lt.On,lt.F,Di.rH,rl],styles:["input.ng-dirty.ng-invalid[_ngcontent-%COMP%]{border:2px solid #ff0000}input.ng-dirty.ng-valid[_ngcontent-%COMP%]{border:2px solid #6bc502}.user-entry[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:901}.user-entry-body[_ngcontent-%COMP%]{padding:20px;margin:200px 680px;z-index:902}.user-entry-body-small[_ngcontent-%COMP%]{padding:20px;margin:100px 220px 160px;z-index:902}.user-entry-background[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#000;opacity:.75;z-index:900}ul[_ngcontent-%COMP%]{list-style-type:none;font-size:small;margin:0;padding:0}li[_ngcontent-%COMP%]{display:inline;margin-right:16px}"]}),I})();const ht=["class","password"];function It(I,m){1&I&&(c.TgZ(0,"li"),c._uU(1,"Value required"),c.qZA())}function nn(I,m){1&I&&(c.TgZ(0,"li"),c._uU(1,"Do not match email specification"),c.qZA())}function Cn(I,m){if(1&I&&(c.TgZ(0,"ul",14),c.YNc(1,It,2,0,"li",15),c.YNc(2,nn,2,0,"li",15),c.qZA()),2&I){c.oxw();const f=c.MAs(4);c.xp6(1),c.Q6J("ngIf",null==f.controls.userLogin.errors?null:f.controls.userLogin.errors.required),c.xp6(1),c.Q6J("ngIf",null==f.controls.userLogin.errors?null:f.controls.userLogin.errors.pattern)}}function Gn(I,m){if(1&I){const f=c.EpF();c.TgZ(0,"div",16)(1,"div",1)(2,"h5",5),c._uU(3),c.qZA(),c.TgZ(4,"div",9)(5,"button",17),c.NdJ("click",function(B){c.CHM(f);const X=c.oxw();return c.KtG(X.forgotModalCancel(B))}),c._uU(6,"Cancel"),c.qZA()()()()}if(2&I){const f=c.oxw();c.xp6(1),c.Q6J("ngClass",f.getClasses("mes")+" shadow-lg"),c.xp6(2),c.Oqu(f.forgotMess)}}let Sr=(()=>{class I{constructor(f,w,B){this.emitService=f,this.authService=w,this.router=B,this.userLogin="",this.modalMess=!1,this.errorMess="",this.forgotMess="",this.forgotModal=!1}forgotModalCancel(f){this.forgotModal=!1,this.authService.sendResetPasswordEmail(this.userLogin),this.subscr=this.emitService.getSendResetPasswordEmail().subscribe(w=>{"success"===w?(this.emitService.saveErrorMessage("Reset password email was successfully sent to you address."),this.router.navigate([{outlets:{popup:["message"]}}])):this.emitErrorMessage("Failed sending email. Try again, please.")})}emitErrorMessage(f){this.emitService.saveErrorMessage(f),this.emitService.saveErrorMessColor("text-danger"),this.router.navigate([{outlets:{popup:["message"]}}])}submitSendEmailAddress(f){f.valid&&(this.forgotModal=!0,this.forgotMess="Sending reset password Email to you address. Please, check your postbox.")}getClasses(f){const w=document.documentElement.clientWidth;let B="",X="";switch(f){default:case"body":B="user-entry-body",X="user-entry-body-small";break;case"mes":B="user-entry-body-mess",X="user-entry-body-mess-small"}return w<=1600?X:B}ngOnInit(){}ngOnDestroy(){this.subscr&&this.subscr.unsubscribe()}}return I.\u0275fac=function(f){return new(f||I)(c.Y36(js.A),c.Y36(xi.e),c.Y36(Di.F0))},I.\u0275cmp=c.Xpm({type:I,selectors:[["app-forgot",8,"password"]],attrs:ht,decls:18,vars:5,consts:[[1,"user-entry"],[3,"ngClass"],[1,"border","rounded"],["novalidate","",1,"m-3",3,"ngSubmit"],["forgotPasswordForm","ngForm"],[1,"mt-5","m-2","text-center"],[1,"mt-2","mx-1","text-secondary"],["name","userLogin","required","","pattern","[a-zA-Z0-9\\.\\-_]+@[a-z]+\\.[a-z]{2,3}",1,"form-control","form-control-sm","me-1",3,"ngModel","ngModelChange"],["class","text-danger ms-1 p-0",4,"ngIf"],[1,"col-12","d-flex","justify-content-center","mt-5","m-2"],["type","button","routerLink","/bookshelf/entry",1,"btn","btn-secondary","btn-sm","me-2"],["type","submit",1,"btn","btn-success","btn-sm",3,"disabled"],[1,"user-entry-background"],["class","user-entry-mess",4,"ngIf"],[1,"text-danger","ms-1","p-0"],[4,"ngIf"],[1,"user-entry-mess"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(f,w){if(1&f){const B=c.EpF();c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3,4),c.NdJ("ngSubmit",function(){c.CHM(B);const Ce=c.MAs(4);return c.KtG(w.submitSendEmailAddress(Ce))}),c.TgZ(5,"h5",5),c._uU(6,"Fill in Email Address and we will send you an email with a new password"),c.qZA(),c.TgZ(7,"label",6),c._uU(8,"Email Address"),c.qZA(),c.TgZ(9,"input",7),c.NdJ("ngModelChange",function(Ce){return w.userLogin=Ce}),c.qZA(),c.YNc(10,Cn,3,2,"ul",8),c.TgZ(11,"div",9)(12,"button",10),c._uU(13,"Cancel"),c.qZA(),c.TgZ(14,"button",11),c._uU(15,"Submit"),c.qZA()()()()()(),c._UZ(16,"div",12),c.YNc(17,Gn,7,2,"div",13)}if(2&f){const B=c.MAs(4);c.xp6(1),c.Q6J("ngClass",w.getClasses("body")+" rounded bg-white"),c.xp6(8),c.Q6J("ngModel",w.userLogin),c.xp6(1),c.Q6J("ngIf",B.controls.userLogin.dirty&&B.controls.userLogin.invalid),c.xp6(4),c.Q6J("disabled",B.invalid),c.xp6(3),c.Q6J("ngIf",w.forgotModal)}},dependencies:[ei.mk,ei.O5,lt._Y,lt.Fj,lt.JJ,lt.JL,lt.Q7,lt.c5,lt.On,lt.F,Di.rH],styles:["input.ng-dirty.ng-invalid[_ngcontent-%COMP%]{border:2px solid #ff0000}input.ng-dirty.ng-valid[_ngcontent-%COMP%]{border:2px solid #6bc502}.user-entry[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:901}.user-entry-body[_ngcontent-%COMP%]{padding:20px;margin:200px 680px;z-index:902}.user-entry-body-small[_ngcontent-%COMP%]{padding:20px;margin:130px 250px;z-index:902}.user-entry-background[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#000;opacity:.75;z-index:900}.user-entry-mess[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:950}.user-entry-body-mess[_ngcontent-%COMP%]{padding:20px;margin:250px 735px 200px;z-index:960;background-color:#fff}.user-entry-body-mess-small[_ngcontent-%COMP%]{padding:20px;margin:130px 200px;z-index:960;background-color:#fff}ul[_ngcontent-%COMP%]{list-style-type:none;font-size:small;margin:0;padding:0}li[_ngcontent-%COMP%]{display:inline;margin-right:8px}"]}),I})(),Br=(()=>{class I{constructor(){this.authService=(0,c.f3M)(xi.e)}canActivate(){return this.authService.authAdminUid()}canActivateChild(){return this.authService.authAdminUid()}canLoad(){return this.authService.authAdminUid()}}return I.\u0275fac=function(f){return new(f||I)},I.\u0275prov=c.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})(),ar=(()=>{class I{constructor(){this.authService=(0,c.f3M)(xi.e)}canActivate(){return this.authService.authUserUid()}canActivateChild(){return this.authService.authUserUid()}canLoad(){return this.authService.authUserUid()}}return I.\u0275fac=function(f){return new(f||I)},I.\u0275prov=c.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();var Es=k(515);const sl=[{path:"message",component:(()=>{class I{constructor(f,w){this.router=f,this.emitService=w,this.errorMess="",this.linkBack=null,this.errorMessColor="",this.errorMess=w.getErrorMessage(),this.linkBack=w.getLinkBack(),this.errorMessColor=this.emitService.getErrorMessColor()}closePopup(){this.router.navigate([{outlets:{popup:null}}]),this.emitService.saveErrorMessColor(""),this.linkBack&&(this.emitService.saveLinkBack(null),this.router.navigateByUrl(this.linkBack))}getClasses(f){const w=document.documentElement.clientWidth;switch(f){default:case"doc":return w<=1600?"user-entry-body-mess-small":"user-entry-body-mess";case"text":return this.errorMessColor}}ngOnInit(){}}return I.\u0275fac=function(f){return new(f||I)(c.Y36(Di.F0),c.Y36(js.A))},I.\u0275cmp=c.Xpm({type:I,selectors:[["app-error-message"]],decls:7,vars:3,consts:[[1,"user-entry-mess"],[3,"ngClass"],[1,"col-12","d-flex","justify-content-center","mt-5","m-2"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(f,w){1&f&&(c.TgZ(0,"div",0)(1,"div",1)(2,"h5",1),c._uU(3),c.qZA(),c.TgZ(4,"div",2)(5,"button",3),c.NdJ("click",function(){return w.closePopup()}),c._uU(6,"Cancel"),c.qZA()()()()),2&f&&(c.xp6(1),c.Q6J("ngClass",w.getClasses("doc")+" shadow-lg"),c.xp6(1),c.Q6J("ngClass","mt-5 m-2 text-center "+w.getClasses("text")),c.xp6(1),c.Oqu(w.errorMess))},dependencies:[ei.mk],styles:[".user-entry-mess[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:950}.user-entry-body-mess[_ngcontent-%COMP%]{padding:20px;margin:250px 735px 200px;z-index:960;background-color:#fff}.user-entry-body-mess-small[_ngcontent-%COMP%]{padding:20px;margin:130px 250px;z-index:960;background-color:#fff}"]}),I})(),outlet:"popup"},{path:"admin",loadChildren:()=>k.e(80).then(k.bind(k,5080)).then(I=>I.AdminModule),canLoad:[Br],canActivate:[Br],canActivateChild:[Br]},{path:"bookshelf/bookdetail",component:pn},{path:"uservewed/bookdetail",component:pn},{path:"userbooked/bookdetail",component:pn},{path:"usercabinet",loadChildren:()=>Promise.resolve().then(k.bind(k,244)).then(I=>I.UsercabinetModule),canLoad:[ar],canActivate:[ar],canActivateChild:[ar]},{path:"bookshelf",component:Js,children:[{path:"userblock",component:xa},{path:"entry",component:Ko},{path:"registration",component:Re},{path:"forgotpassword",component:Sr}],resolve:{main:(()=>{class I{resolve(){const f=document.documentElement.clientHeight,w=document.documentElement.clientWidth;return f<600||w<1e3?(alert("Screen width and height are too small"),Es.E):(0,Ro.of)(!0)}}return I.\u0275fac=function(f){return new(f||I)},I.\u0275prov=c.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})()}},{path:"",redirectTo:"/bookshelf",pathMatch:"full"}];let ol=(()=>{class I{}return I.\u0275fac=function(f){return new(f||I)},I.\u0275mod=c.oAB({type:I}),I.\u0275inj=c.cJS({imports:[Di.Bz.forRoot(sl),Di.Bz]}),I})(),Mo=(()=>{class I{constructor(){this.title="BookShop"}}return I.\u0275fac=function(f){return new(f||I)},I.\u0275cmp=c.Xpm({type:I,selectors:[["app-root"]],decls:2,vars:0,consts:[["name","popup"]],template:function(f,w){1&f&&c._UZ(0,"router-outlet")(1,"router-outlet",0)},dependencies:[Di.lC]}),I})();const go_firebaseConfig={apiKey:"AIzaSyBO6BCnzjohwxPkRG_c8ZeGfk_DrRO_FWQ",authDomain:"authentification-74a9d.firebaseapp.com",projectId:"authentification-74a9d",storageBucket:"authentification-74a9d.appspot.com",messagingSenderId:"1007562302336",appId:"1:1007562302336:web:6aafb68781284ecde91765",measurementId:"G-YEGJMX6JBS"};var al=k(1205),Ya=k(2011),Ba=k(6185);const Ac=[{provide:or,useClass:(()=>{class I{intercept(f,w){return w.handle(f)}}return I.\u0275fac=function(f){return new(f||I)},I.\u0275prov=c.Yz7({token:I,factory:I.\u0275fac}),I})(),multi:!0}];let kl=(()=>{class I{}return I.\u0275fac=function(f){return new(f||I)},I.\u0275mod=c.oAB({type:I,bootstrap:[Mo]}),I.\u0275inj=c.cJS({providers:[{provide:al.f7,useValue:"session"},Ac],imports:[h.b2,ol,Ua,oo,Fo.m,Ya.hO.initializeApp(go_firebaseConfig),al.ww,Ba.yb,Ys]}),I})();(0,c.G48)(),h.q6().bootstrapModule(kl).catch(I=>console.error(I))},5867:(Jt,Qe,k)=>{k.d(Qe,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=k(9681);(0,h.registerVersion)("firebase","9.13.0","app")},127:(Jt,Qe,k)=>{k.d(Qe,{Z:()=>h.Z});var h=k(3942);h.Z.registerVersion("firebase","9.13.0","app-compat")},5881:(Jt,Qe,k)=>{k.r(Qe);var h=k(5861),c=k(3942),S=k(8247),d=k(2090),_e=(k(9681),k(1877),k(4859));function fe(){return window}function be(){return(be=(0,h.Z)(function*(De,ie,we){var ut;const{BuildInfo:Bt}=fe();(0,S.ap)(ie.sessionId,"AuthEvent did not contain a session ID");const gn=yield ft(ie.sessionId),hn={};return(0,S.aq)()?hn.ibi=Bt.packageName:(0,S.ar)()?hn.apn=Bt.packageName:(0,S.as)(De,"operation-not-supported-in-this-environment"),Bt.displayName&&(hn.appDisplayName=Bt.displayName),hn.sessionId=gn,(0,S.at)(De,we,ie.type,void 0,null!==(ut=ie.eventId)&&void 0!==ut?ut:void 0,hn)})).apply(this,arguments)}function st(){return(st=(0,h.Z)(function*(De){const{BuildInfo:ie}=fe(),we={};(0,S.aq)()?we.iosBundleId=ie.packageName:(0,S.ar)()?we.androidPackageName=ie.packageName:(0,S.as)(De,"operation-not-supported-in-this-environment"),yield(0,S.au)(De,we)})).apply(this,arguments)}function Tt(){return(Tt=(0,h.Z)(function*(De,ie,we){const{cordova:ut}=fe();let Bt=()=>{};try{yield new Promise((gn,hn)=>{let Se=null;function Y(){var me;gn();const Ke=null===(me=ut.plugins.browsertab)||void 0===me?void 0:me.close;"function"==typeof Ke&&Ke(),"function"==typeof we?.close&&we.close()}function W(){Se||(Se=window.setTimeout(()=>{hn((0,S.aw)(De,"redirect-cancelled-by-user"))},2e3))}function te(){"visible"===document?.visibilityState&&W()}ie.addPassiveListener(Y),document.addEventListener("resume",W,!1),(0,S.ar)()&&document.addEventListener("visibilitychange",te,!1),Bt=()=>{ie.removePassiveListener(Y),document.removeEventListener("resume",W,!1),document.removeEventListener("visibilitychange",te,!1),Se&&window.clearTimeout(Se)}})}finally{Bt()}})).apply(this,arguments)}function ft(De){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,h.Z)(function*(De){const ie=Gt(De),we=yield crypto.subtle.digest("SHA-256",ie);return Array.from(new Uint8Array(we)).map(Bt=>Bt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Gt(De){if((0,S.ap)(/[0-9a-zA-Z]+/.test(De),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(De);const ie=new ArrayBuffer(De.length),we=new Uint8Array(ie);for(let ut=0;ut<De.length;ut++)we[ut]=De.charCodeAt(ut);return we}class Me extends S.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(ie=>{this.resolveInialized=ie})}addPassiveListener(ie){this.passiveListeners.add(ie)}removePassiveListener(ie){this.passiveListeners.delete(ie)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(ie){return this.resolveInialized(),this.passiveListeners.forEach(we=>we(ie)),super.onEvent(ie)}initialized(){var ie=this;return(0,h.Z)(function*(){yield ie.initPromise})()}}function qe(De){return it.apply(this,arguments)}function it(){return(it=(0,h.Z)(function*(De){const ie=yield je()._get(pt(De));return ie&&(yield je()._remove(pt(De))),ie})).apply(this,arguments)}function We(){const De=[],ie="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let we=0;we<20;we++){const ut=Math.floor(Math.random()*ie.length);De.push(ie.charAt(ut))}return De.join("")}function je(){return(0,S.az)(S.b)}function pt(De){return(0,S.aA)("authEvent",De.config.apiKey,De.name)}function $t(De){if(!De?.includes("?"))return{};const[ie,...we]=De.split("?");return(0,d.zd)(we.join("?"))}function Rt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,S.aw)("no-auth-event")}}function Wt(){var De;return(null===(De=self?.location)||void 0===De?void 0:De.protocol)||null}function vr(De=(0,d.z$)()){return!("file:"!==Wt()&&"ionic:"!==Wt()&&"capacitor:"!==Wt()||!De.toLowerCase().match(/iphone|ipad|ipod|android/))}function Vn(){try{const De=self.localStorage,ie=S.aI();if(De)return De.setItem(ie,"1"),De.removeItem(ie),!function sr(De=(0,d.z$)()){return function br(){return(0,d.w1)()&&11===document?.documentMode}()||function ir(De=(0,d.z$)()){return/Edge\/\d+/.test(De)}(De)}()||(0,d.hl)()}catch{return Cr()&&(0,d.hl)()}return!1}function Cr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function yr(){return(function dn(){return"http:"===Wt()||"https:"===Wt()}()||(0,d.ru)()||vr())&&!function Ar(){return(0,d.b$)()||(0,d.UG)()}()&&Vn()&&!Cr()}function Rr(){return vr()&&typeof document<"u"}function Ht(){return(Ht=(0,h.Z)(function*(){return!!Rr()&&new Promise(De=>{const ie=setTimeout(()=>{De(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(ie),De(!0)})})})).apply(this,arguments)}const tr={LOCAL:"local",NONE:"none",SESSION:"session"},nr=S.ax,Nr="persistence";function Ir(De){return _r.apply(this,arguments)}function _r(){return(_r=(0,h.Z)(function*(De){yield De._initializationPromise;const ie=mn(),we=S.aA(Nr,De.config.apiKey,De.name);ie&&ie.setItem(we,De._getPersistence())})).apply(this,arguments)}function mn(){var De;try{return(null===(De=function cr(){return typeof window<"u"?window:null}())||void 0===De?void 0:De.sessionStorage)||null}catch{return null}}const Tn=S.ax;class On{constructor(){this.browserResolver=S.az(S.k),this.cordovaResolver=S.az(class Mn{constructor(){this._redirectPersistence=S.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=S.aB,this._overrideRedirectResult=S.aC}_initialize(ie){var we=this;return(0,h.Z)(function*(){const ut=ie._key();let Bt=we.eventManagers.get(ut);return Bt||(Bt=new Me(ie),we.eventManagers.set(ut,Bt),we.attachCallbackListeners(ie,Bt)),Bt})()}_openPopup(ie){(0,S.as)(ie,"operation-not-supported-in-this-environment")}_openRedirect(ie,we,ut,Bt){var gn=this;return(0,h.Z)(function*(){!function gt(De){var ie,we,ut,Bt,gn,hn,Se,Y,W,te;const me=fe();(0,S.ax)("function"==typeof(null===(ie=me?.universalLinks)||void 0===ie?void 0:ie.subscribe),De,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,S.ax)(typeof(null===(we=me?.BuildInfo)||void 0===we?void 0:we.packageName)<"u",De,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,S.ax)("function"==typeof(null===(gn=null===(Bt=null===(ut=me?.cordova)||void 0===ut?void 0:ut.plugins)||void 0===Bt?void 0:Bt.browsertab)||void 0===gn?void 0:gn.openUrl),De,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,S.ax)("function"==typeof(null===(Y=null===(Se=null===(hn=me?.cordova)||void 0===hn?void 0:hn.plugins)||void 0===Se?void 0:Se.browsertab)||void 0===Y?void 0:Y.isAvailable),De,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,S.ax)("function"==typeof(null===(te=null===(W=me?.cordova)||void 0===W?void 0:W.InAppBrowser)||void 0===te?void 0:te.open),De,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(ie);const hn=yield gn._initialize(ie);yield hn.initialized(),hn.resetRedirect(),(0,S.aD)(),yield gn._originValidation(ie);const Se=function rt(De,ie,we=null){return{type:ie,eventId:we,urlResponse:null,sessionId:We(),postBody:null,tenantId:De.tenantId,error:(0,S.aw)(De,"no-auth-event")}}(ie,ut,Bt);yield function Pt(De,ie){return je()._set(pt(De),ie)}(ie,Se);const Y=yield function pe(De,ie,we){return be.apply(this,arguments)}(ie,Se,we),W=yield function mt(De){const{cordova:ie}=fe();return new Promise(we=>{ie.plugins.browsertab.isAvailable(ut=>{let Bt=null;ut?ie.plugins.browsertab.openUrl(De):Bt=ie.InAppBrowser.open(De,(0,S.av)()?"_blank":"_system","location=yes"),we(Bt)})})}(Y);return function He(De,ie,we){return Tt.apply(this,arguments)}(ie,hn,W)})()}_isIframeWebStorageSupported(ie,we){throw new Error("Method not implemented.")}_originValidation(ie){const we=ie._key();return this.originValidationPromises[we]||(this.originValidationPromises[we]=function Pe(De){return st.apply(this,arguments)}(ie)),this.originValidationPromises[we]}attachCallbackListeners(ie,we){const{universalLinks:ut,handleOpenURL:Bt,BuildInfo:gn}=fe(),hn=setTimeout((0,h.Z)(function*(){yield qe(ie),we.onEvent(Rt())}),500),Se=function(){var te=(0,h.Z)(function*(me){clearTimeout(hn);const Ke=yield qe(ie);let Ft=null;Ke&&me?.url&&(Ft=function ct(De,ie){var we,ut;const Bt=function Lt(De){const ie=$t(De),we=ie.link?decodeURIComponent(ie.link):void 0,ut=$t(we).link,Bt=ie.deep_link_id?decodeURIComponent(ie.deep_link_id):void 0;return $t(Bt).link||Bt||ut||we||De}(ie);if(Bt.includes("/__/auth/callback")){const gn=$t(Bt),hn=gn.firebaseError?function dt(De){try{return JSON.parse(De)}catch{return null}}(decodeURIComponent(gn.firebaseError)):null,Se=null===(ut=null===(we=hn?.code)||void 0===we?void 0:we.split("auth/"))||void 0===ut?void 0:ut[1],Y=Se?(0,S.aw)(Se):null;return Y?{type:De.type,eventId:De.eventId,tenantId:De.tenantId,error:Y,urlResponse:null,sessionId:null,postBody:null}:{type:De.type,eventId:De.eventId,tenantId:De.tenantId,sessionId:De.sessionId,urlResponse:Bt,postBody:null}}return null}(Ke,me.url)),we.onEvent(Ft||Rt())});return function(Ke){return te.apply(this,arguments)}}();typeof ut<"u"&&"function"==typeof ut.subscribe&&ut.subscribe(null,Se);const Y=Bt,W=`${gn.packageName.toLowerCase()}://`;fe().handleOpenURL=function(){var te=(0,h.Z)(function*(me){if(me.toLowerCase().startsWith(W)&&Se({url:me}),"function"==typeof Y)try{Y(me)}catch(Ke){console.error(Ke)}});return function(me){return te.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=S.a,this._completeRedirectFn=S.aB,this._overrideRedirectResult=S.aC}_initialize(ie){var we=this;return(0,h.Z)(function*(){return yield we.selectUnderlyingResolver(),we.assertedUnderlyingResolver._initialize(ie)})()}_openPopup(ie,we,ut,Bt){var gn=this;return(0,h.Z)(function*(){return yield gn.selectUnderlyingResolver(),gn.assertedUnderlyingResolver._openPopup(ie,we,ut,Bt)})()}_openRedirect(ie,we,ut,Bt){var gn=this;return(0,h.Z)(function*(){return yield gn.selectUnderlyingResolver(),gn.assertedUnderlyingResolver._openRedirect(ie,we,ut,Bt)})()}_isIframeWebStorageSupported(ie,we){this.assertedUnderlyingResolver._isIframeWebStorageSupported(ie,we)}_originValidation(ie){return this.assertedUnderlyingResolver._originValidation(ie)}get _shouldInitProactively(){return Rr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Tn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var ie=this;return(0,h.Z)(function*(){if(ie.underlyingResolver)return;const we=yield function er(){return Ht.apply(this,arguments)}();ie.underlyingResolver=we?ie.cordovaResolver:ie.browserResolver})()}}function wr(De){return De.unwrap()}function zr(De){return zt(De)}function zt(De){const{_tokenResponse:ie}=De instanceof d.ZR?De.customData:De;if(!ie)return null;if(!(De instanceof d.ZR)&&"temporaryProof"in ie&&"phoneNumber"in ie)return S.P.credentialFromResult(De);const we=ie.providerId;if(!we||we===S.o.PASSWORD)return null;let ut;switch(we){case S.o.GOOGLE:ut=S.Q;break;case S.o.FACEBOOK:ut=S.N;break;case S.o.GITHUB:ut=S.T;break;case S.o.TWITTER:ut=S.W;break;default:const{oauthIdToken:Bt,oauthAccessToken:gn,oauthTokenSecret:hn,pendingToken:Se,nonce:Y}=ie;return gn||hn||Bt||Se?Se?we.startsWith("saml.")?S.aL._create(we,Se):S.J._fromParams({providerId:we,signInMethod:we,pendingToken:Se,idToken:Bt,accessToken:gn}):new S.U(we).credential({idToken:Bt,accessToken:gn,rawNonce:Y}):null}return De instanceof d.ZR?ut.credentialFromError(De):ut.credentialFromResult(De)}function Ve(De,ie){return ie.catch(we=>{throw we instanceof d.ZR&&function Kn(De,ie){var we,ut;const Bt=null===(we=ie.customData)||void 0===we?void 0:we._tokenResponse;if("auth/multi-factor-auth-required"===(null===(ut=ie)||void 0===ut?void 0:ut.code))ie.resolver=new Rn(De,S.an(De,ie));else if(Bt){const gn=zt(ie),hn=ie;gn&&(hn.credential=gn,hn.tenantId=Bt.tenantId||void 0,hn.email=Bt.email||void 0,hn.phoneNumber=Bt.phoneNumber||void 0)}}(De,we),we}).then(we=>{const Bt=we.user;return{operationType:we.operationType,credential:zr(we),additionalUserInfo:S.al(we),user:Jn.getOrCreate(Bt)}})}function tt(De,ie){return St.apply(this,arguments)}function St(){return(St=(0,h.Z)(function*(De,ie){const we=yield ie;return{verificationId:we.verificationId,confirm:ut=>Ve(De,we.confirm(ut))}})).apply(this,arguments)}class Rn{constructor(ie,we){this.resolver=we,this.auth=function bn(De){return De.wrapped()}(ie)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(ie){return Ve(wr(this.auth),this.resolver.resolveSignIn(ie))}}class Jn{constructor(ie){this._delegate=ie,this.multiFactor=S.ao(ie)}static getOrCreate(ie){return Jn.USER_MAP.has(ie)||Jn.USER_MAP.set(ie,new Jn(ie)),Jn.USER_MAP.get(ie)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(ie){return this._delegate.getIdTokenResult(ie)}getIdToken(ie){return this._delegate.getIdToken(ie)}linkAndRetrieveDataWithCredential(ie){return this.linkWithCredential(ie)}linkWithCredential(ie){var we=this;return(0,h.Z)(function*(){return Ve(we.auth,S.Z(we._delegate,ie))})()}linkWithPhoneNumber(ie,we){var ut=this;return(0,h.Z)(function*(){return tt(ut.auth,S.l(ut._delegate,ie,we))})()}linkWithPopup(ie){var we=this;return(0,h.Z)(function*(){return Ve(we.auth,S.d(we._delegate,ie,On))})()}linkWithRedirect(ie){var we=this;return(0,h.Z)(function*(){return yield Ir(S.aE(we.auth)),S.g(we._delegate,ie,On)})()}reauthenticateAndRetrieveDataWithCredential(ie){return this.reauthenticateWithCredential(ie)}reauthenticateWithCredential(ie){var we=this;return(0,h.Z)(function*(){return Ve(we.auth,S._(we._delegate,ie))})()}reauthenticateWithPhoneNumber(ie,we){return tt(this.auth,S.r(this._delegate,ie,we))}reauthenticateWithPopup(ie){return Ve(this.auth,S.e(this._delegate,ie,On))}reauthenticateWithRedirect(ie){var we=this;return(0,h.Z)(function*(){return yield Ir(S.aE(we.auth)),S.h(we._delegate,ie,On)})()}sendEmailVerification(ie){return S.ab(this._delegate,ie)}unlink(ie){var we=this;return(0,h.Z)(function*(){return yield S.ak(we._delegate,ie),we})()}updateEmail(ie){return S.ag(this._delegate,ie)}updatePassword(ie){return S.ah(this._delegate,ie)}updatePhoneNumber(ie){return S.u(this._delegate,ie)}updateProfile(ie){return S.af(this._delegate,ie)}verifyBeforeUpdateEmail(ie,we){return S.ac(this._delegate,ie,we)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Jn.USER_MAP=new WeakMap;const Je=S.ax;let J=(()=>{class De{constructor(we,ut){if(this.app=we,ut.isInitialized())return this._delegate=ut.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Bt}=we.options;Je(Bt,"invalid-api-key",{appName:we.name}),Je(Bt,"invalid-api-key",{appName:we.name});const gn=typeof window<"u"?On:void 0;this._delegate=ut.initialize({options:{persistence:Xe(Bt,we.name),popupRedirectResolver:gn}}),this._delegate._updateErrorMap(S.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Jn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(we){this._delegate.languageCode=we}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(we){this._delegate.tenantId=we}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(we,ut){S.G(this._delegate,we,ut)}applyActionCode(we){return S.a2(this._delegate,we)}checkActionCode(we){return S.a3(this._delegate,we)}confirmPasswordReset(we,ut){return S.a1(this._delegate,we,ut)}createUserWithEmailAndPassword(we,ut){var Bt=this;return(0,h.Z)(function*(){return Ve(Bt._delegate,S.a5(Bt._delegate,we,ut))})()}fetchProvidersForEmail(we){return this.fetchSignInMethodsForEmail(we)}fetchSignInMethodsForEmail(we){return S.aa(this._delegate,we)}isSignInWithEmailLink(we){return S.a8(this._delegate,we)}getRedirectResult(){var we=this;return(0,h.Z)(function*(){Je(yr(),we._delegate,"operation-not-supported-in-this-environment");const ut=yield S.j(we._delegate,On);return ut?Ve(we._delegate,Promise.resolve(ut)):{credential:null,user:null}})()}addFrameworkForLogging(we){!function Pn(De,ie){(0,S.aE)(De)._logFramework(ie)}(this._delegate,we)}onAuthStateChanged(we,ut,Bt){const{next:gn,error:hn,complete:Se}=ge(we,ut,Bt);return this._delegate.onAuthStateChanged(gn,hn,Se)}onIdTokenChanged(we,ut,Bt){const{next:gn,error:hn,complete:Se}=ge(we,ut,Bt);return this._delegate.onIdTokenChanged(gn,hn,Se)}sendSignInLinkToEmail(we,ut){return S.a7(this._delegate,we,ut)}sendPasswordResetEmail(we,ut){return S.a0(this._delegate,we,ut||void 0)}setPersistence(we){var ut=this;return(0,h.Z)(function*(){let Bt;switch(function _i(De,ie){nr(Object.values(tr).includes(ie),De,"invalid-persistence-type"),(0,d.b$)()?nr(ie!==tr.SESSION,De,"unsupported-persistence-type"):(0,d.UG)()?nr(ie===tr.NONE,De,"unsupported-persistence-type"):Cr()?nr(ie===tr.NONE||ie===tr.LOCAL&&(0,d.hl)(),De,"unsupported-persistence-type"):nr(ie===tr.NONE||Vn(),De,"unsupported-persistence-type")}(ut._delegate,we),we){case tr.SESSION:Bt=S.a;break;case tr.LOCAL:Bt=(yield S.az(S.i)._isAvailable())?S.i:S.b;break;case tr.NONE:Bt=S.L;break;default:return S.as("argument-error",{appName:ut._delegate.name})}return ut._delegate.setPersistence(Bt)})()}signInAndRetrieveDataWithCredential(we){return this.signInWithCredential(we)}signInAnonymously(){return Ve(this._delegate,S.X(this._delegate))}signInWithCredential(we){return Ve(this._delegate,S.Y(this._delegate,we))}signInWithCustomToken(we){return Ve(this._delegate,S.$(this._delegate,we))}signInWithEmailAndPassword(we,ut){return Ve(this._delegate,S.a6(this._delegate,we,ut))}signInWithEmailLink(we,ut){return Ve(this._delegate,S.a9(this._delegate,we,ut))}signInWithPhoneNumber(we,ut){return tt(this._delegate,S.s(this._delegate,we,ut))}signInWithPopup(we){var ut=this;return(0,h.Z)(function*(){return Je(yr(),ut._delegate,"operation-not-supported-in-this-environment"),Ve(ut._delegate,S.c(ut._delegate,we,On))})()}signInWithRedirect(we){var ut=this;return(0,h.Z)(function*(){return Je(yr(),ut._delegate,"operation-not-supported-in-this-environment"),yield Ir(ut._delegate),S.f(ut._delegate,we,On)})()}updateCurrentUser(we){return this._delegate.updateCurrentUser(we)}verifyPasswordResetCode(we){return S.a4(this._delegate,we)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return De.Persistence=tr,De})();function ge(De,ie,we){let ut=De;"function"!=typeof De&&({next:ut,error:ie,complete:we}=De);const Bt=ut;return{next:hn=>Bt(hn&&Jn.getOrCreate(hn)),error:ie,complete:we}}function Xe(De,ie){const we=function fr(De,ie){const we=mn();if(!we)return[];const ut=S.aA(Nr,De,ie);switch(we.getItem(ut)){case tr.NONE:return[S.L];case tr.LOCAL:return[S.i,S.a];case tr.SESSION:return[S.a];default:return[]}}(De,ie);if(typeof self<"u"&&!we.includes(S.i)&&we.push(S.i),typeof window<"u")for(const ut of[S.b,S.a])we.includes(ut)||we.push(ut);return we.includes(S.L)||we.push(S.L),we}class _t{constructor(){this.providerId="phone",this._delegate=new S.P(wr(c.Z.auth()))}static credential(ie,we){return S.P.credential(ie,we)}verifyPhoneNumber(ie,we){return this._delegate.verifyPhoneNumber(ie,we)}unwrap(){return this._delegate}}_t.PHONE_SIGN_IN_METHOD=S.P.PHONE_SIGN_IN_METHOD,_t.PROVIDER_ID=S.P.PROVIDER_ID;const ln=S.ax;class Ne{constructor(ie,we,ut=c.Z.app()){var Bt;ln(null===(Bt=ut.options)||void 0===Bt?void 0:Bt.apiKey,"invalid-api-key",{appName:ut.name}),this._delegate=new S.R(ie,we,ut.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function $e(De){De.INTERNAL.registerComponent(new _e.wA("auth-compat",ie=>{const we=ie.getProvider("app-compat").getImmediate(),ut=ie.getProvider("auth");return new J(we,ut)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:S.A.EMAIL_SIGNIN,PASSWORD_RESET:S.A.PASSWORD_RESET,RECOVER_EMAIL:S.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:S.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:S.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:S.A.VERIFY_EMAIL}},EmailAuthProvider:S.M,FacebookAuthProvider:S.N,GithubAuthProvider:S.T,GoogleAuthProvider:S.Q,OAuthProvider:S.U,SAMLAuthProvider:S.V,PhoneAuthProvider:_t,PhoneMultiFactorGenerator:S.m,RecaptchaVerifier:Ne,TwitterAuthProvider:S.W,Auth:J,AuthCredential:S.H,Error:d.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),De.registerVersion("@firebase/auth-compat","0.2.24")}(c.Z)},2731:(Jt,Qe,k)=>{k.d(Qe,{EK:()=>h.EK});var h=k(5525)},1135:(Jt,Qe,k)=>{k.d(Qe,{X:()=>c});var h=k(7579);class c extends h.x{constructor(d){super(),this._value=d}get value(){return this.getValue()}_subscribe(d){const de=super._subscribe(d);return!de.closed&&d.next(this._value),de}getValue(){const{hasError:d,thrownError:de,_value:Ae}=this;if(d)throw de;return this._throwIfClosed(),Ae}next(d){super.next(this._value=d)}}},9751:(Jt,Qe,k)=>{k.d(Qe,{y:()=>fe});var h=k(930),c=k(727),S=k(8822),d=k(9635),de=k(2416),Ae=k(576),_e=k(2806);let fe=(()=>{class Pe{constructor(mt){mt&&(this._subscribe=mt)}lift(mt){const He=new Pe;return He.source=this,He.operator=mt,He}subscribe(mt,He,Tt){const gt=function be(Pe){return Pe&&Pe instanceof h.Lv||function pe(Pe){return Pe&&(0,Ae.m)(Pe.next)&&(0,Ae.m)(Pe.error)&&(0,Ae.m)(Pe.complete)}(Pe)&&(0,c.Nn)(Pe)}(mt)?mt:new h.Hp(mt,He,Tt);return(0,_e.x)(()=>{const{operator:ft,source:Ye}=this;gt.add(ft?ft.call(gt,Ye):Ye?this._subscribe(gt):this._trySubscribe(gt))}),gt}_trySubscribe(mt){try{return this._subscribe(mt)}catch(He){mt.error(He)}}forEach(mt,He){return new(He=Fe(He))((Tt,gt)=>{const ft=new h.Hp({next:Ye=>{try{mt(Ye)}catch(Gt){gt(Gt),ft.unsubscribe()}},error:gt,complete:Tt});this.subscribe(ft)})}_subscribe(mt){var He;return null===(He=this.source)||void 0===He?void 0:He.subscribe(mt)}[S.L](){return this}pipe(...mt){return(0,d.U)(mt)(this)}toPromise(mt){return new(mt=Fe(mt))((He,Tt)=>{let gt;this.subscribe(ft=>gt=ft,ft=>Tt(ft),()=>He(gt))})}}return Pe.create=st=>new Pe(st),Pe})();function Fe(Pe){var st;return null!==(st=Pe??de.v.Promise)&&void 0!==st?st:Promise}},7579:(Jt,Qe,k)=>{k.d(Qe,{x:()=>_e});var h=k(9751),c=k(727);const d=(0,k(3888).d)(Fe=>function(){Fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=k(8737),Ae=k(2806);let _e=(()=>{class Fe extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(be){const Pe=new fe(this,this);return Pe.operator=be,Pe}_throwIfClosed(){if(this.closed)throw new d}next(be){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Pe of this.currentObservers)Pe.next(be)}})}error(be){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=be;const{observers:Pe}=this;for(;Pe.length;)Pe.shift().error(be)}})}complete(){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:be}=this;for(;be.length;)be.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var be;return(null===(be=this.observers)||void 0===be?void 0:be.length)>0}_trySubscribe(be){return this._throwIfClosed(),super._trySubscribe(be)}_subscribe(be){return this._throwIfClosed(),this._checkFinalizedStatuses(be),this._innerSubscribe(be)}_innerSubscribe(be){const{hasError:Pe,isStopped:st,observers:mt}=this;return Pe||st?c.Lc:(this.currentObservers=null,mt.push(be),new c.w0(()=>{this.currentObservers=null,(0,de.P)(mt,be)}))}_checkFinalizedStatuses(be){const{hasError:Pe,thrownError:st,isStopped:mt}=this;Pe?be.error(st):mt&&be.complete()}asObservable(){const be=new h.y;return be.source=this,be}}return Fe.create=(pe,be)=>new fe(pe,be),Fe})();class fe extends _e{constructor(pe,be){super(),this.destination=pe,this.source=be}next(pe){var be,Pe;null===(Pe=null===(be=this.destination)||void 0===be?void 0:be.next)||void 0===Pe||Pe.call(be,pe)}error(pe){var be,Pe;null===(Pe=null===(be=this.destination)||void 0===be?void 0:be.error)||void 0===Pe||Pe.call(be,pe)}complete(){var pe,be;null===(be=null===(pe=this.destination)||void 0===pe?void 0:pe.complete)||void 0===be||be.call(pe)}_subscribe(pe){var be,Pe;return null!==(Pe=null===(be=this.source)||void 0===be?void 0:be.subscribe(pe))&&void 0!==Pe?Pe:c.Lc}}},930:(Jt,Qe,k)=>{k.d(Qe,{Hp:()=>Tt,Lv:()=>Pe});var h=k(576),c=k(727),S=k(2416),d=k(7849),de=k(5032);const Ae=Fe("C",void 0,void 0);function Fe(Ge,Me,rt){return{kind:Ge,value:Me,error:rt}}var pe=k(3410),be=k(2806);class Pe extends c.w0{constructor(Me){super(),this.isStopped=!1,Me?(this.destination=Me,(0,c.Nn)(Me)&&Me.add(this)):this.destination=Gt}static create(Me,rt,Pt){return new Tt(Me,rt,Pt)}next(Me){this.isStopped?Ye(function fe(Ge){return Fe("N",Ge,void 0)}(Me),this):this._next(Me)}error(Me){this.isStopped?Ye(function _e(Ge){return Fe("E",void 0,Ge)}(Me),this):(this.isStopped=!0,this._error(Me))}complete(){this.isStopped?Ye(Ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Me){this.destination.next(Me)}_error(Me){try{this.destination.error(Me)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const st=Function.prototype.bind;function mt(Ge,Me){return st.call(Ge,Me)}class He{constructor(Me){this.partialObserver=Me}next(Me){const{partialObserver:rt}=this;if(rt.next)try{rt.next(Me)}catch(Pt){gt(Pt)}}error(Me){const{partialObserver:rt}=this;if(rt.error)try{rt.error(Me)}catch(Pt){gt(Pt)}else gt(Me)}complete(){const{partialObserver:Me}=this;if(Me.complete)try{Me.complete()}catch(rt){gt(rt)}}}class Tt extends Pe{constructor(Me,rt,Pt){let qe;if(super(),(0,h.m)(Me)||!Me)qe={next:Me??void 0,error:rt??void 0,complete:Pt??void 0};else{let it;this&&S.v.useDeprecatedNextContext?(it=Object.create(Me),it.unsubscribe=()=>this.unsubscribe(),qe={next:Me.next&&mt(Me.next,it),error:Me.error&&mt(Me.error,it),complete:Me.complete&&mt(Me.complete,it)}):qe=Me}this.destination=new He(qe)}}function gt(Ge){S.v.useDeprecatedSynchronousErrorHandling?(0,be.O)(Ge):(0,d.h)(Ge)}function Ye(Ge,Me){const{onStoppedNotification:rt}=S.v;rt&&pe.z.setTimeout(()=>rt(Ge,Me))}const Gt={closed:!0,next:de.Z,error:function ft(Ge){throw Ge},complete:de.Z}},727:(Jt,Qe,k)=>{k.d(Qe,{Lc:()=>Ae,w0:()=>de,Nn:()=>_e});var h=k(576);const S=(0,k(3888).d)(Fe=>function(be){Fe(this),this.message=be?`${be.length} errors occurred during unsubscription:\n${be.map((Pe,st)=>`${st+1}) ${Pe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=be});var d=k(8737);class de{constructor(pe){this.initialTeardown=pe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let pe;if(!this.closed){this.closed=!0;const{_parentage:be}=this;if(be)if(this._parentage=null,Array.isArray(be))for(const mt of be)mt.remove(this);else be.remove(this);const{initialTeardown:Pe}=this;if((0,h.m)(Pe))try{Pe()}catch(mt){pe=mt instanceof S?mt.errors:[mt]}const{_finalizers:st}=this;if(st){this._finalizers=null;for(const mt of st)try{fe(mt)}catch(He){pe=pe??[],He instanceof S?pe=[...pe,...He.errors]:pe.push(He)}}if(pe)throw new S(pe)}}add(pe){var be;if(pe&&pe!==this)if(this.closed)fe(pe);else{if(pe instanceof de){if(pe.closed||pe._hasParent(this))return;pe._addParent(this)}(this._finalizers=null!==(be=this._finalizers)&&void 0!==be?be:[]).push(pe)}}_hasParent(pe){const{_parentage:be}=this;return be===pe||Array.isArray(be)&&be.includes(pe)}_addParent(pe){const{_parentage:be}=this;this._parentage=Array.isArray(be)?(be.push(pe),be):be?[be,pe]:pe}_removeParent(pe){const{_parentage:be}=this;be===pe?this._parentage=null:Array.isArray(be)&&(0,d.P)(be,pe)}remove(pe){const{_finalizers:be}=this;be&&(0,d.P)(be,pe),pe instanceof de&&pe._removeParent(this)}}de.EMPTY=(()=>{const Fe=new de;return Fe.closed=!0,Fe})();const Ae=de.EMPTY;function _e(Fe){return Fe instanceof de||Fe&&"closed"in Fe&&(0,h.m)(Fe.remove)&&(0,h.m)(Fe.add)&&(0,h.m)(Fe.unsubscribe)}function fe(Fe){(0,h.m)(Fe)?Fe():Fe.unsubscribe()}},2416:(Jt,Qe,k)=>{k.d(Qe,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(Jt,Qe,k)=>{k.d(Qe,{a:()=>pe});var h=k(9751),c=k(4742),S=k(8996),d=k(4671),de=k(3268),Ae=k(3269),_e=k(1810),fe=k(5403),Fe=k(9672);function pe(...st){const mt=(0,Ae.yG)(st),He=(0,Ae.jO)(st),{args:Tt,keys:gt}=(0,c.D)(st);if(0===Tt.length)return(0,S.D)([],mt);const ft=new h.y(function be(st,mt,He=d.y){return Tt=>{Pe(mt,()=>{const{length:gt}=st,ft=new Array(gt);let Ye=gt,Gt=gt;for(let Ge=0;Ge<gt;Ge++)Pe(mt,()=>{const Me=(0,S.D)(st[Ge],mt);let rt=!1;Me.subscribe((0,fe.x)(Tt,Pt=>{ft[Ge]=Pt,rt||(rt=!0,Gt--),Gt||Tt.next(He(ft.slice()))},()=>{--Ye||Tt.complete()}))},Tt)},Tt)}}(Tt,mt,gt?Ye=>(0,_e.n)(gt,Ye):d.y));return He?ft.pipe((0,de.Z)(He)):ft}function Pe(st,mt,He){st?(0,Fe.f)(He,st,mt):mt()}},7272:(Jt,Qe,k)=>{k.d(Qe,{z:()=>de});var h=k(8189),S=k(3269),d=k(8996);function de(...Ae){return function c(){return(0,h.J)(1)}()((0,d.D)(Ae,(0,S.yG)(Ae)))}},9770:(Jt,Qe,k)=>{k.d(Qe,{P:()=>S});var h=k(9751),c=k(8421);function S(d){return new h.y(de=>{(0,c.Xf)(d()).subscribe(de)})}},515:(Jt,Qe,k)=>{k.d(Qe,{E:()=>c});const c=new(k(9751).y)(de=>de.complete())},8996:(Jt,Qe,k)=>{k.d(Qe,{D:()=>Me});var h=k(8421),c=k(5363),S=k(9468),Ae=k(9751),fe=k(2202),Fe=k(576),pe=k(9672);function Pe(rt,Pt){if(!rt)throw new Error("Iterable cannot be null");return new Ae.y(qe=>{(0,pe.f)(qe,Pt,()=>{const it=rt[Symbol.asyncIterator]();(0,pe.f)(qe,Pt,()=>{it.next().then(ct=>{ct.done?qe.complete():qe.next(ct.value)})},0,!0)})})}var st=k(3670),mt=k(8239),He=k(1144),Tt=k(6495),gt=k(2206),ft=k(4532),Ye=k(3260);function Me(rt,Pt){return Pt?function Ge(rt,Pt){if(null!=rt){if((0,st.c)(rt))return function d(rt,Pt){return(0,h.Xf)(rt).pipe((0,S.R)(Pt),(0,c.Q)(Pt))}(rt,Pt);if((0,He.z)(rt))return function _e(rt,Pt){return new Ae.y(qe=>{let it=0;return Pt.schedule(function(){it===rt.length?qe.complete():(qe.next(rt[it++]),qe.closed||this.schedule())})})}(rt,Pt);if((0,mt.t)(rt))return function de(rt,Pt){return(0,h.Xf)(rt).pipe((0,S.R)(Pt),(0,c.Q)(Pt))}(rt,Pt);if((0,gt.D)(rt))return Pe(rt,Pt);if((0,Tt.T)(rt))return function be(rt,Pt){return new Ae.y(qe=>{let it;return(0,pe.f)(qe,Pt,()=>{it=rt[fe.h](),(0,pe.f)(qe,Pt,()=>{let ct,We;try{({value:ct,done:We}=it.next())}catch(je){return void qe.error(je)}We?qe.complete():qe.next(ct)},0,!0)}),()=>(0,Fe.m)(it?.return)&&it.return()})}(rt,Pt);if((0,Ye.L)(rt))return function Gt(rt,Pt){return Pe((0,Ye.Q)(rt),Pt)}(rt,Pt)}throw(0,ft.z)(rt)}(rt,Pt):(0,h.Xf)(rt)}},8421:(Jt,Qe,k)=>{k.d(Qe,{Xf:()=>st});var h=k(655),c=k(1144),S=k(8239),d=k(9751),de=k(3670),Ae=k(2206),_e=k(4532),fe=k(6495),Fe=k(3260),pe=k(576),be=k(7849),Pe=k(8822);function st(Ge){if(Ge instanceof d.y)return Ge;if(null!=Ge){if((0,de.c)(Ge))return function mt(Ge){return new d.y(Me=>{const rt=Ge[Pe.L]();if((0,pe.m)(rt.subscribe))return rt.subscribe(Me);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ge);if((0,c.z)(Ge))return function He(Ge){return new d.y(Me=>{for(let rt=0;rt<Ge.length&&!Me.closed;rt++)Me.next(Ge[rt]);Me.complete()})}(Ge);if((0,S.t)(Ge))return function Tt(Ge){return new d.y(Me=>{Ge.then(rt=>{Me.closed||(Me.next(rt),Me.complete())},rt=>Me.error(rt)).then(null,be.h)})}(Ge);if((0,Ae.D)(Ge))return ft(Ge);if((0,fe.T)(Ge))return function gt(Ge){return new d.y(Me=>{for(const rt of Ge)if(Me.next(rt),Me.closed)return;Me.complete()})}(Ge);if((0,Fe.L)(Ge))return function Ye(Ge){return ft((0,Fe.Q)(Ge))}(Ge)}throw(0,_e.z)(Ge)}function ft(Ge){return new d.y(Me=>{(function Gt(Ge,Me){var rt,Pt,qe,it;return(0,h.mG)(this,void 0,void 0,function*(){try{for(rt=(0,h.KL)(Ge);!(Pt=yield rt.next()).done;)if(Me.next(Pt.value),Me.closed)return}catch(ct){qe={error:ct}}finally{try{Pt&&!Pt.done&&(it=rt.return)&&(yield it.call(rt))}finally{if(qe)throw qe.error}}Me.complete()})})(Ge,Me).catch(rt=>Me.error(rt))})}},6451:(Jt,Qe,k)=>{k.d(Qe,{T:()=>Ae});var h=k(8189),c=k(8421),S=k(515),d=k(3269),de=k(8996);function Ae(..._e){const fe=(0,d.yG)(_e),Fe=(0,d._6)(_e,1/0),pe=_e;return pe.length?1===pe.length?(0,c.Xf)(pe[0]):(0,h.J)(Fe)((0,de.D)(pe,fe)):S.E}},9646:(Jt,Qe,k)=>{k.d(Qe,{of:()=>S});var h=k(3269),c=k(8996);function S(...d){const de=(0,h.yG)(d);return(0,c.D)(d,de)}},2805:(Jt,Qe,k)=>{k.d(Qe,{H:()=>de});var h=k(9751),c=k(4986),S=k(3532),d=k(1165);function de(Ae=0,_e,fe=c.P){let Fe=-1;return null!=_e&&((0,S.K)(_e)?fe=_e:Fe=_e),new h.y(pe=>{let be=(0,d.q)(Ae)?+Ae-fe.now():Ae;be<0&&(be=0);let Pe=0;return fe.schedule(function(){pe.closed||(pe.next(Pe++),0<=Fe?this.schedule(void 0,Fe):pe.complete())},be)})}},5403:(Jt,Qe,k)=>{k.d(Qe,{x:()=>c});var h=k(930);function c(d,de,Ae,_e,fe){return new S(d,de,Ae,_e,fe)}class S extends h.Lv{constructor(de,Ae,_e,fe,Fe,pe){super(de),this.onFinalize=Fe,this.shouldUnsubscribe=pe,this._next=Ae?function(be){try{Ae(be)}catch(Pe){de.error(Pe)}}:super._next,this._error=fe?function(be){try{fe(be)}catch(Pe){de.error(Pe)}finally{this.unsubscribe()}}:super._error,this._complete=_e?function(){try{_e()}catch(be){de.error(be)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ae}=this;super.unsubscribe(),!Ae&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},262:(Jt,Qe,k)=>{k.d(Qe,{K:()=>d});var h=k(8421),c=k(5403),S=k(4482);function d(de){return(0,S.e)((Ae,_e)=>{let pe,fe=null,Fe=!1;fe=Ae.subscribe((0,c.x)(_e,void 0,void 0,be=>{pe=(0,h.Xf)(de(be,d(de)(Ae))),fe?(fe.unsubscribe(),fe=null,pe.subscribe(_e)):Fe=!0})),Fe&&(fe.unsubscribe(),fe=null,pe.subscribe(_e))})}},4351:(Jt,Qe,k)=>{k.d(Qe,{b:()=>S});var h=k(5577),c=k(576);function S(d,de){return(0,c.m)(de)?(0,h.z)(d,de,1):(0,h.z)(d,1)}},6590:(Jt,Qe,k)=>{k.d(Qe,{d:()=>S});var h=k(4482),c=k(5403);function S(d){return(0,h.e)((de,Ae)=>{let _e=!1;de.subscribe((0,c.x)(Ae,fe=>{_e=!0,Ae.next(fe)},()=>{_e||Ae.next(d),Ae.complete()}))})}},1884:(Jt,Qe,k)=>{k.d(Qe,{x:()=>d});var h=k(4671),c=k(4482),S=k(5403);function d(Ae,_e=h.y){return Ae=Ae??de,(0,c.e)((fe,Fe)=>{let pe,be=!0;fe.subscribe((0,S.x)(Fe,Pe=>{const st=_e(Pe);(be||!Ae(pe,st))&&(be=!1,pe=st,Fe.next(Pe))}))})}function de(Ae,_e){return Ae===_e}},9300:(Jt,Qe,k)=>{k.d(Qe,{h:()=>S});var h=k(4482),c=k(5403);function S(d,de){return(0,h.e)((Ae,_e)=>{let fe=0;Ae.subscribe((0,c.x)(_e,Fe=>d.call(de,Fe,fe++)&&_e.next(Fe)))})}},8746:(Jt,Qe,k)=>{k.d(Qe,{x:()=>c});var h=k(4482);function c(S){return(0,h.e)((d,de)=>{try{d.subscribe(de)}finally{de.add(S)}})}},590:(Jt,Qe,k)=>{k.d(Qe,{P:()=>_e});var h=k(6805),c=k(9300),S=k(5698),d=k(6590),de=k(8068),Ae=k(4671);function _e(fe,Fe){const pe=arguments.length>=2;return be=>be.pipe(fe?(0,c.h)((Pe,st)=>fe(Pe,st,be)):Ae.y,(0,S.q)(1),pe?(0,d.d)(Fe):(0,de.T)(()=>new h.K))}},4004:(Jt,Qe,k)=>{k.d(Qe,{U:()=>S});var h=k(4482),c=k(5403);function S(d,de){return(0,h.e)((Ae,_e)=>{let fe=0;Ae.subscribe((0,c.x)(_e,Fe=>{_e.next(d.call(de,Fe,fe++))}))})}},8189:(Jt,Qe,k)=>{k.d(Qe,{J:()=>S});var h=k(5577),c=k(4671);function S(d=1/0){return(0,h.z)(c.y,d)}},5577:(Jt,Qe,k)=>{k.d(Qe,{z:()=>fe});var h=k(4004),c=k(8421),S=k(4482),d=k(9672),de=k(5403),_e=k(576);function fe(Fe,pe,be=1/0){return(0,_e.m)(pe)?fe((Pe,st)=>(0,h.U)((mt,He)=>pe(Pe,mt,st,He))((0,c.Xf)(Fe(Pe,st))),be):("number"==typeof pe&&(be=pe),(0,S.e)((Pe,st)=>function Ae(Fe,pe,be,Pe,st,mt,He,Tt){const gt=[];let ft=0,Ye=0,Gt=!1;const Ge=()=>{Gt&&!gt.length&&!ft&&pe.complete()},Me=Pt=>ft<Pe?rt(Pt):gt.push(Pt),rt=Pt=>{mt&&pe.next(Pt),ft++;let qe=!1;(0,c.Xf)(be(Pt,Ye++)).subscribe((0,de.x)(pe,it=>{st?.(it),mt?Me(it):pe.next(it)},()=>{qe=!0},void 0,()=>{if(qe)try{for(ft--;gt.length&&ft<Pe;){const it=gt.shift();He?(0,d.f)(pe,He,()=>rt(it)):rt(it)}Ge()}catch(it){pe.error(it)}}))};return Fe.subscribe((0,de.x)(pe,Me,()=>{Gt=!0,Ge()})),()=>{Tt?.()}}(Pe,st,Fe,be)))}},5363:(Jt,Qe,k)=>{k.d(Qe,{Q:()=>d});var h=k(9672),c=k(4482),S=k(5403);function d(de,Ae=0){return(0,c.e)((_e,fe)=>{_e.subscribe((0,S.x)(fe,Fe=>(0,h.f)(fe,de,()=>fe.next(Fe),Ae),()=>(0,h.f)(fe,de,()=>fe.complete(),Ae),Fe=>(0,h.f)(fe,de,()=>fe.error(Fe),Ae)))})}},5026:(Jt,Qe,k)=>{k.d(Qe,{R:()=>d});var h=k(4482),c=k(5403);function S(de,Ae,_e,fe,Fe){return(pe,be)=>{let Pe=_e,st=Ae,mt=0;pe.subscribe((0,c.x)(be,He=>{const Tt=mt++;st=Pe?de(st,He,Tt):(Pe=!0,He),fe&&be.next(st)},Fe&&(()=>{Pe&&be.next(st),be.complete()})))}}function d(de,Ae){return(0,h.e)(S(de,Ae,arguments.length>=2,!0))}},3099:(Jt,Qe,k)=>{k.d(Qe,{B:()=>de});var h=k(8421),c=k(7579),S=k(930),d=k(4482);function de(_e={}){const{connector:fe=(()=>new c.x),resetOnError:Fe=!0,resetOnComplete:pe=!0,resetOnRefCountZero:be=!0}=_e;return Pe=>{let st,mt,He,Tt=0,gt=!1,ft=!1;const Ye=()=>{mt?.unsubscribe(),mt=void 0},Gt=()=>{Ye(),st=He=void 0,gt=ft=!1},Ge=()=>{const Me=st;Gt(),Me?.unsubscribe()};return(0,d.e)((Me,rt)=>{Tt++,!ft&&!gt&&Ye();const Pt=He=He??fe();rt.add(()=>{Tt--,0===Tt&&!ft&&!gt&&(mt=Ae(Ge,be))}),Pt.subscribe(rt),!st&&Tt>0&&(st=new S.Hp({next:qe=>Pt.next(qe),error:qe=>{ft=!0,Ye(),mt=Ae(Gt,Fe,qe),Pt.error(qe)},complete:()=>{gt=!0,Ye(),mt=Ae(Gt,pe),Pt.complete()}}),(0,h.Xf)(Me).subscribe(st))})(Pe)}}function Ae(_e,fe,...Fe){if(!0===fe)return void _e();if(!1===fe)return;const pe=new S.Hp({next:()=>{pe.unsubscribe(),_e()}});return fe(...Fe).subscribe(pe)}},8675:(Jt,Qe,k)=>{k.d(Qe,{O:()=>d});var h=k(7272),c=k(3269),S=k(4482);function d(...de){const Ae=(0,c.yG)(de);return(0,S.e)((_e,fe)=>{(Ae?(0,h.z)(de,_e,Ae):(0,h.z)(de,_e)).subscribe(fe)})}},9468:(Jt,Qe,k)=>{k.d(Qe,{R:()=>c});var h=k(4482);function c(S,d=0){return(0,h.e)((de,Ae)=>{Ae.add(S.schedule(()=>de.subscribe(Ae),d))})}},3900:(Jt,Qe,k)=>{k.d(Qe,{w:()=>d});var h=k(8421),c=k(4482),S=k(5403);function d(de,Ae){return(0,c.e)((_e,fe)=>{let Fe=null,pe=0,be=!1;const Pe=()=>be&&!Fe&&fe.complete();_e.subscribe((0,S.x)(fe,st=>{Fe?.unsubscribe();let mt=0;const He=pe++;(0,h.Xf)(de(st,He)).subscribe(Fe=(0,S.x)(fe,Tt=>fe.next(Ae?Ae(st,Tt,He,mt++):Tt),()=>{Fe=null,Pe()}))},()=>{be=!0,Pe()}))})}},5698:(Jt,Qe,k)=>{k.d(Qe,{q:()=>d});var h=k(515),c=k(4482),S=k(5403);function d(de){return de<=0?()=>h.E:(0,c.e)((Ae,_e)=>{let fe=0;Ae.subscribe((0,S.x)(_e,Fe=>{++fe<=de&&(_e.next(Fe),de<=fe&&_e.complete())}))})}},2035:(Jt,Qe,k)=>{k.d(Qe,{h:()=>d});var h=k(515),c=k(4482),S=k(5403);function d(de){return de<=0?()=>h.E:(0,c.e)((Ae,_e)=>{let fe=[];Ae.subscribe((0,S.x)(_e,Fe=>{fe.push(Fe),de<fe.length&&fe.shift()},()=>{for(const Fe of fe)_e.next(Fe);_e.complete()},void 0,()=>{fe=null}))})}},2722:(Jt,Qe,k)=>{k.d(Qe,{R:()=>de});var h=k(4482),c=k(5403),S=k(8421),d=k(5032);function de(Ae){return(0,h.e)((_e,fe)=>{(0,S.Xf)(Ae).subscribe((0,c.x)(fe,()=>fe.complete(),d.Z)),!fe.closed&&_e.subscribe(fe)})}},8505:(Jt,Qe,k)=>{k.d(Qe,{b:()=>de});var h=k(576),c=k(4482),S=k(5403),d=k(4671);function de(Ae,_e,fe){const Fe=(0,h.m)(Ae)||_e||fe?{next:Ae,error:_e,complete:fe}:Ae;return Fe?(0,c.e)((pe,be)=>{var Pe;null===(Pe=Fe.subscribe)||void 0===Pe||Pe.call(Fe);let st=!0;pe.subscribe((0,S.x)(be,mt=>{var He;null===(He=Fe.next)||void 0===He||He.call(Fe,mt),be.next(mt)},()=>{var mt;st=!1,null===(mt=Fe.complete)||void 0===mt||mt.call(Fe),be.complete()},mt=>{var He;st=!1,null===(He=Fe.error)||void 0===He||He.call(Fe,mt),be.error(mt)},()=>{var mt,He;st&&(null===(mt=Fe.unsubscribe)||void 0===mt||mt.call(Fe)),null===(He=Fe.finalize)||void 0===He||He.call(Fe)}))}):d.y}},8068:(Jt,Qe,k)=>{k.d(Qe,{T:()=>d});var h=k(6805),c=k(4482),S=k(5403);function d(Ae=de){return(0,c.e)((_e,fe)=>{let Fe=!1;_e.subscribe((0,S.x)(fe,pe=>{Fe=!0,fe.next(pe)},()=>Fe?fe.complete():fe.error(Ae())))})}function de(){return new h.K}},7414:(Jt,Qe,k)=>{k.d(Qe,{V:()=>Fe});var h=k(4986),c=k(1165),S=k(4482),d=k(8421),de=k(3888),Ae=k(5403),_e=k(9672);const fe=(0,de.d)(be=>function(st=null){be(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=st});function Fe(be,Pe){const{first:st,each:mt,with:He=pe,scheduler:Tt=Pe??h.z,meta:gt=null}=(0,c.q)(be)?{first:be}:"number"==typeof be?{each:be}:be;if(null==st&&null==mt)throw new TypeError("No timeout provided.");return(0,S.e)((ft,Ye)=>{let Gt,Ge,Me=null,rt=0;const Pt=qe=>{Ge=(0,_e.f)(Ye,Tt,()=>{try{Gt.unsubscribe(),(0,d.Xf)(He({meta:gt,lastValue:Me,seen:rt})).subscribe(Ye)}catch(it){Ye.error(it)}},qe)};Gt=ft.subscribe((0,Ae.x)(Ye,qe=>{Ge?.unsubscribe(),rt++,Ye.next(Me=qe),mt>0&&Pt(mt)},void 0,void 0,()=>{Ge?.closed||Ge?.unsubscribe(),Me=null})),!rt&&Pt(null!=st?"number"==typeof st?st:+st-Tt.now():mt)})}function pe(be){throw new fe(be)}},4408:(Jt,Qe,k)=>{k.d(Qe,{o:()=>de});var h=k(727);class c extends h.w0{constructor(_e,fe){super()}schedule(_e,fe=0){return this}}const S={setInterval(Ae,_e,...fe){const{delegate:Fe}=S;return Fe?.setInterval?Fe.setInterval(Ae,_e,...fe):setInterval(Ae,_e,...fe)},clearInterval(Ae){const{delegate:_e}=S;return(_e?.clearInterval||clearInterval)(Ae)},delegate:void 0};var d=k(8737);class de extends c{constructor(_e,fe){super(_e,fe),this.scheduler=_e,this.work=fe,this.pending=!1}schedule(_e,fe=0){var Fe;if(this.closed)return this;this.state=_e;const pe=this.id,be=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId(be,pe,fe)),this.pending=!0,this.delay=fe,this.id=null!==(Fe=this.id)&&void 0!==Fe?Fe:this.requestAsyncId(be,this.id,fe),this}requestAsyncId(_e,fe,Fe=0){return S.setInterval(_e.flush.bind(_e,this),Fe)}recycleAsyncId(_e,fe,Fe=0){if(null!=Fe&&this.delay===Fe&&!1===this.pending)return fe;null!=fe&&S.clearInterval(fe)}execute(_e,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Fe=this._execute(_e,fe);if(Fe)return Fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(_e,fe){let pe,Fe=!1;try{this.work(_e)}catch(be){Fe=!0,pe=be||new Error("Scheduled action threw falsy error")}if(Fe)return this.unsubscribe(),pe}unsubscribe(){if(!this.closed){const{id:_e,scheduler:fe}=this,{actions:Fe}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,d.P)(Fe,this),null!=_e&&(this.id=this.recycleAsyncId(fe,_e,null)),this.delay=null,super.unsubscribe()}}}},7565:(Jt,Qe,k)=>{k.d(Qe,{v:()=>S});var h=k(6063);class c{constructor(de,Ae=c.now){this.schedulerActionCtor=de,this.now=Ae}schedule(de,Ae=0,_e){return new this.schedulerActionCtor(this,de).schedule(_e,Ae)}}c.now=h.l.now;class S extends c{constructor(de,Ae=c.now){super(de,Ae),this.actions=[],this._active=!1}flush(de){const{actions:Ae}=this;if(this._active)return void Ae.push(de);let _e;this._active=!0;do{if(_e=de.execute(de.state,de.delay))break}while(de=Ae.shift());if(this._active=!1,_e){for(;de=Ae.shift();)de.unsubscribe();throw _e}}}},4986:(Jt,Qe,k)=>{k.d(Qe,{P:()=>d,z:()=>S});var h=k(4408);const S=new(k(7565).v)(h.o),d=S},6063:(Jt,Qe,k)=>{k.d(Qe,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(Jt,Qe,k)=>{k.d(Qe,{z:()=>h});const h={setTimeout(c,S,...d){const{delegate:de}=h;return de?.setTimeout?de.setTimeout(c,S,...d):setTimeout(c,S,...d)},clearTimeout(c){const{delegate:S}=h;return(S?.clearTimeout||clearTimeout)(c)},delegate:void 0}},2202:(Jt,Qe,k)=>{k.d(Qe,{h:()=>c});const c=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Jt,Qe,k)=>{k.d(Qe,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Jt,Qe,k)=>{k.d(Qe,{K:()=>c});const c=(0,k(3888).d)(S=>function(){S(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Jt,Qe,k)=>{k.d(Qe,{_6:()=>Ae,jO:()=>d,yG:()=>de});var h=k(576),c=k(3532);function S(_e){return _e[_e.length-1]}function d(_e){return(0,h.m)(S(_e))?_e.pop():void 0}function de(_e){return(0,c.K)(S(_e))?_e.pop():void 0}function Ae(_e,fe){return"number"==typeof S(_e)?_e.pop():fe}},4742:(Jt,Qe,k)=>{k.d(Qe,{D:()=>de});const{isArray:h}=Array,{getPrototypeOf:c,prototype:S,keys:d}=Object;function de(_e){if(1===_e.length){const fe=_e[0];if(h(fe))return{args:fe,keys:null};if(function Ae(_e){return _e&&"object"==typeof _e&&c(_e)===S}(fe)){const Fe=d(fe);return{args:Fe.map(pe=>fe[pe]),keys:Fe}}}return{args:_e,keys:null}}},8737:(Jt,Qe,k)=>{function h(c,S){if(c){const d=c.indexOf(S);0<=d&&c.splice(d,1)}}k.d(Qe,{P:()=>h})},3888:(Jt,Qe,k)=>{function h(c){const d=c(de=>{Error.call(de),de.stack=(new Error).stack});return d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d}k.d(Qe,{d:()=>h})},1810:(Jt,Qe,k)=>{function h(c,S){return c.reduce((d,de,Ae)=>(d[de]=S[Ae],d),{})}k.d(Qe,{n:()=>h})},2806:(Jt,Qe,k)=>{k.d(Qe,{O:()=>d,x:()=>S});var h=k(2416);let c=null;function S(de){if(h.v.useDeprecatedSynchronousErrorHandling){const Ae=!c;if(Ae&&(c={errorThrown:!1,error:null}),de(),Ae){const{errorThrown:_e,error:fe}=c;if(c=null,_e)throw fe}}else de()}function d(de){h.v.useDeprecatedSynchronousErrorHandling&&c&&(c.errorThrown=!0,c.error=de)}},9672:(Jt,Qe,k)=>{function h(c,S,d,de=0,Ae=!1){const _e=S.schedule(function(){d(),Ae?c.add(this.schedule(null,de)):this.unsubscribe()},de);if(c.add(_e),!Ae)return _e}k.d(Qe,{f:()=>h})},4671:(Jt,Qe,k)=>{function h(c){return c}k.d(Qe,{y:()=>h})},1144:(Jt,Qe,k)=>{k.d(Qe,{z:()=>h});const h=c=>c&&"number"==typeof c.length&&"function"!=typeof c},2206:(Jt,Qe,k)=>{k.d(Qe,{D:()=>c});var h=k(576);function c(S){return Symbol.asyncIterator&&(0,h.m)(S?.[Symbol.asyncIterator])}},1165:(Jt,Qe,k)=>{function h(c){return c instanceof Date&&!isNaN(c)}k.d(Qe,{q:()=>h})},576:(Jt,Qe,k)=>{function h(c){return"function"==typeof c}k.d(Qe,{m:()=>h})},3670:(Jt,Qe,k)=>{k.d(Qe,{c:()=>S});var h=k(8822),c=k(576);function S(d){return(0,c.m)(d[h.L])}},6495:(Jt,Qe,k)=>{k.d(Qe,{T:()=>S});var h=k(2202),c=k(576);function S(d){return(0,c.m)(d?.[h.h])}},8239:(Jt,Qe,k)=>{k.d(Qe,{t:()=>c});var h=k(576);function c(S){return(0,h.m)(S?.then)}},3260:(Jt,Qe,k)=>{k.d(Qe,{L:()=>d,Q:()=>S});var h=k(655),c=k(576);function S(de){return(0,h.FC)(this,arguments,function*(){const _e=de.getReader();try{for(;;){const{value:fe,done:Fe}=yield(0,h.qq)(_e.read());if(Fe)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(fe)}}finally{_e.releaseLock()}})}function d(de){return(0,c.m)(de?.getReader)}},3532:(Jt,Qe,k)=>{k.d(Qe,{K:()=>c});var h=k(576);function c(S){return S&&(0,h.m)(S.schedule)}},4482:(Jt,Qe,k)=>{k.d(Qe,{A:()=>c,e:()=>S});var h=k(576);function c(d){return(0,h.m)(d?.lift)}function S(d){return de=>{if(c(de))return de.lift(function(Ae){try{return d(Ae,this)}catch(_e){this.error(_e)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Jt,Qe,k)=>{k.d(Qe,{Z:()=>d});var h=k(4004);const{isArray:c}=Array;function d(de){return(0,h.U)(Ae=>function S(de,Ae){return c(Ae)?de(...Ae):de(Ae)}(de,Ae))}},5032:(Jt,Qe,k)=>{function h(){}k.d(Qe,{Z:()=>h})},9635:(Jt,Qe,k)=>{k.d(Qe,{U:()=>S,z:()=>c});var h=k(4671);function c(...d){return S(d)}function S(d){return 0===d.length?h.y:1===d.length?d[0]:function(Ae){return d.reduce((_e,fe)=>fe(_e),Ae)}}},7849:(Jt,Qe,k)=>{k.d(Qe,{h:()=>S});var h=k(2416),c=k(3410);function S(d){c.z.setTimeout(()=>{const{onUnhandledError:de}=h.v;if(!de)throw d;de(d)})}},4532:(Jt,Qe,k)=>{function h(c){return new TypeError(`You provided ${null!==c&&"object"==typeof c?"an invalid object":`'${c}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Qe,{z:()=>h})},655:(Jt,Qe,k)=>{function d(We,je){var pt={};for(var dt in We)Object.prototype.hasOwnProperty.call(We,dt)&&je.indexOf(dt)<0&&(pt[dt]=We[dt]);if(null!=We&&"function"==typeof Object.getOwnPropertySymbols){var Lt=0;for(dt=Object.getOwnPropertySymbols(We);Lt<dt.length;Lt++)je.indexOf(dt[Lt])<0&&Object.prototype.propertyIsEnumerable.call(We,dt[Lt])&&(pt[dt[Lt]]=We[dt[Lt]])}return pt}function fe(We,je,pt,dt){return new(pt||(pt=Promise))(function($t,Qt){function Mn(Pn){try{Rt(dt.next(Pn))}catch(Zn){Qt(Zn)}}function cn(Pn){try{Rt(dt.throw(Pn))}catch(Zn){Qt(Zn)}}function Rt(Pn){Pn.done?$t(Pn.value):function Lt($t){return $t instanceof pt?$t:new pt(function(Qt){Qt($t)})}(Pn.value).then(Mn,cn)}Rt((dt=dt.apply(We,je||[])).next())})}function gt(We){return this instanceof gt?(this.v=We,this):new gt(We)}function ft(We,je,pt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Lt,dt=pt.apply(We,je||[]),$t=[];return Lt={},Qt("next"),Qt("throw"),Qt("return"),Lt[Symbol.asyncIterator]=function(){return this},Lt;function Qt(Nn){dt[Nn]&&(Lt[Nn]=function(In){return new Promise(function(Wt,dn){$t.push([Nn,In,Wt,dn])>1||Mn(Nn,In)})})}function Mn(Nn,In){try{!function cn(Nn){Nn.value instanceof gt?Promise.resolve(Nn.value.v).then(Rt,Pn):Zn($t[0][2],Nn)}(dt[Nn](In))}catch(Wt){Zn($t[0][3],Wt)}}function Rt(Nn){Mn("next",Nn)}function Pn(Nn){Mn("throw",Nn)}function Zn(Nn,In){Nn(In),$t.shift(),$t.length&&Mn($t[0][0],$t[0][1])}}function Gt(We){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pt,je=We[Symbol.asyncIterator];return je?je.call(We):(We=function Pe(We){var je="function"==typeof Symbol&&Symbol.iterator,pt=je&&We[je],dt=0;if(pt)return pt.call(We);if(We&&"number"==typeof We.length)return{next:function(){return We&&dt>=We.length&&(We=void 0),{value:We&&We[dt++],done:!We}}};throw new TypeError(je?"Object is not iterable.":"Symbol.iterator is not defined.")}(We),pt={},dt("next"),dt("throw"),dt("return"),pt[Symbol.asyncIterator]=function(){return this},pt);function dt($t){pt[$t]=We[$t]&&function(Qt){return new Promise(function(Mn,cn){!function Lt($t,Qt,Mn,cn){Promise.resolve(cn).then(function(Rt){$t({value:Rt,done:Mn})},Qt)}(Mn,cn,(Qt=We[$t](Qt)).done,Qt.value)})}}}k.d(Qe,{FC:()=>ft,KL:()=>Gt,_T:()=>d,mG:()=>fe,qq:()=>gt})},7340:(Jt,Qe,k)=>{k.d(Qe,{IO:()=>He,LC:()=>c,SB:()=>Fe,X$:()=>d,ZE:()=>Ye,ZN:()=>ft,_j:()=>h,eR:()=>be,jt:()=>de,k1:()=>Gt,l3:()=>S,oB:()=>fe,pV:()=>st,ru:()=>Ae,vP:()=>_e});class h{}class c{}const S="*";function d(Ge,Me){return{type:7,name:Ge,definitions:Me,options:{}}}function de(Ge,Me=null){return{type:4,styles:Me,timings:Ge}}function Ae(Ge,Me=null){return{type:3,steps:Ge,options:Me}}function _e(Ge,Me=null){return{type:2,steps:Ge,options:Me}}function fe(Ge){return{type:6,styles:Ge,offset:null}}function Fe(Ge,Me,rt){return{type:0,name:Ge,styles:Me,options:rt}}function be(Ge,Me,rt=null){return{type:1,expr:Ge,animation:Me,options:rt}}function st(Ge=null){return{type:9,options:Ge}}function He(Ge,Me,rt=null){return{type:11,selector:Ge,animation:Me,options:rt}}function gt(Ge){Promise.resolve().then(Ge)}class ft{constructor(Me=0,rt=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Me+rt}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Me=>Me()),this._onDoneFns=[])}onStart(Me){this._originalOnStartFns.push(Me),this._onStartFns.push(Me)}onDone(Me){this._originalOnDoneFns.push(Me),this._onDoneFns.push(Me)}onDestroy(Me){this._onDestroyFns.push(Me)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){gt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Me=>Me()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Me=>Me()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Me){this._position=this.totalTime?Me*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Me){const rt="start"==Me?this._onStartFns:this._onDoneFns;rt.forEach(Pt=>Pt()),rt.length=0}}class Ye{constructor(Me){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Me;let rt=0,Pt=0,qe=0;const it=this.players.length;0==it?gt(()=>this._onFinish()):this.players.forEach(ct=>{ct.onDone(()=>{++rt==it&&this._onFinish()}),ct.onDestroy(()=>{++Pt==it&&this._onDestroy()}),ct.onStart(()=>{++qe==it&&this._onStart()})}),this.totalTime=this.players.reduce((ct,We)=>Math.max(ct,We.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Me=>Me()),this._onDoneFns=[])}init(){this.players.forEach(Me=>Me.init())}onStart(Me){this._onStartFns.push(Me)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Me=>Me()),this._onStartFns=[])}onDone(Me){this._onDoneFns.push(Me)}onDestroy(Me){this._onDestroyFns.push(Me)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Me=>Me.play())}pause(){this.players.forEach(Me=>Me.pause())}restart(){this.players.forEach(Me=>Me.restart())}finish(){this._onFinish(),this.players.forEach(Me=>Me.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Me=>Me.destroy()),this._onDestroyFns.forEach(Me=>Me()),this._onDestroyFns=[])}reset(){this.players.forEach(Me=>Me.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Me){const rt=Me*this.totalTime;this.players.forEach(Pt=>{const qe=Pt.totalTime?Math.min(1,rt/Pt.totalTime):1;Pt.setPosition(qe)})}getPosition(){const Me=this.players.reduce((rt,Pt)=>null===rt||Pt.totalTime>rt.totalTime?Pt:rt,null);return null!=Me?Me.getPosition():0}beforeDestroy(){this.players.forEach(Me=>{Me.beforeDestroy&&Me.beforeDestroy()})}triggerCallback(Me){const rt="start"==Me?this._onStartFns:this._onDoneFns;rt.forEach(Pt=>Pt()),rt.length=0}}const Gt="!"},1858:(Jt,Qe,k)=>{k.d(Qe,{rt:()=>Se,tE:()=>ie,qV:()=>On,qm:()=>hn,ic:()=>yr,X6:()=>tt,yG:()=>St});var h=k(6895),c=k(4650),S=k(3353),d=k(1135),de=k(7579),Ae=k(9646),_e=k(9521),fe=k(5698),Fe=k(9300);function pe(Y){return(0,Fe.h)((W,te)=>Y<=te)}var be=k(1884),Pe=k(2722),st=k(1281);let mt=(()=>{class Y{create(te){return typeof MutationObserver>"u"?null:new MutationObserver(te)}}return Y.\u0275fac=function(te){return new(te||Y)},Y.\u0275prov=c.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),gt=(()=>{class Y{}return Y.\u0275fac=function(te){return new(te||Y)},Y.\u0275mod=c.oAB({type:Y}),Y.\u0275inj=c.cJS({providers:[mt]}),Y})();var ft=k(9841),Ye=k(7272),Gt=k(9751),Ge=k(4986),Me=k(4482),rt=k(5403),qe=k(4004),it=k(8675);const We=new Set;let je,pt=(()=>{class Y{constructor(te){this._platform=te,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Lt}matchMedia(te){return(this._platform.WEBKIT||this._platform.BLINK)&&function dt(Y){if(!We.has(Y))try{je||(je=document.createElement("style"),je.setAttribute("type","text/css"),document.head.appendChild(je)),je.sheet&&(je.sheet.insertRule(`@media ${Y} {body{ }}`,0),We.add(Y))}catch(W){console.error(W)}}(te),this._matchMedia(te)}}return Y.\u0275fac=function(te){return new(te||Y)(c.LFG(S.t4))},Y.\u0275prov=c.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})();function Lt(Y){return{matches:"all"===Y||""===Y,media:Y,addListener:()=>{},removeListener:()=>{}}}let $t=(()=>{class Y{constructor(te,me){this._mediaMatcher=te,this._zone=me,this._queries=new Map,this._destroySubject=new de.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(te){return Qt((0,st.Eq)(te)).some(Ke=>this._registerQuery(Ke).mql.matches)}observe(te){const Ke=Qt((0,st.Eq)(te)).map(on=>this._registerQuery(on).observable);let Ft=(0,ft.a)(Ke);return Ft=(0,Ye.z)(Ft.pipe((0,fe.q)(1)),Ft.pipe(pe(1),function Pt(Y,W=Ge.z){return(0,Me.e)((te,me)=>{let Ke=null,Ft=null,on=null;const Fn=()=>{if(Ke){Ke.unsubscribe(),Ke=null;const un=Ft;Ft=null,me.next(un)}};function Gr(){const un=on+Y,si=W.now();if(si<un)return Ke=this.schedule(void 0,un-si),void me.add(Ke);Fn()}te.subscribe((0,rt.x)(me,un=>{Ft=un,on=W.now(),Ke||(Ke=W.schedule(Gr,Y),me.add(Ke))},()=>{Fn(),me.complete()},void 0,()=>{Ft=Ke=null}))})}(0))),Ft.pipe((0,qe.U)(on=>{const Fn={matches:!1,breakpoints:{}};return on.forEach(({matches:Gr,query:un})=>{Fn.matches=Fn.matches||Gr,Fn.breakpoints[un]=Gr}),Fn}))}_registerQuery(te){if(this._queries.has(te))return this._queries.get(te);const me=this._mediaMatcher.matchMedia(te),Ft={observable:new Gt.y(on=>{const Fn=Gr=>this._zone.run(()=>on.next(Gr));return me.addListener(Fn),()=>{me.removeListener(Fn)}}).pipe((0,it.O)(me),(0,qe.U)(({matches:on})=>({query:te,matches:on})),(0,Pe.R)(this._destroySubject)),mql:me};return this._queries.set(te,Ft),Ft}}return Y.\u0275fac=function(te){return new(te||Y)(c.LFG(pt),c.LFG(c.R0b))},Y.\u0275prov=c.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})();function Qt(Y){return Y.map(W=>W.split(",")).reduce((W,te)=>W.concat(te)).map(W=>W.trim())}let yr=(()=>{class Y{constructor(te){this._platform=te}isDisabled(te){return te.hasAttribute("disabled")}isVisible(te){return function er(Y){return!!(Y.offsetWidth||Y.offsetHeight||"function"==typeof Y.getClientRects&&Y.getClientRects().length)}(te)&&"visible"===getComputedStyle(te).visibility}isTabbable(te){if(!this._platform.isBrowser)return!1;const me=function Rr(Y){try{return Y.frameElement}catch{return null}}(function mn(Y){return Y.ownerDocument&&Y.ownerDocument.defaultView||window}(te));if(me&&(-1===Ir(me)||!this.isVisible(me)))return!1;let Ke=te.nodeName.toLowerCase(),Ft=Ir(te);return te.hasAttribute("contenteditable")?-1!==Ft:!("iframe"===Ke||"object"===Ke||this._platform.WEBKIT&&this._platform.IOS&&!function _r(Y){let W=Y.nodeName.toLowerCase(),te="input"===W&&Y.type;return"text"===te||"password"===te||"select"===W||"textarea"===W}(te))&&("audio"===Ke?!!te.hasAttribute("controls")&&-1!==Ft:"video"===Ke?-1!==Ft&&(null!==Ft||this._platform.FIREFOX||te.hasAttribute("controls")):te.tabIndex>=0)}isFocusable(te,me){return function fr(Y){return!function cr(Y){return function nr(Y){return"input"==Y.nodeName.toLowerCase()}(Y)&&"hidden"==Y.type}(Y)&&(function Ht(Y){let W=Y.nodeName.toLowerCase();return"input"===W||"select"===W||"button"===W||"textarea"===W}(Y)||function tr(Y){return function Nr(Y){return"a"==Y.nodeName.toLowerCase()}(Y)&&Y.hasAttribute("href")}(Y)||Y.hasAttribute("contenteditable")||_i(Y))}(te)&&!this.isDisabled(te)&&(me?.ignoreVisibility||this.isVisible(te))}}return Y.\u0275fac=function(te){return new(te||Y)(c.LFG(S.t4))},Y.\u0275prov=c.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})();function _i(Y){if(!Y.hasAttribute("tabindex")||void 0===Y.tabIndex)return!1;let W=Y.getAttribute("tabindex");return!(!W||isNaN(parseInt(W,10)))}function Ir(Y){if(!_i(Y))return null;const W=parseInt(Y.getAttribute("tabindex")||"",10);return isNaN(W)?-1:W}class Tn{constructor(W,te,me,Ke,Ft=!1){this._element=W,this._checker=te,this._ngZone=me,this._document=Ke,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,Ft||this.attachAnchors()}get enabled(){return this._enabled}set enabled(W){this._enabled=W,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(W,this._startAnchor),this._toggleAnchorTabIndex(W,this._endAnchor))}destroy(){const W=this._startAnchor,te=this._endAnchor;W&&(W.removeEventListener("focus",this.startAnchorListener),W.remove()),te&&(te.removeEventListener("focus",this.endAnchorListener),te.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(W){return new Promise(te=>{this._executeOnStable(()=>te(this.focusInitialElement(W)))})}focusFirstTabbableElementWhenReady(W){return new Promise(te=>{this._executeOnStable(()=>te(this.focusFirstTabbableElement(W)))})}focusLastTabbableElementWhenReady(W){return new Promise(te=>{this._executeOnStable(()=>te(this.focusLastTabbableElement(W)))})}_getRegionBoundary(W){const te=this._element.querySelectorAll(`[cdk-focus-region-${W}], [cdkFocusRegion${W}], [cdk-focus-${W}]`);return"start"==W?te.length?te[0]:this._getFirstTabbableElement(this._element):te.length?te[te.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(W){const te=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(te){if(!this._checker.isFocusable(te)){const me=this._getFirstTabbableElement(te);return me?.focus(W),!!me}return te.focus(W),!0}return this.focusFirstTabbableElement(W)}focusFirstTabbableElement(W){const te=this._getRegionBoundary("start");return te&&te.focus(W),!!te}focusLastTabbableElement(W){const te=this._getRegionBoundary("end");return te&&te.focus(W),!!te}hasAttached(){return this._hasAttached}_getFirstTabbableElement(W){if(this._checker.isFocusable(W)&&this._checker.isTabbable(W))return W;const te=W.children;for(let me=0;me<te.length;me++){const Ke=te[me].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(te[me]):null;if(Ke)return Ke}return null}_getLastTabbableElement(W){if(this._checker.isFocusable(W)&&this._checker.isTabbable(W))return W;const te=W.children;for(let me=te.length-1;me>=0;me--){const Ke=te[me].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(te[me]):null;if(Ke)return Ke}return null}_createAnchor(){const W=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,W),W.classList.add("cdk-visually-hidden"),W.classList.add("cdk-focus-trap-anchor"),W.setAttribute("aria-hidden","true"),W}_toggleAnchorTabIndex(W,te){W?te.setAttribute("tabindex","0"):te.removeAttribute("tabindex")}toggleAnchors(W){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(W,this._startAnchor),this._toggleAnchorTabIndex(W,this._endAnchor))}_executeOnStable(W){this._ngZone.isStable?W():this._ngZone.onStable.pipe((0,fe.q)(1)).subscribe(W)}}let On=(()=>{class Y{constructor(te,me,Ke){this._checker=te,this._ngZone=me,this._document=Ke}create(te,me=!1){return new Tn(te,this._checker,this._ngZone,this._document,me)}}return Y.\u0275fac=function(te){return new(te||Y)(c.LFG(yr),c.LFG(c.R0b),c.LFG(h.K0))},Y.\u0275prov=c.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})();function tt(Y){return 0===Y.buttons||0===Y.offsetX&&0===Y.offsetY}function St(Y){const W=Y.touches&&Y.touches[0]||Y.changedTouches&&Y.changedTouches[0];return!(!W||-1!==W.identifier||null!=W.radiusX&&1!==W.radiusX||null!=W.radiusY&&1!==W.radiusY)}const Rn=new c.OlP("cdk-input-modality-detector-options"),Jn={ignoreKeys:[_e.zL,_e.jx,_e.b2,_e.MW,_e.JU]},J=(0,S.i$)({passive:!0,capture:!0});let ge=(()=>{class Y{constructor(te,me,Ke,Ft){this._platform=te,this._mostRecentTarget=null,this._modality=new d.X(null),this._lastTouchMs=0,this._onKeydown=on=>{this._options?.ignoreKeys?.some(Fn=>Fn===on.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=(0,S.sA)(on))},this._onMousedown=on=>{Date.now()-this._lastTouchMs<650||(this._modality.next(tt(on)?"keyboard":"mouse"),this._mostRecentTarget=(0,S.sA)(on))},this._onTouchstart=on=>{St(on)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,S.sA)(on))},this._options={...Jn,...Ft},this.modalityDetected=this._modality.pipe(pe(1)),this.modalityChanged=this.modalityDetected.pipe((0,be.x)()),te.isBrowser&&me.runOutsideAngular(()=>{Ke.addEventListener("keydown",this._onKeydown,J),Ke.addEventListener("mousedown",this._onMousedown,J),Ke.addEventListener("touchstart",this._onTouchstart,J)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,J),document.removeEventListener("mousedown",this._onMousedown,J),document.removeEventListener("touchstart",this._onTouchstart,J))}}return Y.\u0275fac=function(te){return new(te||Y)(c.LFG(S.t4),c.LFG(c.R0b),c.LFG(h.K0),c.LFG(Rn,8))},Y.\u0275prov=c.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})();const $e=new c.OlP("cdk-focus-monitor-default-options"),De=(0,S.i$)({passive:!0,capture:!0});let ie=(()=>{class Y{constructor(te,me,Ke,Ft,on){this._ngZone=te,this._platform=me,this._inputModalityDetector=Ke,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new de.x,this._rootNodeFocusAndBlurListener=Fn=>{for(let un=(0,S.sA)(Fn);un;un=un.parentElement)"focus"===Fn.type?this._onFocus(Fn,un):this._onBlur(Fn,un)},this._document=Ft,this._detectionMode=on?.detectionMode||0}monitor(te,me=!1){const Ke=(0,st.fI)(te);if(!this._platform.isBrowser||1!==Ke.nodeType)return(0,Ae.of)(null);const Ft=(0,S.kV)(Ke)||this._getDocument(),on=this._elementInfo.get(Ke);if(on)return me&&(on.checkChildren=!0),on.subject;const Fn={checkChildren:me,subject:new de.x,rootNode:Ft};return this._elementInfo.set(Ke,Fn),this._registerGlobalListeners(Fn),Fn.subject}stopMonitoring(te){const me=(0,st.fI)(te),Ke=this._elementInfo.get(me);Ke&&(Ke.subject.complete(),this._setClasses(me),this._elementInfo.delete(me),this._removeGlobalListeners(Ke))}focusVia(te,me,Ke){const Ft=(0,st.fI)(te);Ft===this._getDocument().activeElement?this._getClosestElementsInfo(Ft).forEach(([Fn,Gr])=>this._originChanged(Fn,me,Gr)):(this._setOrigin(me),"function"==typeof Ft.focus&&Ft.focus(Ke))}ngOnDestroy(){this._elementInfo.forEach((te,me)=>this.stopMonitoring(me))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(te){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(te)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:te&&this._isLastInteractionFromInputLabel(te)?"mouse":"program"}_shouldBeAttributedToTouch(te){return 1===this._detectionMode||!!te?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(te,me){te.classList.toggle("cdk-focused",!!me),te.classList.toggle("cdk-touch-focused","touch"===me),te.classList.toggle("cdk-keyboard-focused","keyboard"===me),te.classList.toggle("cdk-mouse-focused","mouse"===me),te.classList.toggle("cdk-program-focused","program"===me)}_setOrigin(te,me=!1){this._ngZone.runOutsideAngular(()=>{this._origin=te,this._originFromTouchInteraction="touch"===te&&me,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(te,me){const Ke=this._elementInfo.get(me),Ft=(0,S.sA)(te);!Ke||!Ke.checkChildren&&me!==Ft||this._originChanged(me,this._getFocusOrigin(Ft),Ke)}_onBlur(te,me){const Ke=this._elementInfo.get(me);!Ke||Ke.checkChildren&&te.relatedTarget instanceof Node&&me.contains(te.relatedTarget)||(this._setClasses(me),this._emitOrigin(Ke,null))}_emitOrigin(te,me){te.subject.observers.length&&this._ngZone.run(()=>te.subject.next(me))}_registerGlobalListeners(te){if(!this._platform.isBrowser)return;const me=te.rootNode,Ke=this._rootNodeFocusListenerCount.get(me)||0;Ke||this._ngZone.runOutsideAngular(()=>{me.addEventListener("focus",this._rootNodeFocusAndBlurListener,De),me.addEventListener("blur",this._rootNodeFocusAndBlurListener,De)}),this._rootNodeFocusListenerCount.set(me,Ke+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,Pe.R)(this._stopInputModalityDetector)).subscribe(Ft=>{this._setOrigin(Ft,!0)}))}_removeGlobalListeners(te){const me=te.rootNode;if(this._rootNodeFocusListenerCount.has(me)){const Ke=this._rootNodeFocusListenerCount.get(me);Ke>1?this._rootNodeFocusListenerCount.set(me,Ke-1):(me.removeEventListener("focus",this._rootNodeFocusAndBlurListener,De),me.removeEventListener("blur",this._rootNodeFocusAndBlurListener,De),this._rootNodeFocusListenerCount.delete(me))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(te,me,Ke){this._setClasses(te,me),this._emitOrigin(Ke,me),this._lastFocusOrigin=me}_getClosestElementsInfo(te){const me=[];return this._elementInfo.forEach((Ke,Ft)=>{(Ft===te||Ke.checkChildren&&Ft.contains(te))&&me.push([Ft,Ke])}),me}_isLastInteractionFromInputLabel(te){const{_mostRecentTarget:me,mostRecentModality:Ke}=this._inputModalityDetector;if("mouse"!==Ke||!me||me===te||"INPUT"!==te.nodeName&&"TEXTAREA"!==te.nodeName||te.disabled)return!1;const Ft=te.labels;if(Ft)for(let on=0;on<Ft.length;on++)if(Ft[on].contains(me))return!0;return!1}}return Y.\u0275fac=function(te){return new(te||Y)(c.LFG(c.R0b),c.LFG(S.t4),c.LFG(ge),c.LFG(h.K0,8),c.LFG($e,8))},Y.\u0275prov=c.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})();const ut="cdk-high-contrast-black-on-white",Bt="cdk-high-contrast-white-on-black",gn="cdk-high-contrast-active";let hn=(()=>{class Y{constructor(te,me){this._platform=te,this._document=me,this._breakpointSubscription=(0,c.f3M)($t).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const te=this._document.createElement("div");te.style.backgroundColor="rgb(1,2,3)",te.style.position="absolute",this._document.body.appendChild(te);const me=this._document.defaultView||window,Ke=me&&me.getComputedStyle?me.getComputedStyle(te):null,Ft=(Ke&&Ke.backgroundColor||"").replace(/ /g,"");switch(te.remove(),Ft){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const te=this._document.body.classList;te.remove(gn,ut,Bt),this._hasCheckedHighContrastMode=!0;const me=this.getHighContrastMode();1===me?te.add(gn,ut):2===me&&te.add(gn,Bt)}}}return Y.\u0275fac=function(te){return new(te||Y)(c.LFG(S.t4),c.LFG(h.K0))},Y.\u0275prov=c.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),Se=(()=>{class Y{constructor(te){te._applyBodyHighContrastModeCssClasses()}}return Y.\u0275fac=function(te){return new(te||Y)(c.LFG(hn))},Y.\u0275mod=c.oAB({type:Y}),Y.\u0275inj=c.cJS({imports:[gt]}),Y})()},445:(Jt,Qe,k)=>{k.d(Qe,{Is:()=>_e,vT:()=>Fe});var h=k(4650),c=k(6895);const S=new h.OlP("cdk-dir-doc",{providedIn:"root",factory:function d(){return(0,h.f3M)(c.K0)}}),de=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let _e=(()=>{class pe{constructor(Pe){if(this.value="ltr",this.change=new h.vpe,Pe){const mt=Pe.documentElement?Pe.documentElement.dir:null;this.value=function Ae(pe){const be=pe?.toLowerCase()||"";return"auto"===be&&typeof navigator<"u"&&navigator?.language?de.test(navigator.language)?"rtl":"ltr":"rtl"===be?"rtl":"ltr"}((Pe.body?Pe.body.dir:null)||mt||"ltr")}}ngOnDestroy(){this.change.complete()}}return pe.\u0275fac=function(Pe){return new(Pe||pe)(h.LFG(S,8))},pe.\u0275prov=h.Yz7({token:pe,factory:pe.\u0275fac,providedIn:"root"}),pe})(),Fe=(()=>{class pe{}return pe.\u0275fac=function(Pe){return new(Pe||pe)},pe.\u0275mod=h.oAB({type:pe}),pe.\u0275inj=h.cJS({}),pe})()},1281:(Jt,Qe,k)=>{k.d(Qe,{Eq:()=>de,HM:()=>Ae,Ig:()=>c,fI:()=>_e});var h=k(4650);function c(Fe){return null!=Fe&&"false"!=`${Fe}`}function de(Fe){return Array.isArray(Fe)?Fe:[Fe]}function Ae(Fe){return null==Fe?"":"string"==typeof Fe?Fe:`${Fe}px`}function _e(Fe){return Fe instanceof h.SBq?Fe.nativeElement:Fe}},9521:(Jt,Qe,k)=>{k.d(Qe,{JU:()=>Ae,MW:()=>On,Vb:()=>Xt,b2:()=>Zt,hY:()=>be,jx:()=>_e,zL:()=>fe});const Ae=16,_e=17,fe=18,be=27,On=91,Zt=224;function Xt(dr,...pi){return pi.length?pi.some(Fr=>dr[Fr]):dr.altKey||dr.shiftKey||dr.ctrlKey||dr.metaKey}},3353:(Jt,Qe,k)=>{k.d(Qe,{Mq:()=>mt,Oy:()=>Ge,ht:()=>Ye,i$:()=>be,kV:()=>ft,sA:()=>Gt,t4:()=>d});var h=k(4650),c=k(6895);let S;try{S=typeof Intl<"u"&&Intl.v8BreakIterator}catch{S=!1}let Fe,st,Tt,d=(()=>{class Me{constructor(Pt){this._platformId=Pt,this.isBrowser=this._platformId?(0,c.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!S)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return Me.\u0275fac=function(Pt){return new(Pt||Me)(h.LFG(h.Lbi))},Me.\u0275prov=h.Yz7({token:Me,factory:Me.\u0275fac,providedIn:"root"}),Me})();function be(Me){return function pe(){if(null==Fe&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Fe=!0}))}finally{Fe=Fe||!1}return Fe}()?Me:!!Me.capture}function mt(){if(null==st){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return st=!1,st;if("scrollBehavior"in document.documentElement.style)st=!0;else{const Me=Element.prototype.scrollTo;st=!!Me&&!/\{\s*\[native code\]\s*\}/.test(Me.toString())}}return st}function ft(Me){if(function gt(){if(null==Tt){const Me=typeof document<"u"?document.head:null;Tt=!(!Me||!Me.createShadowRoot&&!Me.attachShadow)}return Tt}()){const rt=Me.getRootNode?Me.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&rt instanceof ShadowRoot)return rt}return null}function Ye(){let Me=typeof document<"u"&&document?document.activeElement:null;for(;Me&&Me.shadowRoot;){const rt=Me.shadowRoot.activeElement;if(rt===Me)break;Me=rt}return Me}function Gt(Me){return Me.composedPath?Me.composedPath()[0]:Me.target}function Ge(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}},6895:(Jt,Qe,k)=>{k.d(Qe,{Do:()=>Gt,EM:()=>Hi,HT:()=>de,JF:()=>ho,K0:()=>_e,Mx:()=>ss,NF:()=>ji,O5:()=>dr,PC:()=>wo,PM:()=>Bs,S$:()=>gt,V_:()=>pe,Ye:()=>Ge,b0:()=>Ye,bD:()=>ls,ez:()=>Jo,mk:()=>Tr,q:()=>S,sg:()=>yt,uU:()=>Gs,w_:()=>Ae});var h=k(4650);let c=null;function S(){return c}function de(R){c||(c=R)}class Ae{}const _e=new h.OlP("DocumentToken");let fe=(()=>{class R{historyGo(V){throw new Error("Not implemented")}}return R.\u0275fac=function(V){return new(V||R)},R.\u0275prov=h.Yz7({token:R,factory:function(){return function Fe(){return(0,h.LFG)(be)}()},providedIn:"platform"}),R})();const pe=new h.OlP("Location Initialized");let be=(()=>{class R extends fe{constructor(V){super(),this._doc=V,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return S().getBaseHref(this._doc)}onPopState(V){const le=S().getGlobalEventTarget(this._doc,"window");return le.addEventListener("popstate",V,!1),()=>le.removeEventListener("popstate",V)}onHashChange(V){const le=S().getGlobalEventTarget(this._doc,"window");return le.addEventListener("hashchange",V,!1),()=>le.removeEventListener("hashchange",V)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(V){this.location.pathname=V}pushState(V,le,Ue){Pe()?this._history.pushState(V,le,Ue):this.location.hash=Ue}replaceState(V,le,Ue){Pe()?this._history.replaceState(V,le,Ue):this.location.hash=Ue}forward(){this._history.forward()}back(){this._history.back()}historyGo(V=0){this._history.go(V)}getState(){return this._history.state}}return R.\u0275fac=function(V){return new(V||R)(h.LFG(_e))},R.\u0275prov=h.Yz7({token:R,factory:function(){return function st(){return new be((0,h.LFG)(_e))}()},providedIn:"platform"}),R})();function Pe(){return!!window.history.pushState}function mt(R,ee){if(0==R.length)return ee;if(0==ee.length)return R;let V=0;return R.endsWith("/")&&V++,ee.startsWith("/")&&V++,2==V?R+ee.substring(1):1==V?R+ee:R+"/"+ee}function He(R){const ee=R.match(/#|\?|$/),V=ee&&ee.index||R.length;return R.slice(0,V-("/"===R[V-1]?1:0))+R.slice(V)}function Tt(R){return R&&"?"!==R[0]?"?"+R:R}let gt=(()=>{class R{historyGo(V){throw new Error("Not implemented")}}return R.\u0275fac=function(V){return new(V||R)},R.\u0275prov=h.Yz7({token:R,factory:function(){return(0,h.f3M)(Ye)},providedIn:"root"}),R})();const ft=new h.OlP("appBaseHref");let Ye=(()=>{class R extends gt{constructor(V,le){super(),this._platformLocation=V,this._removeListenerFns=[],this._baseHref=le??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(_e).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}prepareExternalUrl(V){return mt(this._baseHref,V)}path(V=!1){const le=this._platformLocation.pathname+Tt(this._platformLocation.search),Ue=this._platformLocation.hash;return Ue&&V?`${le}${Ue}`:le}pushState(V,le,Ue,Ct){const Nt=this.prepareExternalUrl(Ue+Tt(Ct));this._platformLocation.pushState(V,le,Nt)}replaceState(V,le,Ue,Ct){const Nt=this.prepareExternalUrl(Ue+Tt(Ct));this._platformLocation.replaceState(V,le,Nt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(V=0){this._platformLocation.historyGo?.(V)}}return R.\u0275fac=function(V){return new(V||R)(h.LFG(fe),h.LFG(ft,8))},R.\u0275prov=h.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})(),Gt=(()=>{class R extends gt{constructor(V,le){super(),this._platformLocation=V,this._baseHref="",this._removeListenerFns=[],null!=le&&(this._baseHref=le)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}path(V=!1){let le=this._platformLocation.hash;return null==le&&(le="#"),le.length>0?le.substring(1):le}prepareExternalUrl(V){const le=mt(this._baseHref,V);return le.length>0?"#"+le:le}pushState(V,le,Ue,Ct){let Nt=this.prepareExternalUrl(Ue+Tt(Ct));0==Nt.length&&(Nt=this._platformLocation.pathname),this._platformLocation.pushState(V,le,Nt)}replaceState(V,le,Ue,Ct){let Nt=this.prepareExternalUrl(Ue+Tt(Ct));0==Nt.length&&(Nt=this._platformLocation.pathname),this._platformLocation.replaceState(V,le,Nt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(V=0){this._platformLocation.historyGo?.(V)}}return R.\u0275fac=function(V){return new(V||R)(h.LFG(fe),h.LFG(ft,8))},R.\u0275prov=h.Yz7({token:R,factory:R.\u0275fac}),R})(),Ge=(()=>{class R{constructor(V){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=V;const le=this._locationStrategy.getBaseHref();this._baseHref=He(Pt(le)),this._locationStrategy.onPopState(Ue=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ue.state,type:Ue.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(V=!1){return this.normalize(this._locationStrategy.path(V))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(V,le=""){return this.path()==this.normalize(V+Tt(le))}normalize(V){return R.stripTrailingSlash(function rt(R,ee){return R&&ee.startsWith(R)?ee.substring(R.length):ee}(this._baseHref,Pt(V)))}prepareExternalUrl(V){return V&&"/"!==V[0]&&(V="/"+V),this._locationStrategy.prepareExternalUrl(V)}go(V,le="",Ue=null){this._locationStrategy.pushState(Ue,"",V,le),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Tt(le)),Ue)}replaceState(V,le="",Ue=null){this._locationStrategy.replaceState(Ue,"",V,le),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Tt(le)),Ue)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(V=0){this._locationStrategy.historyGo?.(V)}onUrlChange(V){return this._urlChangeListeners.push(V),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(le=>{this._notifyUrlChangeListeners(le.url,le.state)})),()=>{const le=this._urlChangeListeners.indexOf(V);this._urlChangeListeners.splice(le,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(V="",le){this._urlChangeListeners.forEach(Ue=>Ue(V,le))}subscribe(V,le,Ue){return this._subject.subscribe({next:V,error:le,complete:Ue})}}return R.normalizeQueryParams=Tt,R.joinWithSlash=mt,R.stripTrailingSlash=He,R.\u0275fac=function(V){return new(V||R)(h.LFG(gt))},R.\u0275prov=h.Yz7({token:R,factory:function(){return function Me(){return new Ge((0,h.LFG)(gt))}()},providedIn:"root"}),R})();function Pt(R){return R.replace(/\/index.html$/,"")}var We=(()=>((We=We||{})[We.Format=0]="Format",We[We.Standalone=1]="Standalone",We))(),je=(()=>((je=je||{})[je.Narrow=0]="Narrow",je[je.Abbreviated=1]="Abbreviated",je[je.Wide=2]="Wide",je[je.Short=3]="Short",je))(),pt=(()=>((pt=pt||{})[pt.Short=0]="Short",pt[pt.Medium=1]="Medium",pt[pt.Long=2]="Long",pt[pt.Full=3]="Full",pt))(),dt=(()=>((dt=dt||{})[dt.Decimal=0]="Decimal",dt[dt.Group=1]="Group",dt[dt.List=2]="List",dt[dt.PercentSign=3]="PercentSign",dt[dt.PlusSign=4]="PlusSign",dt[dt.MinusSign=5]="MinusSign",dt[dt.Exponential=6]="Exponential",dt[dt.SuperscriptingExponent=7]="SuperscriptingExponent",dt[dt.PerMille=8]="PerMille",dt[dt.Infinity=9]="Infinity",dt[dt.NaN=10]="NaN",dt[dt.TimeSeparator=11]="TimeSeparator",dt[dt.CurrencyDecimal=12]="CurrencyDecimal",dt[dt.CurrencyGroup=13]="CurrencyGroup",dt))();function Nn(R,ee){return Ht((0,h.cg1)(R)[h.wAp.DateFormat],ee)}function In(R,ee){return Ht((0,h.cg1)(R)[h.wAp.TimeFormat],ee)}function Wt(R,ee){return Ht((0,h.cg1)(R)[h.wAp.DateTimeFormat],ee)}function dn(R,ee){const V=(0,h.cg1)(R),le=V[h.wAp.NumberSymbols][ee];if(typeof le>"u"){if(ee===dt.CurrencyDecimal)return V[h.wAp.NumberSymbols][dt.Decimal];if(ee===dt.CurrencyGroup)return V[h.wAp.NumberSymbols][dt.Group]}return le}function Cr(R){if(!R[h.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${R[h.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Ht(R,ee){for(let V=ee;V>-1;V--)if(typeof R[V]<"u")return R[V];throw new Error("Locale data API: locale data undefined")}function cr(R){const[ee,V]=R.split(":");return{hours:+ee,minutes:+V}}const _i=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ir={},_r=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var fr=(()=>((fr=fr||{})[fr.Short=0]="Short",fr[fr.ShortGMT=1]="ShortGMT",fr[fr.Long=2]="Long",fr[fr.Extended=3]="Extended",fr))(),mn=(()=>((mn=mn||{})[mn.FullYear=0]="FullYear",mn[mn.Month=1]="Month",mn[mn.Date=2]="Date",mn[mn.Hours=3]="Hours",mn[mn.Minutes=4]="Minutes",mn[mn.Seconds=5]="Seconds",mn[mn.FractionalSeconds=6]="FractionalSeconds",mn[mn.Day=7]="Day",mn))(),Tn=(()=>((Tn=Tn||{})[Tn.DayPeriods=0]="DayPeriods",Tn[Tn.Days=1]="Days",Tn[Tn.Months=2]="Months",Tn[Tn.Eras=3]="Eras",Tn))();function On(R,ee,V,le){let Ue=function we(R){if(Bt(R))return R;if("number"==typeof R&&!isNaN(R))return new Date(R);if("string"==typeof R){if(R=R.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(R)){const[Ue,Ct=1,Nt=1]=R.split("-").map(Bn=>+Bn);return wr(Ue,Ct-1,Nt)}const V=parseFloat(R);if(!isNaN(R-V))return new Date(V);let le;if(le=R.match(_i))return function ut(R){const ee=new Date(0);let V=0,le=0;const Ue=R[8]?ee.setUTCFullYear:ee.setFullYear,Ct=R[8]?ee.setUTCHours:ee.setHours;R[9]&&(V=Number(R[9]+R[10]),le=Number(R[9]+R[11])),Ue.call(ee,Number(R[1]),Number(R[2])-1,Number(R[3]));const Nt=Number(R[4]||0)-V,Bn=Number(R[5]||0)-le,$r=Number(R[6]||0),Or=Math.floor(1e3*parseFloat("0."+(R[7]||0)));return Ct.call(ee,Nt,Bn,$r,Or),ee}(le)}const ee=new Date(R);if(!Bt(ee))throw new Error(`Unable to convert "${R}" into a date`);return ee}(R);ee=bn(V,ee)||ee;let Bn,Nt=[];for(;ee;){if(Bn=_r.exec(ee),!Bn){Nt.push(ee);break}{Nt=Nt.concat(Bn.slice(1));const ii=Nt.pop();if(!ii)break;ee=ii}}let $r=Ue.getTimezoneOffset();le&&($r=$e(le,$r),Ue=function ie(R,ee,V){const le=V?-1:1,Ue=R.getTimezoneOffset();return function De(R,ee){return(R=new Date(R.getTime())).setMinutes(R.getMinutes()+ee),R}(R,le*($e(ee,Ue)-Ue))}(Ue,le,!0));let Or="";return Nt.forEach(ii=>{const Wr=function xe(R){if(Ne[R])return Ne[R];let ee;switch(R){case"G":case"GG":case"GGG":ee=St(Tn.Eras,je.Abbreviated);break;case"GGGG":ee=St(Tn.Eras,je.Wide);break;case"GGGGG":ee=St(Tn.Eras,je.Narrow);break;case"y":ee=Ve(mn.FullYear,1,0,!1,!0);break;case"yy":ee=Ve(mn.FullYear,2,0,!0,!0);break;case"yyy":ee=Ve(mn.FullYear,3,0,!1,!0);break;case"yyyy":ee=Ve(mn.FullYear,4,0,!1,!0);break;case"Y":ee=ln(1);break;case"YY":ee=ln(2,!0);break;case"YYY":ee=ln(3);break;case"YYYY":ee=ln(4);break;case"M":case"L":ee=Ve(mn.Month,1,1);break;case"MM":case"LL":ee=Ve(mn.Month,2,1);break;case"MMM":ee=St(Tn.Months,je.Abbreviated);break;case"MMMM":ee=St(Tn.Months,je.Wide);break;case"MMMMM":ee=St(Tn.Months,je.Narrow);break;case"LLL":ee=St(Tn.Months,je.Abbreviated,We.Standalone);break;case"LLLL":ee=St(Tn.Months,je.Wide,We.Standalone);break;case"LLLLL":ee=St(Tn.Months,je.Narrow,We.Standalone);break;case"w":ee=_t(1);break;case"ww":ee=_t(2);break;case"W":ee=_t(1,!0);break;case"d":ee=Ve(mn.Date,1);break;case"dd":ee=Ve(mn.Date,2);break;case"c":case"cc":ee=Ve(mn.Day,1);break;case"ccc":ee=St(Tn.Days,je.Abbreviated,We.Standalone);break;case"cccc":ee=St(Tn.Days,je.Wide,We.Standalone);break;case"ccccc":ee=St(Tn.Days,je.Narrow,We.Standalone);break;case"cccccc":ee=St(Tn.Days,je.Short,We.Standalone);break;case"E":case"EE":case"EEE":ee=St(Tn.Days,je.Abbreviated);break;case"EEEE":ee=St(Tn.Days,je.Wide);break;case"EEEEE":ee=St(Tn.Days,je.Narrow);break;case"EEEEEE":ee=St(Tn.Days,je.Short);break;case"a":case"aa":case"aaa":ee=St(Tn.DayPeriods,je.Abbreviated);break;case"aaaa":ee=St(Tn.DayPeriods,je.Wide);break;case"aaaaa":ee=St(Tn.DayPeriods,je.Narrow);break;case"b":case"bb":case"bbb":ee=St(Tn.DayPeriods,je.Abbreviated,We.Standalone,!0);break;case"bbbb":ee=St(Tn.DayPeriods,je.Wide,We.Standalone,!0);break;case"bbbbb":ee=St(Tn.DayPeriods,je.Narrow,We.Standalone,!0);break;case"B":case"BB":case"BBB":ee=St(Tn.DayPeriods,je.Abbreviated,We.Format,!0);break;case"BBBB":ee=St(Tn.DayPeriods,je.Wide,We.Format,!0);break;case"BBBBB":ee=St(Tn.DayPeriods,je.Narrow,We.Format,!0);break;case"h":ee=Ve(mn.Hours,1,-12);break;case"hh":ee=Ve(mn.Hours,2,-12);break;case"H":ee=Ve(mn.Hours,1);break;case"HH":ee=Ve(mn.Hours,2);break;case"m":ee=Ve(mn.Minutes,1);break;case"mm":ee=Ve(mn.Minutes,2);break;case"s":ee=Ve(mn.Seconds,1);break;case"ss":ee=Ve(mn.Seconds,2);break;case"S":ee=Ve(mn.FractionalSeconds,1);break;case"SS":ee=Ve(mn.FractionalSeconds,2);break;case"SSS":ee=Ve(mn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":ee=Jn(fr.Short);break;case"ZZZZZ":ee=Jn(fr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":ee=Jn(fr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":ee=Jn(fr.Long);break;default:return null}return Ne[R]=ee,ee}(ii);Or+=Wr?Wr(Ue,V,$r):"''"===ii?"'":ii.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Or}function wr(R,ee,V){const le=new Date(0);return le.setFullYear(R,ee,V),le.setHours(0,0,0),le}function bn(R,ee){const V=function $t(R){return(0,h.cg1)(R)[h.wAp.LocaleId]}(R);if(Ir[V]=Ir[V]||{},Ir[V][ee])return Ir[V][ee];let le="";switch(ee){case"shortDate":le=Nn(R,pt.Short);break;case"mediumDate":le=Nn(R,pt.Medium);break;case"longDate":le=Nn(R,pt.Long);break;case"fullDate":le=Nn(R,pt.Full);break;case"shortTime":le=In(R,pt.Short);break;case"mediumTime":le=In(R,pt.Medium);break;case"longTime":le=In(R,pt.Long);break;case"fullTime":le=In(R,pt.Full);break;case"short":const Ue=bn(R,"shortTime"),Ct=bn(R,"shortDate");le=zr(Wt(R,pt.Short),[Ue,Ct]);break;case"medium":const Nt=bn(R,"mediumTime"),Bn=bn(R,"mediumDate");le=zr(Wt(R,pt.Medium),[Nt,Bn]);break;case"long":const $r=bn(R,"longTime"),Or=bn(R,"longDate");le=zr(Wt(R,pt.Long),[$r,Or]);break;case"full":const ii=bn(R,"fullTime"),Wr=bn(R,"fullDate");le=zr(Wt(R,pt.Full),[ii,Wr])}return le&&(Ir[V][ee]=le),le}function zr(R,ee){return ee&&(R=R.replace(/\{([^}]+)}/g,function(V,le){return null!=ee&&le in ee?ee[le]:V})),R}function Kn(R,ee,V="-",le,Ue){let Ct="";(R<0||Ue&&R<=0)&&(Ue?R=1-R:(R=-R,Ct=V));let Nt=String(R);for(;Nt.length<ee;)Nt="0"+Nt;return le&&(Nt=Nt.slice(Nt.length-ee)),Ct+Nt}function Ve(R,ee,V=0,le=!1,Ue=!1){return function(Ct,Nt){let Bn=function tt(R,ee){switch(R){case mn.FullYear:return ee.getFullYear();case mn.Month:return ee.getMonth();case mn.Date:return ee.getDate();case mn.Hours:return ee.getHours();case mn.Minutes:return ee.getMinutes();case mn.Seconds:return ee.getSeconds();case mn.FractionalSeconds:return ee.getMilliseconds();case mn.Day:return ee.getDay();default:throw new Error(`Unknown DateType value "${R}".`)}}(R,Ct);if((V>0||Bn>-V)&&(Bn+=V),R===mn.Hours)0===Bn&&-12===V&&(Bn=12);else if(R===mn.FractionalSeconds)return function zt(R,ee){return Kn(R,3).substring(0,ee)}(Bn,ee);const $r=dn(Nt,dt.MinusSign);return Kn(Bn,ee,$r,le,Ue)}}function St(R,ee,V=We.Format,le=!1){return function(Ue,Ct){return function Rn(R,ee,V,le,Ue,Ct){switch(V){case Tn.Months:return function cn(R,ee,V){const le=(0,h.cg1)(R),Ct=Ht([le[h.wAp.MonthsFormat],le[h.wAp.MonthsStandalone]],ee);return Ht(Ct,V)}(ee,Ue,le)[R.getMonth()];case Tn.Days:return function Mn(R,ee,V){const le=(0,h.cg1)(R),Ct=Ht([le[h.wAp.DaysFormat],le[h.wAp.DaysStandalone]],ee);return Ht(Ct,V)}(ee,Ue,le)[R.getDay()];case Tn.DayPeriods:const Nt=R.getHours(),Bn=R.getMinutes();if(Ct){const Or=function yr(R){const ee=(0,h.cg1)(R);return Cr(ee),(ee[h.wAp.ExtraData][2]||[]).map(le=>"string"==typeof le?cr(le):[cr(le[0]),cr(le[1])])}(ee),ii=function Rr(R,ee,V){const le=(0,h.cg1)(R);Cr(le);const Ct=Ht([le[h.wAp.ExtraData][0],le[h.wAp.ExtraData][1]],ee)||[];return Ht(Ct,V)||[]}(ee,Ue,le),Wr=Or.findIndex(ds=>{if(Array.isArray(ds)){const[qr,Ni]=ds,Io=Nt>=qr.hours&&Bn>=qr.minutes,ci=Nt<Ni.hours||Nt===Ni.hours&&Bn<Ni.minutes;if(qr.hours<Ni.hours){if(Io&&ci)return!0}else if(Io||ci)return!0}else if(ds.hours===Nt&&ds.minutes===Bn)return!0;return!1});if(-1!==Wr)return ii[Wr]}return function Qt(R,ee,V){const le=(0,h.cg1)(R),Ct=Ht([le[h.wAp.DayPeriodsFormat],le[h.wAp.DayPeriodsStandalone]],ee);return Ht(Ct,V)}(ee,Ue,le)[Nt<12?0:1];case Tn.Eras:return function Rt(R,ee){return Ht((0,h.cg1)(R)[h.wAp.Eras],ee)}(ee,le)[R.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${V}`)}}(Ue,Ct,R,ee,V,le)}}function Jn(R){return function(ee,V,le){const Ue=-1*le,Ct=dn(V,dt.MinusSign),Nt=Ue>0?Math.floor(Ue/60):Math.ceil(Ue/60);switch(R){case fr.Short:return(Ue>=0?"+":"")+Kn(Nt,2,Ct)+Kn(Math.abs(Ue%60),2,Ct);case fr.ShortGMT:return"GMT"+(Ue>=0?"+":"")+Kn(Nt,1,Ct);case fr.Long:return"GMT"+(Ue>=0?"+":"")+Kn(Nt,2,Ct)+":"+Kn(Math.abs(Ue%60),2,Ct);case fr.Extended:return 0===le?"Z":(Ue>=0?"+":"")+Kn(Nt,2,Ct)+":"+Kn(Math.abs(Ue%60),2,Ct);default:throw new Error(`Unknown zone width "${R}"`)}}}function Xe(R){return wr(R.getFullYear(),R.getMonth(),R.getDate()+(4-R.getDay()))}function _t(R,ee=!1){return function(V,le){let Ue;if(ee){const Ct=new Date(V.getFullYear(),V.getMonth(),1).getDay()-1,Nt=V.getDate();Ue=1+Math.floor((Nt+Ct)/7)}else{const Ct=Xe(V),Nt=function ge(R){const ee=wr(R,0,1).getDay();return wr(R,0,1+(ee<=4?4:11)-ee)}(Ct.getFullYear()),Bn=Ct.getTime()-Nt.getTime();Ue=1+Math.round(Bn/6048e5)}return Kn(Ue,R,dn(le,dt.MinusSign))}}function ln(R,ee=!1){return function(V,le){return Kn(Xe(V).getFullYear(),R,dn(le,dt.MinusSign),ee)}}const Ne={};function $e(R,ee){R=R.replace(/:/g,"");const V=Date.parse("Jan 01, 1970 00:00:00 "+R)/6e4;return isNaN(V)?ee:V}function Bt(R){return R instanceof Date&&!isNaN(R.valueOf())}function ss(R,ee){ee=encodeURIComponent(ee);for(const V of R.split(";")){const le=V.indexOf("="),[Ue,Ct]=-1==le?[V,""]:[V.slice(0,le),V.slice(le+1)];if(Ue.trim()===ee)return decodeURIComponent(Ct)}return null}let Tr=(()=>{class R{constructor(V,le,Ue,Ct){this._iterableDiffers=V,this._keyValueDiffers=le,this._ngEl=Ue,this._renderer=Ct,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(V){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof V?V.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(V){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof V?V.split(/\s+/):V,this._rawClass&&((0,h.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const V=this._iterableDiffer.diff(this._rawClass);V&&this._applyIterableChanges(V)}else if(this._keyValueDiffer){const V=this._keyValueDiffer.diff(this._rawClass);V&&this._applyKeyValueChanges(V)}}_applyKeyValueChanges(V){V.forEachAddedItem(le=>this._toggleClass(le.key,le.currentValue)),V.forEachChangedItem(le=>this._toggleClass(le.key,le.currentValue)),V.forEachRemovedItem(le=>{le.previousValue&&this._toggleClass(le.key,!1)})}_applyIterableChanges(V){V.forEachAddedItem(le=>{if("string"!=typeof le.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,h.AaK)(le.item)}`);this._toggleClass(le.item,!0)}),V.forEachRemovedItem(le=>this._toggleClass(le.item,!1))}_applyClasses(V){V&&(Array.isArray(V)||V instanceof Set?V.forEach(le=>this._toggleClass(le,!0)):Object.keys(V).forEach(le=>this._toggleClass(le,!!V[le])))}_removeClasses(V){V&&(Array.isArray(V)||V instanceof Set?V.forEach(le=>this._toggleClass(le,!1)):Object.keys(V).forEach(le=>this._toggleClass(le,!1)))}_toggleClass(V,le){(V=V.trim())&&V.split(/\s+/g).forEach(Ue=>{le?this._renderer.addClass(this._ngEl.nativeElement,Ue):this._renderer.removeClass(this._ngEl.nativeElement,Ue)})}}return R.\u0275fac=function(V){return new(V||R)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},R.\u0275dir=h.lG2({type:R,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),R})();class ke{constructor(ee,V,le,Ue){this.$implicit=ee,this.ngForOf=V,this.index=le,this.count=Ue}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let yt=(()=>{class R{constructor(V,le,Ue){this._viewContainer=V,this._template=le,this._differs=Ue,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(V){this._ngForOf=V,this._ngForOfDirty=!0}set ngForTrackBy(V){this._trackByFn=V}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(V){V&&(this._template=V)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const V=this._ngForOf;!this._differ&&V&&(this._differ=this._differs.find(V).create(this.ngForTrackBy))}if(this._differ){const V=this._differ.diff(this._ngForOf);V&&this._applyChanges(V)}}_applyChanges(V){const le=this._viewContainer;V.forEachOperation((Ue,Ct,Nt)=>{if(null==Ue.previousIndex)le.createEmbeddedView(this._template,new ke(Ue.item,this._ngForOf,-1,-1),null===Nt?void 0:Nt);else if(null==Nt)le.remove(null===Ct?void 0:Ct);else if(null!==Ct){const Bn=le.get(Ct);le.move(Bn,Nt),Zt(Bn,Ue)}});for(let Ue=0,Ct=le.length;Ue<Ct;Ue++){const Bn=le.get(Ue).context;Bn.index=Ue,Bn.count=Ct,Bn.ngForOf=this._ngForOf}V.forEachIdentityChange(Ue=>{Zt(le.get(Ue.currentIndex),Ue)})}static ngTemplateContextGuard(V,le){return!0}}return R.\u0275fac=function(V){return new(V||R)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},R.\u0275dir=h.lG2({type:R,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),R})();function Zt(R,ee){R.context.$implicit=ee.item}let dr=(()=>{class R{constructor(V,le){this._viewContainer=V,this._context=new pi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=le}set ngIf(V){this._context.$implicit=this._context.ngIf=V,this._updateView()}set ngIfThen(V){Fr("ngIfThen",V),this._thenTemplateRef=V,this._thenViewRef=null,this._updateView()}set ngIfElse(V){Fr("ngIfElse",V),this._elseTemplateRef=V,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(V,le){return!0}}return R.\u0275fac=function(V){return new(V||R)(h.Y36(h.s_b),h.Y36(h.Rgc))},R.\u0275dir=h.lG2({type:R,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),R})();class pi{constructor(){this.$implicit=null,this.ngIf=null}}function Fr(R,ee){if(ee&&!ee.createEmbeddedView)throw new Error(`${R} must be a TemplateRef, but received '${(0,h.AaK)(ee)}'.`)}let wo=(()=>{class R{constructor(V,le,Ue){this._ngEl=V,this._differs=le,this._renderer=Ue,this._ngStyle=null,this._differ=null}set ngStyle(V){this._ngStyle=V,!this._differ&&V&&(this._differ=this._differs.find(V).create())}ngDoCheck(){if(this._differ){const V=this._differ.diff(this._ngStyle);V&&this._applyChanges(V)}}_setStyle(V,le){const[Ue,Ct]=V.split("."),Nt=-1===Ue.indexOf("-")?void 0:h.JOm.DashCase;null!=le?this._renderer.setStyle(this._ngEl.nativeElement,Ue,Ct?`${le}${Ct}`:le,Nt):this._renderer.removeStyle(this._ngEl.nativeElement,Ue,Nt)}_applyChanges(V){V.forEachRemovedItem(le=>this._setStyle(le.key,null)),V.forEachAddedItem(le=>this._setStyle(le.key,le.currentValue)),V.forEachChangedItem(le=>this._setStyle(le.key,le.currentValue))}}return R.\u0275fac=function(V){return new(V||R)(h.Y36(h.SBq),h.Y36(h.aQg),h.Y36(h.Qsj))},R.\u0275dir=h.lG2({type:R,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),R})();const es=new h.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Gs=(()=>{class R{constructor(V,le){this.locale=V,this.defaultTimezone=le}transform(V,le="mediumDate",Ue,Ct){if(null==V||""===V||V!=V)return null;try{return On(V,le,Ct||this.locale,Ue??this.defaultTimezone??void 0)}catch(Nt){throw function os(R,ee){return new h.vHH(2100,!1)}()}}}return R.\u0275fac=function(V){return new(V||R)(h.Y36(h.soG,16),h.Y36(es,24))},R.\u0275pipe=h.Yjl({name:"date",type:R,pure:!0,standalone:!0}),R})(),Jo=(()=>{class R{}return R.\u0275fac=function(V){return new(V||R)},R.\u0275mod=h.oAB({type:R}),R.\u0275inj=h.cJS({}),R})();const ls="browser";function ji(R){return R===ls}function Bs(R){return"server"===R}let Hi=(()=>{class R{}return R.\u0275prov=(0,h.Yz7)({token:R,providedIn:"root",factory:()=>new Po((0,h.LFG)(_e),window)}),R})();class Po{constructor(ee,V){this.document=ee,this.window=V,this.offset=()=>[0,0]}setOffset(ee){this.offset=Array.isArray(ee)?()=>ee:ee}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ee){this.supportsScrolling()&&this.window.scrollTo(ee[0],ee[1])}scrollToAnchor(ee){if(!this.supportsScrolling())return;const V=function Mi(R,ee){const V=R.getElementById(ee)||R.getElementsByName(ee)[0];if(V)return V;if("function"==typeof R.createTreeWalker&&R.body&&(R.body.createShadowRoot||R.body.attachShadow)){const le=R.createTreeWalker(R.body,NodeFilter.SHOW_ELEMENT);let Ue=le.currentNode;for(;Ue;){const Ct=Ue.shadowRoot;if(Ct){const Nt=Ct.getElementById(ee)||Ct.querySelector(`[name="${ee}"]`);if(Nt)return Nt}Ue=le.nextNode()}}return null}(this.document,ee);V&&(this.scrollToElement(V),V.focus())}setHistoryScrollRestoration(ee){if(this.supportScrollRestoration()){const V=this.window.history;V&&V.scrollRestoration&&(V.scrollRestoration=ee)}}scrollToElement(ee){const V=ee.getBoundingClientRect(),le=V.left+this.window.pageXOffset,Ue=V.top+this.window.pageYOffset,Ct=this.offset();this.window.scrollTo(le-Ct[0],Ue-Ct[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ee=Pi(this.window.history)||Pi(Object.getPrototypeOf(this.window.history));return!(!ee||!ee.writable&&!ee.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Pi(R){return Object.getOwnPropertyDescriptor(R,"scrollRestoration")}class ho{}},4650:(Jt,Qe,k)=>{k.d(Qe,{$8M:()=>lt,$Z:()=>yf,AFp:()=>Bb,ALo:()=>sb,AaK:()=>fe,CHM:()=>cs,CRH:()=>mb,CZH:()=>ym,CqO:()=>Gg,D6c:()=>SC,Dn7:()=>ab,EJc:()=>HE,EpF:()=>Zg,F$t:()=>Qg,F4k:()=>zg,FYo:()=>Dp,FiY:()=>Cn,G48:()=>uC,Gf:()=>pb,GfV:()=>Ip,Gpc:()=>be,Hsn:()=>Jg,Ikx:()=>$y,JOm:()=>Ra,KtG:()=>qs,LFG:()=>xr,LSH:()=>qu,Lbi:()=>UE,Lck:()=>Rw,MAs:()=>ah,MMx:()=>Xy,NdJ:()=>Xf,OlP:()=>ui,Oqu:()=>Dt,PXZ:()=>rC,Q6J:()=>od,QGY:()=>Jf,QP$:()=>Bt,QbO:()=>BE,Qsj:()=>km,R0b:()=>Bl,RDi:()=>Dn,Rgc:()=>dp,SBq:()=>Rc,Sil:()=>ZE,Suo:()=>gb,TTD:()=>as,TgZ:()=>Hu,VKq:()=>Jv,WFA:()=>ch,X6Q:()=>lC,XFs:()=>Ht,Xpm:()=>J,Xts:()=>Mu,Y36:()=>fu,YKP:()=>$v,YNc:()=>Yf,Yjl:()=>De,Yz7:()=>In,Z0I:()=>Ar,ZZ4:()=>D_,_Bn:()=>Hv,_UZ:()=>$u,_Vd:()=>Qu,_c5:()=>IC,_uU:()=>ze,aQg:()=>I_,c2e:()=>VE,cJS:()=>dn,cg1:()=>zy,d8E:()=>Zy,dDg:()=>XE,dqk:()=>On,eFA:()=>Jb,ekj:()=>ph,eoX:()=>Kb,f3M:()=>j,g9A:()=>jb,h0i:()=>yh,hGG:()=>TC,hij:()=>qt,iGM:()=>fb,ifc:()=>Tn,ip1:()=>Ub,jDz:()=>zv,kL8:()=>pv,lG2:()=>$e,lcZ:()=>ob,lqb:()=>ql,lri:()=>Wb,n5z:()=>Al,oAB:()=>ln,oxw:()=>Kg,q4F:()=>Tp,qLn:()=>El,qOj:()=>Wf,qZA:()=>ad,qbA:()=>Xv,rWj:()=>qb,s9C:()=>dh,sBO:()=>cC,sIi:()=>yc,s_b:()=>pm,soG:()=>_m,tb:()=>Hb,tp0:()=>Sr,uIk:()=>Ug,vHH:()=>He,vpe:()=>Du,wAp:()=>kr,xp6:()=>Wc,z2F:()=>vm,zSh:()=>Sh,zs3:()=>dl});var h=k(7579),c=k(727),S=k(9751),d=k(6451),de=k(3099);function Ae(t){for(let r in t)if(t[r]===Ae)return r;throw Error("Could not find renamed property on target object.")}function _e(t,r){for(const s in r)r.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=r[s])}function fe(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(fe).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Fe(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const pe=Ae({__forward_ref__:Ae});function be(t){return t.__forward_ref__=be,t.toString=function(){return fe(this())},t}function Pe(t){return st(t)?t():t}function st(t){return"function"==typeof t&&t.hasOwnProperty(pe)&&t.__forward_ref__===be}class He extends Error{constructor(r,s){super(function Tt(t,r){return`NG0${Math.abs(t)}${r?": "+r.trim():""}`}(r,s)),this.code=r}}function gt(t){return"string"==typeof t?t:null==t?"":String(t)}function Me(t,r){throw new He(-201,!1)}function cn(t,r){null==t&&function Rt(t,r,s,a){throw new Error(`ASSERTION ERROR: ${t}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,t,null,"!=")}function In(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function dn(t){return{providers:t.providers||[],imports:t.imports||[]}}function vr(t){return br(t,Cr)||br(t,Rr)}function Ar(t){return null!==vr(t)}function br(t,r){return t.hasOwnProperty(r)?t[r]:null}function Vn(t){return t&&(t.hasOwnProperty(yr)||t.hasOwnProperty(er))?t[yr]:null}const Cr=Ae({\u0275prov:Ae}),yr=Ae({\u0275inj:Ae}),Rr=Ae({ngInjectableDef:Ae}),er=Ae({ngInjectorDef:Ae});var Ht=(()=>((Ht=Ht||{})[Ht.Default=0]="Default",Ht[Ht.Host=1]="Host",Ht[Ht.Self=2]="Self",Ht[Ht.SkipSelf=4]="SkipSelf",Ht[Ht.Optional=8]="Optional",Ht))();let cr;function nr(t){const r=cr;return cr=t,r}function Nr(t,r,s){const a=vr(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Ht.Optional?null:void 0!==r?r:void Me(fe(t))}function Ir(t){return{toString:t}.toString()}var _r=(()=>((_r=_r||{})[_r.OnPush=0]="OnPush",_r[_r.Default=1]="Default",_r))(),Tn=(()=>{return(t=Tn||(Tn={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",Tn;var t})();const On=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),zr={},Kn=[],zt=Ae({\u0275cmp:Ae}),Ve=Ae({\u0275dir:Ae}),tt=Ae({\u0275pipe:Ae}),St=Ae({\u0275mod:Ae}),Rn=Ae({\u0275fac:Ae}),Jn=Ae({__NG_ELEMENT_ID__:Ae});let Je=0;function J(t){return Ir(()=>{const s=!0===t.standalone,a={},u={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===_r.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&t.dependencies||null,getStandaloneInjector:null,selectors:t.selectors||Kn,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Tn.Emulated,id:"c"+Je++,styles:t.styles||Kn,_:null,setInput:null,schemas:t.schemas||null,tView:null},g=t.dependencies,b=t.features;return u.inputs=xe(t.inputs,a),u.outputs=xe(t.outputs),b&&b.forEach(M=>M(u)),u.directiveDefs=g?()=>("function"==typeof g?g():g).map(Xe).filter(_t):null,u.pipeDefs=g?()=>("function"==typeof g?g():g).map(ut).filter(_t):null,u})}function Xe(t){return ie(t)||we(t)}function _t(t){return null!==t}function ln(t){return Ir(()=>({type:t.type,bootstrap:t.bootstrap||Kn,declarations:t.declarations||Kn,imports:t.imports||Kn,exports:t.exports||Kn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function xe(t,r){if(null==t)return zr;const s={};for(const a in t)if(t.hasOwnProperty(a)){let u=t[a],g=u;Array.isArray(u)&&(g=u[1],u=u[0]),s[u]=a,r&&(r[u]=g)}return s}const $e=J;function De(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function ie(t){return t[zt]||null}function we(t){return t[Ve]||null}function ut(t){return t[tt]||null}function Bt(t){const r=ie(t)||we(t)||ut(t);return null!==r&&r.standalone}function gn(t,r){const s=t[St]||null;if(!s&&!0===r)throw new Error(`Type ${fe(t)} does not have '\u0275mod' property.`);return s}function Fr(t){return Array.isArray(t)&&"object"==typeof t[1]}function gi(t){return Array.isArray(t)&&!0===t[1]}function ms(t){return 0!=(8&t.flags)}function ki(t){return 2==(2&t.flags)}function xs(t){return 1==(1&t.flags)}function mi(t){return null!==t.template}function no(t){return 0!=(256&t[2])}function Ti(t,r){return t.hasOwnProperty(Rn)?t[Rn]:null}class Lr{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function as(){return ai}function ai(t){return t.type.prototype.ngOnChanges&&(t.setInput=Us),Is}function Is(){const t=ks(this),r=t?.current;if(r){const s=t.previous;if(s===zr)t.previous=r;else for(let a in r)s[a]=r[a];t.current=null,this.ngOnChanges(r)}}function Us(t,r,s,a){const u=ks(t)||function Jo(t,r){return t[ko]=r}(t,{previous:zr,current:null}),g=u.current||(u.current={}),b=u.previous,M=this.declaredInputs[s],N=b[M];g[M]=new Lr(N&&N.currentValue,r,b===zr),t[a]=r}as.ngInherit=!0;const ko="__ngSimpleChanges__";function ks(t){return t[ko]||null}function Ci(t){for(;Array.isArray(t);)t=t[0];return t}function Pi(t,r){return Ci(r[t])}function Mi(t,r){return Ci(r[t.index])}function ho(t,r){return t.data[r]}function $i(t,r){return t[r]}function Hr(t,r){const s=r[t];return Fr(s)?s:s[0]}function _s(t){return 64==(64&t[2])}function L(t,r){return null==r?null:t[r]}function P(t){t[18]=0}function Q(t,r){t[5]+=r;let s=t,a=t[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const ue={lFrame:No(null),bindingsEnabled:!0};function jn(){return ue.bindingsEnabled}function jt(){return ue.lFrame.lView}function Xn(){return ue.lFrame.tView}function cs(t){return ue.lFrame.contextLView=t,t[8]}function qs(t){return ue.lFrame.contextLView=null,t}function Ri(){let t=ei();for(;null!==t&&64===t.type;)t=t.parent;return t}function ei(){return ue.lFrame.currentTNode}function Ts(t,r){const s=ue.lFrame;s.currentTNode=t,s.isParent=r}function Ks(){return ue.lFrame.isParent}function Zo(){ue.lFrame.isParent=!1}function U(){const t=ue.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}function $n(){return ue.lFrame.bindingIndex++}function io(t,r){const s=ue.lFrame;s.bindingIndex=s.bindingRootIndex=t,Ys(r)}function Ys(t){ue.lFrame.currentDirectiveIndex=t}function ha(t){const r=ue.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}function ea(){return ue.lFrame.currentQueryIndex}function fa(t){ue.lFrame.currentQueryIndex=t}function Ro(t){const r=t[1];return 2===r.type?r.declTNode:1===r.type?t[6]:null}function pa(t,r,s){if(s&Ht.SkipSelf){let u=r,g=t;for(;!(u=u.parent,null!==u||s&Ht.Host||(u=Ro(g),null===u||(g=g[15],10&u.type))););if(null===u)return!1;r=u,t=g}const a=ue.lFrame=$a();return a.currentTNode=r,a.lView=t,!0}function so(t){const r=$a(),s=t[1];ue.lFrame=r,r.currentTNode=s.firstChild,r.lView=t,r.tView=s,r.contextLView=t,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function $a(){const t=ue.lFrame,r=null===t?null:t.child;return null===r?No(t):r}function No(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function Za(){const t=ue.lFrame;return ue.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const R=Za;function ee(){const t=Za();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ue(){return ue.lFrame.selectedIndex}function Ct(t){ue.lFrame.selectedIndex=t}function Nt(){const t=ue.lFrame;return ho(t.tView,t.selectedIndex)}function qr(t,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const g=t.data[s].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:M,ngAfterViewInit:N,ngAfterViewChecked:K,ngOnDestroy:ce}=g;b&&(t.contentHooks||(t.contentHooks=[])).push(-s,b),M&&((t.contentHooks||(t.contentHooks=[])).push(s,M),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(s,M)),N&&(t.viewHooks||(t.viewHooks=[])).push(-s,N),K&&((t.viewHooks||(t.viewHooks=[])).push(s,K),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(s,K)),null!=ce&&(t.destroyHooks||(t.destroyHooks=[])).push(s,ce)}}function Ni(t,r,s){ts(t,r,3,s)}function Io(t,r,s,a){(3&t[2])===s&&ts(t,r,s,a)}function ci(t,r){let s=t[2];(3&s)===r&&(s&=2047,s+=1,t[2]=s)}function ts(t,r,s,a){const g=a??-1,b=r.length-1;let M=0;for(let N=void 0!==a?65535&t[18]:0;N<b;N++)if("number"==typeof r[N+1]){if(M=r[N],null!=a&&M>=a)break}else r[N]<0&&(t[18]+=65536),(M<g||-1==g)&&(Kr(t,s,r,N),t[18]=(4294901760&t[18])+N+2),N++}function Kr(t,r,s,a){const u=s[a]<0,g=s[a+1],M=t[u?-s[a]:s[a]];if(u){if(t[2]>>11<t[18]>>16&&(3&t[2])===r){t[2]+=2048;try{g.call(M)}finally{}}}else try{g.call(M)}finally{}}class Rs{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function Mt(t,r,s){let a=0;for(;a<s.length;){const u=s[a];if("number"==typeof u){if(0!==u)break;a++;const g=s[a++],b=s[a++],M=s[a++];t.setAttribute(r,b,M,g)}else{const g=u,b=s[++a];bs(g)?t.setProperty(r,g,b):t.setAttribute(r,g,b),a++}}return a}function rn(t){return 3===t||4===t||6===t}function bs(t){return 64===t.charCodeAt(0)}function tl(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const u=r[a];"number"==typeof u?s=u:0===s||Vl(t,s,u,null,-1===s||2===s?r[++a]:null)}}return t}function Vl(t,r,s,a,u){let g=0,b=t.length;if(-1===r)b=-1;else for(;g<t.length;){const M=t[g++];if("number"==typeof M){if(M===r){b=-1;break}if(M>r){b=g-1;break}}}for(;g<t.length;){const M=t[g];if("number"==typeof M)break;if(M===s){if(null===a)return void(null!==u&&(t[g+1]=u));if(a===t[g+1])return void(t[g+2]=u)}g++,null!==a&&g++,null!==u&&g++}-1!==b&&(t.splice(b,0,r),g=b+1),t.splice(g++,0,s),null!==a&&t.splice(g++,0,a),null!==u&&t.splice(g++,0,u)}function jl(t){return-1!==t}function hs(t){return 32767&t}function ta(t,r){let s=function iu(t){return t>>16}(t),a=r;for(;s>0;)a=a[15],s--;return a}let ml=!0;function La(t){const r=ml;return ml=t,r}let Er=0;const qi={};function ti(t,r){const s=Sa(t,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(t.injectorIndex=r.length,pr(a.data,t),pr(r,null),pr(a.blueprint,null));const u=Pr(t,r),g=t.injectorIndex;if(jl(u)){const b=hs(u),M=ta(u,r),N=M[1].data;for(let K=0;K<8;K++)r[g+K]=M[b+K]|N[b+K]}return r[g+8]=u,g}function pr(t,r){t.push(0,0,0,0,0,0,0,0,r)}function Sa(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function Pr(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,a=null,u=r;for(;null!==u;){if(a=Di(u),null===a)return-1;if(s++,u=u[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function Wa(t,r,s){!function Ga(t,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(Jn)&&(a=s[Jn]),null==a&&(a=s[Jn]=Er++);const u=255&a;r.data[t+(u>>5)]|=1<<u}(t,r,s)}function yn(t,r,s){if(s&Ht.Optional||void 0!==t)return t;Me()}function Go(t,r,s,a){if(s&Ht.Optional&&void 0===a&&(a=null),0==(s&(Ht.Self|Ht.Host))){const u=t[9],g=nr(void 0);try{return u?u.get(r,a,s&Ht.Optional):Nr(r,a,s&Ht.Optional)}finally{nr(g)}}return yn(a,0,s)}function na(t,r,s,a=Ht.Default,u){if(null!==t){if(1024&r[2]){const b=function ia(t,r,s,a,u){let g=t,b=r;for(;null!==g&&null!==b&&1024&b[2]&&!(256&b[2]);){const M=ra(g,b,s,a|Ht.Self,qi);if(M!==qi)return M;let N=g.parent;if(!N){const K=b[21];if(K){const ce=K.get(s,qi,a);if(ce!==qi)return ce}N=Di(b),b=b[15]}g=N}return u}(t,r,s,a,qi);if(b!==qi)return b}const g=ra(t,r,s,a,qi);if(g!==qi)return g}return Go(r,s,a,u)}function ra(t,r,s,a,u){const g=function ya(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(Jn)?t[Jn]:void 0;return"number"==typeof r?r>=0?255&r:js:r}(s);if("function"==typeof g){if(!pa(r,t,a))return a&Ht.Host?yn(u,0,a):Go(r,s,a,u);try{const b=g(a);if(null!=b||a&Ht.Optional)return b;Me()}finally{R()}}else if("number"==typeof g){let b=null,M=Sa(t,r),N=-1,K=a&Ht.Host?r[16][6]:null;for((-1===M||a&Ht.SkipSelf)&&(N=-1===M?Pr(t,r):r[M+8],-1!==N&&Aa(a,!1)?(b=r[1],M=hs(N),r=ta(N,r)):M=-1);-1!==M;){const ce=r[1];if(To(g,M,ce.data)){const Te=Ki(M,r,s,b,a,K);if(Te!==qi)return Te}N=r[M+8],-1!==N&&Aa(a,r[1].data[M+8]===K)&&To(g,M,r)?(b=ce,M=hs(N),r=ta(N,r)):M=-1}}return u}function Ki(t,r,s,a,u,g){const b=r[1],M=b.data[t+8],ce=ma(M,b,s,null==a?ki(M)&&ml:a!=b&&0!=(3&M.type),u&Ht.Host&&g===M);return null!==ce?Wo(r,b,ce,M):qi}function ma(t,r,s,a,u){const g=t.providerIndexes,b=r.data,M=1048575&g,N=t.directiveStart,ce=g>>20,nt=u?M+ce:t.directiveEnd;for(let wt=a?M:M+ce;wt<nt;wt++){const Kt=b[wt];if(wt<N&&s===Kt||wt>=N&&Kt.type===s)return wt}if(u){const wt=b[N];if(wt&&mi(wt)&&wt.type===s)return N}return null}function Wo(t,r,s,a){let u=t[s];const g=r.data;if(function tn(t){return t instanceof Rs}(u)){const b=u;b.resolving&&function Ye(t,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${t}`:"";throw new He(-200,`Circular dependency in DI detected for ${t}${s}`)}(function ft(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():gt(t)}(g[s]));const M=La(b.canSeeViewProviders);b.resolving=!0;const N=b.injectImpl?nr(b.injectImpl):null;pa(t,a,Ht.Default);try{u=t[s]=b.factory(void 0,g,t,a),r.firstCreatePass&&s>=a.directiveStart&&function ds(t,r,s){const{ngOnChanges:a,ngOnInit:u,ngDoCheck:g}=r.type.prototype;if(a){const b=ai(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(t,b),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(t,b)}u&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-t,u),g&&((s.preOrderHooks||(s.preOrderHooks=[])).push(t,g),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(t,g))}(s,g[s],r)}finally{null!==N&&nr(N),La(M),b.resolving=!1,R()}}return u}function To(t,r,s){return!!(s[r+(t>>5)]&1<<t)}function Aa(t,r){return!(t&Ht.Self||t&Ht.Host&&r)}class fs{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return na(this._tNode,this._lView,r,a,s)}}function js(){return new fs(Ri(),jt())}function Al(t){return Ir(()=>{const r=t.prototype.constructor,s=r[Rn]||_a(r),a=Object.prototype;let u=Object.getPrototypeOf(t.prototype).constructor;for(;u&&u!==a;){const g=u[Rn]||_a(u);if(g&&g!==s)return g;u=Object.getPrototypeOf(u)}return g=>new g})}function _a(t){return st(t)?()=>{const r=_a(Pe(t));return r&&r()}:Ti(t)}function Di(t){const r=t[1],s=r.type;return 2===s?r.declTNode:1===s?t[6]:null}function lt(t){return function Li(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const s=t.attrs;if(s){const a=s.length;let u=0;for(;u<a;){const g=s[u];if(rn(g))break;if(0===g)u+=2;else if("number"==typeof g)for(u++;u<a&&"string"==typeof s[u];)u++;else{if(g===r)return s[u+1];u+=2}}}return null}(Ri(),t)}const Hs="__parameters__";function Ua(t,r,s){return Ir(()=>{const a=function oo(t){return function(...s){if(t){const a=t(...s);for(const u in a)this[u]=a[u]}}}(r);function u(...g){if(this instanceof u)return a.apply(this,g),this;const b=new u(...g);return M.annotation=b,M;function M(N,K,ce){const Te=N.hasOwnProperty(Hs)?N[Hs]:Object.defineProperty(N,Hs,{value:[]})[Hs];for(;Te.length<=ce;)Te.push(null);return(Te[ce]=Te[ce]||[]).push(b),N}}return s&&(u.prototype=Object.create(s.prototype)),u.prototype.ngMetadataName=t,u.annotationCls=u,u})}class ui{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=In({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Js(t,r){void 0===r&&(r=t);for(let s=0;s<t.length;s++){let a=t[s];Array.isArray(a)?(r===t&&(r=t.slice(0,s)),Js(a,r)):r!==t&&r.push(a)}return r}function Zs(t,r){t.forEach(s=>Array.isArray(s)?Zs(s,r):r(s))}function Ai(t,r,s){r>=t.length?t.push(s):t.splice(r,0,s)}function po(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function va(t,r){const s=[];for(let a=0;a<t;a++)s.push(r);return s}function Oe(t,r,s){let a=xt(t,r);return a>=0?t[1|a]=s:(a=~a,function E(t,r,s,a){let u=t.length;if(u==r)t.push(s,a);else if(1===u)t.push(a,t[0]),t[0]=s;else{for(u--,t.push(t[u-1],t[u]);u>r;)t[u]=t[u-2],u--;t[r]=s,t[r+1]=a}}(t,a,r,s)),a}function Be(t,r){const s=xt(t,r);if(s>=0)return t[1|s]}function xt(t,r){return function hr(t,r,s){let a=0,u=t.length>>s;for(;u!==a;){const g=a+(u-a>>1),b=t[g<<s];if(r===b)return g<<s;b>r?u=g:a=g+1}return~(u<<s)}(t,r,1)}const qa={},rl="__NG_DI_FLAG__",Ea="ngTempTokenPath",Hl=/\n/gm,$l="__source";let il;function Yi(t){const r=il;return il=t,r}function ou(t,r=Ht.Default){if(void 0===il)throw new He(-203,!1);return null===il?Nr(t,void 0,r):il.get(t,r&Ht.Optional?null:void 0,r)}function xr(t,r=Ht.Default){return(function tr(){return cr}()||ou)(Pe(t),r)}function j(t,r=Ht.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),xr(t,r)}function z(t){const r=[];for(let s=0;s<t.length;s++){const a=Pe(t[s]);if(Array.isArray(a)){if(0===a.length)throw new He(900,!1);let u,g=Ht.Default;for(let b=0;b<a.length;b++){const M=a[b],N=Re(M);"number"==typeof N?-1===N?u=M.token:g|=N:u=M}r.push(xr(u,g))}else r.push(xr(a))}return r}function se(t,r){return t[rl]=r,t.prototype[rl]=r,t}function Re(t){return t[rl]}const Cn=se(Ua("Optional"),8),Sr=se(Ua("SkipSelf"),4);let kt;function Dn(t){kt=t}class mo{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function lo(t){return t instanceof mo?t.changingThisBreaksApplicationSecurity:t}const y=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Cs=(()=>((Cs=Cs||{})[Cs.NONE=0]="NONE",Cs[Cs.HTML=1]="HTML",Cs[Cs.STYLE=2]="STYLE",Cs[Cs.SCRIPT=3]="SCRIPT",Cs[Cs.URL=4]="URL",Cs[Cs.RESOURCE_URL=5]="RESOURCE_URL",Cs))();function qu(t){const r=function kc(){const t=jt();return t&&t[12]}();return r?r.sanitize(Cs.URL,t)||"":function vl(t,r){const s=function Tu(t){return t instanceof mo&&t.getTypeName()||null}(t);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(t,"URL")?lo(t):function _(t){return(t=String(t)).match(y)?t:"unsafe:"+t}(gt(t))}const Mu=new ui("ENVIRONMENT_INITIALIZER"),Eh=new ui("INJECTOR",-1),yp=new ui("INJECTOR_DEF_TYPES");class Uo{get(r,s=qa){if(s===qa){const a=new Error(`NullInjectorError: No provider for ${fe(r)}!`);throw a.name="NullInjectorError",a}return s}}function Ch(...t){return{\u0275providers:Dh(0,t)}}function Dh(t,...r){const s=[],a=new Set;let u;return Zs(r,g=>{const b=g;ul(b,s,[],a)&&(u||(u=[]),u.push(b))}),void 0!==u&&Ku(u,s),s}function Ku(t,r){for(let s=0;s<t.length;s++){const{providers:u}=t[s];Zs(u,g=>{r.push(g)})}}function ul(t,r,s,a){if(!(t=Pe(t)))return!1;let u=null,g=Vn(t);const b=!g&&ie(t);if(g||b){if(b&&!b.standalone)return!1;u=t}else{const N=t.ngModule;if(g=Vn(N),!g)return!1;u=N}const M=a.has(u);if(b){if(M)return!1;if(a.add(u),b.dependencies){const N="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const K of N)ul(K,r,s,a)}}else{if(!g)return!1;{if(null!=g.imports&&!M){let K;a.add(u);try{Zs(g.imports,ce=>{ul(ce,r,s,a)&&(K||(K=[]),K.push(ce))})}finally{}void 0!==K&&Ku(K,r)}if(!M){const K=Ti(u)||(()=>new u);r.push({provide:u,useFactory:K,deps:Kn},{provide:yp,useValue:u,multi:!0},{provide:Mu,useValue:()=>xr(u),multi:!0})}const N=g.providers;null==N||M||Zs(N,ce=>{r.push(ce)})}}return u!==t&&void 0!==t.providers}const vp=Ae({provide:String,useValue:Ae});function xu(t){return null!==t&&"object"==typeof t&&vp in t}function au(t){return"function"==typeof t}const Sh=new ui("Set Injector scope."),lu={},Ah={};let Mh;function Pc(){return void 0===Mh&&(Mh=new Uo),Mh}class ql{}class xh extends ql{constructor(r,s,a,u){super(),this.parent=s,this.source=a,this.scopes=u,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,fd(r,b=>this.processProvider(b)),this.records.set(Eh,bl(void 0,this)),u.has("environment")&&this.records.set(ql,bl(void 0,this));const g=this.records.get(Sh);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(yp.multi,Kn,Ht.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const s=Yi(this),a=nr(void 0);try{return r()}finally{Yi(s),nr(a)}}get(r,s=qa,a=Ht.Default){this.assertNotDestroyed();const u=Yi(this),g=nr(void 0);try{if(!(a&Ht.SkipSelf)){let M=this.records.get(r);if(void 0===M){const N=function Sm(t){return"function"==typeof t||"object"==typeof t&&t instanceof ui}(r)&&vr(r);M=N&&this.injectableDefInScope(N)?bl(Oh(r),lu):null,this.records.set(r,M)}if(null!=M)return this.hydrate(r,M)}return(a&Ht.Self?Pc():this.parent).get(r,s=a&Ht.Optional&&s===qa?null:s)}catch(b){if("NullInjectorError"===b.name){if((b[Ea]=b[Ea]||[]).unshift(fe(r)),u)throw b;return function ht(t,r,s,a){const u=t[Ea];throw r[$l]&&u.unshift(r[$l]),t.message=function It(t,r,s,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let u=fe(r);if(Array.isArray(r))u=r.map(fe).join(" -> ");else if("object"==typeof r){let g=[];for(let b in r)if(r.hasOwnProperty(b)){let M=r[b];g.push(b+":"+("string"==typeof M?JSON.stringify(M):fe(M)))}u=`{${g.join(", ")}}`}return`${s}${a?"("+a+")":""}[${u}]: ${t.replace(Hl,"\n  ")}`}("\n"+t.message,u,s,a),t.ngTokenPath=u,t[Ea]=null,t}(b,r,"R3InjectorError",this.source)}throw b}finally{nr(g),Yi(u)}}resolveInjectorInitializers(){const r=Yi(this),s=nr(void 0);try{const a=this.get(Mu.multi,Kn,Ht.Self);for(const u of a)u()}finally{Yi(r),nr(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(fe(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new He(205,!1)}processProvider(r){let s=au(r=Pe(r))?r:Pe(r&&r.provide);const a=function Im(t){return xu(t)?bl(void 0,t.useValue):bl(wp(t),lu)}(r);if(au(r)||!0!==r.multi)this.records.get(s);else{let u=this.records.get(s);u||(u=bl(void 0,lu,!0),u.factory=()=>z(u.multi),this.records.set(s,u)),s=r,u.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===lu&&(s.value=Ah,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Tm(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=Pe(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function Oh(t){const r=vr(t),s=null!==r?r.factory:Ti(t);if(null!==s)return s;if(t instanceof ui)throw new He(204,!1);if(t instanceof Function)return function bp(t){const r=t.length;if(r>0)throw va(r,"?"),new He(204,!1);const s=function ir(t){const r=t&&(t[Cr]||t[Rr]);if(r){const s=function sr(t){if(t.hasOwnProperty("name"))return t.name;const r=(""+t).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new He(204,!1)}function wp(t,r,s){let a;if(au(t)){const u=Pe(t);return Ti(u)||Oh(u)}if(xu(t))a=()=>Pe(t.useValue);else if(function Th(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...z(t.deps||[]));else if(function Ih(t){return!(!t||!t.useExisting)}(t))a=()=>xr(Pe(t.useExisting));else{const u=Pe(t&&(t.useClass||t.provide));if(!function Yu(t){return!!t.deps}(t))return Ti(u)||Oh(u);a=()=>new u(...z(t.deps))}return a}function bl(t,r,s=!1){return{factory:t,value:r,multi:s?[]:void 0}}function Am(t){return!!t.\u0275providers}function fd(t,r){for(const s of t)Array.isArray(s)?fd(s,r):Am(s)?fd(s.\u0275providers,r):r(s)}class Ep{}class pd{resolveComponentFactory(r){throw function Cp(t){const r=Error(`No component factory found for ${fe(t)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=t,r}(r)}}let Qu=(()=>{class t{}return t.NULL=new pd,t})();function xm(){return Ju(Ri(),jt())}function Ju(t,r){return new Rc(Mi(t,r))}let Rc=(()=>{class t{constructor(s){this.nativeElement=s}}return t.__NG_ELEMENT_ID__=xm,t})();function Om(t){return t instanceof Rc?t.nativeElement:t}class Dp{}let km=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function Pm(){const t=jt(),s=Hr(Ri().index,t);return(Fr(s)?s:t)[11]}(),t})(),Rm=(()=>{class t{}return t.\u0275prov=In({token:t,providedIn:"root",factory:()=>null}),t})();class Ip{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Tp=new Ip("14.2.5"),kh={};function Kl(t){return t.ngOriginalError}class El{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Kl(r);for(;s&&Kl(s);)s=Kl(s);return s||null}}const _d=new Map;let vd=0;const Yl="__ngContext__";function uo(t,r){Fr(r)?(t[Yl]=r[20],function ku(t){_d.set(t[20],t)}(r)):t[Yl]=r}function cl(t){return t instanceof Function?t():t}var Ra=(()=>((Ra=Ra||{})[Ra.Important=1]="Important",Ra[Ra.DashCase=2]="DashCase",Ra))();function Rl(t,r){return undefined(t,r)}function Hc(t){const r=t[3];return gi(r)?r[3]:r}function Ed(t){return Hh(t[13])}function jh(t){return Hh(t[4])}function Hh(t){for(;null!==t&&!gi(t);)t=t[4];return t}function Pu(t,r,s,a,u){if(null!=a){let g,b=!1;gi(a)?g=a:Fr(a)&&(b=!0,a=a[0]);const M=Ci(a);0===t&&null!==s?null==u?Dd(r,s,M):du(r,s,M,u||null,!0):1===t&&null!==s?du(r,s,M,u||null,!0):2===t?function Qp(t,r,s){const a=rc(t,r);a&&function Zc(t,r,s,a){t.removeChild(r,s,a)}(t,a,r,s)}(r,M,b):3===t&&r.destroyNode(M),null!=g&&function Jp(t,r,s,a,u){const g=s[7];g!==Ci(s)&&Pu(r,t,a,g,u);for(let M=10;M<s.length;M++){const N=s[M];Nl(N[1],N,t,r,a,g)}}(r,t,g,s,u)}}function Cd(t,r,s){return t.createElement(r,s)}function zp(t,r){const s=t[9],a=s.indexOf(r),u=r[3];512&r[2]&&(r[2]&=-513,Q(u,-1)),s.splice(a,1)}function Zh(t,r){if(t.length<=10)return;const s=10+r,a=t[s];if(a){const u=a[17];null!==u&&u!==t&&zp(u,a),r>0&&(t[s-1][4]=a[4]);const g=po(t,10+r);!function Gm(t,r){Nl(t,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const b=g[19];null!==b&&b.detachView(g[1]),a[3]=null,a[4]=null,a[2]&=-65}return a}function Gp(t,r){if(!(128&r[2])){const s=r[11];s.destroyNode&&Nl(t,r,s,3,null,null),function qm(t){let r=t[13];if(!r)return zh(t[1],t);for(;r;){let s=null;if(Fr(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==t;)Fr(r)&&zh(r[1],r),r=r[3];null===r&&(r=t),Fr(r)&&zh(r[1],r),s=r&&r[4]}r=s}}(r)}}function zh(t,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function Km(t,r){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let a=0;a<s.length;a+=2){const u=r[s[a]];if(!(u instanceof Rs)){const g=s[a+1];if(Array.isArray(g))for(let b=0;b<g.length;b+=2){const M=u[g[b]],N=g[b+1];try{N.call(M)}finally{}}else try{g.call(u)}finally{}}}}(t,r),function Wp(t,r){const s=t.cleanup,a=r[7];let u=-1;if(null!==s)for(let g=0;g<s.length-1;g+=2)if("string"==typeof s[g]){const b=s[g+1],M="function"==typeof b?b(r):Ci(r[b]),N=a[u=s[g+2]],K=s[g+3];"boolean"==typeof K?M.removeEventListener(s[g],N,K):K>=0?a[u=K]():a[u=-K].unsubscribe(),g+=2}else{const b=a[u=s[g+1]];s[g].call(b)}if(null!==a){for(let g=u+1;g<a.length;g++)(0,a[g])();r[7]=null}}(t,r),1===r[1].type&&r[11].destroy();const s=r[17];if(null!==s&&gi(r[3])){s!==r[3]&&zp(s,r);const a=r[19];null!==a&&a.detachView(t)}!function Np(t){_d.delete(t[20])}(r)}}function $c(t,r,s){return function qp(t,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const u=t.data[a.directiveStart].encapsulation;if(u===Tn.None||u===Tn.Emulated)return null}return Mi(a,s)}(t,r.parent,s)}function du(t,r,s,a,u){t.insertBefore(r,s,a,u)}function Dd(t,r,s){t.appendChild(r,s)}function Id(t,r,s,a,u){null!==a?du(t,r,s,a,u):Dd(t,r,s)}function rc(t,r){return t.parentNode(r)}function qh(t,r,s){return Kh(t,r,s)}let Kh=function Kp(t,r,s){return 40&t.type?Mi(t,s):null};function Ad(t,r,s,a){const u=$c(t,a,r),g=r[11],M=qh(a.parent||r[6],a,r);if(null!=u)if(Array.isArray(s))for(let N=0;N<s.length;N++)Id(g,u,s[N],M,!1);else Id(g,u,s,M,!1)}function zc(t,r){if(null!==r){const s=r.type;if(3&s)return Mi(r,t);if(4&s)return Md(-1,t[r.index]);if(8&s){const a=r.child;if(null!==a)return zc(t,a);{const u=t[r.index];return gi(u)?Md(-1,u):Ci(u)}}if(32&s)return Rl(r,t)()||Ci(t[r.index]);{const a=Yp(t,r);return null!==a?Array.isArray(a)?a[0]:zc(Hc(t[16]),a):zc(t,r.next)}}return null}function Yp(t,r){return null!==r?t[16][6].projection[r.projection]:null}function Md(t,r){const s=10+t+1;if(s<r.length){const a=r[s],u=a[1].firstChild;if(null!==u)return zc(a,u)}return r[7]}function hu(t,r,s,a,u,g,b){for(;null!=s;){const M=a[s.index],N=s.type;if(b&&0===r&&(M&&uo(Ci(M),a),s.flags|=4),64!=(64&s.flags))if(8&N)hu(t,r,s.child,a,u,g,!1),Pu(r,t,u,M,g);else if(32&N){const K=Rl(s,a);let ce;for(;ce=K();)Pu(r,t,u,ce,g);Pu(r,t,u,M,g)}else 16&N?Gc(t,r,a,s,u,g):Pu(r,t,u,M,g);s=b?s.projectionNext:s.next}}function Nl(t,r,s,a,u,g){hu(s,a,t.firstChild,r,u,g,!1)}function Gc(t,r,s,a,u,g){const b=s[16],N=b[6].projection[a.projection];if(Array.isArray(N))for(let K=0;K<N.length;K++)Pu(r,t,u,N[K],g);else hu(t,r,N,b[3],u,g,!0)}function Qh(t,r,s){t.setAttribute(r,"style",s)}function Jh(t,r,s){""===s?t.removeAttribute(r,"class"):t.setAttribute(r,"class",s)}function xd(t,r,s){let a=t.length;for(;;){const u=t.indexOf(r,s);if(-1===u)return u;if(0===u||t.charCodeAt(u-1)<=32){const g=r.length;if(u+g===a||t.charCodeAt(u+g)<=32)return u}s=u+1}}const Od="ng-template";function eg(t,r,s){let a=0;for(;a<t.length;){let u=t[a++];if(s&&"class"===u){if(u=t[a],-1!==xd(u.toLowerCase(),r,0))return!0}else if(1===u){for(;a<t.length&&"string"==typeof(u=t[a++]);)if(u.toLowerCase()===r)return!0;return!1}}return!1}function Xh(t){return 4===t.type&&t.value!==Od}function ef(t,r,s){return r===(4!==t.type||s?t.value:Od)}function kd(t,r,s){let a=4;const u=t.attrs||[],g=function nf(t){for(let r=0;r<t.length;r++)if(rn(t[r]))return r;return t.length}(u);let b=!1;for(let M=0;M<r.length;M++){const N=r[M];if("number"!=typeof N){if(!b)if(4&a){if(a=2|1&a,""!==N&&!ef(t,N,s)||""===N&&1===r.length){if(Na(a))return!1;b=!0}}else{const K=8&a?N:r[++M];if(8&a&&null!==t.attrs){if(!eg(t.attrs,K,s)){if(Na(a))return!1;b=!0}continue}const Te=Pd(8&a?"class":N,u,Xh(t),s);if(-1===Te){if(Na(a))return!1;b=!0;continue}if(""!==K){let nt;nt=Te>g?"":u[Te+1].toLowerCase();const wt=8&a?nt:null;if(wt&&-1!==xd(wt,K,0)||2&a&&K!==nt){if(Na(a))return!1;b=!0}}}}else{if(!b&&!Na(a)&&!Na(N))return!1;if(b&&Na(N))continue;b=!1,a=N|1&a}}return Na(a)||b}function Na(t){return 0==(1&t)}function Pd(t,r,s,a){if(null===r)return-1;let u=0;if(a||!s){let g=!1;for(;u<r.length;){const b=r[u];if(b===t)return u;if(3===b||6===b)g=!0;else{if(1===b||2===b){let M=r[++u];for(;"string"==typeof M;)M=r[++u];continue}if(4===b)break;if(0===b){u+=4;continue}}u+=g?1:2}return-1}return function tg(t,r){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const a=t[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,t)}function Rd(t,r,s=!1){for(let a=0;a<r.length;a++)if(kd(t,r[a],s))return!0;return!1}function Ym(t,r){e:for(let s=0;s<r.length;s++){const a=r[s];if(t.length===a.length){for(let u=0;u<t.length;u++)if(t[u]!==a[u])continue e;return!0}}return!1}function rf(t,r){return t?":not("+r.trim()+")":r}function Qm(t){let r=t[0],s=1,a=2,u="",g=!1;for(;s<t.length;){let b=t[s];if("string"==typeof b)if(2&a){const M=t[++s];u+="["+b+(M.length>0?'="'+M+'"':"")+"]"}else 8&a?u+="."+b:4&a&&(u+=" "+b);else""!==u&&!Na(b)&&(r+=rf(g,u),u=""),a=b,g=g||!Na(a);s++}return""!==u&&(r+=rf(g,u)),r}const Yr={};function Wc(t){ic(Xn(),jt(),Ue()+t,!1)}function ic(t,r,s,a){if(!a)if(3==(3&r[2])){const g=t.preOrderCheckHooks;null!==g&&Ni(r,g,s)}else{const g=t.preOrderHooks;null!==g&&Io(r,g,0,s)}Ct(s)}function sc(t,r=null,s=null,a){const u=Fd(t,r,s,a);return u.resolveInjectorInitializers(),u}function Fd(t,r=null,s=null,a,u=new Set){const g=[s||Kn,Ch(t)];return a=a||("object"==typeof t?void 0:fe(t)),new xh(g,r||Pc(),a||null,u)}let dl=(()=>{class t{static create(s,a){if(Array.isArray(s))return sc({name:""},a,s,"");{const u=s.name??"";return sc({name:u},s.parent,s.providers,u)}}}return t.THROW_IF_NOT_FOUND=qa,t.NULL=new Uo,t.\u0275prov=In({token:t,providedIn:"any",factory:()=>xr(Eh)}),t.__NG_ELEMENT_ID__=-1,t})();function fu(t,r=Ht.Default){const s=jt();return null===s?xr(t,r):na(Ri(),s,Pe(t),r)}function yf(){throw new Error("invalid")}function cc(t,r){return t<<17|r<<2}function Xa(t){return t>>17&32767}function qc(t){return 2|t}function Ha(t){return(131068&t)>>2}function gu(t,r){return-131069&t|r<<2}function mu(t){return 1|t}function Zd(t,r){const s=t.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const u=s[a],g=s[a+1];if(-1!==g){const b=t.data[g];fa(u),b.contentQueries(2,r[g],g)}}}function hl(t,r,s,a,u,g,b,M,N,K,ce){const Te=r.blueprint.slice();return Te[0]=u,Te[2]=76|a,(null!==ce||t&&1024&t[2])&&(Te[2]|=1024),P(Te),Te[3]=Te[15]=t,Te[8]=s,Te[10]=b||t&&t[10],Te[11]=M||t&&t[11],Te[12]=N||t&&t[12]||null,Te[9]=K||t&&t[9]||null,Te[6]=g,Te[20]=function Fc(){return vd++}(),Te[21]=ce,Te[16]=2==r.type?t[16]:Te,Te}function _u(t,r,s,a,u){let g=t.data[r];if(null===g)g=function Af(t,r,s,a,u){const g=ei(),b=Ks(),N=t.data[r]=function my(t,r,s,a,u,g){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:u,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?g:g&&g.parent,s,r,a,u);return null===t.firstChild&&(t.firstChild=N),null!==g&&(b?null==g.child&&null!==N.parent&&(g.child=N):null===g.next&&(g.next=N)),N}(t,r,s,a,u),function Ps(){return ue.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=s,g.value=a,g.attrs=u;const b=function $o(){const t=ue.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();g.injectorIndex=null===b?-1:b.injectorIndex}return Ts(g,!0),g}function vu(t,r,s,a){if(0===s)return-1;const u=r.length;for(let g=0;g<s;g++)r.push(a),t.blueprint.push(a),t.data.push(null);return u}function Mf(t,r,s){so(r);try{const a=t.viewQuery;null!==a&&Zf(1,a,s);const u=t.template;null!==u&&Gd(t,r,u,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Zd(t,r),t.staticViewQueries&&Zf(2,t.viewQuery,s);const g=t.components;null!==g&&function Sf(t,r){for(let s=0;s<r.length;s++)Jd(t,r[s])}(r,g)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{r[2]&=-5,ee()}}function zd(t,r,s,a){const u=r[2];if(128!=(128&u)){so(r);try{P(r),function Ot(t){return ue.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&Gd(t,r,s,2,a);const b=3==(3&u);if(b){const K=t.preOrderCheckHooks;null!==K&&Ni(r,K,null)}else{const K=t.preOrderHooks;null!==K&&Io(r,K,0,null),ci(r,0)}if(function _y(t){for(let r=Ed(t);null!==r;r=jh(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const u=s[a],g=u[3];0==(512&u[2])&&Q(g,1),u[2]|=512}}}(r),function Rg(t){for(let r=Ed(t);null!==r;r=jh(r))for(let s=10;s<r.length;s++){const a=r[s],u=a[1];_s(a)&&zd(u,a,u.template,a[8])}}(r),null!==t.contentQueries&&Zd(t,r),b){const K=t.contentCheckHooks;null!==K&&Ni(r,K)}else{const K=t.contentHooks;null!==K&&Io(r,K,1),ci(r,1)}!function Ig(t,r){const s=t.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const u=s[a];if(u<0)Ct(~u);else{const g=u,b=s[++a],M=s[++a];io(b,g),M(2,r[g])}}}finally{Ct(-1)}}(t,r);const M=t.components;null!==M&&function py(t,r){for(let s=0;s<r.length;s++)jf(t,r[s])}(r,M);const N=t.viewQuery;if(null!==N&&Zf(2,N,a),b){const K=t.viewCheckHooks;null!==K&&Ni(r,K)}else{const K=t.viewHooks;null!==K&&Io(r,K,2),ci(r,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,Q(r[3],-1))}finally{ee()}}}function Gd(t,r,s,a,u){const g=Ue(),b=2&a;try{Ct(-1),b&&r.length>22&&ic(t,r,22,!1),s(a,u)}finally{Ct(g)}}function Qc(t,r,s){!jn()||(function Lf(t,r,s,a){const u=s.directiveStart,g=s.directiveEnd;t.firstCreatePass||ti(s,r),uo(a,r);const b=s.initialInputs;for(let M=u;M<g;M++){const N=t.data[M],K=mi(N);K&&Xc(r,s,N);const ce=Wo(r,t,M,s);uo(ce,r),null!==b&&Ia(0,M-u,ce,N,0,b),K&&(Hr(s.index,r)[8]=ce)}}(t,r,s,Mi(s,r)),128==(128&s.flags)&&function xg(t,r,s){const a=s.directiveStart,u=s.directiveEnd,g=s.index,b=function zo(){return ue.lFrame.currentDirectiveIndex}();try{Ct(g);for(let M=a;M<u;M++){const N=t.data[M],K=r[M];Ys(M),(null!==N.hostBindings||0!==N.hostVars||null!==N.hostAttrs)&&Uf(N,K)}}finally{Ct(-1),Ys(b)}}(t,r,s))}function xf(t,r,s=Mi){const a=r.localNames;if(null!==a){let u=r.index+1;for(let g=0;g<a.length;g+=2){const b=a[g+1],M=-1===b?s(r,t):t[b];t[u++]=M}}}function Wd(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=Of(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):r}function Of(t,r,s,a,u,g,b,M,N,K){const ce=22+a,Te=ce+u,nt=function kf(t,r){const s=[];for(let a=0;a<r;a++)s.push(a<t?null:Yr);return s}(ce,Te),wt="function"==typeof K?K():K;return nt[1]={type:t,blueprint:nt,template:s,queries:null,viewQuery:M,declTNode:r,data:nt.slice().fill(null,ce),bindingStartIndex:ce,expandoStartIndex:Te,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:N,consts:wt,incompleteFirstPass:!1}}function Rf(t,r,s,a){const u=zf(r);null===s?u.push(a):(u.push(s),t.firstCreatePass&&eh(t).push(a,u.length-1))}function Sg(t,r,s){for(let a in t)if(t.hasOwnProperty(a)){const u=t[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,u):s[a]=[r,u]}return s}function qd(t,r){const a=r.directiveEnd,u=t.data,g=r.attrs,b=[];let M=null,N=null;for(let K=r.directiveStart;K<a;K++){const ce=u[K],Te=ce.inputs,nt=null===g||Xh(r)?null:Ll(Te,g);b.push(nt),M=Sg(Te,K,M),N=Sg(ce.outputs,K,N)}null!==M&&(M.hasOwnProperty("class")&&(r.flags|=16),M.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=b,r.inputs=M,r.outputs=N}function Fa(t,r,s,a,u,g,b,M){const N=Mi(r,s);let ce,K=r.inputs;!M&&null!=K&&(ce=K[a])?(ed(t,s,ce,a,u),ki(r)&&Kd(s,r.index)):3&r.type&&(a=function yy(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),u=null!=b?b(u,r.value||"",a):u,g.setProperty(N,a,u))}function Kd(t,r){const s=Hr(r,t);16&s[2]||(s[2]|=32)}function Yd(t,r,s,a){let u=!1;if(jn()){const g=function Og(t,r,s){const a=t.directiveRegistry;let u=null;if(a)for(let g=0;g<a.length;g++){const b=a[g];Rd(s,b.selectors,!1)&&(u||(u=[]),Wa(ti(s,r),t,b.type),mi(b)?(Jc(t,s),u.unshift(b)):u.push(b))}return u}(t,r,s),b=null===a?null:{"":-1};if(null!==g){u=!0,Bf(s,t.data.length,g.length);for(let ce=0;ce<g.length;ce++){const Te=g[ce];Te.providersResolver&&Te.providersResolver(Te)}let M=!1,N=!1,K=vu(t,r,g.length,null);for(let ce=0;ce<g.length;ce++){const Te=g[ce];s.mergedAttrs=tl(s.mergedAttrs,Te.hostAttrs),Vf(t,s,r,K,Te),kg(K,Te,b),null!==Te.contentQueries&&(s.flags|=8),(null!==Te.hostBindings||null!==Te.hostAttrs||0!==Te.hostVars)&&(s.flags|=128);const nt=Te.type.prototype;!M&&(nt.ngOnChanges||nt.ngOnInit||nt.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(s.index),M=!0),!N&&(nt.ngOnChanges||nt.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(s.index),N=!0),K++}qd(t,s)}b&&function yi(t,r,s){if(r){const a=t.localNames=[];for(let u=0;u<r.length;u+=2){const g=s[r[u+1]];if(null==g)throw new He(-301,!1);a.push(r[u],g)}}}(s,a,b)}return s.mergedAttrs=tl(s.mergedAttrs,s.attrs),u}function Mg(t,r,s,a,u,g){const b=g.hostBindings;if(b){let M=t.hostBindingOpCodes;null===M&&(M=t.hostBindingOpCodes=[]);const N=~r.index;(function Ff(t){let r=t.length;for(;r>0;){const s=t[--r];if("number"==typeof s&&s<0)return s}return 0})(M)!=N&&M.push(N),M.push(a,u,b)}}function Uf(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function Jc(t,r){r.flags|=2,(t.components||(t.components=[])).push(r.index)}function kg(t,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=t;mi(r)&&(s[""]=t)}}function Bf(t,r,s){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+s,t.providerIndexes=r}function Vf(t,r,s,a,u){t.data[a]=u;const g=u.factory||(u.factory=Ti(u.type)),b=new Rs(g,mi(u),fu);t.blueprint[a]=b,s[a]=b,Mg(t,r,0,a,vu(t,s,u.hostVars,Yr),u)}function Xc(t,r,s){const a=Mi(r,t),u=Wd(s),g=t[10],b=Hf(t,hl(t,u,null,s.onPush?32:16,a,r,g,g.createRenderer(a,s),null,null,null));t[r.index]=b}function Cl(t,r,s,a,u,g){const b=Mi(t,r);!function zs(t,r,s,a,u,g,b){if(null==g)t.removeAttribute(r,u,s);else{const M=null==b?gt(g):b(g,a||"",u);t.setAttribute(r,u,M,s)}}(r[11],b,g,t.value,s,a,u)}function Ia(t,r,s,a,u,g){const b=g[r];if(null!==b){const M=a.setInput;for(let N=0;N<b.length;){const K=b[N++],ce=b[N++],Te=b[N++];null!==M?a.setInput(s,Te,K,ce):s[ce]=Te}}}function Ll(t,r){let s=null,a=0;for(;a<r.length;){const u=r[a];if(0!==u)if(5!==u){if("number"==typeof u)break;t.hasOwnProperty(u)&&(null===s&&(s=[]),s.push(u,t[u],r[a+1])),a+=2}else a+=2;else a+=4}return s}function Pg(t,r,s,a){return new Array(t,!0,!1,r,null,0,a,s,null,null)}function jf(t,r){const s=Hr(r,t);if(_s(s)){const a=s[1];48&s[2]?zd(a,s,a.template,s[8]):s[5]>0&&Qd(s)}}function Qd(t){for(let a=Ed(t);null!==a;a=jh(a))for(let u=10;u<a.length;u++){const g=a[u];if(_s(g))if(512&g[2]){const b=g[1];zd(b,g,b.template,g[8])}else g[5]>0&&Qd(g)}const s=t[1].components;if(null!==s)for(let a=0;a<s.length;a++){const u=Hr(s[a],t);_s(u)&&u[5]>0&&Qd(u)}}function Jd(t,r){const s=Hr(r,t),a=s[1];(function vy(t,r){for(let s=r.length;s<t.blueprint.length;s++)r.push(t.blueprint[s])})(a,s),Mf(a,s,s[8])}function Hf(t,r){return t[13]?t[14][4]=r:t[13]=r,t[14]=r,r}function $f(t){for(;t;){t[2]|=32;const r=Hc(t);if(no(t)&&!r)return t;t=r}return null}function Xd(t,r,s,a=!0){const u=r[10];u.begin&&u.begin();try{zd(t,r,t.template,s)}catch(b){throw a&&th(r,b),b}finally{u.end&&u.end()}}function Zf(t,r,s){fa(0),r(t,s)}function zf(t){return t[7]||(t[7]=[])}function eh(t){return t.cleanup||(t.cleanup=[])}function Gf(t,r,s){return(null===t||mi(t))&&(s=function Hi(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(s[r.index])),s[11]}function th(t,r){const s=t[9],a=s?s.get(El,null):null;a&&a.handleError(r)}function ed(t,r,s,a,u){for(let g=0;g<s.length;){const b=s[g++],M=s[g++],N=r[b],K=t.data[b];null!==K.setInput?K.setInput(N,u,a,M):N[M]=u}}function Fu(t,r,s){let a=s?t.styles:null,u=s?t.classes:null,g=0;if(null!==r)for(let b=0;b<r.length;b++){const M=r[b];"number"==typeof M?g=M:1==g?u=Fe(u,M):2==g&&(a=Fe(a,M+": "+r[++b]+";"))}s?t.styles=a:t.stylesWithoutHost=a,s?t.classes=u:t.classesWithoutHost=u}function pc(t,r,s,a,u=!1){for(;null!==s;){const g=r[s.index];if(null!==g&&a.push(Ci(g)),gi(g))for(let M=10;M<g.length;M++){const N=g[M],K=N[1].firstChild;null!==K&&pc(N[1],N,K,a)}const b=s.type;if(8&b)pc(t,r,s.child,a);else if(32&b){const M=Rl(s,r);let N;for(;N=M();)a.push(N)}else if(16&b){const M=Yp(r,s);if(Array.isArray(M))a.push(...M);else{const N=Hc(r[16]);pc(N[1],N,M,a,!0)}}s=u?s.projectionNext:s.next}return a}class gc{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return pc(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(gi(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(Zh(r,a),po(s,a))}this._attachedToViewContainer=!1}Gp(this._lView[1],this._lView)}onDestroy(r){Rf(this._lView[1],this._lView,null,r)}markForCheck(){$f(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Xd(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new He(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Wm(t,r){Nl(t,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new He(902,!1);this._appRef=r}}class nh extends gc{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Xd(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class td extends Qu{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=ie(r);return new Lu(s,this.ngModule)}}function rh(t){const r=[];for(let s in t)t.hasOwnProperty(s)&&r.push({propName:t[s],templateName:s});return r}class mc{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){const u=this.injector.get(r,kh,a);return u!==kh||s===kh?u:this.parentInjector.get(r,s,a)}}class Lu extends Ep{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Jm(t){return t.map(Qm).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return rh(this.componentDef.inputs)}get outputs(){return rh(this.componentDef.outputs)}create(r,s,a,u){let g=(u=u||this.ngModule)instanceof ql?u:u?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const b=g?new mc(r,g):r,M=b.get(Dp,null);if(null===M)throw new He(407,!1);const N=b.get(Rm,null),K=M.createRenderer(null,this.componentDef),ce=this.componentDef.selectors[0][0]||"div",Te=a?function Pf(t,r,s){return t.selectRootElement(r,s===Tn.ShadowDom)}(K,a,this.componentDef.encapsulation):Cd(M.createRenderer(null,this.componentDef),ce,function Ng(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(ce)),nt=this.componentDef.onPush?288:272,wt=Of(0,null,null,1,0,null,null,null,null,null),Kt=hl(null,wt,null,nt,null,null,M,K,N,b,null);let vn,Hn;so(Kt);try{const ur=function Cy(t,r,s,a,u,g){const b=s[1];s[22]=t;const N=_u(b,22,2,"#host",null),K=N.mergedAttrs=r.hostAttrs;null!==K&&(Fu(N,K,!0),null!==t&&(Mt(u,t,K),null!==N.classes&&Jh(u,t,N.classes),null!==N.styles&&Qh(u,t,N.styles)));const ce=a.createRenderer(t,r),Te=hl(s,Wd(r),null,r.onPush?32:16,s[22],N,a,ce,g||null,null,null);return b.firstCreatePass&&(Wa(ti(N,s),b,r.type),Jc(b,N),Bf(N,s.length,1)),Hf(s,Te),s[22]=Te}(Te,this.componentDef,Kt,M,K);if(Te)if(a)Mt(K,Te,["ng-version",Tp.full]);else{const{attrs:Mr,classes:an}=function Xm(t){const r=[],s=[];let a=1,u=2;for(;a<t.length;){let g=t[a];if("string"==typeof g)2===u?""!==g&&r.push(g,t[++a]):8===u&&s.push(g);else{if(!Na(u))break;u=g}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);Mr&&Mt(K,Te,Mr),an&&an.length>0&&Jh(K,Te,an.join(" "))}if(Hn=ho(wt,22),void 0!==s){const Mr=Hn.projection=[];for(let an=0;an<this.ngContentSelectors.length;an++){const jr=s[an];Mr.push(null!=jr?Array.from(jr):null)}}vn=function Fg(t,r,s,a){const u=s[1],g=function Ag(t,r,s){const a=Ri();t.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),Vf(t,a,r,vu(t,r,1,null),s),qd(t,a));const u=Wo(r,t,a.directiveStart,a);uo(u,r);const g=Mi(a,r);return g&&uo(g,r),u}(u,s,r);if(t[8]=s[8]=g,null!==a)for(const M of a)M(g,r);if(r.contentQueries){const M=Ri();r.contentQueries(1,g,M.directiveStart)}const b=Ri();return!u.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Ct(b.index),Mg(s[1],b,0,b.directiveStart,b.directiveEnd,r),Uf(r,g)),g}(ur,this.componentDef,Kt,[Dy]),Mf(wt,Kt,null)}finally{ee()}return new wy(this.componentType,vn,Ju(Hn,Kt),Kt,Hn)}}class wy extends class ka{}{constructor(r,s,a,u,g){super(),this.location=a,this._rootLView=u,this._tNode=g,this.instance=s,this.hostView=this.changeDetectorRef=new nh(u),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let u;if(null!==a&&(u=a[r])){const g=this._rootLView;ed(g[1],g,u,r,s),Kd(g,this._tNode.index)}}get injector(){return new fs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Dy(){const t=Ri();qr(jt()[1],t)}function Wf(t){let r=function Lg(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),s=!0;const a=[t];for(;r;){let u;if(mi(t))u=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new He(903,!1);u=r.\u0275dir}if(u){if(s){a.push(u);const b=t;b.inputs=nd(t.inputs),b.declaredInputs=nd(t.declaredInputs),b.outputs=nd(t.outputs);const M=u.hostBindings;M&&Ls(t,M);const N=u.viewQuery,K=u.contentQueries;if(N&&Ty(t,N),K&&Sy(t,K),_e(t.inputs,u.inputs),_e(t.declaredInputs,u.declaredInputs),_e(t.outputs,u.outputs),mi(u)&&u.data.animation){const ce=t.data;ce.animation=(ce.animation||[]).concat(u.data.animation)}}const g=u.features;if(g)for(let b=0;b<g.length;b++){const M=g[b];M&&M.ngInherit&&M(t),M===Wf&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Iy(t){let r=0,s=null;for(let a=t.length-1;a>=0;a--){const u=t[a];u.hostVars=r+=u.hostVars,u.hostAttrs=tl(u.hostAttrs,s=tl(s,u.hostAttrs))}}(a)}function nd(t){return t===zr?{}:t===Kn?[]:t}function Ty(t,r){const s=t.viewQuery;t.viewQuery=s?(a,u)=>{r(a,u),s(a,u)}:r}function Sy(t,r){const s=t.contentQueries;t.contentQueries=s?(a,u,g)=>{r(a,u,g),s(a,u,g)}:r}function Ls(t,r){const s=t.hostBindings;t.hostBindings=s?(a,u)=>{r(a,u),s(a,u)}:r}let rd=null;function Uu(){if(!rd){const t=On.Symbol;if(t&&t.iterator)rd=t.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(rd=a)}}}return rd}function yc(t){return!!qf(t)&&(Array.isArray(t)||!(t instanceof Map)&&Uu()in t)}function qf(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function eu(t,r,s){return t[r]=s}function Ta(t,r,s){return!Object.is(t[r],s)&&(t[r]=s,!0)}function bu(t,r,s,a){const u=Ta(t,r,s);return Ta(t,r+1,a)||u}function Ug(t,r,s,a){const u=jt();return Ta(u,$n(),r)&&(Xn(),Cl(Nt(),u,t,r,s,a)),Ug}function tu(t,r,s,a){return Ta(t,$n(),s)?r+gt(s)+a:Yr}function Yf(t,r,s,a,u,g,b,M){const N=jt(),K=Xn(),ce=t+22,Te=K.firstCreatePass?function ju(t,r,s,a,u,g,b,M,N){const K=r.consts,ce=_u(r,t,4,b||null,L(K,M));Yd(r,s,ce,L(K,N)),qr(r,ce);const Te=ce.tViews=Of(2,ce,a,u,g,r.directiveRegistry,r.pipeRegistry,null,r.schemas,K);return null!==r.queries&&(r.queries.template(r,ce),Te.queries=r.queries.embeddedTView(ce)),ce}(ce,K,N,r,s,a,u,g,b):K.data[ce];Ts(Te,!1);const nt=N[11].createComment("");Ad(K,N,nt,Te),uo(nt,N),Hf(N,N[ce]=Pg(nt,N,nt,Te)),xs(Te)&&Qc(K,N,Te),null!=b&&xf(N,Te,M)}function ah(t){return $i(function fo(){return ue.lFrame.contextLView}(),22+t)}function od(t,r,s){const a=jt();return Ta(a,$n(),r)&&Fa(Xn(),Nt(),a,t,r,a[11],s,!1),od}function Qf(t,r,s,a,u){const b=u?"class":"style";ed(t,s,r.inputs[b],b,a)}function Hu(t,r,s,a){const u=jt(),g=Xn(),b=22+t,M=u[11],N=u[b]=Cd(M,r,function Wr(){return ue.lFrame.currentNamespace}()),K=g.firstCreatePass?function lh(t,r,s,a,u,g,b){const M=r.consts,K=_u(r,t,2,u,L(M,g));return Yd(r,s,K,L(M,b)),null!==K.attrs&&Fu(K,K.attrs,!1),null!==K.mergedAttrs&&Fu(K,K.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,K),K}(b,g,u,0,r,s,a):g.data[b];Ts(K,!0);const ce=K.mergedAttrs;null!==ce&&Mt(M,N,ce);const Te=K.classes;null!==Te&&Jh(M,N,Te);const nt=K.styles;return null!==nt&&Qh(M,N,nt),64!=(64&K.flags)&&Ad(g,u,N,K),0===function Vt(){return ue.lFrame.elementDepthCount}()&&uo(N,u),function fn(){ue.lFrame.elementDepthCount++}(),xs(K)&&(Qc(g,u,K),function Tg(t,r,s){if(ms(r)){const u=r.directiveEnd;for(let g=r.directiveStart;g<u;g++){const b=t.data[g];b.contentQueries&&b.contentQueries(1,s[g],g)}}}(g,K,u)),null!==a&&xf(u,K),Hu}function ad(){let t=Ri();Ks()?Zo():(t=t.parent,Ts(t,!1));const r=t;!function Ln(){ue.lFrame.elementDepthCount--}();const s=Xn();return s.firstCreatePass&&(qr(s,t),ms(t)&&s.queries.elementEnd(t)),null!=r.classesWithoutHost&&function Wn(t){return 0!=(16&t.flags)}(r)&&Qf(s,r,jt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function or(t){return 0!=(32&t.flags)}(r)&&Qf(s,r,jt(),r.stylesWithoutHost,!1),ad}function $u(t,r,s,a){return Hu(t,r,s,a),ad(),$u}function Zg(){return jt()}function Jf(t){return!!t&&"function"==typeof t.then}function zg(t){return!!t&&"function"==typeof t.subscribe}const Gg=zg;function Xf(t,r,s,a){const u=jt(),g=Xn(),b=Ri();return Wg(g,u,u[11],b,t,r,0,a),Xf}function ch(t,r){const s=Ri(),a=jt(),u=Xn();return Wg(u,a,Gf(ha(u.data),s,a),s,t,r),ch}function Wg(t,r,s,a,u,g,b,M){const N=xs(a),ce=t.firstCreatePass&&eh(t),Te=r[8],nt=zf(r);let wt=!0;if(3&a.type||M){const Hn=Mi(a,r),ur=M?M(Hn):Hn,Mr=nt.length,an=M?is=>M(Ci(is[a.index])):a.index;let jr=null;if(!M&&N&&(jr=function ky(t,r,s,a){const u=t.cleanup;if(null!=u)for(let g=0;g<u.length-1;g+=2){const b=u[g];if(b===s&&u[g+1]===a){const M=r[7],N=u[g+2];return M.length>N?M[N]:null}"string"==typeof b&&(g+=2)}return null}(t,r,u,a.index)),null!==jr)(jr.__ngLastListenerFn__||jr).__ngNextListenerFn__=g,jr.__ngLastListenerFn__=g,wt=!1;else{g=qg(a,r,Te,g,!1);const is=s.listen(ur,u,g);nt.push(g,is),ce&&ce.push(u,an,Mr,Mr+1)}}else g=qg(a,r,Te,g,!1);const Kt=a.outputs;let vn;if(wt&&null!==Kt&&(vn=Kt[u])){const Hn=vn.length;if(Hn)for(let ur=0;ur<Hn;ur+=2){const co=r[vn[ur]][vn[ur+1]].subscribe(g),hd=nt.length;nt.push(g,co),ce&&ce.push(u,a.index,hd,-(hd+1))}}}function ep(t,r,s,a){try{return!1!==s(a)}catch(u){return th(t,u),!1}}function qg(t,r,s,a,u){return function g(b){if(b===Function)return a;$f(2&t.flags?Hr(t.index,r):r);let N=ep(r,0,a,b),K=g.__ngNextListenerFn__;for(;K;)N=ep(r,0,K,b)&&N,K=K.__ngNextListenerFn__;return u&&!1===N&&(b.preventDefault(),b.returnValue=!1),N}}function Kg(t=1){return function V(t){return(ue.lFrame.contextLView=function le(t,r){for(;t>0;)r=r[15],t--;return r}(t,ue.lFrame.contextLView))[8]}(t)}function Yg(t,r){let s=null;const a=function tf(t){const r=t.attrs;if(null!=r){const s=r.indexOf(5);if(0==(1&s))return r[s+1]}return null}(t);for(let u=0;u<r.length;u++){const g=r[u];if("*"!==g){if(null===a?Rd(t,g,!0):Ym(a,g))return u}else s=u}return s}function Qg(t){const r=jt()[16][6];if(!r.projection){const a=r.projection=va(t?t.length:1,null),u=a.slice();let g=r.child;for(;null!==g;){const b=t?Yg(g,t):0;null!==b&&(u[b]?u[b].projectionNext=g:a[b]=g,u[b]=g),g=g.next}}}function Jg(t,r=0,s){const a=jt(),u=Xn(),g=_u(u,22+t,16,null,s||null);null===g.projection&&(g.projection=r),Zo(),64!=(64&g.flags)&&function Yh(t,r,s){Gc(r[11],0,r,s,$c(t,s,r),qh(s.parent||r[6],s,r))}(u,a,g)}function dh(t,r,s){return hh(t,"",r,"",s),dh}function hh(t,r,s,a,u){const g=jt(),b=tu(g,r,s,a);return b!==Yr&&Fa(Xn(),Nt(),g,t,b,g[11],u,!1),hh}function em(t,r,s,a,u){const g=t[s+1],b=null===r;let M=a?Xa(g):Ha(g),N=!1;for(;0!==M&&(!1===N||b);){const ce=t[M+1];Cu(t[M],r)&&(N=!0,t[M+1]=a?mu(ce):qc(ce)),M=a?Xa(ce):Ha(ce)}N&&(t[s+1]=a?qc(g):mu(g))}function Cu(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&xt(t,r)>=0}function ph(t,r){return function Tl(t,r,s,a){const u=jt(),g=Xn(),b=function Jr(t){const r=ue.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,s}(2);g.firstUpdatePass&&function am(t,r,s,a){const u=t.data;if(null===u[s+1]){const g=u[Ue()],b=function om(t,r){return r>=t.expandoStartIndex}(t,s);(function Ee(t,r){return 0!=(t.flags&(r?16:32))})(g,a)&&null===r&&!b&&(r=!1),r=function rv(t,r,s,a){const u=ha(t);let g=a?r.residualClasses:r.residualStyles;if(null===u)0===(a?r.classBindings:r.styleBindings)&&(s=n(s=e(null,t,r,s,a),r.attrs,a),g=null);else{const b=r.directiveStylingLast;if(-1===b||t[b]!==u)if(s=e(u,t,r,s,a),null===g){let N=function iv(t,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==Ha(a))return t[Xa(a)]}(t,r,a);void 0!==N&&Array.isArray(N)&&(N=e(null,t,r,N[1],a),N=n(N,r.attrs,a),function lm(t,r,s,a){t[Xa(s?r.classBindings:r.styleBindings)]=a}(t,r,a,N))}else g=function i(t,r,s){let a;const u=r.directiveEnd;for(let g=1+r.directiveStylingLast;g<u;g++)a=n(a,t[g].hostAttrs,s);return n(a,r.attrs,s)}(t,r,a)}return void 0!==g&&(a?r.residualClasses=g:r.residualStyles=g),s}(u,g,r,a),function Py(t,r,s,a,u,g){let b=g?r.classBindings:r.styleBindings,M=Xa(b),N=Ha(b);t[a]=s;let ce,K=!1;if(Array.isArray(s)){const Te=s;ce=Te[1],(null===ce||xt(Te,ce)>0)&&(K=!0)}else ce=s;if(u)if(0!==N){const nt=Xa(t[M+1]);t[a+1]=cc(nt,M),0!==nt&&(t[nt+1]=gu(t[nt+1],a)),t[M+1]=function pu(t,r){return 131071&t|r<<17}(t[M+1],a)}else t[a+1]=cc(M,0),0!==M&&(t[M+1]=gu(t[M+1],a)),M=a;else t[a+1]=cc(N,0),0===M?M=a:t[N+1]=gu(t[N+1],a),N=a;K&&(t[a+1]=qc(t[a+1])),em(t,ce,a,!0),em(t,ce,a,!1),function Ry(t,r,s,a,u){const g=u?t.residualClasses:t.residualStyles;null!=g&&"string"==typeof r&&xt(g,r)>=0&&(s[a+1]=mu(s[a+1]))}(r,ce,t,a,g),b=cc(M,N),g?r.classBindings=b:r.styleBindings=b}(u,g,r,s,b,a)}}(g,t,b,a),r!==Yr&&Ta(u,b,r)&&function v(t,r,s,a,u,g,b,M){if(!(3&r.type))return;const N=t.data,K=N[M+1];q(function _f(t){return 1==(1&t)}(K)?O(N,r,s,u,Ha(K),b):void 0)||(q(g)||function Nu(t){return 2==(2&t)}(K)&&(g=O(N,null,s,u,M,b)),function Xp(t,r,s,a,u){if(r)u?t.addClass(s,a):t.removeClass(s,a);else{let g=-1===a.indexOf("-")?void 0:Ra.DashCase;null==u?t.removeStyle(s,a,g):("string"==typeof u&&u.endsWith("!important")&&(u=u.slice(0,-10),g|=Ra.Important),t.setStyle(s,a,u,g))}}(a,b,Pi(Ue(),s),u,g))}(g,g.data[Ue()],u,u[11],t,u[b+1]=function ne(t,r){return null==t||("string"==typeof r?t+=r:"object"==typeof t&&(t=fe(lo(t)))),t}(r,s),a,b)}(t,r,null,!0),ph}function e(t,r,s,a,u){let g=null;const b=s.directiveEnd;let M=s.directiveStylingLast;for(-1===M?M=s.directiveStart:M++;M<b&&(g=r[M],a=n(a,g.hostAttrs,u),g!==t);)M++;return null!==t&&(s.directiveStylingLast=M),a}function n(t,r,s){const a=s?1:2;let u=-1;if(null!==r)for(let g=0;g<r.length;g++){const b=r[g];"number"==typeof b?u=b:u===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Oe(t,b,!!s||r[++g]))}return void 0===t?null:t}function O(t,r,s,a,u,g){const b=null===r;let M;for(;u>0;){const N=t[u],K=Array.isArray(N),ce=K?N[1]:N,Te=null===ce;let nt=s[u+1];nt===Yr&&(nt=Te?Kn:void 0);let wt=Te?Be(nt,a):ce===a?nt:void 0;if(K&&!q(wt)&&(wt=Be(N,a)),q(wt)&&(M=wt,b))return M;const Kt=t[u+1];u=b?Xa(Kt):Ha(Kt)}if(null!==r){let N=g?r.residualClasses:r.residualStyles;null!=N&&(M=Be(N,a))}return M}function q(t){return void 0!==t}function ze(t,r=""){const s=jt(),a=Xn(),u=t+22,g=a.firstCreatePass?_u(a,u,1,r,null):a.data[u],b=s[u]=function Jl(t,r){return t.createText(r)}(s[11],r);Ad(a,s,b,g),Ts(g,!1)}function Dt(t){return qt("",t,""),Dt}function qt(t,r,s){const a=jt(),u=tu(a,t,r,s);return u!==Yr&&function Dl(t,r,s){const a=Pi(r,t);!function nc(t,r,s){t.setValue(r,s)}(t[11],a,s)}(a,Ue(),u),qt}function $y(t,r,s){const a=jt();return Ta(a,$n(),r)&&Fa(Xn(),Nt(),a,t,r,a[11],s,!0),$y}function Zy(t,r,s){const a=jt();if(Ta(a,$n(),r)){const g=Xn(),b=Nt();Fa(g,b,a,t,r,Gf(ha(g.data),b,a),s,!0)}return Zy}const cd=void 0;var N0=["en",[["a","p"],["AM","PM"],cd],[["AM","PM"],cd,cd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],cd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],cd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",cd,"{1} 'at' {0}",cd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function R0(t){const s=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let gh={};function zy(t){const r=function F0(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=gv(r);if(s)return s;const a=r.split("-")[0];if(s=gv(a),s)return s;if("en"===a)return N0;throw new He(701,!1)}function pv(t){return zy(t)[kr.PluralCase]}function gv(t){return t in gh||(gh[t]=On.ng&&On.ng.common&&On.ng.common.locales&&On.ng.common.locales[t]),gh[t]}var kr=(()=>((kr=kr||{})[kr.LocaleId=0]="LocaleId",kr[kr.DayPeriodsFormat=1]="DayPeriodsFormat",kr[kr.DayPeriodsStandalone=2]="DayPeriodsStandalone",kr[kr.DaysFormat=3]="DaysFormat",kr[kr.DaysStandalone=4]="DaysStandalone",kr[kr.MonthsFormat=5]="MonthsFormat",kr[kr.MonthsStandalone=6]="MonthsStandalone",kr[kr.Eras=7]="Eras",kr[kr.FirstDayOfWeek=8]="FirstDayOfWeek",kr[kr.WeekendRange=9]="WeekendRange",kr[kr.DateFormat=10]="DateFormat",kr[kr.TimeFormat=11]="TimeFormat",kr[kr.DateTimeFormat=12]="DateTimeFormat",kr[kr.NumberSymbols=13]="NumberSymbols",kr[kr.NumberFormats=14]="NumberFormats",kr[kr.CurrencyCode=15]="CurrencyCode",kr[kr.CurrencySymbol=16]="CurrencySymbol",kr[kr.CurrencyName=17]="CurrencyName",kr[kr.Currencies=18]="Currencies",kr[kr.Directionality=19]="Directionality",kr[kr.PluralCase=20]="PluralCase",kr[kr.ExtraData=21]="ExtraData",kr))();const mh="en-US";let mv=mh;function qy(t,r,s,a,u){if(t=Pe(t),Array.isArray(t))for(let g=0;g<t.length;g++)qy(t[g],r,s,a,u);else{const g=Xn(),b=jt();let M=au(t)?t:Pe(t.provide),N=wp(t);const K=Ri(),ce=1048575&K.providerIndexes,Te=K.directiveStart,nt=K.providerIndexes>>20;if(au(t)||!t.multi){const wt=new Rs(N,u,fu),Kt=Yy(M,r,u?ce:ce+nt,Te);-1===Kt?(Wa(ti(K,b),g,M),Ky(g,t,r.length),r.push(M),K.directiveStart++,K.directiveEnd++,u&&(K.providerIndexes+=1048576),s.push(wt),b.push(wt)):(s[Kt]=wt,b[Kt]=wt)}else{const wt=Yy(M,r,ce+nt,Te),Kt=Yy(M,r,ce,ce+nt),vn=wt>=0&&s[wt],Hn=Kt>=0&&s[Kt];if(u&&!Hn||!u&&!vn){Wa(ti(K,b),g,M);const ur=function Pw(t,r,s,a,u){const g=new Rs(t,s,fu);return g.multi=[],g.index=r,g.componentProviders=0,jv(g,u,a&&!s),g}(u?kw:Ow,s.length,u,a,N);!u&&Hn&&(s[Kt].providerFactory=ur),Ky(g,t,r.length,0),r.push(M),K.directiveStart++,K.directiveEnd++,u&&(K.providerIndexes+=1048576),s.push(ur),b.push(ur)}else Ky(g,t,wt>-1?wt:Kt,jv(s[u?Kt:wt],N,!u&&a));!u&&a&&Hn&&s[Kt].componentProviders++}}}function Ky(t,r,s,a){const u=au(r),g=function Dm(t){return!!t.useClass}(r);if(u||g){const N=(g?Pe(r.useClass):r).prototype.ngOnDestroy;if(N){const K=t.destroyHooks||(t.destroyHooks=[]);if(!u&&r.multi){const ce=K.indexOf(s);-1===ce?K.push(s,[a,N]):K[ce+1].push(a,N)}else K.push(s,N)}}}function jv(t,r,s){return s&&t.componentProviders++,t.multi.push(r)-1}function Yy(t,r,s,a){for(let u=s;u<a;u++)if(r[u]===t)return u;return-1}function Ow(t,r,s,a){return Qy(this.multi,[])}function kw(t,r,s,a){const u=this.multi;let g;if(this.providerFactory){const b=this.providerFactory.componentProviders,M=Wo(s,s[1],this.providerFactory.index,a);g=M.slice(0,b),Qy(u,g);for(let N=b;N<M.length;N++)g.push(M[N])}else g=[],Qy(u,g);return g}function Qy(t,r){for(let s=0;s<t.length;s++)r.push((0,t[s])());return r}function Hv(t,r=[]){return s=>{s.providersResolver=(a,u)=>function xw(t,r,s){const a=Xn();if(a.firstCreatePass){const u=mi(t);qy(s,a.data,a.blueprint,u,!0),qy(r,a.data,a.blueprint,u,!1)}}(a,u?u(t):t,r)}}class yh{}class $v{}function Rw(t,r){return new Zv(t,r??null)}class Zv extends yh{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new td(this);const a=gn(r);this._bootstrapComponents=cl(a.bootstrap),this._r3Injector=Fd(r,s,[{provide:yh,useValue:this},{provide:Qu,useValue:this.componentFactoryResolver}],fe(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Jy extends $v{constructor(r){super(),this.moduleType=r}create(r){return new Zv(this.moduleType,r)}}class Nw extends yh{constructor(r,s,a){super(),this.componentFactoryResolver=new td(this),this.instance=null;const u=new xh([...r,{provide:yh,useValue:this},{provide:Qu,useValue:this.componentFactoryResolver}],s||Pc(),a,new Set(["environment"]));this.injector=u,u.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function Xy(t,r,s=null){return new Nw(t,r,s).injector}let Fw=(()=>{class t{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const a=Dh(0,s.type),u=a.length>0?Xy([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,u)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return t.\u0275prov=In({token:t,providedIn:"environment",factory:()=>new t(xr(ql))}),t})();function zv(t){t.getStandaloneInjector=r=>r.get(Fw).getOrCreateStandaloneInjector(t)}function Jv(t,r,s,a){return eb(jt(),U(),t,r,s,a)}function Xv(t,r,s,a,u,g,b,M){const N=U()+t,K=jt(),ce=function Bo(t,r,s,a,u,g){const b=bu(t,r,s,a);return bu(t,r+2,u,g)||b}(K,N,s,a,u,g);return Ta(K,N+4,b)||ce?eu(K,N+5,M?r.call(M,s,a,u,g,b):r(s,a,u,g,b)):function id(t,r){return t[r]}(K,N+5)}function up(t,r){const s=t[r];return s===Yr?void 0:s}function eb(t,r,s,a,u,g){const b=r+s;return Ta(t,b,u)?eu(t,b+1,g?a.call(g,u):a(u)):up(t,b+1)}function nb(t,r,s,a,u,g,b,M){const N=r+s;return function Il(t,r,s,a,u){const g=bu(t,r,s,a);return Ta(t,r+2,u)||g}(t,N,u,g,b)?eu(t,N+3,M?a.call(M,u,g,b):a(u,g,b)):up(t,N+3)}function sb(t,r){const s=Xn();let a;const u=t+22;s.firstCreatePass?(a=function Xw(t,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(t===a.name)return a}}(r,s.pipeRegistry),s.data[u]=a,a.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(u,a.onDestroy)):a=s.data[u];const g=a.factory||(a.factory=Ti(a.type)),b=nr(fu);try{const M=La(!1),N=g();return La(M),function $g(t,r,s,a){s>=t.data.length&&(t.data[s]=null,t.blueprint[s]=null),r[s]=a}(s,jt(),u,N),N}finally{nr(b)}}function ob(t,r,s){const a=t+22,u=jt(),g=$i(u,a);return cp(u,a)?eb(u,U(),r,g.transform,s,g):g.transform(s)}function ab(t,r,s,a,u){const g=t+22,b=jt(),M=$i(b,g);return cp(b,g)?nb(b,U(),r,M.transform,s,a,u,M):M.transform(s,a,u)}function cp(t,r){return t[1].data[r].pure}function t_(t){return r=>{setTimeout(t,void 0,r)}}const Du=class rE extends h.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let u=r,g=s||(()=>null),b=a;if(r&&"object"==typeof r){const N=r;u=N.next?.bind(N),g=N.error?.bind(N),b=N.complete?.bind(N)}this.__isAsync&&(g=t_(g),u&&(u=t_(u)),b&&(b=t_(b)));const M=super.subscribe({next:u,error:g,complete:b});return r instanceof c.w0&&r.add(M),M}};function iE(){return this._results[Uu()]()}class n_{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Uu(),a=n_.prototype;a[s]||(a[s]=iE)}get changes(){return this._changes||(this._changes=new Du)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const u=Js(r);(this._changesDetected=!function ps(t,r,s){if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++){let u=t[a],g=r[a];if(s&&(u=s(u),g=s(g)),g!==u)return!1}return!0}(a._results,u,s))&&(a._results=u,a.length=u.length,a.last=u[this.length-1],a.first=u[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let dp=(()=>{class t{}return t.__NG_ELEMENT_ID__=aE,t})();const sE=dp,oE=class extends sE{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r,s){const a=this._declarationTContainer.tViews,u=hl(this._declarationLView,a,r,16,null,a.declTNode,null,null,null,null,s||null);u[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(u[19]=b.createEmbeddedView(a)),Mf(a,u,r),new gc(u)}};function aE(){return fm(Ri(),jt())}function fm(t,r){return 4&t.type?new oE(r,t,Ju(t,r)):null}let pm=(()=>{class t{}return t.__NG_ELEMENT_ID__=lE,t})();function lE(){return cb(Ri(),jt())}const uE=pm,lb=class extends uE{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return Ju(this._hostTNode,this._hostLView)}get injector(){return new fs(this._hostTNode,this._hostLView)}get parentInjector(){const r=Pr(this._hostTNode,this._hostLView);if(jl(r)){const s=ta(r,this._hostLView),a=hs(r);return new fs(s[1].data[a+8],s)}return new fs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=ub(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){let u,g;"number"==typeof a?u=a:null!=a&&(u=a.index,g=a.injector);const b=r.createEmbeddedView(s||{},g);return this.insert(b,u),b}createComponent(r,s,a,u,g){const b=r&&!function As(t){return"function"==typeof t}(r);let M;if(b)M=s;else{const Te=s||{};M=Te.index,a=Te.injector,u=Te.projectableNodes,g=Te.environmentInjector||Te.ngModuleRef}const N=b?r:new Lu(ie(r)),K=a||this.parentInjector;if(!g&&null==N.ngModule){const nt=(b?K:this.parentInjector).get(ql,null);nt&&(g=nt)}const ce=N.create(K,u,void 0,g);return this.insert(ce.hostView,M),ce}insert(r,s){const a=r._lView,u=a[1];if(function ve(t){return gi(t[3])}(a)){const ce=this.indexOf(r);if(-1!==ce)this.detach(ce);else{const Te=a[3],nt=new lb(Te,Te[6],Te[3]);nt.detach(nt.indexOf(r))}}const g=this._adjustIndex(s),b=this._lContainer;!function $h(t,r,s,a){const u=10+a,g=s.length;a>0&&(s[u-1][4]=r),a<g-10?(r[4]=s[u],Ai(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const b=r[17];null!==b&&s!==b&&function Qo(t,r){const s=t[9];r[16]!==r[3][3][16]&&(t[2]=!0),null===s?t[9]=[r]:s.push(r)}(b,r);const M=r[19];null!==M&&M.insertView(t),r[2]|=64}(u,a,b,g);const M=Md(g,b),N=a[11],K=rc(N,b[7]);return null!==K&&function Zp(t,r,s,a,u,g){a[0]=u,a[6]=r,Nl(t,a,s,1,u,g)}(u,b[6],N,a,K,M),r.attachToViewContainerRef(),Ai(r_(b),g,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=ub(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Zh(this._lContainer,s);a&&(po(r_(this._lContainer),s),Gp(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=Zh(this._lContainer,s);return a&&null!=po(r_(this._lContainer),s)?new gc(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function ub(t){return t[8]}function r_(t){return t[8]||(t[8]=[])}function cb(t,r){let s;const a=r[t.index];if(gi(a))s=a;else{let u;if(8&t.type)u=Ci(a);else{const g=r[11];u=g.createComment("");const b=Mi(t,r);du(g,rc(g,b),u,function Wh(t,r){return t.nextSibling(r)}(g,b),!1)}r[t.index]=s=Pg(a,r,u,t),Hf(r,s)}return new lb(s,t,r)}class i_{constructor(r){this.queryList=r,this.matches=null}clone(){return new i_(this.queryList)}setDirty(){this.queryList.setDirty()}}class s_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,u=[];for(let g=0;g<a;g++){const b=s.getByIndex(g);u.push(this.queries[b.indexInDeclarationView].clone())}return new s_(u)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==vb(r,s).matches&&this.queries[s].setDirty()}}class db{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class o_{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const u=null!==s?s.length:0,g=this.getByIndex(a).embeddedTView(r,u);g&&(g.indexInDeclarationView=a,null!==s?s.push(g):s=[g])}return null!==s?new o_(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class a_{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new a_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let u=0;u<a.length;u++){const g=a[u];this.matchTNodeWithReadOption(r,s,hE(s,g)),this.matchTNodeWithReadOption(r,s,ma(s,r,g,!1,!1))}else a===dp?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,ma(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const u=this.metadata.read;if(null!==u)if(u===Rc||u===pm||u===dp&&4&s.type)this.addMatch(s.index,-2);else{const g=ma(s,r,u,!1,!1);null!==g&&this.addMatch(s.index,g)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function hE(t,r){const s=t.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function pE(t,r,s,a){return-1===s?function fE(t,r){return 11&t.type?Ju(t,r):4&t.type?fm(t,r):null}(r,t):-2===s?function gE(t,r,s){return s===Rc?Ju(r,t):s===dp?fm(r,t):s===pm?cb(r,t):void 0}(t,r,a):Wo(t,t[1],s,r)}function hb(t,r,s,a){const u=r[19].queries[a];if(null===u.matches){const g=t.data,b=s.matches,M=[];for(let N=0;N<b.length;N+=2){const K=b[N];M.push(K<0?null:pE(r,g[K],b[N+1],s.metadata.read))}u.matches=M}return u.matches}function l_(t,r,s,a){const u=t.queries.getByIndex(s),g=u.matches;if(null!==g){const b=hb(t,r,u,s);for(let M=0;M<g.length;M+=2){const N=g[M];if(N>0)a.push(b[M/2]);else{const K=g[M+1],ce=r[-N];for(let Te=10;Te<ce.length;Te++){const nt=ce[Te];nt[17]===nt[3]&&l_(nt[1],nt,K,a)}if(null!==ce[9]){const Te=ce[9];for(let nt=0;nt<Te.length;nt++){const wt=Te[nt];l_(wt[1],wt,K,a)}}}}}return a}function fb(t){const r=jt(),s=Xn(),a=ea();fa(a+1);const u=vb(s,a);if(t.dirty&&function Do(t){return 4==(4&t[2])}(r)===(2==(2&u.metadata.flags))){if(null===u.matches)t.reset([]);else{const g=u.crossesNgTemplate?l_(s,r,a,[]):hb(s,r,u,a);t.reset(g,Om),t.notifyOnChanges()}return!0}return!1}function pb(t,r,s){const a=Xn();a.firstCreatePass&&(_b(a,new db(t,r,s),-1),2==(2&r)&&(a.staticViewQueries=!0)),yb(a,jt(),r)}function gb(t,r,s,a){const u=Xn();if(u.firstCreatePass){const g=Ri();_b(u,new db(r,s,a),g.index),function yE(t,r){const s=t.contentQueries||(t.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,r)}(u,t),2==(2&s)&&(u.staticContentQueries=!0)}yb(u,jt(),s)}function mb(){return function mE(t,r){return t[19].queries[r].queryList}(jt(),ea())}function yb(t,r,s){const a=new n_(4==(4&s));Rf(t,r,a,a.destroy),null===r[19]&&(r[19]=new s_),r[19].queries.push(new i_(a))}function _b(t,r,s){null===t.queries&&(t.queries=new o_),t.queries.track(new a_(r,s))}function vb(t,r){return t.queries.getByIndex(r)}function mm(...t){}const Ub=new ui("Application Initializer");let ym=(()=>{class t{constructor(s){this.appInits=s,this.resolve=mm,this.reject=mm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,u)=>{this.resolve=a,this.reject=u})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let u=0;u<this.appInits.length;u++){const g=this.appInits[u]();if(Jf(g))s.push(g);else if(Gg(g)){const b=new Promise((M,N)=>{g.subscribe({complete:M,error:N})});s.push(b)}}Promise.all(s).then(()=>{a()}).catch(u=>{this.reject(u)}),0===s.length&&a(),this.initialized=!0}}return t.\u0275fac=function(s){return new(s||t)(xr(Ub,8))},t.\u0275prov=In({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Bb=new ui("AppId",{providedIn:"root",factory:function Vb(){return`${f_()}${f_()}${f_()}`}});function f_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const jb=new ui("Platform Initializer"),UE=new ui("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Hb=new ui("appBootstrapListener"),BE=new ui("AnimationModuleType");let VE=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=In({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const _m=new ui("LocaleId",{providedIn:"root",factory:()=>j(_m,Ht.Optional|Ht.SkipSelf)||function jE(){return typeof $localize<"u"&&$localize.locale||mh}()}),HE=new ui("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class $E{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let ZE=(()=>{class t{compileModuleSync(s){return new Jy(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),g=cl(gn(s).declarations).reduce((b,M)=>{const N=ie(M);return N&&b.push(new Lu(N)),b},[]);return new $E(a,g)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=In({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const WE=(()=>Promise.resolve(0))();function p_(t){typeof Zone>"u"?WE.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Bl{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Du(!1),this.onMicrotaskEmpty=new Du(!1),this.onStable=new Du(!1),this.onError=new Du(!1),typeof Zone>"u")throw new He(908,!1);Zone.assertZonePatched();const u=this;if(u._nesting=0,u._outer=u._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;u._inner=u._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!a&&s,u.shouldCoalesceRunChangeDetection=a,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function qE(){let t=On.requestAnimationFrame,r=On.cancelAnimationFrame;if(typeof Zone<"u"&&t&&r){const s=t[Zone.__symbol__("OriginalDelegate")];s&&(t=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function QE(t){const r=()=>{!function YE(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(On,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,m_(t),t.isCheckStableRunning=!0,g_(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),m_(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,u,g,b,M)=>{try{return zb(t),s.invokeTask(u,g,b,M)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||t.shouldCoalesceRunChangeDetection)&&r(),Gb(t)}},onInvoke:(s,a,u,g,b,M,N)=>{try{return zb(t),s.invoke(u,g,b,M,N)}finally{t.shouldCoalesceRunChangeDetection&&r(),Gb(t)}},onHasTask:(s,a,u,g)=>{s.hasTask(u,g),a===u&&("microTask"==g.change?(t._hasPendingMicrotasks=g.microTask,m_(t),g_(t)):"macroTask"==g.change&&(t.hasPendingMacrotasks=g.macroTask))},onHandleError:(s,a,u,g)=>(s.handleError(u,g),t.runOutsideAngular(()=>t.onError.emit(g)),!1)})}(u)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Bl.isInAngularZone())throw new He(909,!1)}static assertNotInAngularZone(){if(Bl.isInAngularZone())throw new He(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,u){const g=this._inner,b=g.scheduleEventTask("NgZoneEvent: "+u,r,KE,mm,mm);try{return g.runTask(b,s,a)}finally{g.cancelTask(b)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const KE={};function g_(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function m_(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function zb(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Gb(t){t._nesting--,g_(t)}class JE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Du,this.onMicrotaskEmpty=new Du,this.onStable=new Du,this.onError=new Du}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,u){return r.apply(s,a)}}const Wb=new ui(""),qb=new ui("");let y_,XE=(()=>{class t{constructor(s,a,u){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,y_||(function eC(t){y_=t}(u),u.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Bl.assertNotInAngularZone(),p_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())p_(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,u){let g=-1;a&&a>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==g),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:g,updateCb:u})}whenStable(s,a,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,u),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,u){return[]}}return t.\u0275fac=function(s){return new(s||t)(xr(Bl),xr(Kb),xr(qb))},t.\u0275prov=In({token:t,factory:t.\u0275fac}),t})(),Kb=(()=>{class t{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return y_?.findTestabilityInTree(this,s,a)??null}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=In({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})(),Sc=null;const Yb=new ui("AllowMultipleToken"),__=new ui("PlatformDestroyListeners");class rC{constructor(r,s){this.name=r,this.token=s}}function Jb(t,r,s=[]){const a=`Platform: ${r}`,u=new ui(a);return(g=[])=>{let b=v_();if(!b||b.injector.get(Yb,!1)){const M=[...s,...g,{provide:u,useValue:!0}];t?t(M):function iC(t){if(Sc&&!Sc.get(Yb,!1))throw new He(400,!1);Sc=t;const r=t.get(e0);(function Qb(t){const r=t.get(jb,null);r&&r.forEach(s=>s())})(t)}(function Xb(t=[],r){return dl.create({name:r,providers:[{provide:Sh,useValue:"platform"},{provide:__,useValue:new Set([()=>Sc=null])},...t]})}(M,a))}return function oC(t){const r=v_();if(!r)throw new He(401,!1);return r}()}}function v_(){return Sc?.get(e0)??null}let e0=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const u=function n0(t,r){let s;return s="noop"===t?new JE:("zone.js"===t?void 0:t)||new Bl(r),s}(a?.ngZone,function t0(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(a)),g=[{provide:Bl,useValue:u}];return u.run(()=>{const b=dl.create({providers:g,parent:this.injector,name:s.moduleType.name}),M=s.create(b),N=M.injector.get(El,null);if(!N)throw new He(402,!1);return u.runOutsideAngular(()=>{const K=u.onError.subscribe({next:ce=>{N.handleError(ce)}});M.onDestroy(()=>{bm(this._modules,M),K.unsubscribe()})}),function r0(t,r,s){try{const a=s();return Jf(a)?a.catch(u=>{throw r.runOutsideAngular(()=>t.handleError(u)),u}):a}catch(a){throw r.runOutsideAngular(()=>t.handleError(a)),a}}(N,u,()=>{const K=M.injector.get(ym);return K.runInitializers(),K.donePromise.then(()=>(function yv(t){cn(t,"Expected localeId to be defined"),"string"==typeof t&&(mv=t.toLowerCase().replace(/_/g,"-"))}(M.injector.get(_m,mh)||mh),this._moduleDoBootstrap(M),M))})})}bootstrapModule(s,a=[]){const u=s0({},a);return function tC(t,r,s){const a=new Jy(s);return Promise.resolve(a)}(0,0,s).then(g=>this.bootstrapModuleFactory(g,u))}_moduleDoBootstrap(s){const a=s.injector.get(vm);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(u=>a.bootstrap(u));else{if(!s.instance.ngDoBootstrap)throw new He(403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new He(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(__,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(s){return new(s||t)(xr(dl))},t.\u0275prov=In({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function s0(t,r){return Array.isArray(r)?r.reduce(s0,t):{...t,...r}}let vm=(()=>{class t{constructor(s,a,u){this._zone=s,this._injector=a,this._exceptionHandler=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new S.y(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),b=new S.y(M=>{let N;this._zone.runOutsideAngular(()=>{N=this._zone.onStable.subscribe(()=>{Bl.assertNotInAngularZone(),p_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const K=this._zone.onUnstable.subscribe(()=>{Bl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{N.unsubscribe(),K.unsubscribe()}});this.isStable=(0,d.T)(g,b.pipe((0,de.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const u=s instanceof Ep;if(!this._injector.get(ym).done)throw!u&&Bt(s),new He(405,false);let b;b=u?s:this._injector.get(Qu).resolveComponentFactory(s),this.componentTypes.push(b.componentType);const M=function nC(t){return t.isBoundToModule}(b)?void 0:this._injector.get(yh),K=b.create(dl.NULL,[],a||b.selector,M),ce=K.location.nativeElement,Te=K.injector.get(Wb,null);return Te?.registerApplication(ce),K.onDestroy(()=>{this.detachView(K.hostView),bm(this.components,K),Te?.unregisterApplication(ce)}),this._loadComponent(K),K}tick(){if(this._runningTick)throw new He(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;bm(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(Hb,[]).concat(this._bootstrapListeners).forEach(u=>u(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>bm(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new He(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(s){return new(s||t)(xr(Bl),xr(ql),xr(El))},t.\u0275prov=In({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function bm(t,r){const s=t.indexOf(r);s>-1&&t.splice(s,1)}let a0=!0,l0=!1;function lC(){return l0=!0,a0}function uC(){if(l0)throw new Error("Cannot enable prod mode after platform setup.");a0=!1}let cC=(()=>{class t{}return t.__NG_ELEMENT_ID__=dC,t})();function dC(t){return function hC(t,r,s){if(ki(t)&&!s){const a=Hr(t.index,r);return new gc(a,a)}return 47&t.type?new gc(r[16],r):null}(Ri(),jt(),16==(16&t))}class h0{constructor(){}supports(r){return yc(r)}create(r){return new _C(r)}}const yC=(t,r)=>r;class _C{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||yC}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,u=0,g=null;for(;s||a;){const b=!a||s&&s.currentIndex<p0(a,u,g)?s:a,M=p0(b,u,g),N=b.currentIndex;if(b===a)u--,a=a._nextRemoved;else if(s=s._next,null==b.previousIndex)u++;else{g||(g=[]);const K=M-u,ce=N-u;if(K!=ce){for(let nt=0;nt<K;nt++){const wt=nt<g.length?g[nt]:g[nt]=0,Kt=wt+nt;ce<=Kt&&Kt<K&&(g[nt]=wt+1)}g[b.previousIndex]=ce-K}}M!==N&&r(b,M,N)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!yc(r))throw new He(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let u,g,b,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let M=0;M<this.length;M++)g=r[M],b=this._trackByFn(M,g),null!==s&&Object.is(s.trackById,b)?(a&&(s=this._verifyReinsertion(s,g,b,M)),Object.is(s.item,g)||this._addIdentityChange(s,g)):(s=this._mismatch(s,g,b,M),a=!0),s=s._next}else u=0,function My(t,r){if(Array.isArray(t))for(let s=0;s<t.length;s++)r(t[s]);else{const s=t[Uu()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,M=>{b=this._trackByFn(u,M),null!==s&&Object.is(s.trackById,b)?(a&&(s=this._verifyReinsertion(s,M,b,u)),Object.is(s.item,M)||this._addIdentityChange(s,M)):(s=this._mismatch(s,M,b,u),a=!0),s=s._next,u++}),this.length=u;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,u){let g;return null===r?g=this._itTail:(g=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,g,u)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,u))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,g,u)):r=this._addAfter(new vC(s,a),g,u),r}_verifyReinsertion(r,s,a,u){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==g?r=this._reinsertAfter(g,r._prev,u):r.currentIndex!=u&&(r.currentIndex=u,this._addToMoves(r,u)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const u=r._prevRemoved,g=r._nextRemoved;return null===u?this._removalsHead=g:u._nextRemoved=g,null===g?this._removalsTail=u:g._prevRemoved=u,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const u=null===s?this._itHead:s._next;return r._next=u,r._prev=s,null===u?this._itTail=r:u._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new f0),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new f0),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class vC{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bC{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class f0{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new bC,this.map.set(s,a)),a.add(r)}get(r,s){const u=this.map.get(r);return u?u.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function p0(t,r,s){const a=t.previousIndex;if(null===a)return a;let u=0;return s&&a<s.length&&(u=s[a]),a+r+u}class g0{constructor(){}supports(r){return r instanceof Map||qf(r)}create(){return new wC}}class wC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||qf(r)))throw new He(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,u)=>{if(s&&s.key===u)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const g=this._getOrCreateRecordForKey(u,a);s=this._insertBeforeOrAppend(s,g)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const u=this._records.get(r);this._maybeAddToChanges(u,s);const g=u._prev,b=u._next;return g&&(g._next=b),b&&(b._prev=g),u._next=null,u._prev=null,u}const a=new EC(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class EC{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function m0(){return new D_([new h0])}let D_=(()=>{class t{constructor(s){this.factories=s}static create(s,a){if(null!=a){const u=a.factories.slice();s=s.concat(u)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||m0()),deps:[[t,new Sr,new Cn]]}}find(s){const a=this.factories.find(u=>u.supports(s));if(null!=a)return a;throw new He(901,!1)}}return t.\u0275prov=In({token:t,providedIn:"root",factory:m0}),t})();function y0(){return new I_([new g0])}let I_=(()=>{class t{constructor(s){this.factories=s}static create(s,a){if(a){const u=a.factories.slice();s=s.concat(u)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||y0()),deps:[[t,new Sr,new Cn]]}}find(s){const a=this.factories.find(u=>u.supports(s));if(a)return a;throw new He(901,!1)}}return t.\u0275prov=In({token:t,providedIn:"root",factory:y0}),t})();const IC=Jb(null,"core",[]);let TC=(()=>{class t{constructor(s){}}return t.\u0275fac=function(s){return new(s||t)(xr(vm))},t.\u0275mod=ln({type:t}),t.\u0275inj=dn({}),t})();function SC(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}},433:(Jt,Qe,k)=>{k.d(Qe,{Wl:()=>gt,Fj:()=>Ge,NI:()=>ki,oH:()=>Os,u:()=>Jo,cw:()=>Y,sg:()=>Lr,u5:()=>cs,nD:()=>fn,wO:()=>Et,Cf:()=>qe,JJ:()=>_r,JL:()=>fr,F:()=>Fr,On:()=>Ut,c5:()=>jn,UX:()=>qs,Q7:()=>L,kI:()=>We,_Y:()=>sn});var h=k(4650),c=k(6895),S=k(8996),d=k(9751),de=k(4742),Ae=k(8421),_e=k(3269),fe=k(5403),Fe=k(3268),pe=k(1810),Pe=k(4004);let st=(()=>{class G{constructor(U,he){this._renderer=U,this._elementRef=he,this.onChange=Ot=>{},this.onTouched=()=>{}}setProperty(U,he){this._renderer.setProperty(this._elementRef.nativeElement,U,he)}registerOnTouched(U){this.onTouched=U}registerOnChange(U){this.onChange=U}setDisabledState(U){this.setProperty("disabled",U)}}return G.\u0275fac=function(U){return new(U||G)(h.Y36(h.Qsj),h.Y36(h.SBq))},G.\u0275dir=h.lG2({type:G}),G})(),mt=(()=>{class G extends st{}return G.\u0275fac=function(){let H;return function(he){return(H||(H=h.n5z(G)))(he||G)}}(),G.\u0275dir=h.lG2({type:G,features:[h.qOj]}),G})();const He=new h.OlP("NgValueAccessor"),Tt={provide:He,useExisting:(0,h.Gpc)(()=>gt),multi:!0};let gt=(()=>{class G extends mt{writeValue(U){this.setProperty("checked",U)}}return G.\u0275fac=function(){let H;return function(he){return(H||(H=h.n5z(G)))(he||G)}}(),G.\u0275dir=h.lG2({type:G,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(U,he){1&U&&h.NdJ("change",function($n){return he.onChange($n.target.checked)})("blur",function(){return he.onTouched()})},features:[h._Bn([Tt]),h.qOj]}),G})();const ft={provide:He,useExisting:(0,h.Gpc)(()=>Ge),multi:!0},Gt=new h.OlP("CompositionEventMode");let Ge=(()=>{class G extends st{constructor(U,he,Ot){super(U,he),this._compositionMode=Ot,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ye(){const G=(0,c.q)()?(0,c.q)().getUserAgent():"";return/android (\d+)/.test(G.toLowerCase())}())}writeValue(U){this.setProperty("value",U??"")}_handleInput(U){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(U)}_compositionStart(){this._composing=!0}_compositionEnd(U){this._composing=!1,this._compositionMode&&this.onChange(U)}}return G.\u0275fac=function(U){return new(U||G)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(Gt,8))},G.\u0275dir=h.lG2({type:G,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(U,he){1&U&&h.NdJ("input",function($n){return he._handleInput($n.target.value)})("blur",function(){return he.onTouched()})("compositionstart",function(){return he._compositionStart()})("compositionend",function($n){return he._compositionEnd($n.target.value)})},features:[h._Bn([ft]),h.qOj]}),G})();function rt(G){return null==G||("string"==typeof G||Array.isArray(G))&&0===G.length}function Pt(G){return null!=G&&"number"==typeof G.length}const qe=new h.OlP("NgValidators"),it=new h.OlP("NgAsyncValidators"),ct=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class We{static min(H){return function je(G){return H=>{if(rt(H.value)||rt(G))return null;const U=parseFloat(H.value);return!isNaN(U)&&U<G?{min:{min:G,actual:H.value}}:null}}(H)}static max(H){return function pt(G){return H=>{if(rt(H.value)||rt(G))return null;const U=parseFloat(H.value);return!isNaN(U)&&U>G?{max:{max:G,actual:H.value}}:null}}(H)}static required(H){return dt(H)}static requiredTrue(H){return function Lt(G){return!0===G.value?null:{required:!0}}(H)}static email(H){return function $t(G){return rt(G.value)||ct.test(G.value)?null:{email:!0}}(H)}static minLength(H){return Qt(H)}static maxLength(H){return Mn(H)}static pattern(H){return cn(H)}static nullValidator(H){return null}static compose(H){return vr(H)}static composeAsync(H){return br(H)}}function dt(G){return rt(G.value)?{required:!0}:null}function Qt(G){return H=>rt(H.value)||!Pt(H.value)?null:H.value.length<G?{minlength:{requiredLength:G,actualLength:H.value.length}}:null}function Mn(G){return H=>Pt(H.value)&&H.value.length>G?{maxlength:{requiredLength:G,actualLength:H.value.length}}:null}function cn(G){if(!G)return Rt;let H,U;return"string"==typeof G?(U="","^"!==G.charAt(0)&&(U+="^"),U+=G,"$"!==G.charAt(G.length-1)&&(U+="$"),H=new RegExp(U)):(U=G.toString(),H=G),he=>{if(rt(he.value))return null;const Ot=he.value;return H.test(Ot)?null:{pattern:{requiredPattern:U,actualValue:Ot}}}}function Rt(G){return null}function Pn(G){return null!=G}function Zn(G){return(0,h.QGY)(G)?(0,S.D)(G):G}function Nn(G){let H={};return G.forEach(U=>{H=null!=U?{...H,...U}:H}),0===Object.keys(H).length?null:H}function In(G,H){return H.map(U=>U(G))}function dn(G){return G.map(H=>function Wt(G){return!G.validate}(H)?H:U=>H.validate(U))}function vr(G){if(!G)return null;const H=G.filter(Pn);return 0==H.length?null:function(U){return Nn(In(U,H))}}function Ar(G){return null!=G?vr(dn(G)):null}function br(G){if(!G)return null;const H=G.filter(Pn);return 0==H.length?null:function(U){return function be(...G){const H=(0,_e.jO)(G),{args:U,keys:he}=(0,de.D)(G),Ot=new d.y($n=>{const{length:Jr}=U;if(!Jr)return void $n.complete();const Ps=new Array(Jr);let Ss=Jr,io=Jr;for(let zo=0;zo<Jr;zo++){let Ys=!1;(0,Ae.Xf)(U[zo]).subscribe((0,fe.x)($n,ha=>{Ys||(Ys=!0,io--),Ps[zo]=ha},()=>Ss--,void 0,()=>{(!Ss||!Ys)&&(io||$n.next(he?(0,pe.n)(he,Ps):Ps),$n.complete())}))}});return H?Ot.pipe((0,Fe.Z)(H)):Ot}(In(U,H).map(Zn)).pipe((0,Pe.U)(Nn))}}function ir(G){return null!=G?br(dn(G)):null}function sr(G,H){return null===G?[H]:Array.isArray(G)?[...G,H]:[G,H]}function Vn(G){return G._rawValidators}function Cr(G){return G._rawAsyncValidators}function yr(G){return G?Array.isArray(G)?G:[G]:[]}function Rr(G,H){return Array.isArray(G)?G.includes(H):G===H}function er(G,H){const U=yr(H);return yr(G).forEach(Ot=>{Rr(U,Ot)||U.push(Ot)}),U}function Ht(G,H){return yr(H).filter(U=>!Rr(G,U))}class cr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(H){this._rawValidators=H||[],this._composedValidatorFn=Ar(this._rawValidators)}_setAsyncValidators(H){this._rawAsyncValidators=H||[],this._composedAsyncValidatorFn=ir(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(H){this._onDestroyCallbacks.push(H)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(H=>H()),this._onDestroyCallbacks=[]}reset(H){this.control&&this.control.reset(H)}hasError(H,U){return!!this.control&&this.control.hasError(H,U)}getError(H,U){return this.control?this.control.getError(H,U):null}}class tr extends cr{get formDirective(){return null}get path(){return null}}class nr extends cr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Nr{constructor(H){this._cd=H}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let _r=(()=>{class G extends Nr{constructor(U){super(U)}}return G.\u0275fac=function(U){return new(U||G)(h.Y36(nr,2))},G.\u0275dir=h.lG2({type:G,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(U,he){2&U&&h.ekj("ng-untouched",he.isUntouched)("ng-touched",he.isTouched)("ng-pristine",he.isPristine)("ng-dirty",he.isDirty)("ng-valid",he.isValid)("ng-invalid",he.isInvalid)("ng-pending",he.isPending)},features:[h.qOj]}),G})(),fr=(()=>{class G extends Nr{constructor(U){super(U)}}return G.\u0275fac=function(U){return new(U||G)(h.Y36(tr,10))},G.\u0275dir=h.lG2({type:G,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(U,he){2&U&&h.ekj("ng-untouched",he.isUntouched)("ng-touched",he.isTouched)("ng-pristine",he.isPristine)("ng-dirty",he.isDirty)("ng-valid",he.isValid)("ng-invalid",he.isInvalid)("ng-pending",he.isPending)("ng-submitted",he.isSubmitted)},features:[h.qOj]}),G})();const ln="VALID",Ne="INVALID",xe="PENDING",$e="DISABLED";function De(G){return(Bt(G)?G.validators:G)||null}function ie(G){return Array.isArray(G)?Ar(G):G||null}function we(G,H){return(Bt(H)?H.asyncValidators:G)||null}function ut(G){return Array.isArray(G)?ir(G):G||null}function Bt(G){return null!=G&&!Array.isArray(G)&&"object"==typeof G}class Se{constructor(H,U){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=H,this._rawAsyncValidators=U,this._composedValidatorFn=ie(this._rawValidators),this._composedAsyncValidatorFn=ut(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(H){this._rawValidators=this._composedValidatorFn=H}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(H){this._rawAsyncValidators=this._composedAsyncValidatorFn=H}get parent(){return this._parent}get valid(){return this.status===ln}get invalid(){return this.status===Ne}get pending(){return this.status==xe}get disabled(){return this.status===$e}get enabled(){return this.status!==$e}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(H){this._rawValidators=H,this._composedValidatorFn=ie(H)}setAsyncValidators(H){this._rawAsyncValidators=H,this._composedAsyncValidatorFn=ut(H)}addValidators(H){this.setValidators(er(H,this._rawValidators))}addAsyncValidators(H){this.setAsyncValidators(er(H,this._rawAsyncValidators))}removeValidators(H){this.setValidators(Ht(H,this._rawValidators))}removeAsyncValidators(H){this.setAsyncValidators(Ht(H,this._rawAsyncValidators))}hasValidator(H){return Rr(this._rawValidators,H)}hasAsyncValidator(H){return Rr(this._rawAsyncValidators,H)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(H={}){this.touched=!0,this._parent&&!H.onlySelf&&this._parent.markAsTouched(H)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(H=>H.markAllAsTouched())}markAsUntouched(H={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(U=>{U.markAsUntouched({onlySelf:!0})}),this._parent&&!H.onlySelf&&this._parent._updateTouched(H)}markAsDirty(H={}){this.pristine=!1,this._parent&&!H.onlySelf&&this._parent.markAsDirty(H)}markAsPristine(H={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(U=>{U.markAsPristine({onlySelf:!0})}),this._parent&&!H.onlySelf&&this._parent._updatePristine(H)}markAsPending(H={}){this.status=xe,!1!==H.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!H.onlySelf&&this._parent.markAsPending(H)}disable(H={}){const U=this._parentMarkedDirty(H.onlySelf);this.status=$e,this.errors=null,this._forEachChild(he=>{he.disable({...H,onlySelf:!0})}),this._updateValue(),!1!==H.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...H,skipPristineCheck:U}),this._onDisabledChange.forEach(he=>he(!0))}enable(H={}){const U=this._parentMarkedDirty(H.onlySelf);this.status=ln,this._forEachChild(he=>{he.enable({...H,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:H.emitEvent}),this._updateAncestors({...H,skipPristineCheck:U}),this._onDisabledChange.forEach(he=>he(!1))}_updateAncestors(H){this._parent&&!H.onlySelf&&(this._parent.updateValueAndValidity(H),H.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(H){this._parent=H}getRawValue(){return this.value}updateValueAndValidity(H={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ln||this.status===xe)&&this._runAsyncValidator(H.emitEvent)),!1!==H.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!H.onlySelf&&this._parent.updateValueAndValidity(H)}_updateTreeValidity(H={emitEvent:!0}){this._forEachChild(U=>U._updateTreeValidity(H)),this.updateValueAndValidity({onlySelf:!0,emitEvent:H.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?$e:ln}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(H){if(this.asyncValidator){this.status=xe,this._hasOwnPendingAsyncValidator=!0;const U=Zn(this.asyncValidator(this));this._asyncValidationSubscription=U.subscribe(he=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(he,{emitEvent:H})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(H,U={}){this.errors=H,this._updateControlsErrors(!1!==U.emitEvent)}get(H){let U=H;return null==U||(Array.isArray(U)||(U=U.split(".")),0===U.length)?null:U.reduce((he,Ot)=>he&&he._find(Ot),this)}getError(H,U){const he=U?this.get(U):this;return he&&he.errors?he.errors[H]:null}hasError(H,U){return!!this.getError(H,U)}get root(){let H=this;for(;H._parent;)H=H._parent;return H}_updateControlsErrors(H){this.status=this._calculateStatus(),H&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(H)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?$e:this.errors?Ne:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(xe)?xe:this._anyControlsHaveStatus(Ne)?Ne:ln}_anyControlsHaveStatus(H){return this._anyControls(U=>U.status===H)}_anyControlsDirty(){return this._anyControls(H=>H.dirty)}_anyControlsTouched(){return this._anyControls(H=>H.touched)}_updatePristine(H={}){this.pristine=!this._anyControlsDirty(),this._parent&&!H.onlySelf&&this._parent._updatePristine(H)}_updateTouched(H={}){this.touched=this._anyControlsTouched(),this._parent&&!H.onlySelf&&this._parent._updateTouched(H)}_registerOnCollectionChange(H){this._onCollectionChange=H}_setUpdateStrategy(H){Bt(H)&&null!=H.updateOn&&(this._updateOn=H.updateOn)}_parentMarkedDirty(H){return!H&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(H){return null}}class Y extends Se{constructor(H,U,he){super(De(U),we(he,U)),this.controls=H,this._initObservables(),this._setUpdateStrategy(U),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(H,U){return this.controls[H]?this.controls[H]:(this.controls[H]=U,U.setParent(this),U._registerOnCollectionChange(this._onCollectionChange),U)}addControl(H,U,he={}){this.registerControl(H,U),this.updateValueAndValidity({emitEvent:he.emitEvent}),this._onCollectionChange()}removeControl(H,U={}){this.controls[H]&&this.controls[H]._registerOnCollectionChange(()=>{}),delete this.controls[H],this.updateValueAndValidity({emitEvent:U.emitEvent}),this._onCollectionChange()}setControl(H,U,he={}){this.controls[H]&&this.controls[H]._registerOnCollectionChange(()=>{}),delete this.controls[H],U&&this.registerControl(H,U),this.updateValueAndValidity({emitEvent:he.emitEvent}),this._onCollectionChange()}contains(H){return this.controls.hasOwnProperty(H)&&this.controls[H].enabled}setValue(H,U={}){(function hn(G,H,U){G._forEachChild((he,Ot)=>{if(void 0===U[Ot])throw new h.vHH(1002,"")})})(this,0,H),Object.keys(H).forEach(he=>{(function gn(G,H,U){const he=G.controls;if(!(H?Object.keys(he):he).length)throw new h.vHH(1e3,"");if(!he[U])throw new h.vHH(1001,"")})(this,!0,he),this.controls[he].setValue(H[he],{onlySelf:!0,emitEvent:U.emitEvent})}),this.updateValueAndValidity(U)}patchValue(H,U={}){null!=H&&(Object.keys(H).forEach(he=>{const Ot=this.controls[he];Ot&&Ot.patchValue(H[he],{onlySelf:!0,emitEvent:U.emitEvent})}),this.updateValueAndValidity(U))}reset(H={},U={}){this._forEachChild((he,Ot)=>{he.reset(H[Ot],{onlySelf:!0,emitEvent:U.emitEvent})}),this._updatePristine(U),this._updateTouched(U),this.updateValueAndValidity(U)}getRawValue(){return this._reduceChildren({},(H,U,he)=>(H[he]=U.getRawValue(),H))}_syncPendingControls(){let H=this._reduceChildren(!1,(U,he)=>!!he._syncPendingControls()||U);return H&&this.updateValueAndValidity({onlySelf:!0}),H}_forEachChild(H){Object.keys(this.controls).forEach(U=>{const he=this.controls[U];he&&H(he,U)})}_setUpControls(){this._forEachChild(H=>{H.setParent(this),H._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(H){for(const[U,he]of Object.entries(this.controls))if(this.contains(U)&&H(he))return!0;return!1}_reduceValue(){return this._reduceChildren({},(U,he,Ot)=>((he.enabled||this.disabled)&&(U[Ot]=he.value),U))}_reduceChildren(H,U){let he=H;return this._forEachChild((Ot,$n)=>{he=U(he,Ot,$n)}),he}_allControlsDisabled(){for(const H of Object.keys(this.controls))if(this.controls[H].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(H){return this.controls.hasOwnProperty(H)?this.controls[H]:null}}function Ft(G,H){return[...H.path,G]}function on(G,H){si(G,H),H.valueAccessor.writeValue(G.value),G.disabled&&H.valueAccessor.setDisabledState?.(!0),function bi(G,H){H.valueAccessor.registerOnChange(U=>{G._pendingValue=U,G._pendingChange=!0,G._pendingDirty=!0,"change"===G.updateOn&&ni(G,H)})}(G,H),function Ii(G,H){const U=(he,Ot)=>{H.valueAccessor.writeValue(he),Ot&&H.viewToModelUpdate(he)};G.registerOnChange(U),H._registerOnDestroy(()=>{G._unregisterOnChange(U)})}(G,H),function Xi(G,H){H.valueAccessor.registerOnTouched(()=>{G._pendingTouched=!0,"blur"===G.updateOn&&G._pendingChange&&ni(G,H),"submit"!==G.updateOn&&G.markAsTouched()})}(G,H),function un(G,H){if(H.valueAccessor.setDisabledState){const U=he=>{H.valueAccessor.setDisabledState(he)};G.registerOnDisabledChange(U),H._registerOnDestroy(()=>{G._unregisterOnDisabledChange(U)})}}(G,H)}function Fn(G,H,U=!0){const he=()=>{};H.valueAccessor&&(H.valueAccessor.registerOnChange(he),H.valueAccessor.registerOnTouched(he)),vi(G,H),G&&(H._invokeOnDestroyCallbacks(),G._registerOnCollectionChange(()=>{}))}function Gr(G,H){G.forEach(U=>{U.registerOnValidatorChange&&U.registerOnValidatorChange(H)})}function si(G,H){const U=Vn(G);null!==H.validator?G.setValidators(sr(U,H.validator)):"function"==typeof U&&G.setValidators([U]);const he=Cr(G);null!==H.asyncValidator?G.setAsyncValidators(sr(he,H.asyncValidator)):"function"==typeof he&&G.setAsyncValidators([he]);const Ot=()=>G.updateValueAndValidity();Gr(H._rawValidators,Ot),Gr(H._rawAsyncValidators,Ot)}function vi(G,H){let U=!1;if(null!==G){if(null!==H.validator){const Ot=Vn(G);if(Array.isArray(Ot)&&Ot.length>0){const $n=Ot.filter(Jr=>Jr!==H.validator);$n.length!==Ot.length&&(U=!0,G.setValidators($n))}}if(null!==H.asyncValidator){const Ot=Cr(G);if(Array.isArray(Ot)&&Ot.length>0){const $n=Ot.filter(Jr=>Jr!==H.asyncValidator);$n.length!==Ot.length&&(U=!0,G.setAsyncValidators($n))}}}const he=()=>{};return Gr(H._rawValidators,he),Gr(H._rawAsyncValidators,he),U}function ni(G,H){G._pendingDirty&&G.markAsDirty(),G.setValue(G._pendingValue,{emitModelToViewChange:!1}),H.viewToModelUpdate(G._pendingValue),G._pendingChange=!1}function fi(G,H){si(G,H)}function At(G,H){if(!G.hasOwnProperty("model"))return!1;const U=G.model;return!!U.isFirstChange()||!Object.is(H,U.currentValue)}function ke(G,H){G._syncPendingControls(),H.forEach(U=>{const he=U.control;"submit"===he.updateOn&&he._pendingChange&&(U.viewToModelUpdate(he._pendingValue),he._pendingChange=!1)})}function yt(G,H){if(!H)return null;let U,he,Ot;return Array.isArray(H),H.forEach($n=>{$n.constructor===Ge?U=$n:function oe(G){return Object.getPrototypeOf(G.constructor)===mt}($n)?he=$n:Ot=$n}),Ot||he||U||null}const dr={provide:tr,useExisting:(0,h.Gpc)(()=>Fr)},pi=(()=>Promise.resolve())();let Fr=(()=>{class G extends tr{constructor(U,he){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new Y({},Ar(U),ir(he))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(U){pi.then(()=>{const he=this._findContainer(U.path);U.control=he.registerControl(U.name,U.control),on(U.control,U),U.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(U)})}getControl(U){return this.form.get(U.path)}removeControl(U){pi.then(()=>{const he=this._findContainer(U.path);he&&he.removeControl(U.name),this._directives.delete(U)})}addFormGroup(U){pi.then(()=>{const he=this._findContainer(U.path),Ot=new Y({});fi(Ot,U),he.registerControl(U.name,Ot),Ot.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(U){pi.then(()=>{const he=this._findContainer(U.path);he&&he.removeControl(U.name)})}getFormGroup(U){return this.form.get(U.path)}updateModel(U,he){pi.then(()=>{this.form.get(U.path).setValue(he)})}setValue(U){this.control.setValue(U)}onSubmit(U){return this.submitted=!0,ke(this.form,this._directives),this.ngSubmit.emit(U),"dialog"===U?.target?.method}onReset(){this.resetForm()}resetForm(U){this.form.reset(U),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(U){return U.pop(),U.length?this.form.get(U):this.form}}return G.\u0275fac=function(U){return new(U||G)(h.Y36(qe,10),h.Y36(it,10))},G.\u0275dir=h.lG2({type:G,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(U,he){1&U&&h.NdJ("submit",function($n){return he.onSubmit($n)})("reset",function(){return he.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([dr]),h.qOj]}),G})();function gi(G,H){const U=G.indexOf(H);U>-1&&G.splice(U,1)}function ms(G){return"object"==typeof G&&null!==G&&2===Object.keys(G).length&&"value"in G&&"disabled"in G}const ki=class extends Se{constructor(H=null,U,he){super(De(U),we(he,U)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(H),this._setUpdateStrategy(U),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Bt(U)&&(U.nonNullable||U.initialValueIsDefault)&&(this.defaultValue=ms(H)?H.value:H)}setValue(H,U={}){this.value=this._pendingValue=H,this._onChange.length&&!1!==U.emitModelToViewChange&&this._onChange.forEach(he=>he(this.value,!1!==U.emitViewToModelChange)),this.updateValueAndValidity(U)}patchValue(H,U={}){this.setValue(H,U)}reset(H=this.defaultValue,U={}){this._applyFormState(H),this.markAsPristine(U),this.markAsUntouched(U),this.setValue(this.value,U),this._pendingChange=!1}_updateValue(){}_anyControls(H){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(H){this._onChange.push(H)}_unregisterOnChange(H){gi(this._onChange,H)}registerOnDisabledChange(H){this._onDisabledChange.push(H)}_unregisterOnDisabledChange(H){gi(this._onDisabledChange,H)}_forEachChild(H){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(H){ms(H)?(this.value=this._pendingValue=H.value,H.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=H}},et={provide:nr,useExisting:(0,h.Gpc)(()=>Ut)},bt=(()=>Promise.resolve())();let Ut=(()=>{class G extends nr{constructor(U,he,Ot,$n,Jr){super(),this._changeDetectorRef=Jr,this.control=new ki,this._registered=!1,this.update=new h.vpe,this._parent=U,this._setValidators(he),this._setAsyncValidators(Ot),this.valueAccessor=yt(0,$n)}ngOnChanges(U){if(this._checkForErrors(),!this._registered||"name"in U){if(this._registered&&(this._checkName(),this.formDirective)){const he=U.name.previousValue;this.formDirective.removeControl({name:he,path:this._getPath(he)})}this._setUpControl()}"isDisabled"in U&&this._updateDisabled(U),At(U,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(U){this.viewModel=U,this.update.emit(U)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){on(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(U){bt.then(()=>{this.control.setValue(U,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(U){const he=U.isDisabled.currentValue,Ot=0!==he&&(0,h.D6c)(he);bt.then(()=>{Ot&&!this.control.disabled?this.control.disable():!Ot&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(U){return this._parent?Ft(U,this._parent):[U]}}return G.\u0275fac=function(U){return new(U||G)(h.Y36(tr,9),h.Y36(qe,10),h.Y36(it,10),h.Y36(He,10),h.Y36(h.sBO,8))},G.\u0275dir=h.lG2({type:G,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([et]),h.qOj,h.TTD]}),G})(),sn=(()=>{class G{}return G.\u0275fac=function(U){return new(U||G)},G.\u0275dir=h.lG2({type:G,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),G})(),es=(()=>{class G{}return G.\u0275fac=function(U){return new(U||G)},G.\u0275mod=h.oAB({type:G}),G.\u0275inj=h.cJS({}),G})();const wi=new h.OlP("NgModelWithFormControlWarning"),Ho={provide:nr,useExisting:(0,h.Gpc)(()=>Os)};let Os=(()=>{class G extends nr{constructor(U,he,Ot,$n){super(),this._ngModelWarningConfig=$n,this.update=new h.vpe,this._ngModelWarningSent=!1,this._setValidators(U),this._setAsyncValidators(he),this.valueAccessor=yt(0,Ot)}set isDisabled(U){}ngOnChanges(U){if(this._isControlChanged(U)){const he=U.form.previousValue;he&&Fn(he,this,!1),on(this.form,this),this.form.updateValueAndValidity({emitEvent:!1})}At(U,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Fn(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(U){this.viewModel=U,this.update.emit(U)}_isControlChanged(U){return U.hasOwnProperty("form")}}return G._ngModelWarningSentOnce=!1,G.\u0275fac=function(U){return new(U||G)(h.Y36(qe,10),h.Y36(it,10),h.Y36(He,10),h.Y36(wi,8))},G.\u0275dir=h.lG2({type:G,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[h._Bn([Ho]),h.qOj,h.TTD]}),G})();const Ti={provide:tr,useExisting:(0,h.Gpc)(()=>Lr)};let Lr=(()=>{class G extends tr{constructor(U,he){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(U),this._setAsyncValidators(he)}ngOnChanges(U){this._checkFormPresent(),U.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(vi(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(U){const he=this.form.get(U.path);return on(he,U),he.updateValueAndValidity({emitEvent:!1}),this.directives.push(U),he}getControl(U){return this.form.get(U.path)}removeControl(U){Fn(U.control||null,U,!1),function Zt(G,H){const U=G.indexOf(H);U>-1&&G.splice(U,1)}(this.directives,U)}addFormGroup(U){this._setUpFormContainer(U)}removeFormGroup(U){this._cleanUpFormContainer(U)}getFormGroup(U){return this.form.get(U.path)}addFormArray(U){this._setUpFormContainer(U)}removeFormArray(U){this._cleanUpFormContainer(U)}getFormArray(U){return this.form.get(U.path)}updateModel(U,he){this.form.get(U.path).setValue(he)}onSubmit(U){return this.submitted=!0,ke(this.form,this.directives),this.ngSubmit.emit(U),"dialog"===U?.target?.method}onReset(){this.resetForm()}resetForm(U){this.form.reset(U),this.submitted=!1}_updateDomValue(){this.directives.forEach(U=>{const he=U.control,Ot=this.form.get(U.path);he!==Ot&&(Fn(he||null,U),(G=>G instanceof ki)(Ot)&&(on(Ot,U),U.control=Ot))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(U){const he=this.form.get(U.path);fi(he,U),he.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(U){if(this.form){const he=this.form.get(U.path);he&&function Oi(G,H){return vi(G,H)}(he,U)&&he.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){si(this.form,this),this._oldForm&&vi(this._oldForm,this)}_checkFormPresent(){}}return G.\u0275fac=function(U){return new(U||G)(h.Y36(qe,10),h.Y36(it,10))},G.\u0275dir=h.lG2({type:G,selectors:[["","formGroup",""]],hostBindings:function(U,he){1&U&&h.NdJ("submit",function($n){return he.onSubmit($n)})("reset",function(){return he.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([Ti]),h.qOj,h.TTD]}),G})();const ks={provide:nr,useExisting:(0,h.Gpc)(()=>Jo)};let Jo=(()=>{class G extends nr{constructor(U,he,Ot,$n,Jr){super(),this._ngModelWarningConfig=Jr,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=U,this._setValidators(he),this._setAsyncValidators(Ot),this.valueAccessor=yt(0,$n)}set isDisabled(U){}ngOnChanges(U){this._added||this._setUpControl(),At(U,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(U){this.viewModel=U,this.update.emit(U)}get path(){return Ft(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return G._ngModelWarningSentOnce=!1,G.\u0275fac=function(U){return new(U||G)(h.Y36(tr,13),h.Y36(qe,10),h.Y36(it,10),h.Y36(He,10),h.Y36(wi,8))},G.\u0275dir=h.lG2({type:G,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([ks]),h.qOj,h.TTD]}),G})();function Pi(G){return"number"==typeof G?G:parseInt(G,10)}let Vs=(()=>{class G{constructor(){this._validator=Rt}ngOnChanges(U){if(this.inputName in U){const he=this.normalizeInput(U[this.inputName].currentValue);this._enabled=this.enabled(he),this._validator=this._enabled?this.createValidator(he):Rt,this._onChange&&this._onChange()}}validate(U){return this._validator(U)}registerOnValidatorChange(U){this._onChange=U}enabled(U){return null!=U}}return G.\u0275fac=function(U){return new(U||G)},G.\u0275dir=h.lG2({type:G,features:[h.TTD]}),G})();const _s={provide:qe,useExisting:(0,h.Gpc)(()=>L),multi:!0};let L=(()=>{class G extends Vs{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=h.D6c,this.createValidator=U=>dt}enabled(U){return U}}return G.\u0275fac=function(){let H;return function(he){return(H||(H=h.n5z(G)))(he||G)}}(),G.\u0275dir=h.lG2({type:G,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(U,he){2&U&&h.uIk("required",he._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([_s]),h.qOj]}),G})();const Ze={provide:qe,useExisting:(0,h.Gpc)(()=>Et),multi:!0};let Et=(()=>{class G extends Vs{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=U=>Pi(U),this.createValidator=U=>Qt(U)}}return G.\u0275fac=function(){let H;return function(he){return(H||(H=h.n5z(G)))(he||G)}}(),G.\u0275dir=h.lG2({type:G,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(U,he){2&U&&h.uIk("minlength",he._enabled?he.minlength:null)},inputs:{minlength:"minlength"},features:[h._Bn([Ze]),h.qOj]}),G})();const Vt={provide:qe,useExisting:(0,h.Gpc)(()=>fn),multi:!0};let fn=(()=>{class G extends Vs{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=U=>Pi(U),this.createValidator=U=>Mn(U)}}return G.\u0275fac=function(){let H;return function(he){return(H||(H=h.n5z(G)))(he||G)}}(),G.\u0275dir=h.lG2({type:G,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(U,he){2&U&&h.uIk("maxlength",he._enabled?he.maxlength:null)},inputs:{maxlength:"maxlength"},features:[h._Bn([Vt]),h.qOj]}),G})();const Ln={provide:qe,useExisting:(0,h.Gpc)(()=>jn),multi:!0};let jn=(()=>{class G extends Vs{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=U=>U,this.createValidator=U=>cn(U)}}return G.\u0275fac=function(){let H;return function(he){return(H||(H=h.n5z(G)))(he||G)}}(),G.\u0275dir=h.lG2({type:G,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(U,he){2&U&&h.uIk("pattern",he._enabled?he.pattern:null)},inputs:{pattern:"pattern"},features:[h._Bn([Ln]),h.qOj]}),G})(),Xn=(()=>{class G{}return G.\u0275fac=function(U){return new(U||G)},G.\u0275mod=h.oAB({type:G}),G.\u0275inj=h.cJS({imports:[es]}),G})(),cs=(()=>{class G{}return G.\u0275fac=function(U){return new(U||G)},G.\u0275mod=h.oAB({type:G}),G.\u0275inj=h.cJS({imports:[Xn]}),G})(),qs=(()=>{class G{static withConfig(U){return{ngModule:G,providers:[{provide:wi,useValue:U.warnOnNgModelWithFormControl}]}}}return G.\u0275fac=function(U){return new(U||G)},G.\u0275mod=h.oAB({type:G}),G.\u0275inj=h.cJS({imports:[Xn]}),G})()},9101:(Jt,Qe,k)=>{k.d(Qe,{lW:()=>pe,ot:()=>Pe});var h=k(4650),c=k(3238),S=k(1858);const d=["mat-button",""],de=["*"],fe=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Fe=(0,c.pj)((0,c.Id)((0,c.Kr)(class{constructor(st){this._elementRef=st}})));let pe=(()=>{class st extends Fe{constructor(He,Tt,gt){super(He),this._focusMonitor=Tt,this._animationMode=gt,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const ft of fe)this._hasHostAttributes(ft)&&this._getHostElement().classList.add(ft);He.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(He,Tt){He?this._focusMonitor.focusVia(this._getHostElement(),He,Tt):this._getHostElement().focus(Tt)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...He){return He.some(Tt=>this._getHostElement().hasAttribute(Tt))}}return st.\u0275fac=function(He){return new(He||st)(h.Y36(h.SBq),h.Y36(S.tE),h.Y36(h.QbO,8))},st.\u0275cmp=h.Xpm({type:st,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(He,Tt){if(1&He&&h.Gf(c.wG,5),2&He){let gt;h.iGM(gt=h.CRH())&&(Tt.ripple=gt.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(He,Tt){2&He&&(h.uIk("disabled",Tt.disabled||null),h.ekj("_mat-animation-noopable","NoopAnimations"===Tt._animationMode)("mat-button-disabled",Tt.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[h.qOj],attrs:d,ngContentSelectors:de,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(He,Tt){1&He&&(h.F$t(),h.TgZ(0,"span",0),h.Hsn(1),h.qZA(),h._UZ(2,"span",1)(3,"span",2)),2&He&&(h.xp6(2),h.ekj("mat-button-ripple-round",Tt.isRoundButton||Tt.isIconButton),h.Q6J("matRippleDisabled",Tt._isRippleDisabled())("matRippleCentered",Tt.isIconButton)("matRippleTrigger",Tt._getHostElement()))},dependencies:[c.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),st})(),Pe=(()=>{class st{}return st.\u0275fac=function(He){return new(He||st)},st.\u0275mod=h.oAB({type:st}),st.\u0275inj=h.cJS({imports:[c.si,c.BQ,c.BQ]}),st})()},3238:(Jt,Qe,k)=>{k.d(Qe,{BQ:()=>ft,wG:()=>er,si:()=>Ht,pj:()=>rt,Kr:()=>Pt,Id:()=>Me});var h=k(4650),c=k(1858),S=k(445),de=k(6895),Ae=k(3353),_e=k(1281);const gt=new h.OlP("mat-sanity-checks",{providedIn:"root",factory:function Tt(){return!0}});let ft=(()=>{class zt{constructor(tt,St,Rn){this._sanityChecks=St,this._document=Rn,this._hasDoneGlobalChecks=!1,tt._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(tt){return!(0,Ae.Oy)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[tt])}}return zt.\u0275fac=function(tt){return new(tt||zt)(h.LFG(c.qm),h.LFG(gt,8),h.LFG(de.K0))},zt.\u0275mod=h.oAB({type:zt}),zt.\u0275inj=h.cJS({imports:[S.vT,S.vT]}),zt})();function Me(zt){return class extends zt{constructor(...Ve){super(...Ve),this._disabled=!1}get disabled(){return this._disabled}set disabled(Ve){this._disabled=(0,_e.Ig)(Ve)}}}function rt(zt,Ve){return class extends zt{constructor(...tt){super(...tt),this.defaultColor=Ve,this.color=Ve}get color(){return this._color}set color(tt){const St=tt||this.defaultColor;St!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),St&&this._elementRef.nativeElement.classList.add(`mat-${St}`),this._color=St)}}}function Pt(zt){return class extends zt{constructor(...Ve){super(...Ve),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(Ve){this._disableRipple=(0,_e.Ig)(Ve)}}}class vr{constructor(Ve,tt,St,Rn=!1){this._renderer=Ve,this.element=tt,this.config=St,this._animationForciblyDisabledThroughCss=Rn,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Ar={enterDuration:225,exitDuration:150},ir=(0,Ae.i$)({passive:!0}),sr=["mousedown","touchstart"],Vn=["mouseup","mouseleave","touchend","touchcancel"];class Cr{constructor(Ve,tt,St,Rn){this._target=Ve,this._ngZone=tt,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,Rn.isBrowser&&(this._containerElement=(0,_e.fI)(St))}fadeInRipple(Ve,tt,St={}){const Rn=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),Jn={...Ar,...St.animation};St.centered&&(Ve=Rn.left+Rn.width/2,tt=Rn.top+Rn.height/2);const Je=St.radius||function yr(zt,Ve,tt){const St=Math.max(Math.abs(zt-tt.left),Math.abs(zt-tt.right)),Rn=Math.max(Math.abs(Ve-tt.top),Math.abs(Ve-tt.bottom));return Math.sqrt(St*St+Rn*Rn)}(Ve,tt,Rn),J=Ve-Rn.left,ge=tt-Rn.top,Xe=Jn.enterDuration,_t=document.createElement("div");_t.classList.add("mat-ripple-element"),_t.style.left=J-Je+"px",_t.style.top=ge-Je+"px",_t.style.height=2*Je+"px",_t.style.width=2*Je+"px",null!=St.color&&(_t.style.backgroundColor=St.color),_t.style.transitionDuration=`${Xe}ms`,this._containerElement.appendChild(_t);const ln=window.getComputedStyle(_t),xe=ln.transitionDuration,$e="none"===ln.transitionProperty||"0s"===xe||"0s, 0s"===xe,De=new vr(this,_t,St,$e);_t.style.transform="scale3d(1, 1, 1)",De.state=0,St.persistent||(this._mostRecentTransientRipple=De);let ie=null;return!$e&&(Xe||Jn.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const we=()=>this._finishRippleTransition(De),ut=()=>this._destroyRipple(De);_t.addEventListener("transitionend",we),_t.addEventListener("transitioncancel",ut),ie={onTransitionEnd:we,onTransitionCancel:ut}}),this._activeRipples.set(De,ie),($e||!Xe)&&this._finishRippleTransition(De),De}fadeOutRipple(Ve){if(2===Ve.state||3===Ve.state)return;const tt=Ve.element,St={...Ar,...Ve.config.animation};tt.style.transitionDuration=`${St.exitDuration}ms`,tt.style.opacity="0",Ve.state=2,(Ve._animationForciblyDisabledThroughCss||!St.exitDuration)&&this._finishRippleTransition(Ve)}fadeOutAll(){this._getActiveRipples().forEach(Ve=>Ve.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(Ve=>{Ve.config.persistent||Ve.fadeOut()})}setupTriggerEvents(Ve){const tt=(0,_e.fI)(Ve);!tt||tt===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=tt,this._registerEvents(sr))}handleEvent(Ve){"mousedown"===Ve.type?this._onMousedown(Ve):"touchstart"===Ve.type?this._onTouchStart(Ve):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Vn),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(Ve){0===Ve.state?this._startFadeOutTransition(Ve):2===Ve.state&&this._destroyRipple(Ve)}_startFadeOutTransition(Ve){const tt=Ve===this._mostRecentTransientRipple,{persistent:St}=Ve.config;Ve.state=1,!St&&(!tt||!this._isPointerDown)&&Ve.fadeOut()}_destroyRipple(Ve){const tt=this._activeRipples.get(Ve)??null;this._activeRipples.delete(Ve),this._activeRipples.size||(this._containerRect=null),Ve===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),Ve.state=3,null!==tt&&(Ve.element.removeEventListener("transitionend",tt.onTransitionEnd),Ve.element.removeEventListener("transitioncancel",tt.onTransitionCancel)),Ve.element.remove()}_onMousedown(Ve){const tt=(0,c.X6)(Ve),St=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!tt&&!St&&(this._isPointerDown=!0,this.fadeInRipple(Ve.clientX,Ve.clientY,this._target.rippleConfig))}_onTouchStart(Ve){if(!this._target.rippleDisabled&&!(0,c.yG)(Ve)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const tt=Ve.changedTouches;for(let St=0;St<tt.length;St++)this.fadeInRipple(tt[St].clientX,tt[St].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(Ve=>{!Ve.config.persistent&&(1===Ve.state||Ve.config.terminateOnPointerUp&&0===Ve.state)&&Ve.fadeOut()}))}_registerEvents(Ve){this._ngZone.runOutsideAngular(()=>{Ve.forEach(tt=>{this._triggerElement.addEventListener(tt,this,ir)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(sr.forEach(Ve=>{this._triggerElement.removeEventListener(Ve,this,ir)}),this._pointerUpEventsRegistered&&Vn.forEach(Ve=>{this._triggerElement.removeEventListener(Ve,this,ir)}))}}const Rr=new h.OlP("mat-ripple-global-options");let er=(()=>{class zt{constructor(tt,St,Rn,Jn,Je){this._elementRef=tt,this._animationMode=Je,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=Jn||{},this._rippleRenderer=new Cr(this,St,tt,Rn)}get disabled(){return this._disabled}set disabled(tt){tt&&this.fadeOutAllNonPersistent(),this._disabled=tt,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(tt){this._trigger=tt,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(tt,St=0,Rn){return"number"==typeof tt?this._rippleRenderer.fadeInRipple(tt,St,{...this.rippleConfig,...Rn}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...tt})}}return zt.\u0275fac=function(tt){return new(tt||zt)(h.Y36(h.SBq),h.Y36(h.R0b),h.Y36(Ae.t4),h.Y36(Rr,8),h.Y36(h.QbO,8))},zt.\u0275dir=h.lG2({type:zt,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(tt,St){2&tt&&h.ekj("mat-ripple-unbounded",St.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),zt})(),Ht=(()=>{class zt{}return zt.\u0275fac=function(tt){return new(tt||zt)},zt.\u0275mod=h.oAB({type:zt}),zt.\u0275inj=h.cJS({imports:[ft,ft]}),zt})()},5916:(Jt,Qe,k)=>{k.d(Qe,{uw:()=>Pi,H8:()=>Hr,ZT:()=>Vs,xY:()=>$i,Is:()=>_s,uh:()=>ho});var h=k(1858),c=k(1281),S=k(4650),d=k(7579),de=k(9646),Ae=k(9751),_e=k(8421),fe=k(5577),Fe=k(1144),pe=k(576),be=k(3268);const Pe=["addListener","removeListener"],st=["addEventListener","removeEventListener"],mt=["on","off"];function He(ve,L,P,Q){if((0,pe.m)(P)&&(Q=P,P=void 0),Q)return He(ve,L,P).pipe((0,be.Z)(Q));const[ue,Ze]=function Ye(ve){return(0,pe.m)(ve.addEventListener)&&(0,pe.m)(ve.removeEventListener)}(ve)?st.map(Et=>Vt=>ve[Et](L,Vt,P)):function gt(ve){return(0,pe.m)(ve.addListener)&&(0,pe.m)(ve.removeListener)}(ve)?Pe.map(Tt(ve,L)):function ft(ve){return(0,pe.m)(ve.on)&&(0,pe.m)(ve.off)}(ve)?mt.map(Tt(ve,L)):[];if(!ue&&(0,Fe.z)(ve))return(0,fe.z)(Et=>He(Et,L,P))((0,_e.Xf)(ve));if(!ue)throw new TypeError("Invalid event target");return new Ae.y(Et=>{const Vt=(...fn)=>Et.next(1<fn.length?fn:fn[0]);return ue(Vt),()=>Ze(Vt)})}function Tt(ve,L){return P=>Q=>ve[P](L,Q)}var Gt=k(4408),Ge=k(727);const Me={schedule(ve){let L=requestAnimationFrame,P=cancelAnimationFrame;const{delegate:Q}=Me;Q&&(L=Q.requestAnimationFrame,P=Q.cancelAnimationFrame);const ue=L(Ze=>{P=void 0,ve(Ze)});return new Ge.w0(()=>P?.(ue))},requestAnimationFrame(...ve){const{delegate:L}=Me;return(L?.requestAnimationFrame||requestAnimationFrame)(...ve)},cancelAnimationFrame(...ve){const{delegate:L}=Me;return(L?.cancelAnimationFrame||cancelAnimationFrame)(...ve)},delegate:void 0};var Pt=k(7565);new class qe extends Pt.v{flush(L){this._active=!0;const P=this._scheduled;this._scheduled=void 0;const{actions:Q}=this;let ue;L=L||Q.shift();do{if(ue=L.execute(L.state,L.delay))break}while((L=Q[0])&&L.id===P&&Q.shift());if(this._active=!1,ue){for(;(L=Q[0])&&L.id===P&&Q.shift();)L.unsubscribe();throw ue}}}(class rt extends Gt.o{constructor(L,P){super(L,P),this.scheduler=L,this.work=P}requestAsyncId(L,P,Q=0){return null!==Q&&Q>0?super.requestAsyncId(L,P,Q):(L.actions.push(this),L._scheduled||(L._scheduled=Me.requestAnimationFrame(()=>L.flush(void 0))))}recycleAsyncId(L,P,Q=0){var ue;if(null!=Q?Q>0:this.delay>0)return super.recycleAsyncId(L,P,Q);const{actions:Ze}=L;null!=P&&(null===(ue=Ze[Ze.length-1])||void 0===ue?void 0:ue.id)!==P&&(Me.cancelAnimationFrame(P),L._scheduled=void 0)}});let je,We=1;const pt={};function dt(ve){return ve in pt&&(delete pt[ve],!0)}const Lt={setImmediate(ve){const L=We++;return pt[L]=!0,je||(je=Promise.resolve()),je.then(()=>dt(L)&&ve()),L},clearImmediate(ve){dt(ve)}},{setImmediate:Qt,clearImmediate:Mn}=Lt,cn={setImmediate(...ve){const{delegate:L}=cn;return(L?.setImmediate||Qt)(...ve)},clearImmediate(ve){const{delegate:L}=cn;return(L?.clearImmediate||Mn)(ve)},delegate:void 0};new class Pn extends Pt.v{flush(L){this._active=!0;const P=this._scheduled;this._scheduled=void 0;const{actions:Q}=this;let ue;L=L||Q.shift();do{if(ue=L.execute(L.state,L.delay))break}while((L=Q[0])&&L.id===P&&Q.shift());if(this._active=!1,ue){for(;(L=Q[0])&&L.id===P&&Q.shift();)L.unsubscribe();throw ue}}}(class Rt extends Gt.o{constructor(L,P){super(L,P),this.scheduler=L,this.work=P}requestAsyncId(L,P,Q=0){return null!==Q&&Q>0?super.requestAsyncId(L,P,Q):(L.actions.push(this),L._scheduled||(L._scheduled=cn.setImmediate(L.flush.bind(L,void 0))))}recycleAsyncId(L,P,Q=0){var ue;if(null!=Q?Q>0:this.delay>0)return super.recycleAsyncId(L,P,Q);const{actions:Ze}=L;null!=P&&(null===(ue=Ze[Ze.length-1])||void 0===ue?void 0:ue.id)!==P&&(cn.clearImmediate(P),L._scheduled=void 0)}});var In=k(4986),Wt=k(4482),dn=k(5403),Ar=k(2805);function br(ve,L=In.z){return function vr(ve){return(0,Wt.e)((L,P)=>{let Q=!1,ue=null,Ze=null,Et=!1;const Vt=()=>{if(Ze?.unsubscribe(),Ze=null,Q){Q=!1;const Ln=ue;ue=null,P.next(Ln)}Et&&P.complete()},fn=()=>{Ze=null,Et&&P.complete()};L.subscribe((0,dn.x)(P,Ln=>{Q=!0,ue=Ln,Ze||(0,_e.Xf)(ve(Ln)).subscribe(Ze=(0,dn.x)(P,Vt,fn))},()=>{Et=!0,(!Q||!Ze||Ze.closed)&&P.complete()}))})}(()=>(0,Ar.H)(ve,L))}var ir=k(9300),sr=k(3353),Vn=k(6895),Cr=k(445);let Nr=(()=>{class ve{constructor(P,Q,ue){this._ngZone=P,this._platform=Q,this._scrolled=new d.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=ue}register(P){this.scrollContainers.has(P)||this.scrollContainers.set(P,P.elementScrolled().subscribe(()=>this._scrolled.next(P)))}deregister(P){const Q=this.scrollContainers.get(P);Q&&(Q.unsubscribe(),this.scrollContainers.delete(P))}scrolled(P=20){return this._platform.isBrowser?new Ae.y(Q=>{this._globalSubscription||this._addGlobalListener();const ue=P>0?this._scrolled.pipe(br(P)).subscribe(Q):this._scrolled.subscribe(Q);return this._scrolledCount++,()=>{ue.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,de.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((P,Q)=>this.deregister(Q)),this._scrolled.complete()}ancestorScrolled(P,Q){const ue=this.getAncestorScrollContainers(P);return this.scrolled(Q).pipe((0,ir.h)(Ze=>!Ze||ue.indexOf(Ze)>-1))}getAncestorScrollContainers(P){const Q=[];return this.scrollContainers.forEach((ue,Ze)=>{this._scrollableContainsElement(Ze,P)&&Q.push(Ze)}),Q}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(P,Q){let ue=(0,c.fI)(Q),Ze=P.getElementRef().nativeElement;do{if(ue==Ze)return!0}while(ue=ue.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>He(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return ve.\u0275fac=function(P){return new(P||ve)(S.LFG(S.R0b),S.LFG(sr.t4),S.LFG(Vn.K0,8))},ve.\u0275prov=S.Yz7({token:ve,factory:ve.\u0275fac,providedIn:"root"}),ve})(),_r=(()=>{class ve{constructor(P,Q,ue){this._platform=P,this._change=new d.x,this._changeListener=Ze=>{this._change.next(Ze)},this._document=ue,Q.runOutsideAngular(()=>{if(P.isBrowser){const Ze=this._getWindow();Ze.addEventListener("resize",this._changeListener),Ze.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const P=this._getWindow();P.removeEventListener("resize",this._changeListener),P.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const P={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),P}getViewportRect(){const P=this.getViewportScrollPosition(),{width:Q,height:ue}=this.getViewportSize();return{top:P.top,left:P.left,bottom:P.top+ue,right:P.left+Q,height:ue,width:Q}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const P=this._document,Q=this._getWindow(),ue=P.documentElement,Ze=ue.getBoundingClientRect();return{top:-Ze.top||P.body.scrollTop||Q.scrollY||ue.scrollTop||0,left:-Ze.left||P.body.scrollLeft||Q.scrollX||ue.scrollLeft||0}}change(P=20){return P>0?this._change.pipe(br(P)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const P=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:P.innerWidth,height:P.innerHeight}:{width:0,height:0}}}return ve.\u0275fac=function(P){return new(P||ve)(S.LFG(sr.t4),S.LFG(S.R0b),S.LFG(Vn.K0,8))},ve.\u0275prov=S.Yz7({token:ve,factory:ve.\u0275fac,providedIn:"root"}),ve})(),Ve=(()=>{class ve{}return ve.\u0275fac=function(P){return new(P||ve)},ve.\u0275mod=S.oAB({type:ve}),ve.\u0275inj=S.cJS({}),ve})(),tt=(()=>{class ve{}return ve.\u0275fac=function(P){return new(P||ve)},ve.\u0275mod=S.oAB({type:ve}),ve.\u0275inj=S.cJS({imports:[Cr.vT,Ve,Cr.vT,Ve]}),ve})();class Xe{attach(L){return this._attachedHost=L,L.attach(this)}detach(){let L=this._attachedHost;null!=L&&(this._attachedHost=null,L.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(L){this._attachedHost=L}}class _t extends Xe{constructor(L,P,Q,ue){super(),this.component=L,this.viewContainerRef=P,this.injector=Q,this.componentFactoryResolver=ue}}class ln extends Xe{constructor(L,P,Q,ue){super(),this.templateRef=L,this.viewContainerRef=P,this.context=Q,this.injector=ue}get origin(){return this.templateRef.elementRef}attach(L,P=this.context){return this.context=P,super.attach(L)}detach(){return this.context=void 0,super.detach()}}class Ne extends Xe{constructor(L){super(),this.element=L instanceof S.SBq?L.nativeElement:L}}class xe{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(L){return L instanceof _t?(this._attachedPortal=L,this.attachComponentPortal(L)):L instanceof ln?(this._attachedPortal=L,this.attachTemplatePortal(L)):this.attachDomPortal&&L instanceof Ne?(this._attachedPortal=L,this.attachDomPortal(L)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(L){this._disposeFn=L}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class De extends xe{constructor(L,P,Q,ue,Ze){super(),this.outletElement=L,this._componentFactoryResolver=P,this._appRef=Q,this._defaultInjector=ue,this.attachDomPortal=Et=>{const Vt=Et.element,fn=this._document.createComment("dom-portal");Vt.parentNode.insertBefore(fn,Vt),this.outletElement.appendChild(Vt),this._attachedPortal=Et,super.setDisposeFn(()=>{fn.parentNode&&fn.parentNode.replaceChild(Vt,fn)})},this._document=Ze}attachComponentPortal(L){const Q=(L.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(L.component);let ue;return L.viewContainerRef?(ue=L.viewContainerRef.createComponent(Q,L.viewContainerRef.length,L.injector||L.viewContainerRef.injector),this.setDisposeFn(()=>ue.destroy())):(ue=Q.create(L.injector||this._defaultInjector||S.zs3.NULL),this._appRef.attachView(ue.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(ue.hostView),ue.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(ue)),this._attachedPortal=L,ue}attachTemplatePortal(L){let P=L.viewContainerRef,Q=P.createEmbeddedView(L.templateRef,L.context,{injector:L.injector});return Q.rootNodes.forEach(ue=>this.outletElement.appendChild(ue)),Q.detectChanges(),this.setDisposeFn(()=>{let ue=P.indexOf(Q);-1!==ue&&P.remove(ue)}),this._attachedPortal=L,Q}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(L){return L.hostView.rootNodes[0]}}let Bt=(()=>{class ve extends xe{constructor(P,Q,ue){super(),this._componentFactoryResolver=P,this._viewContainerRef=Q,this._isInitialized=!1,this.attached=new S.vpe,this.attachDomPortal=Ze=>{const Et=Ze.element,Vt=this._document.createComment("dom-portal");Ze.setAttachedHost(this),Et.parentNode.insertBefore(Vt,Et),this._getRootNode().appendChild(Et),this._attachedPortal=Ze,super.setDisposeFn(()=>{Vt.parentNode&&Vt.parentNode.replaceChild(Et,Vt)})},this._document=ue}get portal(){return this._attachedPortal}set portal(P){this.hasAttached()&&!P&&!this._isInitialized||(this.hasAttached()&&super.detach(),P&&super.attach(P),this._attachedPortal=P||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(P){P.setAttachedHost(this);const Q=null!=P.viewContainerRef?P.viewContainerRef:this._viewContainerRef,Ze=(P.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(P.component),Et=Q.createComponent(Ze,Q.length,P.injector||Q.injector);return Q!==this._viewContainerRef&&this._getRootNode().appendChild(Et.hostView.rootNodes[0]),super.setDisposeFn(()=>Et.destroy()),this._attachedPortal=P,this._attachedRef=Et,this.attached.emit(Et),Et}attachTemplatePortal(P){P.setAttachedHost(this);const Q=this._viewContainerRef.createEmbeddedView(P.templateRef,P.context,{injector:P.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=P,this._attachedRef=Q,this.attached.emit(Q),Q}_getRootNode(){const P=this._viewContainerRef.element.nativeElement;return P.nodeType===P.ELEMENT_NODE?P:P.parentNode}}return ve.\u0275fac=function(P){return new(P||ve)(S.Y36(S._Vd),S.Y36(S.s_b),S.Y36(Vn.K0))},ve.\u0275dir=S.lG2({type:ve,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[S.qOj]}),ve})(),hn=(()=>{class ve{}return ve.\u0275fac=function(P){return new(P||ve)},ve.\u0275mod=S.oAB({type:ve}),ve.\u0275inj=S.cJS({}),ve})();var Y=k(6451),W=k(5698),te=k(2722);const me=(0,sr.Mq)();class Ke{constructor(L,P){this._viewportRuler=L,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=P}attach(){}enable(){if(this._canBeEnabled()){const L=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=L.style.left||"",this._previousHTMLStyles.top=L.style.top||"",L.style.left=(0,c.HM)(-this._previousScrollPosition.left),L.style.top=(0,c.HM)(-this._previousScrollPosition.top),L.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const L=this._document.documentElement,Q=L.style,ue=this._document.body.style,Ze=Q.scrollBehavior||"",Et=ue.scrollBehavior||"";this._isEnabled=!1,Q.left=this._previousHTMLStyles.left,Q.top=this._previousHTMLStyles.top,L.classList.remove("cdk-global-scrollblock"),me&&(Q.scrollBehavior=ue.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),me&&(Q.scrollBehavior=Ze,ue.scrollBehavior=Et)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const P=this._document.body,Q=this._viewportRuler.getViewportSize();return P.scrollHeight>Q.height||P.scrollWidth>Q.width}}class on{constructor(L,P,Q,ue){this._scrollDispatcher=L,this._ngZone=P,this._viewportRuler=Q,this._config=ue,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(L){this._overlayRef=L}enable(){if(this._scrollSubscription)return;const L=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=L.subscribe(()=>{const P=this._viewportRuler.getViewportScrollPosition().top;Math.abs(P-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=L.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Fn{enable(){}disable(){}attach(){}}function Gr(ve,L){return L.some(P=>ve.bottom<P.top||ve.top>P.bottom||ve.right<P.left||ve.left>P.right)}function un(ve,L){return L.some(P=>ve.top<P.top||ve.bottom>P.bottom||ve.left<P.left||ve.right>P.right)}class si{constructor(L,P,Q,ue){this._scrollDispatcher=L,this._viewportRuler=P,this._ngZone=Q,this._config=ue,this._scrollSubscription=null}attach(L){this._overlayRef=L}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const P=this._overlayRef.overlayElement.getBoundingClientRect(),{width:Q,height:ue}=this._viewportRuler.getViewportSize();Gr(P,[{width:Q,height:ue,bottom:ue,right:Q,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let vi=(()=>{class ve{constructor(P,Q,ue,Ze){this._scrollDispatcher=P,this._viewportRuler=Q,this._ngZone=ue,this.noop=()=>new Fn,this.close=Et=>new on(this._scrollDispatcher,this._ngZone,this._viewportRuler,Et),this.block=()=>new Ke(this._viewportRuler,this._document),this.reposition=Et=>new si(this._scrollDispatcher,this._viewportRuler,this._ngZone,Et),this._document=Ze}}return ve.\u0275fac=function(P){return new(P||ve)(S.LFG(Nr),S.LFG(_r),S.LFG(S.R0b),S.LFG(Vn.K0))},ve.\u0275prov=S.Yz7({token:ve,factory:ve.\u0275fac,providedIn:"root"}),ve})();class bi{constructor(L){if(this.scrollStrategy=new Fn,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,L){const P=Object.keys(L);for(const Q of P)void 0!==L[Q]&&(this[Q]=L[Q])}}}class Ii{constructor(L,P){this.connectionPair=L,this.scrollableViewProperties=P}}let ri=(()=>{class ve{constructor(P){this._attachedOverlays=[],this._document=P}ngOnDestroy(){this.detach()}add(P){this.remove(P),this._attachedOverlays.push(P)}remove(P){const Q=this._attachedOverlays.indexOf(P);Q>-1&&this._attachedOverlays.splice(Q,1),0===this._attachedOverlays.length&&this.detach()}}return ve.\u0275fac=function(P){return new(P||ve)(S.LFG(Vn.K0))},ve.\u0275prov=S.Yz7({token:ve,factory:ve.\u0275fac,providedIn:"root"}),ve})(),ss=(()=>{class ve extends ri{constructor(P,Q){super(P),this._ngZone=Q,this._keydownListener=ue=>{const Ze=this._attachedOverlays;for(let Et=Ze.length-1;Et>-1;Et--)if(Ze[Et]._keydownEvents.observers.length>0){const Vt=Ze[Et]._keydownEvents;this._ngZone?this._ngZone.run(()=>Vt.next(ue)):Vt.next(ue);break}}}add(P){super.add(P),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return ve.\u0275fac=function(P){return new(P||ve)(S.LFG(Vn.K0),S.LFG(S.R0b,8))},ve.\u0275prov=S.Yz7({token:ve,factory:ve.\u0275fac,providedIn:"root"}),ve})(),Tr=(()=>{class ve extends ri{constructor(P,Q,ue){super(P),this._platform=Q,this._ngZone=ue,this._cursorStyleIsSet=!1,this._pointerDownListener=Ze=>{this._pointerDownEventTarget=(0,sr.sA)(Ze)},this._clickListener=Ze=>{const Et=(0,sr.sA)(Ze),Vt="click"===Ze.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:Et;this._pointerDownEventTarget=null;const fn=this._attachedOverlays.slice();for(let Ln=fn.length-1;Ln>-1;Ln--){const jn=fn[Ln];if(jn._outsidePointerEvents.observers.length<1||!jn.hasAttached())continue;if(jn.overlayElement.contains(Et)||jn.overlayElement.contains(Vt))break;const zn=jn._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>zn.next(Ze)):zn.next(Ze)}}}add(P){if(super.add(P),!this._isAttached){const Q=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(Q)):this._addEventListeners(Q),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=Q.style.cursor,Q.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const P=this._document.body;P.removeEventListener("pointerdown",this._pointerDownListener,!0),P.removeEventListener("click",this._clickListener,!0),P.removeEventListener("auxclick",this._clickListener,!0),P.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(P.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(P){P.addEventListener("pointerdown",this._pointerDownListener,!0),P.addEventListener("click",this._clickListener,!0),P.addEventListener("auxclick",this._clickListener,!0),P.addEventListener("contextmenu",this._clickListener,!0)}}return ve.\u0275fac=function(P){return new(P||ve)(S.LFG(Vn.K0),S.LFG(sr.t4),S.LFG(S.R0b,8))},ve.\u0275prov=S.Yz7({token:ve,factory:ve.\u0275fac,providedIn:"root"}),ve})(),Ie=(()=>{class ve{constructor(P,Q){this._platform=Q,this._document=P}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const P="cdk-overlay-container";if(this._platform.isBrowser||(0,sr.Oy)()){const ue=this._document.querySelectorAll(`.${P}[platform="server"], .${P}[platform="test"]`);for(let Ze=0;Ze<ue.length;Ze++)ue[Ze].remove()}const Q=this._document.createElement("div");Q.classList.add(P),(0,sr.Oy)()?Q.setAttribute("platform","test"):this._platform.isBrowser||Q.setAttribute("platform","server"),this._document.body.appendChild(Q),this._containerElement=Q}}return ve.\u0275fac=function(P){return new(P||ve)(S.LFG(Vn.K0),S.LFG(sr.t4))},ve.\u0275prov=S.Yz7({token:ve,factory:ve.\u0275fac,providedIn:"root"}),ve})();class At{constructor(L,P,Q,ue,Ze,Et,Vt,fn,Ln,jn=!1){this._portalOutlet=L,this._host=P,this._pane=Q,this._config=ue,this._ngZone=Ze,this._keyboardDispatcher=Et,this._document=Vt,this._location=fn,this._outsideClickDispatcher=Ln,this._animationsDisabled=jn,this._backdropElement=null,this._backdropClick=new d.x,this._attachments=new d.x,this._detachments=new d.x,this._locationChanges=Ge.w0.EMPTY,this._backdropClickHandler=zn=>this._backdropClick.next(zn),this._backdropTransitionendHandler=zn=>{this._disposeBackdrop(zn.target)},this._keydownEvents=new d.x,this._outsidePointerEvents=new d.x,ue.scrollStrategy&&(this._scrollStrategy=ue.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=ue.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(L){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const P=this._portalOutlet.attach(L);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,W.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof P?.onDestroy&&P.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),P}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const L=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),L}dispose(){const L=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,L&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(L){L!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=L,this.hasAttached()&&(L.attach(this),this.updatePosition()))}updateSize(L){this._config={...this._config,...L},this._updateElementSize()}setDirection(L){this._config={...this._config,direction:L},this._updateElementDirection()}addPanelClass(L){this._pane&&this._toggleClasses(this._pane,L,!0)}removePanelClass(L){this._pane&&this._toggleClasses(this._pane,L,!1)}getDirection(){const L=this._config.direction;return L?"string"==typeof L?L:L.value:"ltr"}updateScrollStrategy(L){L!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=L,this.hasAttached()&&(L.attach(this),L.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const L=this._pane.style;L.width=(0,c.HM)(this._config.width),L.height=(0,c.HM)(this._config.height),L.minWidth=(0,c.HM)(this._config.minWidth),L.minHeight=(0,c.HM)(this._config.minHeight),L.maxWidth=(0,c.HM)(this._config.maxWidth),L.maxHeight=(0,c.HM)(this._config.maxHeight)}_togglePointerEvents(L){this._pane.style.pointerEvents=L?"":"none"}_attachBackdrop(){const L="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(L)})}):this._backdropElement.classList.add(L)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const L=this._backdropElement;if(L){if(this._animationsDisabled)return void this._disposeBackdrop(L);L.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{L.addEventListener("transitionend",this._backdropTransitionendHandler)}),L.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(L)},500))}}_toggleClasses(L,P,Q){const ue=(0,c.Eq)(P||[]).filter(Ze=>!!Ze);ue.length&&(Q?L.classList.add(...ue):L.classList.remove(...ue))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const L=this._ngZone.onStable.pipe((0,te.R)((0,Y.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),L.unsubscribe())})})}_disposeScrollStrategy(){const L=this._scrollStrategy;L&&(L.disable(),L.detach&&L.detach())}_disposeBackdrop(L){L&&(L.removeEventListener("click",this._backdropClickHandler),L.removeEventListener("transitionend",this._backdropTransitionendHandler),L.remove(),this._backdropElement===L&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const oe="cdk-overlay-connected-position-bounding-box",ke=/([A-Za-z%]+)$/;class yt{constructor(L,P,Q,ue,Ze){this._viewportRuler=P,this._document=Q,this._platform=ue,this._overlayContainer=Ze,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new d.x,this._resizeSubscription=Ge.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(L)}get positions(){return this._preferredPositions}attach(L){this._validatePositions(),L.hostElement.classList.add(oe),this._overlayRef=L,this._boundingBox=L.hostElement,this._pane=L.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const L=this._originRect,P=this._overlayRect,Q=this._viewportRect,ue=this._containerRect,Ze=[];let Et;for(let Vt of this._preferredPositions){let fn=this._getOriginPoint(L,ue,Vt),Ln=this._getOverlayPoint(fn,P,Vt),jn=this._getOverlayFit(Ln,P,Q,Vt);if(jn.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(Vt,fn);this._canFitWithFlexibleDimensions(jn,Ln,Q)?Ze.push({position:Vt,origin:fn,overlayRect:P,boundingBoxRect:this._calculateBoundingBoxRect(fn,Vt)}):(!Et||Et.overlayFit.visibleArea<jn.visibleArea)&&(Et={overlayFit:jn,overlayPoint:Ln,originPoint:fn,position:Vt,overlayRect:P})}if(Ze.length){let Vt=null,fn=-1;for(const Ln of Ze){const jn=Ln.boundingBoxRect.width*Ln.boundingBoxRect.height*(Ln.position.weight||1);jn>fn&&(fn=jn,Vt=Ln)}return this._isPushed=!1,void this._applyPosition(Vt.position,Vt.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(Et.position,Et.originPoint);this._applyPosition(Et.position,Et.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Zt(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(oe),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const L=this._lastPosition;if(L){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const P=this._getOriginPoint(this._originRect,this._containerRect,L);this._applyPosition(L,P)}else this.apply()}withScrollableContainers(L){return this._scrollables=L,this}withPositions(L){return this._preferredPositions=L,-1===L.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(L){return this._viewportMargin=L,this}withFlexibleDimensions(L=!0){return this._hasFlexibleDimensions=L,this}withGrowAfterOpen(L=!0){return this._growAfterOpen=L,this}withPush(L=!0){return this._canPush=L,this}withLockedPosition(L=!0){return this._positionLocked=L,this}setOrigin(L){return this._origin=L,this}withDefaultOffsetX(L){return this._offsetX=L,this}withDefaultOffsetY(L){return this._offsetY=L,this}withTransformOriginOn(L){return this._transformOriginSelector=L,this}_getOriginPoint(L,P,Q){let ue,Ze;if("center"==Q.originX)ue=L.left+L.width/2;else{const Et=this._isRtl()?L.right:L.left,Vt=this._isRtl()?L.left:L.right;ue="start"==Q.originX?Et:Vt}return P.left<0&&(ue-=P.left),Ze="center"==Q.originY?L.top+L.height/2:"top"==Q.originY?L.top:L.bottom,P.top<0&&(Ze-=P.top),{x:ue,y:Ze}}_getOverlayPoint(L,P,Q){let ue,Ze;return ue="center"==Q.overlayX?-P.width/2:"start"===Q.overlayX?this._isRtl()?-P.width:0:this._isRtl()?0:-P.width,Ze="center"==Q.overlayY?-P.height/2:"top"==Q.overlayY?0:-P.height,{x:L.x+ue,y:L.y+Ze}}_getOverlayFit(L,P,Q,ue){const Ze=dr(P);let{x:Et,y:Vt}=L,fn=this._getOffset(ue,"x"),Ln=this._getOffset(ue,"y");fn&&(Et+=fn),Ln&&(Vt+=Ln);let us=0-Vt,jt=Vt+Ze.height-Q.height,Xn=this._subtractOverflows(Ze.width,0-Et,Et+Ze.width-Q.width),cs=this._subtractOverflows(Ze.height,us,jt),qs=Xn*cs;return{visibleArea:qs,isCompletelyWithinViewport:Ze.width*Ze.height===qs,fitsInViewportVertically:cs===Ze.height,fitsInViewportHorizontally:Xn==Ze.width}}_canFitWithFlexibleDimensions(L,P,Q){if(this._hasFlexibleDimensions){const ue=Q.bottom-P.y,Ze=Q.right-P.x,Et=Xt(this._overlayRef.getConfig().minHeight),Vt=Xt(this._overlayRef.getConfig().minWidth),Ln=L.fitsInViewportHorizontally||null!=Vt&&Vt<=Ze;return(L.fitsInViewportVertically||null!=Et&&Et<=ue)&&Ln}return!1}_pushOverlayOnScreen(L,P,Q){if(this._previousPushAmount&&this._positionLocked)return{x:L.x+this._previousPushAmount.x,y:L.y+this._previousPushAmount.y};const ue=dr(P),Ze=this._viewportRect,Et=Math.max(L.x+ue.width-Ze.width,0),Vt=Math.max(L.y+ue.height-Ze.height,0),fn=Math.max(Ze.top-Q.top-L.y,0),Ln=Math.max(Ze.left-Q.left-L.x,0);let jn=0,zn=0;return jn=ue.width<=Ze.width?Ln||-Et:L.x<this._viewportMargin?Ze.left-Q.left-L.x:0,zn=ue.height<=Ze.height?fn||-Vt:L.y<this._viewportMargin?Ze.top-Q.top-L.y:0,this._previousPushAmount={x:jn,y:zn},{x:L.x+jn,y:L.y+zn}}_applyPosition(L,P){if(this._setTransformOrigin(L),this._setOverlayElementStyles(P,L),this._setBoundingBoxStyles(P,L),L.panelClass&&this._addPanelClasses(L.panelClass),this._lastPosition=L,this._positionChanges.observers.length){const Q=this._getScrollVisibility(),ue=new Ii(L,Q);this._positionChanges.next(ue)}this._isInitialRender=!1}_setTransformOrigin(L){if(!this._transformOriginSelector)return;const P=this._boundingBox.querySelectorAll(this._transformOriginSelector);let Q,ue=L.overlayY;Q="center"===L.overlayX?"center":this._isRtl()?"start"===L.overlayX?"right":"left":"start"===L.overlayX?"left":"right";for(let Ze=0;Ze<P.length;Ze++)P[Ze].style.transformOrigin=`${Q} ${ue}`}_calculateBoundingBoxRect(L,P){const Q=this._viewportRect,ue=this._isRtl();let Ze,Et,Vt,jn,zn,us;if("top"===P.overlayY)Et=L.y,Ze=Q.height-Et+this._viewportMargin;else if("bottom"===P.overlayY)Vt=Q.height-L.y+2*this._viewportMargin,Ze=Q.height-Vt+this._viewportMargin;else{const jt=Math.min(Q.bottom-L.y+Q.top,L.y),Xn=this._lastBoundingBoxSize.height;Ze=2*jt,Et=L.y-jt,Ze>Xn&&!this._isInitialRender&&!this._growAfterOpen&&(Et=L.y-Xn/2)}if("end"===P.overlayX&&!ue||"start"===P.overlayX&&ue)us=Q.width-L.x+this._viewportMargin,jn=L.x-this._viewportMargin;else if("start"===P.overlayX&&!ue||"end"===P.overlayX&&ue)zn=L.x,jn=Q.right-L.x;else{const jt=Math.min(Q.right-L.x+Q.left,L.x),Xn=this._lastBoundingBoxSize.width;jn=2*jt,zn=L.x-jt,jn>Xn&&!this._isInitialRender&&!this._growAfterOpen&&(zn=L.x-Xn/2)}return{top:Et,left:zn,bottom:Vt,right:us,width:jn,height:Ze}}_setBoundingBoxStyles(L,P){const Q=this._calculateBoundingBoxRect(L,P);!this._isInitialRender&&!this._growAfterOpen&&(Q.height=Math.min(Q.height,this._lastBoundingBoxSize.height),Q.width=Math.min(Q.width,this._lastBoundingBoxSize.width));const ue={};if(this._hasExactPosition())ue.top=ue.left="0",ue.bottom=ue.right=ue.maxHeight=ue.maxWidth="",ue.width=ue.height="100%";else{const Ze=this._overlayRef.getConfig().maxHeight,Et=this._overlayRef.getConfig().maxWidth;ue.height=(0,c.HM)(Q.height),ue.top=(0,c.HM)(Q.top),ue.bottom=(0,c.HM)(Q.bottom),ue.width=(0,c.HM)(Q.width),ue.left=(0,c.HM)(Q.left),ue.right=(0,c.HM)(Q.right),ue.alignItems="center"===P.overlayX?"center":"end"===P.overlayX?"flex-end":"flex-start",ue.justifyContent="center"===P.overlayY?"center":"bottom"===P.overlayY?"flex-end":"flex-start",Ze&&(ue.maxHeight=(0,c.HM)(Ze)),Et&&(ue.maxWidth=(0,c.HM)(Et))}this._lastBoundingBoxSize=Q,Zt(this._boundingBox.style,ue)}_resetBoundingBoxStyles(){Zt(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Zt(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(L,P){const Q={},ue=this._hasExactPosition(),Ze=this._hasFlexibleDimensions,Et=this._overlayRef.getConfig();if(ue){const jn=this._viewportRuler.getViewportScrollPosition();Zt(Q,this._getExactOverlayY(P,L,jn)),Zt(Q,this._getExactOverlayX(P,L,jn))}else Q.position="static";let Vt="",fn=this._getOffset(P,"x"),Ln=this._getOffset(P,"y");fn&&(Vt+=`translateX(${fn}px) `),Ln&&(Vt+=`translateY(${Ln}px)`),Q.transform=Vt.trim(),Et.maxHeight&&(ue?Q.maxHeight=(0,c.HM)(Et.maxHeight):Ze&&(Q.maxHeight="")),Et.maxWidth&&(ue?Q.maxWidth=(0,c.HM)(Et.maxWidth):Ze&&(Q.maxWidth="")),Zt(this._pane.style,Q)}_getExactOverlayY(L,P,Q){let ue={top:"",bottom:""},Ze=this._getOverlayPoint(P,this._overlayRect,L);return this._isPushed&&(Ze=this._pushOverlayOnScreen(Ze,this._overlayRect,Q)),"bottom"===L.overlayY?ue.bottom=this._document.documentElement.clientHeight-(Ze.y+this._overlayRect.height)+"px":ue.top=(0,c.HM)(Ze.y),ue}_getExactOverlayX(L,P,Q){let Et,ue={left:"",right:""},Ze=this._getOverlayPoint(P,this._overlayRect,L);return this._isPushed&&(Ze=this._pushOverlayOnScreen(Ze,this._overlayRect,Q)),Et=this._isRtl()?"end"===L.overlayX?"left":"right":"end"===L.overlayX?"right":"left","right"===Et?ue.right=this._document.documentElement.clientWidth-(Ze.x+this._overlayRect.width)+"px":ue.left=(0,c.HM)(Ze.x),ue}_getScrollVisibility(){const L=this._getOriginRect(),P=this._pane.getBoundingClientRect(),Q=this._scrollables.map(ue=>ue.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:un(L,Q),isOriginOutsideView:Gr(L,Q),isOverlayClipped:un(P,Q),isOverlayOutsideView:Gr(P,Q)}}_subtractOverflows(L,...P){return P.reduce((Q,ue)=>Q-Math.max(ue,0),L)}_getNarrowedViewportRect(){const L=this._document.documentElement.clientWidth,P=this._document.documentElement.clientHeight,Q=this._viewportRuler.getViewportScrollPosition();return{top:Q.top+this._viewportMargin,left:Q.left+this._viewportMargin,right:Q.left+L-this._viewportMargin,bottom:Q.top+P-this._viewportMargin,width:L-2*this._viewportMargin,height:P-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(L,P){return"x"===P?L.offsetX??this._offsetX:L.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(L){this._pane&&(0,c.Eq)(L).forEach(P=>{""!==P&&-1===this._appliedPanelClasses.indexOf(P)&&(this._appliedPanelClasses.push(P),this._pane.classList.add(P))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(L=>{this._pane.classList.remove(L)}),this._appliedPanelClasses=[])}_getOriginRect(){const L=this._origin;if(L instanceof S.SBq)return L.nativeElement.getBoundingClientRect();if(L instanceof Element)return L.getBoundingClientRect();const P=L.width||0,Q=L.height||0;return{top:L.y,bottom:L.y+Q,left:L.x,right:L.x+P,height:Q,width:P}}}function Zt(ve,L){for(let P in L)L.hasOwnProperty(P)&&(ve[P]=L[P]);return ve}function Xt(ve){if("number"!=typeof ve&&null!=ve){const[L,P]=ve.split(ke);return P&&"px"!==P?null:parseFloat(L)}return ve||null}function dr(ve){return{top:Math.floor(ve.top),right:Math.floor(ve.right),bottom:Math.floor(ve.bottom),left:Math.floor(ve.left),width:Math.floor(ve.width),height:Math.floor(ve.height)}}const gi="cdk-global-overlay-wrapper";class ms{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(L){const P=L.getConfig();this._overlayRef=L,this._width&&!P.width&&L.updateSize({width:this._width}),this._height&&!P.height&&L.updateSize({height:this._height}),L.hostElement.classList.add(gi),this._isDisposed=!1}top(L=""){return this._bottomOffset="",this._topOffset=L,this._alignItems="flex-start",this}left(L=""){return this._xOffset=L,this._xPosition="left",this}bottom(L=""){return this._topOffset="",this._bottomOffset=L,this._alignItems="flex-end",this}right(L=""){return this._xOffset=L,this._xPosition="right",this}start(L=""){return this._xOffset=L,this._xPosition="start",this}end(L=""){return this._xOffset=L,this._xPosition="end",this}width(L=""){return this._overlayRef?this._overlayRef.updateSize({width:L}):this._width=L,this}height(L=""){return this._overlayRef?this._overlayRef.updateSize({height:L}):this._height=L,this}centerHorizontally(L=""){return this.left(L),this._xPosition="center",this}centerVertically(L=""){return this.top(L),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const L=this._overlayRef.overlayElement.style,P=this._overlayRef.hostElement.style,Q=this._overlayRef.getConfig(),{width:ue,height:Ze,maxWidth:Et,maxHeight:Vt}=Q,fn=!("100%"!==ue&&"100vw"!==ue||Et&&"100%"!==Et&&"100vw"!==Et),Ln=!("100%"!==Ze&&"100vh"!==Ze||Vt&&"100%"!==Vt&&"100vh"!==Vt),jn=this._xPosition,zn=this._xOffset,us="rtl"===this._overlayRef.getConfig().direction;let jt="",Xn="",cs="";fn?cs="flex-start":"center"===jn?(cs="center",us?Xn=zn:jt=zn):us?"left"===jn||"end"===jn?(cs="flex-end",jt=zn):("right"===jn||"start"===jn)&&(cs="flex-start",Xn=zn):"left"===jn||"start"===jn?(cs="flex-start",jt=zn):("right"===jn||"end"===jn)&&(cs="flex-end",Xn=zn),L.position=this._cssPosition,L.marginLeft=fn?"0":jt,L.marginTop=Ln?"0":this._topOffset,L.marginBottom=this._bottomOffset,L.marginRight=fn?"0":Xn,P.justifyContent=cs,P.alignItems=Ln?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const L=this._overlayRef.overlayElement.style,P=this._overlayRef.hostElement,Q=P.style;P.classList.remove(gi),Q.justifyContent=Q.alignItems=L.marginTop=L.marginBottom=L.marginLeft=L.marginRight=L.position="",this._overlayRef=null,this._isDisposed=!0}}let ki=(()=>{class ve{constructor(P,Q,ue,Ze){this._viewportRuler=P,this._document=Q,this._platform=ue,this._overlayContainer=Ze}global(){return new ms}flexibleConnectedTo(P){return new yt(P,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return ve.\u0275fac=function(P){return new(P||ve)(S.LFG(_r),S.LFG(Vn.K0),S.LFG(sr.t4),S.LFG(Ie))},ve.\u0275prov=S.Yz7({token:ve,factory:ve.\u0275fac,providedIn:"root"}),ve})(),xs=0,mi=(()=>{class ve{constructor(P,Q,ue,Ze,Et,Vt,fn,Ln,jn,zn,us,jt){this.scrollStrategies=P,this._overlayContainer=Q,this._componentFactoryResolver=ue,this._positionBuilder=Ze,this._keyboardDispatcher=Et,this._injector=Vt,this._ngZone=fn,this._document=Ln,this._directionality=jn,this._location=zn,this._outsideClickDispatcher=us,this._animationsModuleType=jt}create(P){const Q=this._createHostElement(),ue=this._createPaneElement(Q),Ze=this._createPortalOutlet(ue),Et=new bi(P);return Et.direction=Et.direction||this._directionality.value,new At(Ze,Q,ue,Et,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(P){const Q=this._document.createElement("div");return Q.id="cdk-overlay-"+xs++,Q.classList.add("cdk-overlay-pane"),P.appendChild(Q),Q}_createHostElement(){const P=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(P),P}_createPortalOutlet(P){return this._appRef||(this._appRef=this._injector.get(S.z2F)),new De(P,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return ve.\u0275fac=function(P){return new(P||ve)(S.LFG(vi),S.LFG(Ie),S.LFG(S._Vd),S.LFG(ki),S.LFG(ss),S.LFG(S.zs3),S.LFG(S.R0b),S.LFG(Vn.K0),S.LFG(Cr.Is),S.LFG(Vn.Ye),S.LFG(Tr),S.LFG(S.QbO,8))},ve.\u0275prov=S.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const os={provide:new S.OlP("cdk-connected-overlay-scroll-strategy"),deps:[mi],useFactory:function ro(ve){return()=>ve.scrollStrategies.reposition()}};let at=(()=>{class ve{}return ve.\u0275fac=function(P){return new(P||ve)},ve.\u0275mod=S.oAB({type:ve}),ve.\u0275inj=S.cJS({providers:[mi,os],imports:[Cr.vT,hn,tt,tt]}),ve})();var bt=k(9521),Ut=k(9770),sn=k(8675);function En(ve,L){}class Yn{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let Qr=(()=>{class ve extends xe{constructor(P,Q,ue,Ze,Et,Vt,fn,Ln){super(),this._elementRef=P,this._focusTrapFactory=Q,this._config=Ze,this._interactivityChecker=Et,this._ngZone=Vt,this._overlayRef=fn,this._focusMonitor=Ln,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=jn=>{this._portalOutlet.hasAttached();const zn=this._portalOutlet.attachDomPortal(jn);return this._contentAttached(),zn},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=ue}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(P){this._portalOutlet.hasAttached();const Q=this._portalOutlet.attachComponentPortal(P);return this._contentAttached(),Q}attachTemplatePortal(P){this._portalOutlet.hasAttached();const Q=this._portalOutlet.attachTemplatePortal(P);return this._contentAttached(),Q}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(P,Q){this._interactivityChecker.isFocusable(P)||(P.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const ue=()=>{P.removeEventListener("blur",ue),P.removeEventListener("mousedown",ue),P.removeAttribute("tabindex")};P.addEventListener("blur",ue),P.addEventListener("mousedown",ue)})),P.focus(Q)}_focusByCssSelector(P,Q){let ue=this._elementRef.nativeElement.querySelector(P);ue&&this._forceFocus(ue,Q)}_trapFocus(){const P=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||P.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(Q=>{Q||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const P=this._config.restoreFocus;let Q=null;if("string"==typeof P?Q=this._document.querySelector(P):"boolean"==typeof P?Q=P?this._elementFocusedBeforeDialogWasOpened:null:P&&(Q=P),this._config.restoreFocus&&Q&&"function"==typeof Q.focus){const ue=(0,sr.ht)(),Ze=this._elementRef.nativeElement;(!ue||ue===this._document.body||ue===Ze||Ze.contains(ue))&&(this._focusMonitor?(this._focusMonitor.focusVia(Q,this._closeInteractionType),this._closeInteractionType=null):Q.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const P=this._elementRef.nativeElement,Q=(0,sr.ht)();return P===Q||P.contains(Q)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,sr.ht)())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return ve.\u0275fac=function(P){return new(P||ve)(S.Y36(S.SBq),S.Y36(h.qV),S.Y36(Vn.K0,8),S.Y36(Yn),S.Y36(h.ic),S.Y36(S.R0b),S.Y36(At),S.Y36(h.tE))},ve.\u0275cmp=S.Xpm({type:ve,selectors:[["cdk-dialog-container"]],viewQuery:function(P,Q){if(1&P&&S.Gf(Bt,7),2&P){let ue;S.iGM(ue=S.CRH())&&(Q._portalOutlet=ue.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(P,Q){2&P&&S.uIk("id",Q._config.id||null)("role",Q._config.role)("aria-modal",Q._config.ariaModal)("aria-labelledby",Q._config.ariaLabel?null:Q._ariaLabelledBy)("aria-label",Q._config.ariaLabel)("aria-describedby",Q._config.ariaDescribedBy||null)},features:[S.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(P,Q){1&P&&S.YNc(0,En,0,0,"ng-template",0)},dependencies:[Bt],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),ve})();class es{constructor(L,P){this.overlayRef=L,this.config=P,this.closed=new d.x,this.disableClose=P.disableClose,this.backdropClick=L.backdropClick(),this.keydownEvents=L.keydownEvents(),this.outsidePointerEvents=L.outsidePointerEvents(),this.id=P.id,this.keydownEvents.subscribe(Q=>{Q.keyCode===bt.hY&&!this.disableClose&&!(0,bt.Vb)(Q)&&(Q.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(L,P){if(this.containerInstance){const Q=this.closed;this.containerInstance._closeInteractionType=P?.focusOrigin||"program",this.overlayRef.dispose(),Q.next(L),Q.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(L="",P=""){return this.overlayRef.updateSize({width:L,height:P}),this}addPanelClass(L){return this.overlayRef.addPanelClass(L),this}removePanelClass(L){return this.overlayRef.removePanelClass(L),this}}const Gs=new S.OlP("DialogScrollStrategy"),Bi=new S.OlP("DialogData"),Co=new S.OlP("DefaultDialogConfig"),wi={provide:Gs,deps:[mi],useFactory:function Vi(ve){return()=>ve.scrollStrategies.block()}};let Ho=0,Os=(()=>{class ve{constructor(P,Q,ue,Ze,Et,Vt){this._overlay=P,this._injector=Q,this._defaultOptions=ue,this._parentDialog=Ze,this._overlayContainer=Et,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new d.x,this._afterOpenedAtThisLevel=new d.x,this._ariaHiddenElements=new Map,this.afterAllClosed=(0,Ut.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,sn.O)(void 0))),this._scrollStrategy=Vt}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(P,Q){(Q={...this._defaultOptions||new Yn,...Q}).id=Q.id||"cdk-dialog-"+Ho++,Q.id&&this.getDialogById(Q.id);const Ze=this._getOverlayConfig(Q),Et=this._overlay.create(Ze),Vt=new es(Et,Q),fn=this._attachContainer(Et,Vt,Q);return Vt.containerInstance=fn,this._attachDialogContent(P,Vt,fn,Q),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(Vt),Vt.closed.subscribe(()=>this._removeOpenDialog(Vt,!0)),this.afterOpened.next(Vt),Vt}closeAll(){Ti(this.openDialogs,P=>P.close())}getDialogById(P){return this.openDialogs.find(Q=>Q.id===P)}ngOnDestroy(){Ti(this._openDialogsAtThisLevel,P=>{!1===P.config.closeOnDestroy&&this._removeOpenDialog(P,!1)}),Ti(this._openDialogsAtThisLevel,P=>P.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(P){const Q=new bi({positionStrategy:P.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:P.scrollStrategy||this._scrollStrategy(),panelClass:P.panelClass,hasBackdrop:P.hasBackdrop,direction:P.direction,minWidth:P.minWidth,minHeight:P.minHeight,maxWidth:P.maxWidth,maxHeight:P.maxHeight,width:P.width,height:P.height,disposeOnNavigation:P.closeOnNavigation});return P.backdropClass&&(Q.backdropClass=P.backdropClass),Q}_attachContainer(P,Q,ue){const Ze=ue.injector||ue.viewContainerRef?.injector,Et=[{provide:Yn,useValue:ue},{provide:es,useValue:Q},{provide:At,useValue:P}];let Vt;ue.container?"function"==typeof ue.container?Vt=ue.container:(Vt=ue.container.type,Et.push(...ue.container.providers(ue))):Vt=Qr;const fn=new _t(Vt,ue.viewContainerRef,S.zs3.create({parent:Ze||this._injector,providers:Et}),ue.componentFactoryResolver);return P.attach(fn).instance}_attachDialogContent(P,Q,ue,Ze){if(P instanceof S.Rgc){const Et=this._createInjector(Ze,Q,ue,void 0);let Vt={$implicit:Ze.data,dialogRef:Q};Ze.templateContext&&(Vt={...Vt,..."function"==typeof Ze.templateContext?Ze.templateContext():Ze.templateContext}),ue.attachTemplatePortal(new ln(P,null,Vt,Et))}else{const Et=this._createInjector(Ze,Q,ue,this._injector),Vt=ue.attachComponentPortal(new _t(P,Ze.viewContainerRef,Et,Ze.componentFactoryResolver));Q.componentInstance=Vt.instance}}_createInjector(P,Q,ue,Ze){const Et=P.injector||P.viewContainerRef?.injector,Vt=[{provide:Bi,useValue:P.data},{provide:es,useValue:Q}];return P.providers&&("function"==typeof P.providers?Vt.push(...P.providers(Q,P,ue)):Vt.push(...P.providers)),P.direction&&(!Et||!Et.get(Cr.Is,null,S.XFs.Optional))&&Vt.push({provide:Cr.Is,useValue:{value:P.direction,change:(0,de.of)()}}),S.zs3.create({parent:Et||Ze,providers:Vt})}_removeOpenDialog(P,Q){const ue=this.openDialogs.indexOf(P);ue>-1&&(this.openDialogs.splice(ue,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((Ze,Et)=>{Ze?Et.setAttribute("aria-hidden",Ze):Et.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),Q&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const P=this._overlayContainer.getContainerElement();if(P.parentElement){const Q=P.parentElement.children;for(let ue=Q.length-1;ue>-1;ue--){const Ze=Q[ue];Ze!==P&&"SCRIPT"!==Ze.nodeName&&"STYLE"!==Ze.nodeName&&!Ze.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(Ze,Ze.getAttribute("aria-hidden")),Ze.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const P=this._parentDialog;return P?P._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return ve.\u0275fac=function(P){return new(P||ve)(S.LFG(mi),S.LFG(S.zs3),S.LFG(Co,8),S.LFG(ve,12),S.LFG(Ie),S.LFG(Gs))},ve.\u0275prov=S.Yz7({token:ve,factory:ve.\u0275fac}),ve})();function Ti(ve,L){let P=ve.length;for(;P--;)L(ve[P])}let Lr=(()=>{class ve{}return ve.\u0275fac=function(P){return new(P||ve)},ve.\u0275mod=S.oAB({type:ve}),ve.\u0275inj=S.cJS({providers:[Os,wi],imports:[at,hn,h.rt,hn]}),ve})();var as=k(3238),ai=k(7340);function Is(ve,L){}const Us={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},ko={dialogContainer:(0,ai.X$)("dialogContainer",[(0,ai.SB)("void, exit",(0,ai.oB)({opacity:0,transform:"scale(0.7)"})),(0,ai.SB)("enter",(0,ai.oB)({transform:"none"})),(0,ai.eR)("* => enter",(0,ai.ru)([(0,ai.jt)("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",(0,ai.oB)({transform:"none",opacity:1})),(0,ai.IO)("@*",(0,ai.pV)(),{optional:!0})]),Us),(0,ai.eR)("* => void, * => exit",(0,ai.ru)([(0,ai.jt)("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",(0,ai.oB)({opacity:0})),(0,ai.IO)("@*",(0,ai.pV)(),{optional:!0})]),Us)])};class ks{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=Us.params.enterAnimationDuration,this.exitAnimationDuration=Us.params.exitAnimationDuration}}let Jo=(()=>{class ve extends Qr{constructor(P,Q,ue,Ze,Et,Vt,fn,Ln){super(P,Q,ue,Ze,Et,Vt,fn,Ln),this._animationStateChanged=new S.vpe}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(P){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:P})}}return ve.\u0275fac=function(P){return new(P||ve)(S.Y36(S.SBq),S.Y36(h.qV),S.Y36(Vn.K0,8),S.Y36(ks),S.Y36(h.ic),S.Y36(S.R0b),S.Y36(At),S.Y36(h.tE))},ve.\u0275cmp=S.Xpm({type:ve,selectors:[["ng-component"]],features:[S.qOj],decls:0,vars:0,template:function(P,Q){},encapsulation:2}),ve})(),ls=(()=>{class ve extends Jo{constructor(P,Q,ue,Ze,Et,Vt,fn,Ln,jn){super(P,Q,ue,Ze,Et,Vt,fn,jn),this._changeDetectorRef=Ln,this._state="enter"}_onAnimationDone({toState:P,totalTime:Q}){"enter"===P?this._openAnimationDone(Q):"exit"===P&&this._animationStateChanged.next({state:"closed",totalTime:Q})}_onAnimationStart({toState:P,totalTime:Q}){"enter"===P?this._animationStateChanged.next({state:"opening",totalTime:Q}):("exit"===P||"void"===P)&&this._animationStateChanged.next({state:"closing",totalTime:Q})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||Us.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||Us.params.exitAnimationDuration}}}}return ve.\u0275fac=function(P){return new(P||ve)(S.Y36(S.SBq),S.Y36(h.qV),S.Y36(Vn.K0,8),S.Y36(ks),S.Y36(h.ic),S.Y36(S.R0b),S.Y36(At),S.Y36(S.sBO),S.Y36(h.tE))},ve.\u0275cmp=S.Xpm({type:ve,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(P,Q){1&P&&S.WFA("@dialogContainer.start",function(Ze){return Q._onAnimationStart(Ze)})("@dialogContainer.done",function(Ze){return Q._onAnimationDone(Ze)}),2&P&&(S.Ikx("id",Q._config.id),S.uIk("aria-modal",Q._config.ariaModal)("role",Q._config.role)("aria-labelledby",Q._config.ariaLabel?null:Q._ariaLabelledBy)("aria-label",Q._config.ariaLabel)("aria-describedby",Q._config.ariaDescribedBy||null),S.d8E("@dialogContainer",Q._getAnimationState()))},features:[S.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(P,Q){1&P&&S.YNc(0,Is,0,0,"ng-template",0)},dependencies:[Bt],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[ko.dialogContainer]}}),ve})();class ys{constructor(L,P,Q){this._ref=L,this._containerInstance=Q,this._afterOpened=new d.x,this._beforeClosed=new d.x,this._state=0,this.disableClose=P.disableClose,this.id=L.id,Q._animationStateChanged.pipe((0,ir.h)(ue=>"opened"===ue.state),(0,W.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),Q._animationStateChanged.pipe((0,ir.h)(ue=>"closed"===ue.state),(0,W.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),L.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),(0,Y.T)(this.backdropClick(),this.keydownEvents().pipe((0,ir.h)(ue=>ue.keyCode===bt.hY&&!this.disableClose&&!(0,bt.Vb)(ue)))).subscribe(ue=>{this.disableClose||(ue.preventDefault(),Ei(this,"keydown"===ue.type?"keyboard":"mouse"))})}close(L){this._result=L,this._containerInstance._animationStateChanged.pipe((0,ir.h)(P=>"closing"===P.state),(0,W.q)(1)).subscribe(P=>{this._beforeClosed.next(L),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),P.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(L){let P=this._ref.config.positionStrategy;return L&&(L.left||L.right)?L.left?P.left(L.left):P.right(L.right):P.centerHorizontally(),L&&(L.top||L.bottom)?L.top?P.top(L.top):P.bottom(L.bottom):P.centerVertically(),this._ref.updatePosition(),this}updateSize(L="",P=""){return this._ref.updateSize(L,P),this}addPanelClass(L){return this._ref.addPanelClass(L),this}removePanelClass(L){return this._ref.removePanelClass(L),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}function Ei(ve,L,P){return ve._closeInteractionType=L,ve.close(P)}const Wi=new S.OlP("MatDialogData"),ji=new S.OlP("mat-dialog-default-options"),Bs=new S.OlP("mat-dialog-scroll-strategy"),Ci={provide:Bs,deps:[mi],useFactory:function Ws(ve){return()=>ve.scrollStrategies.block()}};let Hi=0,Po=(()=>{class ve{constructor(P,Q,ue,Ze,Et,Vt,fn,Ln,jn,zn){this._overlay=P,this._defaultOptions=ue,this._parentDialog=Ze,this._dialogRefConstructor=fn,this._dialogContainerType=Ln,this._dialogDataToken=jn,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new d.x,this._afterOpenedAtThisLevel=new d.x,this._idPrefix="mat-dialog-",this.afterAllClosed=(0,Ut.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,sn.O)(void 0))),this._scrollStrategy=Vt,this._dialog=Q.get(Os)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const P=this._parentDialog;return P?P._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(P,Q){let ue;(Q={...this._defaultOptions||new ks,...Q}).id=Q.id||`${this._idPrefix}${Hi++}`,Q.scrollStrategy=Q.scrollStrategy||this._scrollStrategy();const Ze=this._dialog.open(P,{...Q,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:ks,useValue:Q},{provide:Yn,useValue:Q}]},templateContext:()=>({dialogRef:ue}),providers:(Et,Vt,fn)=>(ue=new this._dialogRefConstructor(Et,Q,fn),ue.updatePosition(Q?.position),[{provide:this._dialogContainerType,useValue:fn},{provide:this._dialogDataToken,useValue:Vt.data},{provide:this._dialogRefConstructor,useValue:ue}])});return ue.componentInstance=Ze.componentInstance,this.openDialogs.push(ue),this.afterOpened.next(ue),ue.afterClosed().subscribe(()=>{const Et=this.openDialogs.indexOf(ue);Et>-1&&(this.openDialogs.splice(Et,1),this.openDialogs.length||this._getAfterAllClosed().next())}),ue}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(P){return this.openDialogs.find(Q=>Q.id===P)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(P){let Q=P.length;for(;Q--;)P[Q].close()}}return ve.\u0275fac=function(P){S.$Z()},ve.\u0275prov=S.Yz7({token:ve,factory:ve.\u0275fac}),ve})(),Pi=(()=>{class ve extends Po{constructor(P,Q,ue,Ze,Et,Vt,fn,Ln){super(P,Q,Ze,Vt,fn,Et,ys,ls,Wi,Ln)}}return ve.\u0275fac=function(P){return new(P||ve)(S.LFG(mi),S.LFG(S.zs3),S.LFG(Vn.Ye,8),S.LFG(ji,8),S.LFG(Bs),S.LFG(ve,12),S.LFG(Ie),S.LFG(S.QbO,8))},ve.\u0275prov=S.Yz7({token:ve,factory:ve.\u0275fac}),ve})(),Mi=0,Vs=(()=>{class ve{constructor(P,Q,ue){this.dialogRef=P,this._elementRef=Q,this._dialog=ue,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=Do(this._elementRef,this._dialog.openDialogs))}ngOnChanges(P){const Q=P._matDialogClose||P._matDialogCloseResult;Q&&(this.dialogResult=Q.currentValue)}_onButtonClick(P){Ei(this.dialogRef,0===P.screenX&&0===P.screenY?"keyboard":"mouse",this.dialogResult)}}return ve.\u0275fac=function(P){return new(P||ve)(S.Y36(ys,8),S.Y36(S.SBq),S.Y36(Pi))},ve.\u0275dir=S.lG2({type:ve,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(P,Q){1&P&&S.NdJ("click",function(Ze){return Q._onButtonClick(Ze)}),2&P&&S.uIk("aria-label",Q.ariaLabel||null)("type",Q.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[S.TTD]}),ve})(),ho=(()=>{class ve{constructor(P,Q,ue){this._dialogRef=P,this._elementRef=Q,this._dialog=ue,this.id="mat-dialog-title-"+Mi++}ngOnInit(){this._dialogRef||(this._dialogRef=Do(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const P=this._dialogRef._containerInstance;P&&!P._ariaLabelledBy&&(P._ariaLabelledBy=this.id)})}}return ve.\u0275fac=function(P){return new(P||ve)(S.Y36(ys,8),S.Y36(S.SBq),S.Y36(Pi))},ve.\u0275dir=S.lG2({type:ve,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(P,Q){2&P&&S.Ikx("id",Q.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),ve})(),$i=(()=>{class ve{}return ve.\u0275fac=function(P){return new(P||ve)},ve.\u0275dir=S.lG2({type:ve,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),ve})(),Hr=(()=>{class ve{constructor(){this.align="start"}}return ve.\u0275fac=function(P){return new(P||ve)},ve.\u0275dir=S.lG2({type:ve,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"],hostVars:4,hostBindings:function(P,Q){2&P&&S.ekj("mat-dialog-actions-align-center","center"===Q.align)("mat-dialog-actions-align-end","end"===Q.align)},inputs:{align:"align"}}),ve})();function Do(ve,L){let P=ve.nativeElement.parentElement;for(;P&&!P.classList.contains("mat-dialog-container");)P=P.parentElement;return P?L.find(Q=>Q.id===P.id):null}let _s=(()=>{class ve{}return ve.\u0275fac=function(P){return new(P||ve)},ve.\u0275mod=S.oAB({type:ve}),ve.\u0275inj=S.cJS({providers:[Pi,Ci],imports:[Lr,at,hn,as.BQ,as.BQ]}),ve})()},1481:(Jt,Qe,k)=>{k.d(Qe,{Dx:()=>_r,b2:()=>tr,q6:()=>Rr,se:()=>dt});var h=k(6895),c=k(4650);class S extends h.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class d extends S{static makeCurrent(){(0,h.HT)(new d)}onAndCancel(Y,W,te){return Y.addEventListener(W,te,!1),()=>{Y.removeEventListener(W,te,!1)}}dispatchEvent(Y,W){Y.dispatchEvent(W)}remove(Y){Y.parentNode&&Y.parentNode.removeChild(Y)}createElement(Y,W){return(W=W||this.getDefaultDocument()).createElement(Y)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Y){return Y.nodeType===Node.ELEMENT_NODE}isShadowRoot(Y){return Y instanceof DocumentFragment}getGlobalEventTarget(Y,W){return"window"===W?window:"document"===W?Y:"body"===W?Y.body:null}getBaseHref(Y){const W=function Ae(){return de=de||document.querySelector("base"),de?de.getAttribute("href"):null}();return null==W?null:function fe(Se){_e=_e||document.createElement("a"),_e.setAttribute("href",Se);const Y=_e.pathname;return"/"===Y.charAt(0)?Y:`/${Y}`}(W)}resetBaseElement(){de=null}getUserAgent(){return window.navigator.userAgent}getCookie(Y){return(0,h.Mx)(document.cookie,Y)}}let _e,de=null;const Fe=new c.OlP("TRANSITION_ID"),be=[{provide:c.ip1,useFactory:function pe(Se,Y,W){return()=>{W.get(c.CZH).donePromise.then(()=>{const te=(0,h.q)(),me=Y.querySelectorAll(`style[ng-transition="${Se}"]`);for(let Ke=0;Ke<me.length;Ke++)te.remove(me[Ke])})}},deps:[Fe,h.K0,c.zs3],multi:!0}];let st=(()=>{class Se{build(){return new XMLHttpRequest}}return Se.\u0275fac=function(W){return new(W||Se)},Se.\u0275prov=c.Yz7({token:Se,factory:Se.\u0275fac}),Se})();const mt=new c.OlP("EventManagerPlugins");let He=(()=>{class Se{constructor(W,te){this._zone=te,this._eventNameToPlugin=new Map,W.forEach(me=>me.manager=this),this._plugins=W.slice().reverse()}addEventListener(W,te,me){return this._findPluginFor(te).addEventListener(W,te,me)}addGlobalEventListener(W,te,me){return this._findPluginFor(te).addGlobalEventListener(W,te,me)}getZone(){return this._zone}_findPluginFor(W){const te=this._eventNameToPlugin.get(W);if(te)return te;const me=this._plugins;for(let Ke=0;Ke<me.length;Ke++){const Ft=me[Ke];if(Ft.supports(W))return this._eventNameToPlugin.set(W,Ft),Ft}throw new Error(`No event manager plugin found for event ${W}`)}}return Se.\u0275fac=function(W){return new(W||Se)(c.LFG(mt),c.LFG(c.R0b))},Se.\u0275prov=c.Yz7({token:Se,factory:Se.\u0275fac}),Se})();class Tt{constructor(Y){this._doc=Y}addGlobalEventListener(Y,W,te){const me=(0,h.q)().getGlobalEventTarget(this._doc,Y);if(!me)throw new Error(`Unsupported event target ${me} for event ${W}`);return this.addEventListener(me,W,te)}}let gt=(()=>{class Se{constructor(){this._stylesSet=new Set}addStyles(W){const te=new Set;W.forEach(me=>{this._stylesSet.has(me)||(this._stylesSet.add(me),te.add(me))}),this.onStylesAdded(te)}onStylesAdded(W){}getAllStyles(){return Array.from(this._stylesSet)}}return Se.\u0275fac=function(W){return new(W||Se)},Se.\u0275prov=c.Yz7({token:Se,factory:Se.\u0275fac}),Se})(),ft=(()=>{class Se extends gt{constructor(W){super(),this._doc=W,this._hostNodes=new Map,this._hostNodes.set(W.head,[])}_addStylesToHost(W,te,me){W.forEach(Ke=>{const Ft=this._doc.createElement("style");Ft.textContent=Ke,me.push(te.appendChild(Ft))})}addHost(W){const te=[];this._addStylesToHost(this._stylesSet,W,te),this._hostNodes.set(W,te)}removeHost(W){const te=this._hostNodes.get(W);te&&te.forEach(Ye),this._hostNodes.delete(W)}onStylesAdded(W){this._hostNodes.forEach((te,me)=>{this._addStylesToHost(W,me,te)})}ngOnDestroy(){this._hostNodes.forEach(W=>W.forEach(Ye))}}return Se.\u0275fac=function(W){return new(W||Se)(c.LFG(h.K0))},Se.\u0275prov=c.Yz7({token:Se,factory:Se.\u0275fac}),Se})();function Ye(Se){(0,h.q)().remove(Se)}const Gt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ge=/%COMP%/g;function We(Se,Y,W){for(let te=0;te<Y.length;te++){let me=Y[te];Array.isArray(me)?We(Se,me,W):(me=me.replace(Ge,Se),W.push(me))}return W}function je(Se){return Y=>{if("__ngUnwrap__"===Y)return Se;!1===Se(Y)&&(Y.preventDefault(),Y.returnValue=!1)}}let dt=(()=>{class Se{constructor(W,te,me){this.eventManager=W,this.sharedStylesHost=te,this.appId=me,this.rendererByCompId=new Map,this.defaultRenderer=new Lt(W)}createRenderer(W,te){if(!W||!te)return this.defaultRenderer;switch(te.encapsulation){case c.ifc.Emulated:{let me=this.rendererByCompId.get(te.id);return me||(me=new cn(this.eventManager,this.sharedStylesHost,te,this.appId),this.rendererByCompId.set(te.id,me)),me.applyToHost(W),me}case 1:case c.ifc.ShadowDom:return new Rt(this.eventManager,this.sharedStylesHost,W,te);default:if(!this.rendererByCompId.has(te.id)){const me=We(te.id,te.styles,[]);this.sharedStylesHost.addStyles(me),this.rendererByCompId.set(te.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Se.\u0275fac=function(W){return new(W||Se)(c.LFG(He),c.LFG(ft),c.LFG(c.AFp))},Se.\u0275prov=c.Yz7({token:Se,factory:Se.\u0275fac}),Se})();class Lt{constructor(Y){this.eventManager=Y,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Y,W){return W?document.createElementNS(Gt[W]||W,Y):document.createElement(Y)}createComment(Y){return document.createComment(Y)}createText(Y){return document.createTextNode(Y)}appendChild(Y,W){(Mn(Y)?Y.content:Y).appendChild(W)}insertBefore(Y,W,te){Y&&(Mn(Y)?Y.content:Y).insertBefore(W,te)}removeChild(Y,W){Y&&Y.removeChild(W)}selectRootElement(Y,W){let te="string"==typeof Y?document.querySelector(Y):Y;if(!te)throw new Error(`The selector "${Y}" did not match any elements`);return W||(te.textContent=""),te}parentNode(Y){return Y.parentNode}nextSibling(Y){return Y.nextSibling}setAttribute(Y,W,te,me){if(me){W=me+":"+W;const Ke=Gt[me];Ke?Y.setAttributeNS(Ke,W,te):Y.setAttribute(W,te)}else Y.setAttribute(W,te)}removeAttribute(Y,W,te){if(te){const me=Gt[te];me?Y.removeAttributeNS(me,W):Y.removeAttribute(`${te}:${W}`)}else Y.removeAttribute(W)}addClass(Y,W){Y.classList.add(W)}removeClass(Y,W){Y.classList.remove(W)}setStyle(Y,W,te,me){me&(c.JOm.DashCase|c.JOm.Important)?Y.style.setProperty(W,te,me&c.JOm.Important?"important":""):Y.style[W]=te}removeStyle(Y,W,te){te&c.JOm.DashCase?Y.style.removeProperty(W):Y.style[W]=""}setProperty(Y,W,te){Y[W]=te}setValue(Y,W){Y.nodeValue=W}listen(Y,W,te){return"string"==typeof Y?this.eventManager.addGlobalEventListener(Y,W,je(te)):this.eventManager.addEventListener(Y,W,je(te))}}function Mn(Se){return"TEMPLATE"===Se.tagName&&void 0!==Se.content}class cn extends Lt{constructor(Y,W,te,me){super(Y),this.component=te;const Ke=We(me+"-"+te.id,te.styles,[]);W.addStyles(Ke),this.contentAttr=function it(Se){return"_ngcontent-%COMP%".replace(Ge,Se)}(me+"-"+te.id),this.hostAttr=function ct(Se){return"_nghost-%COMP%".replace(Ge,Se)}(me+"-"+te.id)}applyToHost(Y){super.setAttribute(Y,this.hostAttr,"")}createElement(Y,W){const te=super.createElement(Y,W);return super.setAttribute(te,this.contentAttr,""),te}}class Rt extends Lt{constructor(Y,W,te,me){super(Y),this.sharedStylesHost=W,this.hostEl=te,this.shadowRoot=te.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Ke=We(me.id,me.styles,[]);for(let Ft=0;Ft<Ke.length;Ft++){const on=document.createElement("style");on.textContent=Ke[Ft],this.shadowRoot.appendChild(on)}}nodeOrShadowRoot(Y){return Y===this.hostEl?this.shadowRoot:Y}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Y,W){return super.appendChild(this.nodeOrShadowRoot(Y),W)}insertBefore(Y,W,te){return super.insertBefore(this.nodeOrShadowRoot(Y),W,te)}removeChild(Y,W){return super.removeChild(this.nodeOrShadowRoot(Y),W)}parentNode(Y){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Y)))}}let Pn=(()=>{class Se extends Tt{constructor(W){super(W)}supports(W){return!0}addEventListener(W,te,me){return W.addEventListener(te,me,!1),()=>this.removeEventListener(W,te,me)}removeEventListener(W,te,me){return W.removeEventListener(te,me)}}return Se.\u0275fac=function(W){return new(W||Se)(c.LFG(h.K0))},Se.\u0275prov=c.Yz7({token:Se,factory:Se.\u0275fac}),Se})();const Zn=["alt","control","meta","shift"],Nn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},In={alt:Se=>Se.altKey,control:Se=>Se.ctrlKey,meta:Se=>Se.metaKey,shift:Se=>Se.shiftKey};let Wt=(()=>{class Se extends Tt{constructor(W){super(W)}supports(W){return null!=Se.parseEventName(W)}addEventListener(W,te,me){const Ke=Se.parseEventName(te),Ft=Se.eventCallback(Ke.fullKey,me,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,h.q)().onAndCancel(W,Ke.domEventName,Ft))}static parseEventName(W){const te=W.toLowerCase().split("."),me=te.shift();if(0===te.length||"keydown"!==me&&"keyup"!==me)return null;const Ke=Se._normalizeKey(te.pop());let Ft="",on=te.indexOf("code");if(on>-1&&(te.splice(on,1),Ft="code."),Zn.forEach(Gr=>{const un=te.indexOf(Gr);un>-1&&(te.splice(un,1),Ft+=Gr+".")}),Ft+=Ke,0!=te.length||0===Ke.length)return null;const Fn={};return Fn.domEventName=me,Fn.fullKey=Ft,Fn}static matchEventFullKeyCode(W,te){let me=Nn[W.key]||W.key,Ke="";return te.indexOf("code.")>-1&&(me=W.code,Ke="code."),!(null==me||!me)&&(me=me.toLowerCase()," "===me?me="space":"."===me&&(me="dot"),Zn.forEach(Ft=>{Ft!==me&&(0,In[Ft])(W)&&(Ke+=Ft+".")}),Ke+=me,Ke===te)}static eventCallback(W,te,me){return Ke=>{Se.matchEventFullKeyCode(Ke,W)&&me.runGuarded(()=>te(Ke))}}static _normalizeKey(W){return"esc"===W?"escape":W}}return Se.\u0275fac=function(W){return new(W||Se)(c.LFG(h.K0))},Se.\u0275prov=c.Yz7({token:Se,factory:Se.\u0275fac}),Se})();const Rr=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:h.bD},{provide:c.g9A,useValue:function sr(){d.makeCurrent()},multi:!0},{provide:h.K0,useFactory:function Cr(){return(0,c.RDi)(document),document},deps:[]}]),er=new c.OlP(""),Ht=[{provide:c.rWj,useClass:class Pe{addToWindow(Y){c.dqk.getAngularTestability=(te,me=!0)=>{const Ke=Y.findTestabilityInTree(te,me);if(null==Ke)throw new Error("Could not find testability for element.");return Ke},c.dqk.getAllAngularTestabilities=()=>Y.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>Y.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(te=>{const me=c.dqk.getAllAngularTestabilities();let Ke=me.length,Ft=!1;const on=function(Fn){Ft=Ft||Fn,Ke--,0==Ke&&te(Ft)};me.forEach(function(Fn){Fn.whenStable(on)})})}findTestabilityInTree(Y,W,te){return null==W?null:Y.getTestability(W)??(te?(0,h.q)().isShadowRoot(W)?this.findTestabilityInTree(Y,W.host,!0):this.findTestabilityInTree(Y,W.parentElement,!0):null)}},deps:[]},{provide:c.lri,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]}],cr=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function Vn(){return new c.qLn},deps:[]},{provide:mt,useClass:Pn,multi:!0,deps:[h.K0,c.R0b,c.Lbi]},{provide:mt,useClass:Wt,multi:!0,deps:[h.K0]},{provide:dt,useClass:dt,deps:[He,ft,c.AFp]},{provide:c.FYo,useExisting:dt},{provide:gt,useExisting:ft},{provide:ft,useClass:ft,deps:[h.K0]},{provide:He,useClass:He,deps:[mt,c.R0b]},{provide:h.JF,useClass:st,deps:[]},[]];let tr=(()=>{class Se{constructor(W){}static withServerTransition(W){return{ngModule:Se,providers:[{provide:c.AFp,useValue:W.appId},{provide:Fe,useExisting:c.AFp},be]}}}return Se.\u0275fac=function(W){return new(W||Se)(c.LFG(er,12))},Se.\u0275mod=c.oAB({type:Se}),Se.\u0275inj=c.cJS({providers:[...cr,...Ht],imports:[h.ez,c.hGG]}),Se})(),_r=(()=>{class Se{constructor(W){this._doc=W}getTitle(){return this._doc.title}setTitle(W){this._doc.title=W||""}}return Se.\u0275fac=function(W){return new(W||Se)(c.LFG(h.K0))},Se.\u0275prov=c.Yz7({token:Se,factory:function(W){let te=null;return te=W?new W:function Ir(){return new _r((0,c.LFG)(h.K0))}(),te},providedIn:"root"}),Se})();typeof window<"u"&&window},7887:(Jt,Qe,k)=>{k.d(Qe,{gz:()=>Bi,OD:()=>dr,F0:()=>Ki,rH:()=>ya,Od:()=>Aa,yS:()=>To,Bz:()=>qo,lC:()=>Xo});var h=k(4650),c=k(8996),S=k(9646),d=k(1135),de=k(6805),Ae=k(9841),_e=k(7272),fe=k(9770),Fe=k(9635),pe=k(9751),be=k(576);function Pe(D,T){const E=(0,be.m)(D)?D:()=>D,F=$=>$.error(E());return new pe.y(T?$=>T.schedule(F,0,$):F)}var st=k(515),mt=k(727),He=k(4482),Tt=k(5403);function gt(){return(0,He.e)((D,T)=>{let E=null;D._refCount++;const F=(0,Tt.x)(T,void 0,void 0,void 0,()=>{if(!D||D._refCount<=0||0<--D._refCount)return void(E=null);const $=D._connection,ae=E;E=null,$&&(!ae||$===ae)&&$.unsubscribe(),T.unsubscribe()});D.subscribe(F),F.closed||(E=D.connect())})}class ft extends pe.y{constructor(T,E){super(),this.source=T,this.subjectFactory=E,this._subject=null,this._refCount=0,this._connection=null,(0,He.A)(T)&&(this.lift=T.lift)}_subscribe(T){return this.getSubject().subscribe(T)}getSubject(){const T=this._subject;return(!T||T.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:T}=this;this._subject=this._connection=null,T?.unsubscribe()}connect(){let T=this._connection;if(!T){T=this._connection=new mt.w0;const E=this.getSubject();T.add(this.source.subscribe((0,Tt.x)(E,void 0,()=>{this._teardown(),E.complete()},F=>{this._teardown(),E.error(F)},()=>this._teardown()))),T.closed&&(this._connection=null,T=mt.w0.EMPTY)}return T}refCount(){return gt()(this)}}var Ye=k(7579),Gt=k(6895),Ge=k(4004),Me=k(3900),rt=k(5698),Pt=k(8675),qe=k(9300),it=k(5577),ct=k(590),We=k(4351),je=k(8505),pt=k(262),dt=k(5026),Lt=k(2035),$t=k(8068),Qt=k(6590),Mn=k(4671);function cn(D,T){const E=arguments.length>=2;return F=>F.pipe(D?(0,qe.h)(($,ae)=>D($,ae,F)):Mn.y,(0,Lt.h)(1),E?(0,Qt.d)(T):(0,$t.T)(()=>new de.K))}var Zn=k(8746),Nn=k(8189),In=k(1481);const Wt="primary",dn=Symbol("RouteTitle");class vr{constructor(T){this.params=T||{}}has(T){return Object.prototype.hasOwnProperty.call(this.params,T)}get(T){if(this.has(T)){const E=this.params[T];return Array.isArray(E)?E[0]:E}return null}getAll(T){if(this.has(T)){const E=this.params[T];return Array.isArray(E)?E:[E]}return[]}get keys(){return Object.keys(this.params)}}function Ar(D){return new vr(D)}function br(D,T,E){const F=E.path.split("/");if(F.length>D.length||"full"===E.pathMatch&&(T.hasChildren()||F.length<D.length))return null;const $={};for(let ae=0;ae<F.length;ae++){const Oe=F[ae],Be=D[ae];if(Oe.startsWith(":"))$[Oe.substring(1)]=Be;else if(Oe!==Be.path)return null}return{consumed:D.slice(0,F.length),posParams:$}}function sr(D,T){const E=D?Object.keys(D):void 0,F=T?Object.keys(T):void 0;if(!E||!F||E.length!=F.length)return!1;let $;for(let ae=0;ae<E.length;ae++)if($=E[ae],!Vn(D[$],T[$]))return!1;return!0}function Vn(D,T){if(Array.isArray(D)&&Array.isArray(T)){if(D.length!==T.length)return!1;const E=[...D].sort(),F=[...T].sort();return E.every(($,ae)=>F[ae]===$)}return D===T}function Cr(D){return Array.prototype.concat.apply([],D)}function yr(D){return D.length>0?D[D.length-1]:null}function er(D,T){for(const E in D)D.hasOwnProperty(E)&&T(D[E],E)}function Ht(D){return(0,h.CqO)(D)?D:(0,h.QGY)(D)?(0,c.D)(Promise.resolve(D)):(0,S.of)(D)}const nr={exact:function _r(D,T,E){if(!zt(D.segments,T.segments)||!On(D.segments,T.segments,E)||D.numberOfChildren!==T.numberOfChildren)return!1;for(const F in T.children)if(!D.children[F]||!_r(D.children[F],T.children[F],E))return!1;return!0},subset:mn},Nr={exact:function Ir(D,T){return sr(D,T)},subset:function fr(D,T){return Object.keys(T).length<=Object.keys(D).length&&Object.keys(T).every(E=>Vn(D[E],T[E]))},ignored:()=>!0};function _i(D,T,E){return nr[E.paths](D.root,T.root,E.matrixParams)&&Nr[E.queryParams](D.queryParams,T.queryParams)&&!("exact"===E.fragment&&D.fragment!==T.fragment)}function mn(D,T,E){return Tn(D,T,T.segments,E)}function Tn(D,T,E,F){if(D.segments.length>E.length){const $=D.segments.slice(0,E.length);return!(!zt($,E)||T.hasChildren()||!On($,E,F))}if(D.segments.length===E.length){if(!zt(D.segments,E)||!On(D.segments,E,F))return!1;for(const $ in T.children)if(!D.children[$]||!mn(D.children[$],T.children[$],F))return!1;return!0}{const $=E.slice(0,D.segments.length),ae=E.slice(D.segments.length);return!!(zt(D.segments,$)&&On(D.segments,$,F)&&D.children[Wt])&&Tn(D.children[Wt],T,ae,F)}}function On(D,T,E){return T.every((F,$)=>Nr[E](D[$].parameters,F.parameters))}class wr{constructor(T,E,F){this.root=T,this.queryParams=E,this.fragment=F}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ar(this.queryParams)),this._queryParamMap}toString(){return Rn.serialize(this)}}class bn{constructor(T,E){this.segments=T,this.children=E,this.parent=null,er(E,(F,$)=>F.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jn(this)}}class zr{constructor(T,E){this.path=T,this.parameters=E}get parameterMap(){return this._parameterMap||(this._parameterMap=Ar(this.parameters)),this._parameterMap}toString(){return xe(this)}}function zt(D,T){return D.length===T.length&&D.every((E,F)=>E.path===T[F].path)}let tt=(()=>{class D{}return D.\u0275fac=function(E){return new(E||D)},D.\u0275prov=h.Yz7({token:D,factory:function(){return new St},providedIn:"root"}),D})();class St{parse(T){const E=new Se(T);return new wr(E.parseRootSegment(),E.parseQueryParams(),E.parseFragment())}serialize(T){const E=`/${Je(T.root,!0)}`,F=function De(D){const T=Object.keys(D).map(E=>{const F=D[E];return Array.isArray(F)?F.map($=>`${ge(E)}=${ge($)}`).join("&"):`${ge(E)}=${ge(F)}`}).filter(E=>!!E);return T.length?`?${T.join("&")}`:""}(T.queryParams);return`${E}${F}${"string"==typeof T.fragment?`#${function Xe(D){return encodeURI(D)}(T.fragment)}`:""}`}}const Rn=new St;function Jn(D){return D.segments.map(T=>xe(T)).join("/")}function Je(D,T){if(!D.hasChildren())return Jn(D);if(T){const E=D.children[Wt]?Je(D.children[Wt],!1):"",F=[];return er(D.children,($,ae)=>{ae!==Wt&&F.push(`${ae}:${Je($,!1)}`)}),F.length>0?`${E}(${F.join("//")})`:E}{const E=function Ve(D,T){let E=[];return er(D.children,(F,$)=>{$===Wt&&(E=E.concat(T(F,$)))}),er(D.children,(F,$)=>{$!==Wt&&(E=E.concat(T(F,$)))}),E}(D,(F,$)=>$===Wt?[Je(D.children[Wt],!1)]:[`${$}:${Je(F,!1)}`]);return 1===Object.keys(D.children).length&&null!=D.children[Wt]?`${Jn(D)}/${E[0]}`:`${Jn(D)}/(${E.join("//")})`}}function J(D){return encodeURIComponent(D).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ge(D){return J(D).replace(/%3B/gi,";")}function _t(D){return J(D).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ln(D){return decodeURIComponent(D)}function Ne(D){return ln(D.replace(/\+/g,"%20"))}function xe(D){return`${_t(D.path)}${function $e(D){return Object.keys(D).map(T=>`;${_t(T)}=${_t(D[T])}`).join("")}(D.parameters)}`}const ie=/^[^\/()?;=#]+/;function we(D){const T=D.match(ie);return T?T[0]:""}const ut=/^[^=?&#]+/,gn=/^[^&#]+/;class Se{constructor(T){this.url=T,this.remaining=T}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new bn([],{}):new bn([],this.parseChildren())}parseQueryParams(){const T={};if(this.consumeOptional("?"))do{this.parseQueryParam(T)}while(this.consumeOptional("&"));return T}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const T=[];for(this.peekStartsWith("(")||T.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),T.push(this.parseSegment());let E={};this.peekStartsWith("/(")&&(this.capture("/"),E=this.parseParens(!0));let F={};return this.peekStartsWith("(")&&(F=this.parseParens(!1)),(T.length>0||Object.keys(E).length>0)&&(F[Wt]=new bn(T,E)),F}parseSegment(){const T=we(this.remaining);if(""===T&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(T),new zr(ln(T),this.parseMatrixParams())}parseMatrixParams(){const T={};for(;this.consumeOptional(";");)this.parseParam(T);return T}parseParam(T){const E=we(this.remaining);if(!E)return;this.capture(E);let F="";if(this.consumeOptional("=")){const $=we(this.remaining);$&&(F=$,this.capture(F))}T[ln(E)]=ln(F)}parseQueryParam(T){const E=function Bt(D){const T=D.match(ut);return T?T[0]:""}(this.remaining);if(!E)return;this.capture(E);let F="";if(this.consumeOptional("=")){const Oe=function hn(D){const T=D.match(gn);return T?T[0]:""}(this.remaining);Oe&&(F=Oe,this.capture(F))}const $=Ne(E),ae=Ne(F);if(T.hasOwnProperty($)){let Oe=T[$];Array.isArray(Oe)||(Oe=[Oe],T[$]=Oe),Oe.push(ae)}else T[$]=ae}parseParens(T){const E={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const F=we(this.remaining),$=this.remaining[F.length];if("/"!==$&&")"!==$&&";"!==$)throw new h.vHH(4010,!1);let ae;F.indexOf(":")>-1?(ae=F.slice(0,F.indexOf(":")),this.capture(ae),this.capture(":")):T&&(ae=Wt);const Oe=this.parseChildren();E[ae]=1===Object.keys(Oe).length?Oe[Wt]:new bn([],Oe),this.consumeOptional("//")}return E}peekStartsWith(T){return this.remaining.startsWith(T)}consumeOptional(T){return!!this.peekStartsWith(T)&&(this.remaining=this.remaining.substring(T.length),!0)}capture(T){if(!this.consumeOptional(T))throw new h.vHH(4011,!1)}}function Y(D){return D.segments.length>0?new bn([],{[Wt]:D}):D}function W(D){const T={};for(const F of Object.keys(D.children)){const ae=W(D.children[F]);(ae.segments.length>0||ae.hasChildren())&&(T[F]=ae)}return function te(D){if(1===D.numberOfChildren&&D.children[Wt]){const T=D.children[Wt];return new bn(D.segments.concat(T.segments),T.children)}return D}(new bn(D.segments,T))}function me(D){return D instanceof wr}function Gr(D,T,E,F,$){if(0===E.length)return vi(T.root,T.root,T.root,F,$);const ae=function ni(D){if("string"==typeof D[0]&&1===D.length&&"/"===D[0])return new Xi(!0,0,D);let T=0,E=!1;const F=D.reduce(($,ae,Oe)=>{if("object"==typeof ae&&null!=ae){if(ae.outlets){const Be={};return er(ae.outlets,(xt,pn)=>{Be[pn]="string"==typeof xt?xt.split("/"):xt}),[...$,{outlets:Be}]}if(ae.segmentPath)return[...$,ae.segmentPath]}return"string"!=typeof ae?[...$,ae]:0===Oe?(ae.split("/").forEach((Be,xt)=>{0==xt&&"."===Be||(0==xt&&""===Be?E=!0:".."===Be?T++:""!=Be&&$.push(Be))}),$):[...$,ae]},[]);return new Xi(E,T,F)}(E);return ae.toRoot()?vi(T.root,T.root,new bn([],{}),F,$):function Oe(xt){const pn=function Oi(D,T,E,F){if(D.isAbsolute)return new Ii(T.root,!0,0);if(-1===F)return new Ii(E,E===T.root,0);return function ri(D,T,E){let F=D,$=T,ae=E;for(;ae>$;){if(ae-=$,F=F.parent,!F)throw new h.vHH(4005,!1);$=F.segments.length}return new Ii(F,!1,$-ae)}(E,F+(un(D.commands[0])?0:1),D.numberOfDoubleDots)}(ae,T,D.snapshot?._urlSegment,xt),hr=pn.processChildren?Ie(pn.segmentGroup,pn.index,ae.commands):Tr(pn.segmentGroup,pn.index,ae.commands);return vi(T.root,pn.segmentGroup,hr,F,$)}(D.snapshot?._lastPathIndex)}function un(D){return"object"==typeof D&&null!=D&&!D.outlets&&!D.segmentPath}function si(D){return"object"==typeof D&&null!=D&&D.outlets}function vi(D,T,E,F,$){let Oe,ae={};F&&er(F,(xt,pn)=>{ae[pn]=Array.isArray(xt)?xt.map(hr=>`${hr}`):`${xt}`}),Oe=D===T?E:bi(D,T,E);const Be=Y(W(Oe));return new wr(Be,ae,$)}function bi(D,T,E){const F={};return er(D.children,($,ae)=>{F[ae]=$===T?E:bi($,T,E)}),new bn(D.segments,F)}class Xi{constructor(T,E,F){if(this.isAbsolute=T,this.numberOfDoubleDots=E,this.commands=F,T&&F.length>0&&un(F[0]))throw new h.vHH(4003,!1);const $=F.find(si);if($&&$!==yr(F))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ii{constructor(T,E,F){this.segmentGroup=T,this.processChildren=E,this.index=F}}function Tr(D,T,E){if(D||(D=new bn([],{})),0===D.segments.length&&D.hasChildren())return Ie(D,T,E);const F=function At(D,T,E){let F=0,$=T;const ae={match:!1,pathIndex:0,commandIndex:0};for(;$<D.segments.length;){if(F>=E.length)return ae;const Oe=D.segments[$],Be=E[F];if(si(Be))break;const xt=`${Be}`,pn=F<E.length-1?E[F+1]:null;if($>0&&void 0===xt)break;if(xt&&pn&&"object"==typeof pn&&void 0===pn.outlets){if(!Zt(xt,pn,Oe))return ae;F+=2}else{if(!Zt(xt,{},Oe))return ae;F++}$++}return{match:!0,pathIndex:$,commandIndex:F}}(D,T,E),$=E.slice(F.commandIndex);if(F.match&&F.pathIndex<D.segments.length){const ae=new bn(D.segments.slice(0,F.pathIndex),{});return ae.children[Wt]=new bn(D.segments.slice(F.pathIndex),D.children),Ie(ae,0,$)}return F.match&&0===$.length?new bn(D.segments,{}):F.match&&!D.hasChildren()?oe(D,T,E):F.match?Ie(D,0,$):oe(D,T,E)}function Ie(D,T,E){if(0===E.length)return new bn(D.segments,{});{const F=function ss(D){return si(D[0])?D[0].outlets:{[Wt]:D}}(E),$={};return er(F,(ae,Oe)=>{"string"==typeof ae&&(ae=[ae]),null!==ae&&($[Oe]=Tr(D.children[Oe],T,ae))}),er(D.children,(ae,Oe)=>{void 0===F[Oe]&&($[Oe]=ae)}),new bn(D.segments,$)}}function oe(D,T,E){const F=D.segments.slice(0,T);let $=0;for(;$<E.length;){const ae=E[$];if(si(ae)){const xt=ke(ae.outlets);return new bn(F,xt)}if(0===$&&un(E[0])){F.push(new zr(D.segments[T].path,yt(E[0]))),$++;continue}const Oe=si(ae)?ae.outlets[Wt]:`${ae}`,Be=$<E.length-1?E[$+1]:null;Oe&&Be&&un(Be)?(F.push(new zr(Oe,yt(Be))),$+=2):(F.push(new zr(Oe,{})),$++)}return new bn(F,{})}function ke(D){const T={};return er(D,(E,F)=>{"string"==typeof E&&(E=[E]),null!==E&&(T[F]=oe(new bn([],{}),0,E))}),T}function yt(D){const T={};return er(D,(E,F)=>T[F]=`${E}`),T}function Zt(D,T,E){return D==E.path&&sr(T,E.parameters)}class Xt{constructor(T,E){this.id=T,this.url=E}}class dr extends Xt{constructor(T,E,F="imperative",$=null){super(T,E),this.type=0,this.navigationTrigger=F,this.restoredState=$}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class pi extends Xt{constructor(T,E,F){super(T,E),this.urlAfterRedirects=F,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Fr extends Xt{constructor(T,E,F,$){super(T,E),this.reason=F,this.code=$,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class gi extends Xt{constructor(T,E,F,$){super(T,E),this.error=F,this.target=$,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ms extends Xt{constructor(T,E,F,$){super(T,E),this.urlAfterRedirects=F,this.state=$,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ki extends Xt{constructor(T,E,F,$){super(T,E),this.urlAfterRedirects=F,this.state=$,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xs extends Xt{constructor(T,E,F,$,ae){super(T,E),this.urlAfterRedirects=F,this.state=$,this.shouldActivate=ae,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class mi extends Xt{constructor(T,E,F,$){super(T,E),this.urlAfterRedirects=F,this.state=$,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class no extends Xt{constructor(T,E,F,$){super(T,E),this.urlAfterRedirects=F,this.state=$,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ca{constructor(T){this.route=T,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wo{constructor(T){this.route=T,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Eo{constructor(T){this.snapshot=T,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ro{constructor(T){this.snapshot=T,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class os{constructor(T){this.snapshot=T,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class at{constructor(T){this.snapshot=T,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class et{constructor(T,E,F){this.routerEvent=T,this.position=E,this.anchor=F,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ut{constructor(T){this._root=T}get root(){return this._root.value}parent(T){const E=this.pathFromRoot(T);return E.length>1?E[E.length-2]:null}children(T){const E=sn(T,this._root);return E?E.children.map(F=>F.value):[]}firstChild(T){const E=sn(T,this._root);return E&&E.children.length>0?E.children[0].value:null}siblings(T){const E=En(T,this._root);return E.length<2?[]:E[E.length-2].children.map($=>$.value).filter($=>$!==T)}pathFromRoot(T){return En(T,this._root).map(E=>E.value)}}function sn(D,T){if(D===T.value)return T;for(const E of T.children){const F=sn(D,E);if(F)return F}return null}function En(D,T){if(D===T.value)return[T];for(const E of T.children){const F=En(D,E);if(F.length)return F.unshift(T),F}return[]}class Yn{constructor(T,E){this.value=T,this.children=E}toString(){return`TreeNode(${this.value})`}}function oi(D){const T={};return D&&D.children.forEach(E=>T[E.value.outlet]=E),T}class Qr extends Ut{constructor(T,E){super(T),this.snapshot=E,Os(this,T)}toString(){return this.snapshot.toString()}}function es(D,T){const E=function Gs(D,T){const Oe=new wi([],{},{},"",{},Wt,T,null,D.root,-1,{});return new Ho("",new Yn(Oe,[]))}(D,T),F=new d.X([new zr("",{})]),$=new d.X({}),ae=new d.X({}),Oe=new d.X({}),Be=new d.X(""),xt=new Bi(F,$,Oe,Be,ae,Wt,T,E.root);return xt.snapshot=E.root,new Qr(new Yn(xt,[]),E)}class Bi{constructor(T,E,F,$,ae,Oe,Be,xt){this.url=T,this.params=E,this.queryParams=F,this.fragment=$,this.data=ae,this.outlet=Oe,this.component=Be,this.title=this.data?.pipe((0,Ge.U)(pn=>pn[dn]))??(0,S.of)(void 0),this._futureSnapshot=xt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ge.U)(T=>Ar(T)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ge.U)(T=>Ar(T)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Co(D,T="emptyOnly"){const E=D.pathFromRoot;let F=0;if("always"!==T)for(F=E.length-1;F>=1;){const $=E[F],ae=E[F-1];if($.routeConfig&&""===$.routeConfig.path)F--;else{if(ae.component)break;F--}}return function Vi(D){return D.reduce((T,E)=>({params:{...T.params,...E.params},data:{...T.data,...E.data},resolve:{...E.data,...T.resolve,...E.routeConfig?.data,...E._resolvedData}}),{params:{},data:{},resolve:{}})}(E.slice(F))}class wi{constructor(T,E,F,$,ae,Oe,Be,xt,pn,hr,Un,Ur){this.url=T,this.params=E,this.queryParams=F,this.fragment=$,this.data=ae,this.outlet=Oe,this.component=Be,this.title=this.data?.[dn],this.routeConfig=xt,this._urlSegment=pn,this._lastPathIndex=hr,this._correctedLastPathIndex=Ur??hr,this._resolve=Un}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ar(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ar(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(F=>F.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ho extends Ut{constructor(T,E){super(E),this.url=T,Os(this,E)}toString(){return Ti(this._root)}}function Os(D,T){T.value._routerState=D,T.children.forEach(E=>Os(D,E))}function Ti(D){const T=D.children.length>0?` { ${D.children.map(Ti).join(", ")} } `:"";return`${D.value}${T}`}function Lr(D){if(D.snapshot){const T=D.snapshot,E=D._futureSnapshot;D.snapshot=E,sr(T.queryParams,E.queryParams)||D.queryParams.next(E.queryParams),T.fragment!==E.fragment&&D.fragment.next(E.fragment),sr(T.params,E.params)||D.params.next(E.params),function ir(D,T){if(D.length!==T.length)return!1;for(let E=0;E<D.length;++E)if(!sr(D[E],T[E]))return!1;return!0}(T.url,E.url)||D.url.next(E.url),sr(T.data,E.data)||D.data.next(E.data)}else D.snapshot=D._futureSnapshot,D.data.next(D._futureSnapshot.data)}function as(D,T){const E=sr(D.params,T.params)&&function Kn(D,T){return zt(D,T)&&D.every((E,F)=>sr(E.parameters,T[F].parameters))}(D.url,T.url);return E&&!(!D.parent!=!T.parent)&&(!D.parent||as(D.parent,T.parent))}function Is(D,T,E){if(E&&D.shouldReuseRoute(T.value,E.value.snapshot)){const F=E.value;F._futureSnapshot=T.value;const $=function Us(D,T,E){return T.children.map(F=>{for(const $ of E.children)if(D.shouldReuseRoute(F.value,$.value.snapshot))return Is(D,F,$);return Is(D,F)})}(D,T,E);return new Yn(F,$)}{if(D.shouldAttach(T.value)){const ae=D.retrieve(T.value);if(null!==ae){const Oe=ae.route;return Oe.value._futureSnapshot=T.value,Oe.children=T.children.map(Be=>Is(D,Be)),Oe}}const F=function ko(D){return new Bi(new d.X(D.url),new d.X(D.params),new d.X(D.queryParams),new d.X(D.fragment),new d.X(D.data),D.outlet,D.component,D)}(T.value),$=T.children.map(ae=>Is(D,ae));return new Yn(F,$)}}const ks="ngNavigationCancelingError";function Jo(D,T){const{redirectTo:E,navigationBehaviorOptions:F}=me(T)?{redirectTo:T,navigationBehaviorOptions:void 0}:T,$=ls(!1,0,T);return $.url=E,$.navigationBehaviorOptions=F,$}function ls(D,T,E){const F=new Error("NavigationCancelingError: "+(D||""));return F[ks]=!0,F.cancellationCode=T,E&&(F.url=E),F}function ys(D){return Ei(D)&&me(D.url)}function Ei(D){return D&&D[ks]}class Wi{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ji,this.attachRef=null}}let ji=(()=>{class D{constructor(){this.contexts=new Map}onChildOutletCreated(E,F){const $=this.getOrCreateContext(E);$.outlet=F,this.contexts.set(E,$)}onChildOutletDestroyed(E){const F=this.getContext(E);F&&(F.outlet=null,F.attachRef=null)}onOutletDeactivated(){const E=this.contexts;return this.contexts=new Map,E}onOutletReAttached(E){this.contexts=E}getOrCreateContext(E){let F=this.getContext(E);return F||(F=new Wi,this.contexts.set(E,F)),F}getContext(E){return this.contexts.get(E)||null}}return D.\u0275fac=function(E){return new(E||D)},D.\u0275prov=h.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const Bs=!1;let Xo=(()=>{class D{constructor(E,F,$,ae,Oe){this.parentContexts=E,this.location=F,this.changeDetector=ae,this.environmentInjector=Oe,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=$||Wt,E.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const E=this.parentContexts.getContext(this.name);E&&E.route&&(E.attachRef?this.attach(E.attachRef,E.route):this.activateWith(E.route,E.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,Bs);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,Bs);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,Bs);this.location.detach();const E=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(E.instance),E}attach(E,F){this.activated=E,this._activatedRoute=F,this.location.insert(E.hostView),this.attachEvents.emit(E.instance)}deactivate(){if(this.activated){const E=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(E)}}activateWith(E,F){if(this.isActivated)throw new h.vHH(4013,Bs);this._activatedRoute=E;const $=this.location,Oe=E._futureSnapshot.component,Be=this.parentContexts.getOrCreateContext(this.name).children,xt=new Ws(E,Be,$.injector);if(F&&function Ci(D){return!!D.resolveComponentFactory}(F)){const pn=F.resolveComponentFactory(Oe);this.activated=$.createComponent(pn,$.length,xt)}else this.activated=$.createComponent(Oe,{index:$.length,injector:xt,environmentInjector:F??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return D.\u0275fac=function(E){return new(E||D)(h.Y36(ji),h.Y36(h.s_b),h.$8M("name"),h.Y36(h.sBO),h.Y36(h.lqb))},D.\u0275dir=h.lG2({type:D,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),D})();class Ws{constructor(T,E,F){this.route=T,this.childContexts=E,this.parent=F}get(T,E){return T===Bi?this.route:T===ji?this.childContexts:this.parent.get(T,E)}}let Hi=(()=>{class D{}return D.\u0275fac=function(E){return new(E||D)},D.\u0275cmp=h.Xpm({type:D,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(E,F){1&E&&h._UZ(0,"router-outlet")},dependencies:[Xo],encapsulation:2}),D})();function Po(D,T){return D.providers&&!D._injector&&(D._injector=(0,h.MMx)(D.providers,T,`Route: ${D.path}`)),D._injector??T}function ve(D){const T=D.children&&D.children.map(ve),E=T?{...D,children:T}:{...D};return!E.component&&!E.loadComponent&&(T||E.loadChildren)&&E.outlet&&E.outlet!==Wt&&(E.component=Hi),E}function L(D){return D.outlet||Wt}function P(D,T){const E=D.filter(F=>L(F)===T);return E.push(...D.filter(F=>L(F)!==T)),E}function Q(D){if(!D)return null;if(D.routeConfig?._injector)return D.routeConfig._injector;for(let T=D.parent;T;T=T.parent){const E=T.routeConfig;if(E?._loadedInjector)return E._loadedInjector;if(E?._injector)return E._injector}return null}class Ze{constructor(T,E,F,$){this.routeReuseStrategy=T,this.futureState=E,this.currState=F,this.forwardEvent=$}activate(T){const E=this.futureState._root,F=this.currState?this.currState._root:null;this.deactivateChildRoutes(E,F,T),Lr(this.futureState.root),this.activateChildRoutes(E,F,T)}deactivateChildRoutes(T,E,F){const $=oi(E);T.children.forEach(ae=>{const Oe=ae.value.outlet;this.deactivateRoutes(ae,$[Oe],F),delete $[Oe]}),er($,(ae,Oe)=>{this.deactivateRouteAndItsChildren(ae,F)})}deactivateRoutes(T,E,F){const $=T.value,ae=E?E.value:null;if($===ae)if($.component){const Oe=F.getContext($.outlet);Oe&&this.deactivateChildRoutes(T,E,Oe.children)}else this.deactivateChildRoutes(T,E,F);else ae&&this.deactivateRouteAndItsChildren(E,F)}deactivateRouteAndItsChildren(T,E){T.value.component&&this.routeReuseStrategy.shouldDetach(T.value.snapshot)?this.detachAndStoreRouteSubtree(T,E):this.deactivateRouteAndOutlet(T,E)}detachAndStoreRouteSubtree(T,E){const F=E.getContext(T.value.outlet),$=F&&T.value.component?F.children:E,ae=oi(T);for(const Oe of Object.keys(ae))this.deactivateRouteAndItsChildren(ae[Oe],$);if(F&&F.outlet){const Oe=F.outlet.detach(),Be=F.children.onOutletDeactivated();this.routeReuseStrategy.store(T.value.snapshot,{componentRef:Oe,route:T,contexts:Be})}}deactivateRouteAndOutlet(T,E){const F=E.getContext(T.value.outlet),$=F&&T.value.component?F.children:E,ae=oi(T);for(const Oe of Object.keys(ae))this.deactivateRouteAndItsChildren(ae[Oe],$);F&&F.outlet&&(F.outlet.deactivate(),F.children.onOutletDeactivated(),F.attachRef=null,F.resolver=null,F.route=null)}activateChildRoutes(T,E,F){const $=oi(E);T.children.forEach(ae=>{this.activateRoutes(ae,$[ae.value.outlet],F),this.forwardEvent(new at(ae.value.snapshot))}),T.children.length&&this.forwardEvent(new ro(T.value.snapshot))}activateRoutes(T,E,F){const $=T.value,ae=E?E.value:null;if(Lr($),$===ae)if($.component){const Oe=F.getOrCreateContext($.outlet);this.activateChildRoutes(T,E,Oe.children)}else this.activateChildRoutes(T,E,F);else if($.component){const Oe=F.getOrCreateContext($.outlet);if(this.routeReuseStrategy.shouldAttach($.snapshot)){const Be=this.routeReuseStrategy.retrieve($.snapshot);this.routeReuseStrategy.store($.snapshot,null),Oe.children.onOutletReAttached(Be.contexts),Oe.attachRef=Be.componentRef,Oe.route=Be.route.value,Oe.outlet&&Oe.outlet.attach(Be.componentRef,Be.route.value),Lr(Be.route.value),this.activateChildRoutes(T,null,Oe.children)}else{const Be=Q($.snapshot),xt=Be?.get(h._Vd)??null;Oe.attachRef=null,Oe.route=$,Oe.resolver=xt,Oe.injector=Be,Oe.outlet&&Oe.outlet.activateWith($,Oe.injector),this.activateChildRoutes(T,null,Oe.children)}}else this.activateChildRoutes(T,null,F)}}class Et{constructor(T){this.path=T,this.route=this.path[this.path.length-1]}}class Vt{constructor(T,E){this.component=T,this.route=E}}function fn(D,T,E){const F=D._root;return zn(F,T?T._root:null,E,[F.value])}function jn(D,T){const E=Symbol(),F=T.get(D,E);return F===E?"function"!=typeof D||(0,h.Z0I)(D)?T.get(D):D:F}function zn(D,T,E,F,$={canDeactivateChecks:[],canActivateChecks:[]}){const ae=oi(T);return D.children.forEach(Oe=>{(function us(D,T,E,F,$={canDeactivateChecks:[],canActivateChecks:[]}){const ae=D.value,Oe=T?T.value:null,Be=E?E.getContext(D.value.outlet):null;if(Oe&&ae.routeConfig===Oe.routeConfig){const xt=function jt(D,T,E){if("function"==typeof E)return E(D,T);switch(E){case"pathParamsChange":return!zt(D.url,T.url);case"pathParamsOrQueryParamsChange":return!zt(D.url,T.url)||!sr(D.queryParams,T.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!as(D,T)||!sr(D.queryParams,T.queryParams);default:return!as(D,T)}}(Oe,ae,ae.routeConfig.runGuardsAndResolvers);xt?$.canActivateChecks.push(new Et(F)):(ae.data=Oe.data,ae._resolvedData=Oe._resolvedData),zn(D,T,ae.component?Be?Be.children:null:E,F,$),xt&&Be&&Be.outlet&&Be.outlet.isActivated&&$.canDeactivateChecks.push(new Vt(Be.outlet.component,Oe))}else Oe&&Xn(T,Be,$),$.canActivateChecks.push(new Et(F)),zn(D,null,ae.component?Be?Be.children:null:E,F,$)})(Oe,ae[Oe.value.outlet],E,F.concat([Oe.value]),$),delete ae[Oe.value.outlet]}),er(ae,(Oe,Be)=>Xn(Oe,E.getContext(Be),$)),$}function Xn(D,T,E){const F=oi(D),$=D.value;er(F,(ae,Oe)=>{Xn(ae,$.component?T?T.children.getContext(Oe):null:T,E)}),E.canDeactivateChecks.push(new Vt($.component&&T&&T.outlet&&T.outlet.isActivated?T.outlet.component:null,$))}function cs(D){return"function"==typeof D}function fo(D){return D instanceof de.K||"EmptyError"===D?.name}const G=Symbol("INITIAL_VALUE");function H(){return(0,Me.w)(D=>(0,Ae.a)(D.map(T=>T.pipe((0,rt.q)(1),(0,Pt.O)(G)))).pipe((0,Ge.U)(T=>{for(const E of T)if(!0!==E){if(E===G)return G;if(!1===E||E instanceof wr)return E}return!0}),(0,qe.h)(T=>T!==G),(0,rt.q)(1)))}function Ys(D){return(0,Fe.z)((0,je.b)(T=>{if(me(T))throw Jo(0,T)}),(0,Ge.U)(T=>!0===T))}const ea={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function fa(D,T,E,F,$){const ae=Ro(D,T,E);return ae.matched?function ha(D,T,E,F){const $=T.canMatch;if(!$||0===$.length)return(0,S.of)(!0);const ae=$.map(Oe=>{const Be=jn(Oe,D);return Ht(function Ks(D){return D&&cs(D.canMatch)}(Be)?Be.canMatch(T,E):D.runInContext(()=>Be(T,E)))});return(0,S.of)(ae).pipe(H(),Ys())}(F=Po(T,F),T,E).pipe((0,Ge.U)(Oe=>!0===Oe?ae:{...ea})):(0,S.of)(ae)}function Ro(D,T,E){if(""===T.path)return"full"===T.pathMatch&&(D.hasChildren()||E.length>0)?{...ea}:{matched:!0,consumedSegments:[],remainingSegments:E,parameters:{},positionalParamSegments:{}};const $=(T.matcher||br)(E,D,T);if(!$)return{...ea};const ae={};er($.posParams,(Be,xt)=>{ae[xt]=Be.path});const Oe=$.consumed.length>0?{...ae,...$.consumed[$.consumed.length-1].parameters}:ae;return{matched:!0,consumedSegments:$.consumed,remainingSegments:E.slice($.consumed.length),parameters:Oe,positionalParamSegments:$.posParams??{}}}function pa(D,T,E,F,$="corrected"){if(E.length>0&&function No(D,T,E){return E.some(F=>R(D,T,F)&&L(F)!==Wt)}(D,E,F)){const Oe=new bn(T,function $a(D,T,E,F){const $={};$[Wt]=F,F._sourceSegment=D,F._segmentIndexShift=T.length;for(const ae of E)if(""===ae.path&&L(ae)!==Wt){const Oe=new bn([],{});Oe._sourceSegment=D,Oe._segmentIndexShift=T.length,$[L(ae)]=Oe}return $}(D,T,F,new bn(E,D.children)));return Oe._sourceSegment=D,Oe._segmentIndexShift=T.length,{segmentGroup:Oe,slicedSegments:[]}}if(0===E.length&&function Za(D,T,E){return E.some(F=>R(D,T,F))}(D,E,F)){const Oe=new bn(D.segments,function so(D,T,E,F,$,ae){const Oe={};for(const Be of F)if(R(D,E,Be)&&!$[L(Be)]){const xt=new bn([],{});xt._sourceSegment=D,xt._segmentIndexShift="legacy"===ae?D.segments.length:T.length,Oe[L(Be)]=xt}return{...$,...Oe}}(D,T,E,F,D.children,$));return Oe._sourceSegment=D,Oe._segmentIndexShift=T.length,{segmentGroup:Oe,slicedSegments:E}}const ae=new bn(D.segments,D.children);return ae._sourceSegment=D,ae._segmentIndexShift=T.length,{segmentGroup:ae,slicedSegments:E}}function R(D,T,E){return(!(D.hasChildren()||T.length>0)||"full"!==E.pathMatch)&&""===E.path}function ee(D,T,E,F){return!!(L(D)===F||F!==Wt&&R(T,E,D))&&("**"===D.path||Ro(T,D,E).matched)}function V(D,T,E){return 0===T.length&&!D.children[E]}const le=!1;class Ue{constructor(T){this.segmentGroup=T||null}}class Ct{constructor(T){this.urlTree=T}}function Nt(D){return Pe(new Ue(D))}function Bn(D){return Pe(new Ct(D))}class Wr{constructor(T,E,F,$,ae){this.injector=T,this.configLoader=E,this.urlSerializer=F,this.urlTree=$,this.config=ae,this.allowRedirects=!0}apply(){const T=pa(this.urlTree.root,[],[],this.config).segmentGroup,E=new bn(T.segments,T.children);return this.expandSegmentGroup(this.injector,this.config,E,Wt).pipe((0,Ge.U)(ae=>this.createUrlTree(W(ae),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,pt.K)(ae=>{if(ae instanceof Ct)return this.allowRedirects=!1,this.match(ae.urlTree);throw ae instanceof Ue?this.noMatchError(ae):ae}))}match(T){return this.expandSegmentGroup(this.injector,this.config,T.root,Wt).pipe((0,Ge.U)($=>this.createUrlTree(W($),T.queryParams,T.fragment))).pipe((0,pt.K)($=>{throw $ instanceof Ue?this.noMatchError($):$}))}noMatchError(T){return new h.vHH(4002,le)}createUrlTree(T,E,F){const $=Y(T);return new wr($,E,F)}expandSegmentGroup(T,E,F,$){return 0===F.segments.length&&F.hasChildren()?this.expandChildren(T,E,F).pipe((0,Ge.U)(ae=>new bn([],ae))):this.expandSegment(T,F,E,F.segments,$,!0)}expandChildren(T,E,F){const $=[];for(const ae of Object.keys(F.children))"primary"===ae?$.unshift(ae):$.push(ae);return(0,c.D)($).pipe((0,We.b)(ae=>{const Oe=F.children[ae],Be=P(E,ae);return this.expandSegmentGroup(T,Be,Oe,ae).pipe((0,Ge.U)(xt=>({segment:xt,outlet:ae})))}),(0,dt.R)((ae,Oe)=>(ae[Oe.outlet]=Oe.segment,ae),{}),cn())}expandSegment(T,E,F,$,ae,Oe){return(0,c.D)(F).pipe((0,We.b)(Be=>this.expandSegmentAgainstRoute(T,E,F,Be,$,ae,Oe).pipe((0,pt.K)(pn=>{if(pn instanceof Ue)return(0,S.of)(null);throw pn}))),(0,ct.P)(Be=>!!Be),(0,pt.K)((Be,xt)=>{if(fo(Be))return V(E,$,ae)?(0,S.of)(new bn([],{})):Nt(E);throw Be}))}expandSegmentAgainstRoute(T,E,F,$,ae,Oe,Be){return ee($,E,ae,Oe)?void 0===$.redirectTo?this.matchSegmentAgainstRoute(T,E,$,ae,Oe):Be&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(T,E,F,$,ae,Oe):Nt(E):Nt(E)}expandSegmentAgainstRouteUsingRedirect(T,E,F,$,ae,Oe){return"**"===$.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(T,F,$,Oe):this.expandRegularSegmentAgainstRouteUsingRedirect(T,E,F,$,ae,Oe)}expandWildCardWithParamsAgainstRouteUsingRedirect(T,E,F,$){const ae=this.applyRedirectCommands([],F.redirectTo,{});return F.redirectTo.startsWith("/")?Bn(ae):this.lineralizeSegments(F,ae).pipe((0,it.z)(Oe=>{const Be=new bn(Oe,{});return this.expandSegment(T,Be,E,Oe,$,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(T,E,F,$,ae,Oe){const{matched:Be,consumedSegments:xt,remainingSegments:pn,positionalParamSegments:hr}=Ro(E,$,ae);if(!Be)return Nt(E);const Un=this.applyRedirectCommands(xt,$.redirectTo,hr);return $.redirectTo.startsWith("/")?Bn(Un):this.lineralizeSegments($,Un).pipe((0,it.z)(Ur=>this.expandSegment(T,E,F,Ur.concat(pn),Oe,!1)))}matchSegmentAgainstRoute(T,E,F,$,ae){return"**"===F.path?(T=Po(F,T),F.loadChildren?(F._loadedRoutes?(0,S.of)({routes:F._loadedRoutes,injector:F._loadedInjector}):this.configLoader.loadChildren(T,F)).pipe((0,Ge.U)(Be=>(F._loadedRoutes=Be.routes,F._loadedInjector=Be.injector,new bn($,{})))):(0,S.of)(new bn($,{}))):fa(E,F,$,T).pipe((0,Me.w)(({matched:Oe,consumedSegments:Be,remainingSegments:xt})=>Oe?this.getChildConfig(T=F._injector??T,F,$).pipe((0,it.z)(hr=>{const Un=hr.injector??T,Ur=hr.routes,{segmentGroup:Ns,slicedSegments:Xs}=pa(E,Be,xt,Ur),ba=new bn(Ns.segments,Ns.children);if(0===Xs.length&&ba.hasChildren())return this.expandChildren(Un,Ur,ba).pipe((0,Ge.U)(Ko=>new bn(Be,Ko)));if(0===Ur.length&&0===Xs.length)return(0,S.of)(new bn(Be,{}));const Ms=L(F)===ae;return this.expandSegment(Un,ba,Ur,Xs,Ms?Wt:ae,!0).pipe((0,Ge.U)(Ao=>new bn(Be.concat(Ao.segments),Ao.children)))})):Nt(E)))}getChildConfig(T,E,F){return E.children?(0,S.of)({routes:E.children,injector:T}):E.loadChildren?void 0!==E._loadedRoutes?(0,S.of)({routes:E._loadedRoutes,injector:E._loadedInjector}):function zo(D,T,E,F){const $=T.canLoad;if(void 0===$||0===$.length)return(0,S.of)(!0);const ae=$.map(Oe=>{const Be=jn(Oe,D);return Ht(function Ri(D){return D&&cs(D.canLoad)}(Be)?Be.canLoad(T,E):D.runInContext(()=>Be(T,E)))});return(0,S.of)(ae).pipe(H(),Ys())}(T,E,F).pipe((0,it.z)($=>$?this.configLoader.loadChildren(T,E).pipe((0,je.b)(ae=>{E._loadedRoutes=ae.routes,E._loadedInjector=ae.injector})):function Or(D){return Pe(ls(le,3))}())):(0,S.of)({routes:[],injector:T})}lineralizeSegments(T,E){let F=[],$=E.root;for(;;){if(F=F.concat($.segments),0===$.numberOfChildren)return(0,S.of)(F);if($.numberOfChildren>1||!$.children[Wt])return Pe(new h.vHH(4e3,le));$=$.children[Wt]}}applyRedirectCommands(T,E,F){return this.applyRedirectCreateUrlTree(E,this.urlSerializer.parse(E),T,F)}applyRedirectCreateUrlTree(T,E,F,$){const ae=this.createSegmentGroup(T,E.root,F,$);return new wr(ae,this.createQueryParams(E.queryParams,this.urlTree.queryParams),E.fragment)}createQueryParams(T,E){const F={};return er(T,($,ae)=>{if("string"==typeof $&&$.startsWith(":")){const Be=$.substring(1);F[ae]=E[Be]}else F[ae]=$}),F}createSegmentGroup(T,E,F,$){const ae=this.createSegments(T,E.segments,F,$);let Oe={};return er(E.children,(Be,xt)=>{Oe[xt]=this.createSegmentGroup(T,Be,F,$)}),new bn(ae,Oe)}createSegments(T,E,F,$){return E.map(ae=>ae.path.startsWith(":")?this.findPosParam(T,ae,$):this.findOrReturn(ae,F))}findPosParam(T,E,F){const $=F[E.path.substring(1)];if(!$)throw new h.vHH(4001,le);return $}findOrReturn(T,E){let F=0;for(const $ of E){if($.path===T.path)return E.splice(F),$;F++}return T}}class Ni{}class ts{constructor(T,E,F,$,ae,Oe,Be,xt){this.injector=T,this.rootComponentType=E,this.config=F,this.urlTree=$,this.url=ae,this.paramsInheritanceStrategy=Oe,this.relativeLinkResolution=Be,this.urlSerializer=xt}recognize(){const T=pa(this.urlTree.root,[],[],this.config.filter(E=>void 0===E.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,T,Wt).pipe((0,Ge.U)(E=>{if(null===E)return null;const F=new wi([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Wt,this.rootComponentType,null,this.urlTree.root,-1,{}),$=new Yn(F,E),ae=new Ho(this.url,$);return this.inheritParamsAndData(ae._root),ae}))}inheritParamsAndData(T){const E=T.value,F=Co(E,this.paramsInheritanceStrategy);E.params=Object.freeze(F.params),E.data=Object.freeze(F.data),T.children.forEach($=>this.inheritParamsAndData($))}processSegmentGroup(T,E,F,$){return 0===F.segments.length&&F.hasChildren()?this.processChildren(T,E,F):this.processSegment(T,E,F,F.segments,$)}processChildren(T,E,F){return(0,c.D)(Object.keys(F.children)).pipe((0,We.b)($=>{const ae=F.children[$],Oe=P(E,$);return this.processSegmentGroup(T,Oe,ae,$)}),(0,dt.R)(($,ae)=>$&&ae?($.push(...ae),$):null),function Rt(D,T=!1){return(0,He.e)((E,F)=>{let $=0;E.subscribe((0,Tt.x)(F,ae=>{const Oe=D(ae,$++);(Oe||T)&&F.next(ae),!Oe&&F.complete()}))})}($=>null!==$),(0,Qt.d)(null),cn(),(0,Ge.U)($=>{if(null===$)return null;const ae=tn($);return function Kr(D){D.sort((T,E)=>T.value.outlet===Wt?-1:E.value.outlet===Wt?1:T.value.outlet.localeCompare(E.value.outlet))}(ae),ae}))}processSegment(T,E,F,$,ae){return(0,c.D)(E).pipe((0,We.b)(Oe=>this.processSegmentAgainstRoute(Oe._injector??T,Oe,F,$,ae)),(0,ct.P)(Oe=>!!Oe),(0,pt.K)(Oe=>{if(fo(Oe))return V(F,$,ae)?(0,S.of)([]):(0,S.of)(null);throw Oe}))}processSegmentAgainstRoute(T,E,F,$,ae){if(E.redirectTo||!ee(E,F,$,ae))return(0,S.of)(null);let Oe;if("**"===E.path){const Be=$.length>0?yr($).parameters:{},xt=ga(F)+$.length,pn=new wi($,Be,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,or(E),L(E),E.component??E._loadedComponent??null,E,li(F),xt,gl(E),xt);Oe=(0,S.of)({snapshot:pn,consumedSegments:[],remainingSegments:[]})}else Oe=fa(F,E,$,T).pipe((0,Ge.U)(({matched:Be,consumedSegments:xt,remainingSegments:pn,parameters:hr})=>{if(!Be)return null;const Un=ga(F)+xt.length;return{snapshot:new wi(xt,hr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,or(E),L(E),E.component??E._loadedComponent??null,E,li(F),Un,gl(E),Un),consumedSegments:xt,remainingSegments:pn}}));return Oe.pipe((0,Me.w)(Be=>{if(null===Be)return(0,S.of)(null);const{snapshot:xt,consumedSegments:pn,remainingSegments:hr}=Be;T=E._injector??T;const Un=E._loadedInjector??T,Ur=function vs(D){return D.children?D.children:D.loadChildren?D._loadedRoutes:[]}(E),{segmentGroup:Ns,slicedSegments:Xs}=pa(F,pn,hr,Ur.filter(Ms=>void 0===Ms.redirectTo),this.relativeLinkResolution);if(0===Xs.length&&Ns.hasChildren())return this.processChildren(Un,Ur,Ns).pipe((0,Ge.U)(Ms=>null===Ms?null:[new Yn(xt,Ms)]));if(0===Ur.length&&0===Xs.length)return(0,S.of)([new Yn(xt,[])]);const ba=L(E)===ae;return this.processSegment(Un,Ur,Ns,Xs,ba?Wt:ae).pipe((0,Ge.U)(Ms=>null===Ms?null:[new Yn(xt,Ms)]))}))}}function Rs(D){const T=D.value.routeConfig;return T&&""===T.path&&void 0===T.redirectTo}function tn(D){const T=[],E=new Set;for(const F of D){if(!Rs(F)){T.push(F);continue}const $=T.find(ae=>F.value.routeConfig===ae.value.routeConfig);void 0!==$?($.children.push(...F.children),E.add($)):T.push(F)}for(const F of E){const $=tn(F.children);T.push(new Yn(F.value,$))}return T.filter(F=>!E.has(F))}function li(D){let T=D;for(;T._sourceSegment;)T=T._sourceSegment;return T}function ga(D){let T=D,E=T._segmentIndexShift??0;for(;T._sourceSegment;)T=T._sourceSegment,E+=T._segmentIndexShift??0;return E-1}function or(D){return D.data||{}}function gl(D){return D.resolve||{}}function jl(D){return"string"==typeof D.title||null===D.title}function hs(D){return(0,Me.w)(T=>{const E=D(T);return E?(0,c.D)(E).pipe((0,Ge.U)(()=>T)):(0,S.of)(T)})}let iu=(()=>{class D{buildTitle(E){let F,$=E.root;for(;void 0!==$;)F=this.getResolvedTitleForRoute($)??F,$=$.children.find(ae=>ae.outlet===Wt);return F}getResolvedTitleForRoute(E){return E.data[dn]}}return D.\u0275fac=function(E){return new(E||D)},D.\u0275prov=h.Yz7({token:D,factory:function(){return(0,h.f3M)(ta)},providedIn:"root"}),D})(),ta=(()=>{class D extends iu{constructor(E){super(),this.title=E}updateTitle(E){const F=this.buildTitle(E);void 0!==F&&this.title.setTitle(F)}}return D.\u0275fac=function(E){return new(E||D)(h.LFG(In.Dx))},D.\u0275prov=h.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();class La{}class nl extends class za{shouldDetach(T){return!1}store(T,E){}shouldAttach(T){return!1}retrieve(T){return null}shouldReuseRoute(T,E){return T.routeConfig===E.routeConfig}}{}const Er=new h.OlP("",{providedIn:"root",factory:()=>({})}),Ga=new h.OlP("ROUTES");let ti=(()=>{class D{constructor(E,F){this.injector=E,this.compiler=F,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(E){if(this.componentLoaders.get(E))return this.componentLoaders.get(E);if(E._loadedComponent)return(0,S.of)(E._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(E);const F=Ht(E.loadComponent()).pipe((0,je.b)(ae=>{this.onLoadEndListener&&this.onLoadEndListener(E),E._loadedComponent=ae}),(0,Zn.x)(()=>{this.componentLoaders.delete(E)})),$=new ft(F,()=>new Ye.x).pipe(gt());return this.componentLoaders.set(E,$),$}loadChildren(E,F){if(this.childrenLoaders.get(F))return this.childrenLoaders.get(F);if(F._loadedRoutes)return(0,S.of)({routes:F._loadedRoutes,injector:F._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(F);const ae=this.loadModuleFactoryOrRoutes(F.loadChildren).pipe((0,Ge.U)(Be=>{this.onLoadEndListener&&this.onLoadEndListener(F);let xt,pn,hr=!1;Array.isArray(Be)?pn=Be:(xt=Be.create(E).injector,pn=Cr(xt.get(Ga,[],h.XFs.Self|h.XFs.Optional)));return{routes:pn.map(ve),injector:xt}}),(0,Zn.x)(()=>{this.childrenLoaders.delete(F)})),Oe=new ft(ae,()=>new Ye.x).pipe(gt());return this.childrenLoaders.set(F,Oe),Oe}loadModuleFactoryOrRoutes(E){return Ht(E()).pipe((0,it.z)(F=>F instanceof h.YKP||Array.isArray(F)?(0,S.of)(F):(0,c.D)(this.compiler.compileModuleAsync(F))))}}return D.\u0275fac=function(E){return new(E||D)(h.LFG(h.zs3),h.LFG(h.Sil))},D.\u0275prov=h.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();class pr{}class Sa{shouldProcessUrl(T){return!0}extract(T){return T}merge(T,E){return T}}function Wa(D){throw D}function Li(D,T,E){return T.parse("/")}const yn={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Go={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function ra(){const D=(0,h.f3M)(tt),T=(0,h.f3M)(ji),E=(0,h.f3M)(Gt.Ye),F=(0,h.f3M)(h.zs3),$=(0,h.f3M)(h.Sil),ae=(0,h.f3M)(Ga,{optional:!0})??[],Oe=(0,h.f3M)(Er,{optional:!0})??{},Be=(0,h.f3M)(ta),xt=(0,h.f3M)(iu,{optional:!0}),pn=(0,h.f3M)(pr,{optional:!0}),hr=(0,h.f3M)(La,{optional:!0}),Un=new Ki(null,D,T,E,F,$,Cr(ae));return pn&&(Un.urlHandlingStrategy=pn),hr&&(Un.routeReuseStrategy=hr),Un.titleStrategy=xt??Be,function na(D,T){D.errorHandler&&(T.errorHandler=D.errorHandler),D.malformedUriErrorHandler&&(T.malformedUriErrorHandler=D.malformedUriErrorHandler),D.onSameUrlNavigation&&(T.onSameUrlNavigation=D.onSameUrlNavigation),D.paramsInheritanceStrategy&&(T.paramsInheritanceStrategy=D.paramsInheritanceStrategy),D.relativeLinkResolution&&(T.relativeLinkResolution=D.relativeLinkResolution),D.urlUpdateStrategy&&(T.urlUpdateStrategy=D.urlUpdateStrategy),D.canceledNavigationResolution&&(T.canceledNavigationResolution=D.canceledNavigationResolution)}(Oe,Un),Un}let Ki=(()=>{class D{constructor(E,F,$,ae,Oe,Be,xt){this.rootComponentType=E,this.urlSerializer=F,this.rootContexts=$,this.location=ae,this.config=xt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ye.x,this.errorHandler=Wa,this.malformedUriErrorHandler=Li,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,S.of)(void 0),this.urlHandlingStrategy=new Sa,this.routeReuseStrategy=new nl,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=Oe.get(ti),this.configLoader.onLoadEndListener=Ur=>this.triggerEvent(new wo(Ur)),this.configLoader.onLoadStartListener=Ur=>this.triggerEvent(new ca(Ur)),this.ngModule=Oe.get(h.h0i),this.console=Oe.get(h.c2e);const Un=Oe.get(h.R0b);this.isNgZoneEnabled=Un instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(xt),this.currentUrlTree=function tr(){return new wr(new bn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=es(this.currentUrlTree,this.rootComponentType),this.transitions=new d.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(E){const F=this.events;return E.pipe((0,qe.h)($=>0!==$.id),(0,Ge.U)($=>({...$,extractedUrl:this.urlHandlingStrategy.extract($.rawUrl)})),(0,Me.w)($=>{let ae=!1,Oe=!1;return(0,S.of)($).pipe((0,je.b)(Be=>{this.currentNavigation={id:Be.id,initialUrl:Be.rawUrl,extractedUrl:Be.extractedUrl,trigger:Be.source,extras:Be.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Me.w)(Be=>{const xt=this.browserUrlTree.toString(),pn=!this.navigated||Be.extractedUrl.toString()!==xt||xt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||pn)&&this.urlHandlingStrategy.shouldProcessUrl(Be.rawUrl))return Wo(Be.source)&&(this.browserUrlTree=Be.extractedUrl),(0,S.of)(Be).pipe((0,Me.w)(Un=>{const Ur=this.transitions.getValue();return F.next(new dr(Un.id,this.serializeUrl(Un.extractedUrl),Un.source,Un.restoredState)),Ur!==this.transitions.getValue()?st.E:Promise.resolve(Un)}),function ds(D,T,E,F){return(0,Me.w)($=>function ii(D,T,E,F,$){return new Wr(D,T,E,F,$).apply()}(D,T,E,$.extractedUrl,F).pipe((0,Ge.U)(ae=>({...$,urlAfterRedirects:ae}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,je.b)(Un=>{this.currentNavigation={...this.currentNavigation,finalUrl:Un.urlAfterRedirects},$.urlAfterRedirects=Un.urlAfterRedirects}),function kn(D,T,E,F,$,ae){return(0,it.z)(Oe=>function ci(D,T,E,F,$,ae,Oe="emptyOnly",Be="legacy"){return new ts(D,T,E,F,$,Oe,Be,ae).recognize().pipe((0,Me.w)(xt=>null===xt?function Io(D){return new pe.y(T=>T.error(D))}(new Ni):(0,S.of)(xt)))}(D,T,E,Oe.urlAfterRedirects,F.serialize(Oe.urlAfterRedirects),F,$,ae).pipe((0,Ge.U)(Be=>({...Oe,targetSnapshot:Be}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,je.b)(Un=>{if($.targetSnapshot=Un.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!Un.extras.skipLocationChange){const Ns=this.urlHandlingStrategy.merge(Un.urlAfterRedirects,Un.rawUrl);this.setBrowserUrl(Ns,Un)}this.browserUrlTree=Un.urlAfterRedirects}const Ur=new ms(Un.id,this.serializeUrl(Un.extractedUrl),this.serializeUrl(Un.urlAfterRedirects),Un.targetSnapshot);F.next(Ur)}));if(pn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Ur,extractedUrl:Ns,source:Xs,restoredState:ba,extras:Ms}=Be,wa=new dr(Ur,this.serializeUrl(Ns),Xs,ba);F.next(wa);const Ao=es(Ns,this.rootComponentType).snapshot;return $={...Be,targetSnapshot:Ao,urlAfterRedirects:Ns,extras:{...Ms,skipLocationChange:!1,replaceUrl:!1}},(0,S.of)($)}return this.rawUrlTree=Be.rawUrl,Be.resolve(null),st.E}),(0,je.b)(Be=>{const xt=new ki(Be.id,this.serializeUrl(Be.extractedUrl),this.serializeUrl(Be.urlAfterRedirects),Be.targetSnapshot);this.triggerEvent(xt)}),(0,Ge.U)(Be=>$={...Be,guards:fn(Be.targetSnapshot,Be.currentSnapshot,this.rootContexts)}),function U(D,T){return(0,it.z)(E=>{const{targetSnapshot:F,currentSnapshot:$,guards:{canActivateChecks:ae,canDeactivateChecks:Oe}}=E;return 0===Oe.length&&0===ae.length?(0,S.of)({...E,guardsResult:!0}):function he(D,T,E,F){return(0,c.D)(D).pipe((0,it.z)($=>function io(D,T,E,F,$){const ae=T&&T.routeConfig?T.routeConfig.canDeactivate:null;if(!ae||0===ae.length)return(0,S.of)(!0);const Oe=ae.map(Be=>{const xt=Q(T)??$,pn=jn(Be,xt);return Ht(function Ts(D){return D&&cs(D.canDeactivate)}(pn)?pn.canDeactivate(D,T,E,F):xt.runInContext(()=>pn(D,T,E,F))).pipe((0,ct.P)())});return(0,S.of)(Oe).pipe(H())}($.component,$.route,E,T,F)),(0,ct.P)($=>!0!==$,!0))}(Oe,F,$,D).pipe((0,it.z)(Be=>Be&&function qs(D){return"boolean"==typeof D}(Be)?function Ot(D,T,E,F){return(0,c.D)(T).pipe((0,We.b)($=>(0,_e.z)(function Jr(D,T){return null!==D&&T&&T(new Eo(D)),(0,S.of)(!0)}($.route.parent,F),function $n(D,T){return null!==D&&T&&T(new os(D)),(0,S.of)(!0)}($.route,F),function Ss(D,T,E){const F=T[T.length-1],ae=T.slice(0,T.length-1).reverse().map(Oe=>function Ln(D){const T=D.routeConfig?D.routeConfig.canActivateChild:null;return T&&0!==T.length?{node:D,guards:T}:null}(Oe)).filter(Oe=>null!==Oe).map(Oe=>(0,fe.P)(()=>{const Be=Oe.guards.map(xt=>{const pn=Q(Oe.node)??E,hr=jn(xt,pn);return Ht(function $o(D){return D&&cs(D.canActivateChild)}(hr)?hr.canActivateChild(F,D):pn.runInContext(()=>hr(F,D))).pipe((0,ct.P)())});return(0,S.of)(Be).pipe(H())}));return(0,S.of)(ae).pipe(H())}(D,$.path,E),function Ps(D,T,E){const F=T.routeConfig?T.routeConfig.canActivate:null;if(!F||0===F.length)return(0,S.of)(!0);const $=F.map(ae=>(0,fe.P)(()=>{const Oe=Q(T)??E,Be=jn(ae,Oe);return Ht(function ei(D){return D&&cs(D.canActivate)}(Be)?Be.canActivate(T,D):Oe.runInContext(()=>Be(T,D))).pipe((0,ct.P)())}));return(0,S.of)($).pipe(H())}(D,$.route,E))),(0,ct.P)($=>!0!==$,!0))}(F,ae,D,T):(0,S.of)(Be)),(0,Ge.U)(Be=>({...E,guardsResult:Be})))})}(this.ngModule.injector,Be=>this.triggerEvent(Be)),(0,je.b)(Be=>{if($.guardsResult=Be.guardsResult,me(Be.guardsResult))throw Jo(0,Be.guardsResult);const xt=new xs(Be.id,this.serializeUrl(Be.extractedUrl),this.serializeUrl(Be.urlAfterRedirects),Be.targetSnapshot,!!Be.guardsResult);this.triggerEvent(xt)}),(0,qe.h)(Be=>!!Be.guardsResult||(this.restoreHistory(Be),this.cancelNavigationTransition(Be,"",3),!1)),hs(Be=>{if(Be.guards.canActivateChecks.length)return(0,S.of)(Be).pipe((0,je.b)(xt=>{const pn=new mi(xt.id,this.serializeUrl(xt.extractedUrl),this.serializeUrl(xt.urlAfterRedirects),xt.targetSnapshot);this.triggerEvent(pn)}),(0,Me.w)(xt=>{let pn=!1;return(0,S.of)(xt).pipe(function Mt(D,T){return(0,it.z)(E=>{const{targetSnapshot:F,guards:{canActivateChecks:$}}=E;if(!$.length)return(0,S.of)(E);let ae=0;return(0,c.D)($).pipe((0,We.b)(Oe=>function rn(D,T,E,F){const $=D.routeConfig,ae=D._resolve;return void 0!==$?.title&&!jl($)&&(ae[dn]=$.title),function bs(D,T,E,F){const $=function tl(D){return[...Object.keys(D),...Object.getOwnPropertySymbols(D)]}(D);if(0===$.length)return(0,S.of)({});const ae={};return(0,c.D)($).pipe((0,it.z)(Oe=>function Vl(D,T,E,F){const $=Q(T)??F,ae=jn(D,$);return Ht(ae.resolve?ae.resolve(T,E):$.runInContext(()=>ae(T,E)))}(D[Oe],T,E,F).pipe((0,ct.P)(),(0,je.b)(Be=>{ae[Oe]=Be}))),(0,Lt.h)(1),function Pn(D){return(0,Ge.U)(()=>D)}(ae),(0,pt.K)(Oe=>fo(Oe)?st.E:Pe(Oe)))}(ae,D,T,F).pipe((0,Ge.U)(Oe=>(D._resolvedData=Oe,D.data=Co(D,E).resolve,$&&jl($)&&(D.data[dn]=$.title),null)))}(Oe.route,F,D,T)),(0,je.b)(()=>ae++),(0,Lt.h)(1),(0,it.z)(Oe=>ae===$.length?(0,S.of)(E):st.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,je.b)({next:()=>pn=!0,complete:()=>{pn||(this.restoreHistory(xt),this.cancelNavigationTransition(xt,"",2))}}))}),(0,je.b)(xt=>{const pn=new no(xt.id,this.serializeUrl(xt.extractedUrl),this.serializeUrl(xt.urlAfterRedirects),xt.targetSnapshot);this.triggerEvent(pn)}))}),hs(Be=>{const xt=pn=>{const hr=[];pn.routeConfig?.loadComponent&&!pn.routeConfig._loadedComponent&&hr.push(this.configLoader.loadComponent(pn.routeConfig).pipe((0,je.b)(Un=>{pn.component=Un}),(0,Ge.U)(()=>{})));for(const Un of pn.children)hr.push(...xt(Un));return hr};return(0,Ae.a)(xt(Be.targetSnapshot.root)).pipe((0,Qt.d)(),(0,rt.q)(1))}),hs(()=>this.afterPreactivation()),(0,Ge.U)(Be=>{const xt=function ai(D,T,E){const F=Is(D,T._root,E?E._root:void 0);return new Qr(F,T)}(this.routeReuseStrategy,Be.targetSnapshot,Be.currentRouterState);return $={...Be,targetRouterState:xt}}),(0,je.b)(Be=>{this.currentUrlTree=Be.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Be.urlAfterRedirects,Be.rawUrl),this.routerState=Be.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Be.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Be),this.browserUrlTree=Be.urlAfterRedirects)}),((D,T,E)=>(0,Ge.U)(F=>(new Ze(T,F.targetRouterState,F.currentRouterState,E).activate(D),F)))(this.rootContexts,this.routeReuseStrategy,Be=>this.triggerEvent(Be)),(0,je.b)({next(){ae=!0},complete(){ae=!0}}),(0,Zn.x)(()=>{ae||Oe||this.cancelNavigationTransition($,"",1),this.currentNavigation?.id===$.id&&(this.currentNavigation=null)}),(0,pt.K)(Be=>{if(Oe=!0,Ei(Be)){ys(Be)||(this.navigated=!0,this.restoreHistory($,!0));const xt=new Fr($.id,this.serializeUrl($.extractedUrl),Be.message,Be.cancellationCode);if(F.next(xt),ys(Be)){const pn=this.urlHandlingStrategy.merge(Be.url,this.rawUrlTree),hr={skipLocationChange:$.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Wo($.source)};this.scheduleNavigation(pn,"imperative",null,hr,{resolve:$.resolve,reject:$.reject,promise:$.promise})}else $.resolve(!1)}else{this.restoreHistory($,!0);const xt=new gi($.id,this.serializeUrl($.extractedUrl),Be,$.targetSnapshot??void 0);F.next(xt);try{$.resolve(this.errorHandler(Be))}catch(pn){$.reject(pn)}}return st.E}))}))}resetRootComponentType(E){this.rootComponentType=E,this.routerState.root.component=this.rootComponentType}setTransition(E){this.transitions.next({...this.transitions.value,...E})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(E=>{const F="popstate"===E.type?"popstate":"hashchange";"popstate"===F&&setTimeout(()=>{const $={replaceUrl:!0},ae=E.state?.navigationId?E.state:null;if(ae){const Be={...ae};delete Be.navigationId,delete Be.\u0275routerPageId,0!==Object.keys(Be).length&&($.state=Be)}const Oe=this.parseUrl(E.url);this.scheduleNavigation(Oe,F,ae,$)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(E){this.events.next(E)}resetConfig(E){this.config=E.map(ve),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(E,F={}){const{relativeTo:$,queryParams:ae,fragment:Oe,queryParamsHandling:Be,preserveFragment:xt}=F,pn=$||this.routerState.root,hr=xt?this.currentUrlTree.fragment:Oe;let Un=null;switch(Be){case"merge":Un={...this.currentUrlTree.queryParams,...ae};break;case"preserve":Un=this.currentUrlTree.queryParams;break;default:Un=ae||null}return null!==Un&&(Un=this.removeEmptyProps(Un)),Gr(pn,this.currentUrlTree,E,Un,hr??null)}navigateByUrl(E,F={skipLocationChange:!1}){const $=me(E)?E:this.parseUrl(E),ae=this.urlHandlingStrategy.merge($,this.rawUrlTree);return this.scheduleNavigation(ae,"imperative",null,F)}navigate(E,F={skipLocationChange:!1}){return function ma(D){for(let T=0;T<D.length;T++){if(null==D[T])throw new h.vHH(4008,false)}}(E),this.navigateByUrl(this.createUrlTree(E,F),F)}serializeUrl(E){return this.urlSerializer.serialize(E)}parseUrl(E){let F;try{F=this.urlSerializer.parse(E)}catch($){F=this.malformedUriErrorHandler($,this.urlSerializer,E)}return F}isActive(E,F){let $;if($=!0===F?{...yn}:!1===F?{...Go}:F,me(E))return _i(this.currentUrlTree,E,$);const ae=this.parseUrl(E);return _i(this.currentUrlTree,ae,$)}removeEmptyProps(E){return Object.keys(E).reduce((F,$)=>{const ae=E[$];return null!=ae&&(F[$]=ae),F},{})}processNavigations(){this.navigations.subscribe(E=>{this.navigated=!0,this.lastSuccessfulId=E.id,this.currentPageId=E.targetPageId,this.events.next(new pi(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),E.resolve(!0)},E=>{this.console.warn(`Unhandled Navigation Error: ${E}`)})}scheduleNavigation(E,F,$,ae,Oe){if(this.disposed)return Promise.resolve(!1);let Be,xt,pn;Oe?(Be=Oe.resolve,xt=Oe.reject,pn=Oe.promise):pn=new Promise((Ur,Ns)=>{Be=Ur,xt=Ns});const hr=++this.navigationId;let Un;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&($=this.location.getState()),Un=$&&$.\u0275routerPageId?$.\u0275routerPageId:ae.replaceUrl||ae.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):Un=0,this.setTransition({id:hr,targetPageId:Un,source:F,restoredState:$,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:E,extras:ae,resolve:Be,reject:xt,promise:pn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),pn.catch(Ur=>Promise.reject(Ur))}setBrowserUrl(E,F){const $=this.urlSerializer.serialize(E),ae={...F.extras.state,...this.generateNgRouterState(F.id,F.targetPageId)};this.location.isCurrentPathEqualTo($)||F.extras.replaceUrl?this.location.replaceState($,"",ae):this.location.go($,"",ae)}restoreHistory(E,F=!1){if("computed"===this.canceledNavigationResolution){const $=this.currentPageId-E.targetPageId;"popstate"!==E.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===$?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===$&&(this.resetState(E),this.browserUrlTree=E.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo($)}else"replace"===this.canceledNavigationResolution&&(F&&this.resetState(E),this.resetUrlToCurrentUrlTree())}resetState(E){this.routerState=E.currentRouterState,this.currentUrlTree=E.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,E.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(E,F,$){const ae=new Fr(E.id,this.serializeUrl(E.extractedUrl),F,$);this.triggerEvent(ae),E.resolve(!1)}generateNgRouterState(E,F){return"computed"===this.canceledNavigationResolution?{navigationId:E,\u0275routerPageId:F}:{navigationId:E}}}return D.\u0275fac=function(E){h.$Z()},D.\u0275prov=h.Yz7({token:D,factory:function(){return ra()},providedIn:"root"}),D})();function Wo(D){return"imperative"!==D}let ya=(()=>{class D{constructor(E,F,$,ae,Oe){this.router=E,this.route=F,this.tabIndexAttribute=$,this.renderer=ae,this.el=Oe,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Ye.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(E){this._preserveFragment=(0,h.D6c)(E)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(E){this._skipLocationChange=(0,h.D6c)(E)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(E){this._replaceUrl=(0,h.D6c)(E)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(E){if(null!=this.tabIndexAttribute)return;const F=this.renderer,$=this.el.nativeElement;null!==E?F.setAttribute($,"tabindex",E):F.removeAttribute($,"tabindex")}ngOnChanges(E){this.onChanges.next(this)}set routerLink(E){null!=E?(this.commands=Array.isArray(E)?E:[E],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return D.\u0275fac=function(E){return new(E||D)(h.Y36(Ki),h.Y36(Bi),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq))},D.\u0275dir=h.lG2({type:D,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(E,F){1&E&&h.NdJ("click",function(){return F.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),D})(),To=(()=>{class D{constructor(E,F,$){this.router=E,this.route=F,this.locationStrategy=$,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Ye.x,this.subscription=E.events.subscribe(ae=>{ae instanceof pi&&this.updateTargetUrlAndHref()})}set preserveFragment(E){this._preserveFragment=(0,h.D6c)(E)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(E){this._skipLocationChange=(0,h.D6c)(E)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(E){this._replaceUrl=(0,h.D6c)(E)}get replaceUrl(){return this._replaceUrl}set routerLink(E){this.commands=null!=E?Array.isArray(E)?E:[E]:null}ngOnChanges(E){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(E,F,$,ae,Oe){return!!(0!==E||F||$||ae||Oe||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return D.\u0275fac=function(E){return new(E||D)(h.Y36(Ki),h.Y36(Bi),h.Y36(Gt.S$))},D.\u0275dir=h.lG2({type:D,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(E,F){1&E&&h.NdJ("click",function(ae){return F.onClick(ae.button,ae.ctrlKey,ae.shiftKey,ae.altKey,ae.metaKey)}),2&E&&h.uIk("target",F.target)("href",F.href,h.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),D})(),Aa=(()=>{class D{constructor(E,F,$,ae,Oe,Be){this.router=E,this.element=F,this.renderer=$,this.cdr=ae,this.link=Oe,this.linkWithHref=Be,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new h.vpe,this.routerEventsSubscription=E.events.subscribe(xt=>{xt instanceof pi&&this.update()})}ngAfterContentInit(){(0,S.of)(this.links.changes,this.linksWithHrefs.changes,(0,S.of)(null)).pipe((0,Nn.J)()).subscribe(E=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const E=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(F=>!!F).map(F=>F.onChanges);this.linkInputChangesSubscription=(0,c.D)(E).pipe((0,Nn.J)()).subscribe(F=>{this.isActive!==this.isLinkActive(this.router)(F)&&this.update()})}set routerLinkActive(E){const F=Array.isArray(E)?E:E.split(" ");this.classes=F.filter($=>!!$)}ngOnChanges(E){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const E=this.hasActiveLinks();this.isActive!==E&&(this.isActive=E,this.cdr.markForCheck(),this.classes.forEach(F=>{E?this.renderer.addClass(this.element.nativeElement,F):this.renderer.removeClass(this.element.nativeElement,F)}),E&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(E))})}isLinkActive(E){const F=function fs(D){return!!D.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return $=>!!$.urlTree&&E.isActive($.urlTree,F)}hasActiveLinks(){const E=this.isLinkActive(this.router);return this.link&&E(this.link)||this.linkWithHref&&E(this.linkWithHref)||this.links.some(E)||this.linksWithHrefs.some(E)}}return D.\u0275fac=function(E){return new(E||D)(h.Y36(Ki),h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(h.sBO),h.Y36(ya,8),h.Y36(To,8))},D.\u0275dir=h.lG2({type:D,selectors:[["","routerLinkActive",""]],contentQueries:function(E,F,$){if(1&E&&(h.Suo($,ya,5),h.Suo($,To,5)),2&E){let ae;h.iGM(ae=h.CRH())&&(F.links=ae),h.iGM(ae=h.CRH())&&(F.linksWithHrefs=ae)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[h.TTD]}),D})();class js{}let ia=(()=>{class D{constructor(E,F,$,ae,Oe){this.router=E,this.injector=$,this.preloadingStrategy=ae,this.loader=Oe}setUpPreloading(){this.subscription=this.router.events.pipe((0,qe.h)(E=>E instanceof pi),(0,We.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(E,F){const $=[];for(const ae of F){ae.providers&&!ae._injector&&(ae._injector=(0,h.MMx)(ae.providers,E,`Route: ${ae.path}`));const Oe=ae._injector??E,Be=ae._loadedInjector??Oe;ae.loadChildren&&!ae._loadedRoutes&&void 0===ae.canLoad||ae.loadComponent&&!ae._loadedComponent?$.push(this.preloadConfig(Oe,ae)):(ae.children||ae._loadedRoutes)&&$.push(this.processRoutes(Be,ae.children??ae._loadedRoutes))}return(0,c.D)($).pipe((0,Nn.J)())}preloadConfig(E,F){return this.preloadingStrategy.preload(F,()=>{let $;$=F.loadChildren&&void 0===F.canLoad?this.loader.loadChildren(E,F):(0,S.of)(null);const ae=$.pipe((0,it.z)(Oe=>null===Oe?(0,S.of)(void 0):(F._loadedRoutes=Oe.routes,F._loadedInjector=Oe.injector,this.processRoutes(Oe.injector??E,Oe.routes))));if(F.loadComponent&&!F._loadedComponent){const Oe=this.loader.loadComponent(F);return(0,c.D)([ae,Oe]).pipe((0,Nn.J)())}return ae})}}return D.\u0275fac=function(E){return new(E||D)(h.LFG(Ki),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(js),h.LFG(ti))},D.\u0275prov=h.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const Di=new h.OlP("");let lt=(()=>{class D{constructor(E,F,$={}){this.router=E,this.viewportScroller=F,this.options=$,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},$.scrollPositionRestoration=$.scrollPositionRestoration||"disabled",$.anchorScrolling=$.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(E=>{E instanceof dr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=E.navigationTrigger,this.restoredId=E.restoredState?E.restoredState.navigationId:0):E instanceof pi&&(this.lastId=E.id,this.scheduleScrollEvent(E,this.router.parseUrl(E.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(E=>{E instanceof et&&(E.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(E.position):E.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(E.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(E,F){this.router.triggerEvent(new et(E,"popstate"===this.lastSource?this.store[this.restoredId]:null,F))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return D.\u0275fac=function(E){h.$Z()},D.\u0275prov=h.Yz7({token:D,factory:D.\u0275fac}),D})();function Qs(D,T){return{\u0275kind:D,\u0275providers:T}}function oo(D){return[{provide:Ga,multi:!0,useValue:D}]}function xi(){const D=(0,h.f3M)(h.zs3);return T=>{const E=D.get(h.z2F);if(T!==E.components[0])return;const F=D.get(Ki),$=D.get(Ma);1===D.get(ui)&&F.initialNavigation(),D.get(xl,null,h.XFs.Optional)?.setUpPreloading(),D.get(Di,null,h.XFs.Optional)?.init(),F.resetRootComponentType(E.componentTypes[0]),$.next(),$.complete()}}const Ma=new h.OlP("",{factory:()=>new Ye.x}),ui=new h.OlP("",{providedIn:"root",factory:()=>1});const xl=new h.OlP("");function xa(D){return Qs(0,[{provide:xl,useExisting:ia},{provide:js,useExisting:D}])}const $s=new h.OlP("ROUTER_FORROOT_GUARD"),Si=[Gt.Ye,{provide:tt,useClass:St},{provide:Ki,useFactory:ra},ji,{provide:Bi,useFactory:function Fo(D){return D.routerState.root},deps:[Ki]},ti];function ws(){return new h.PXZ("Router",Ki)}let qo=(()=>{class D{constructor(E){}static forRoot(E,F){return{ngModule:D,providers:[Si,[],oo(E),{provide:$s,useFactory:Js,deps:[[Ki,new h.FiY,new h.tp0]]},{provide:Er,useValue:F||{}},F?.useHash?{provide:Gt.S$,useClass:Gt.Do}:{provide:Gt.S$,useClass:Gt.b0},{provide:Di,useFactory:()=>{const D=(0,h.f3M)(Ki),T=(0,h.f3M)(Gt.EM),E=(0,h.f3M)(Er);return E.scrollOffset&&T.setOffset(E.scrollOffset),new lt(D,T,E)}},F?.preloadingStrategy?xa(F.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:ws},F?.initialNavigation?Zs(F):[],[{provide:Ai,useFactory:xi},{provide:h.tb,multi:!0,useExisting:Ai}]]}}static forChild(E){return{ngModule:D,providers:[oo(E)]}}}return D.\u0275fac=function(E){return new(E||D)(h.LFG($s,8))},D.\u0275mod=h.oAB({type:D}),D.\u0275inj=h.cJS({imports:[Hi]}),D})();function Js(D){return"guarded"}function Zs(D){return["disabled"===D.initialNavigation?Qs(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const T=(0,h.f3M)(Ki);return()=>{T.setUpLocationChangeListener()}}},{provide:ui,useValue:2}]).\u0275providers:[],"enabledBlocking"===D.initialNavigation?Qs(2,[{provide:ui,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:T=>{const E=T.get(Gt.V_,Promise.resolve());let F=!1;return()=>E.then(()=>new Promise(ae=>{const Oe=T.get(Ki),Be=T.get(Ma);(function $(ae){T.get(Ki).events.pipe((0,qe.h)(Be=>Be instanceof pi||Be instanceof Fr||Be instanceof gi),(0,Ge.U)(Be=>Be instanceof pi||Be instanceof Fr&&(0===Be.code||1===Be.code)&&null),(0,qe.h)(Be=>null!==Be),(0,rt.q)(1)).subscribe(()=>{ae()})})(()=>{ae(!0),F=!0}),Oe.afterPreactivation=()=>(ae(!0),F||Be.closed?(0,S.of)(void 0):Be),Oe.initialNavigation()}))}}]).\u0275providers:[]]}const Ai=new h.OlP("")},3942:(Jt,Qe,k)=>{k.d(Qe,{Z:()=>He});var h=k(2090),c=k(4859),S=k(9681),d=k(1877);class de{constructor(gt,ft){this._delegate=gt,this.firebase=ft,(0,S._addComponent)(gt,new c.wA("app-compat",()=>this,"PUBLIC")),this.container=gt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(gt){this._delegate.automaticDataCollectionEnabled=gt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(gt=>{this._delegate.checkDestroyed(),gt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,S.deleteApp)(this._delegate)))}_getService(gt,ft=S._DEFAULT_ENTRY_NAME){var Ye;this._delegate.checkDestroyed();const Gt=this._delegate.container.getProvider(gt);return!Gt.isInitialized()&&"EXPLICIT"===(null===(Ye=Gt.getComponent())||void 0===Ye?void 0:Ye.instantiationMode)&&Gt.initialize(),Gt.getImmediate({identifier:ft})}_removeServiceInstance(gt,ft=S._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(gt).clearInstance(ft)}_addComponent(gt){(0,S._addComponent)(this._delegate,gt)}_addOrOverwriteComponent(gt){(0,S._addOrOverwriteComponent)(this._delegate,gt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const _e=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),pe=function Fe(){const Tt=function fe(Tt){const gt={},ft={__esModule:!0,initializeApp:function Ge(qe,it={}){const ct=S.initializeApp(qe,it);if((0,h.r3)(gt,ct.name))return gt[ct.name];const We=new Tt(ct,ft);return gt[ct.name]=We,We},app:Gt,registerVersion:S.registerVersion,setLogLevel:S.setLogLevel,onLog:S.onLog,apps:null,SDK_VERSION:S.SDK_VERSION,INTERNAL:{registerComponent:function rt(qe){const it=qe.name,ct=it.replace("-compat","");if(S._registerComponent(qe)&&"PUBLIC"===qe.type){const We=(je=Gt())=>{if("function"!=typeof je[ct])throw _e.create("invalid-app-argument",{appName:it});return je[ct]()};void 0!==qe.serviceProps&&(0,h.ZB)(We,qe.serviceProps),ft[ct]=We,Tt.prototype[ct]=function(...je){return this._getService.bind(this,it).apply(this,qe.multipleInstances?je:[])}}return"PUBLIC"===qe.type?ft[ct]:null},removeApp:function Ye(qe){delete gt[qe]},useAsService:function Pt(qe,it){return"serverAuth"===it?null:it},modularAPIs:S}};function Gt(qe){if(!(0,h.r3)(gt,qe=qe||S._DEFAULT_ENTRY_NAME))throw _e.create("no-app",{appName:qe});return gt[qe]}return ft.default=ft,Object.defineProperty(ft,"apps",{get:function Me(){return Object.keys(gt).map(qe=>gt[qe])}}),Gt.App=Tt,ft}(de);return Tt.INTERNAL=Object.assign(Object.assign({},Tt.INTERNAL),{createFirebaseNamespace:Fe,extendNamespace:function gt(ft){(0,h.ZB)(Tt,ft)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Tt}(),be=new d.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){be.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Tt=self.firebase.SDK_VERSION;Tt&&Tt.indexOf("LITE")>=0&&be.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const He=pe;!function mt(Tt){(0,S.registerVersion)("@firebase/app-compat","0.1.38",Tt)}()},9681:(Jt,Qe,k)=>{k.r(Qe),k.d(Qe,{FirebaseError:()=>d.ZR,SDK_VERSION:()=>Vn,_DEFAULT_ENTRY_NAME:()=>cn,_addComponent:()=>Nn,_addOrOverwriteComponent:()=>In,_apps:()=>Pn,_clearComponents:()=>Ar,_components:()=>Zn,_getProvider:()=>dn,_registerComponent:()=>Wt,_removeServiceInstance:()=>vr,deleteApp:()=>er,getApp:()=>yr,getApps:()=>Rr,initializeApp:()=>Cr,onLog:()=>tr,registerVersion:()=>cr,setLogLevel:()=>nr});var h=k(5861),c=k(4859),S=k(1877),d=k(2090),de=k(8766);class Ae{constructor(J){this.container=J}getPlatformInfoString(){return this.container.getProviders().map(ge=>{if(function _e(Je){return"VERSION"===Je.getComponent()?.type}(ge)){const Xe=ge.getImmediate();return`${Xe.library}/${Xe.version}`}return null}).filter(ge=>ge).join(" ")}}const fe="@firebase/app",pe=new S.Yd("@firebase/app"),cn="[DEFAULT]",Rt={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Pn=new Map,Zn=new Map;function Nn(Je,J){try{Je.container.addComponent(J)}catch(ge){pe.debug(`Component ${J.name} failed to register with FirebaseApp ${Je.name}`,ge)}}function In(Je,J){Je.container.addOrOverwriteComponent(J)}function Wt(Je){const J=Je.name;if(Zn.has(J))return pe.debug(`There were multiple attempts to register component ${J}.`),!1;Zn.set(J,Je);for(const ge of Pn.values())Nn(ge,Je);return!0}function dn(Je,J){const ge=Je.container.getProvider("heartbeat").getImmediate({optional:!0});return ge&&ge.triggerHeartbeat(),Je.container.getProvider(J)}function vr(Je,J,ge=cn){dn(Je,J).clearInstance(ge)}function Ar(){Zn.clear()}const ir=new d.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class sr{constructor(J,ge,Xe){this._isDeleted=!1,this._options=Object.assign({},J),this._config=Object.assign({},ge),this._name=ge.name,this._automaticDataCollectionEnabled=ge.automaticDataCollectionEnabled,this._container=Xe,this.container.addComponent(new c.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(J){this.checkDestroyed(),this._automaticDataCollectionEnabled=J}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(J){this._isDeleted=J}checkDestroyed(){if(this.isDeleted)throw ir.create("app-deleted",{appName:this._name})}}const Vn="9.13.0";function Cr(Je,J={}){let ge=Je;"object"!=typeof J&&(J={name:J});const Xe=Object.assign({name:cn,automaticDataCollectionEnabled:!1},J),_t=Xe.name;if("string"!=typeof _t||!_t)throw ir.create("bad-app-name",{appName:String(_t)});if(ge||(ge=(0,d.aH)()),!ge)throw ir.create("no-options");const ln=Pn.get(_t);if(ln){if((0,d.vZ)(ge,ln.options)&&(0,d.vZ)(Xe,ln.config))return ln;throw ir.create("duplicate-app",{appName:_t})}const Ne=new c.H0(_t);for(const $e of Zn.values())Ne.addComponent($e);const xe=new sr(ge,Xe,Ne);return Pn.set(_t,xe),xe}function yr(Je=cn){const J=Pn.get(Je);if(!J&&Je===cn)return Cr();if(!J)throw ir.create("no-app",{appName:Je});return J}function Rr(){return Array.from(Pn.values())}function er(Je){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,h.Z)(function*(Je){const J=Je.name;Pn.has(J)&&(Pn.delete(J),yield Promise.all(Je.container.getProviders().map(ge=>ge.delete())),Je.isDeleted=!0)})).apply(this,arguments)}function cr(Je,J,ge){var Xe;let _t=null!==(Xe=Rt[Je])&&void 0!==Xe?Xe:Je;ge&&(_t+=`-${ge}`);const ln=_t.match(/\s|\//),Ne=J.match(/\s|\//);if(ln||Ne){const xe=[`Unable to register library "${_t}" with version "${J}":`];return ln&&xe.push(`library name "${_t}" contains illegal characters (whitespace or "/")`),ln&&Ne&&xe.push("and"),Ne&&xe.push(`version name "${J}" contains illegal characters (whitespace or "/")`),void pe.warn(xe.join(" "))}Wt(new c.wA(`${_t}-version`,()=>({library:_t,version:J}),"VERSION"))}function tr(Je,J){if(null!==Je&&"function"!=typeof Je)throw ir.create("invalid-log-argument");(0,S.Am)(Je,J)}function nr(Je){(0,S.Ub)(Je)}const Ir="firebase-heartbeat-store";let _r=null;function fr(){return _r||(_r=(0,de.X3)("firebase-heartbeat-database",1,{upgrade:(Je,J)=>{0===J&&Je.createObjectStore(Ir)}}).catch(Je=>{throw ir.create("idb-open",{originalErrorMessage:Je.message})})),_r}function Tn(){return(Tn=(0,h.Z)(function*(Je){var J;try{return(yield fr()).transaction(Ir).objectStore(Ir).get(bn(Je))}catch(ge){if(ge instanceof d.ZR)pe.warn(ge.message);else{const Xe=ir.create("idb-get",{originalErrorMessage:null===(J=ge)||void 0===J?void 0:J.message});pe.warn(Xe.message)}}})).apply(this,arguments)}function On(Je,J){return wr.apply(this,arguments)}function wr(){return(wr=(0,h.Z)(function*(Je,J){var ge;try{const _t=(yield fr()).transaction(Ir,"readwrite");return yield _t.objectStore(Ir).put(J,bn(Je)),_t.done}catch(Xe){if(Xe instanceof d.ZR)pe.warn(Xe.message);else{const _t=ir.create("idb-set",{originalErrorMessage:null===(ge=Xe)||void 0===ge?void 0:ge.message});pe.warn(_t.message)}}})).apply(this,arguments)}function bn(Je){return`${Je.name}!${Je.options.appId}`}class zt{constructor(J){this.container=J,this._heartbeatsCache=null;const ge=this.container.getProvider("app").getImmediate();this._storage=new St(ge),this._heartbeatsCachePromise=this._storage.read().then(Xe=>(this._heartbeatsCache=Xe,Xe))}triggerHeartbeat(){var J=this;return(0,h.Z)(function*(){const Xe=J.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),_t=Ve();if(null===J._heartbeatsCache&&(J._heartbeatsCache=yield J._heartbeatsCachePromise),J._heartbeatsCache.lastSentHeartbeatDate!==_t&&!J._heartbeatsCache.heartbeats.some(ln=>ln.date===_t))return J._heartbeatsCache.heartbeats.push({date:_t,agent:Xe}),J._heartbeatsCache.heartbeats=J._heartbeatsCache.heartbeats.filter(ln=>{const Ne=new Date(ln.date).valueOf();return Date.now()-Ne<=2592e6}),J._storage.overwrite(J._heartbeatsCache)})()}getHeartbeatsHeader(){var J=this;return(0,h.Z)(function*(){if(null===J._heartbeatsCache&&(yield J._heartbeatsCachePromise),null===J._heartbeatsCache||0===J._heartbeatsCache.heartbeats.length)return"";const ge=Ve(),{heartbeatsToSend:Xe,unsentEntries:_t}=function tt(Je,J=1024){const ge=[];let Xe=Je.slice();for(const _t of Je){const ln=ge.find(Ne=>Ne.agent===_t.agent);if(ln){if(ln.dates.push(_t.date),Rn(ge)>J){ln.dates.pop();break}}else if(ge.push({agent:_t.agent,dates:[_t.date]}),Rn(ge)>J){ge.pop();break}Xe=Xe.slice(1)}return{heartbeatsToSend:ge,unsentEntries:Xe}}(J._heartbeatsCache.heartbeats),ln=(0,d.L)(JSON.stringify({version:2,heartbeats:Xe}));return J._heartbeatsCache.lastSentHeartbeatDate=ge,_t.length>0?(J._heartbeatsCache.heartbeats=_t,yield J._storage.overwrite(J._heartbeatsCache)):(J._heartbeatsCache.heartbeats=[],J._storage.overwrite(J._heartbeatsCache)),ln})()}}function Ve(){return(new Date).toISOString().substring(0,10)}class St{constructor(J){this.app=J,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,d.hl)()&&(0,d.eu)().then(()=>!0).catch(()=>!1)})()}read(){var J=this;return(0,h.Z)(function*(){return(yield J._canUseIndexedDBPromise)&&(yield function mn(Je){return Tn.apply(this,arguments)}(J.app))||{heartbeats:[]}})()}overwrite(J){var ge=this;return(0,h.Z)(function*(){var Xe;if(yield ge._canUseIndexedDBPromise){const ln=yield ge.read();return On(ge.app,{lastSentHeartbeatDate:null!==(Xe=J.lastSentHeartbeatDate)&&void 0!==Xe?Xe:ln.lastSentHeartbeatDate,heartbeats:J.heartbeats})}})()}add(J){var ge=this;return(0,h.Z)(function*(){var Xe;if(yield ge._canUseIndexedDBPromise){const ln=yield ge.read();return On(ge.app,{lastSentHeartbeatDate:null!==(Xe=J.lastSentHeartbeatDate)&&void 0!==Xe?Xe:ln.lastSentHeartbeatDate,heartbeats:[...ln.heartbeats,...J.heartbeats]})}})()}}function Rn(Je){return(0,d.L)(JSON.stringify({version:2,heartbeats:Je})).length}!function Jn(Je){Wt(new c.wA("platform-logger",J=>new Ae(J),"PRIVATE")),Wt(new c.wA("heartbeat",J=>new zt(J),"PRIVATE")),cr(fe,"0.8.3",Je),cr(fe,"0.8.3","esm2017"),cr("fire-js","")}("")},4859:(Jt,Qe,k)=>{k.d(Qe,{H0:()=>fe,wA:()=>S});var h=k(5861),c=k(2090);class S{constructor(pe,be,Pe){this.name=pe,this.instanceFactory=be,this.type=Pe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(pe){return this.instantiationMode=pe,this}setMultipleInstances(pe){return this.multipleInstances=pe,this}setServiceProps(pe){return this.serviceProps=pe,this}setInstanceCreatedCallback(pe){return this.onInstanceCreated=pe,this}}const d="[DEFAULT]";class de{constructor(pe,be){this.name=pe,this.container=be,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(pe){const be=this.normalizeInstanceIdentifier(pe);if(!this.instancesDeferred.has(be)){const Pe=new c.BH;if(this.instancesDeferred.set(be,Pe),this.isInitialized(be)||this.shouldAutoInitialize())try{const st=this.getOrInitializeService({instanceIdentifier:be});st&&Pe.resolve(st)}catch{}}return this.instancesDeferred.get(be).promise}getImmediate(pe){var be;const Pe=this.normalizeInstanceIdentifier(pe?.identifier),st=null!==(be=pe?.optional)&&void 0!==be&&be;if(!this.isInitialized(Pe)&&!this.shouldAutoInitialize()){if(st)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Pe})}catch(mt){if(st)return null;throw mt}}getComponent(){return this.component}setComponent(pe){if(pe.name!==this.name)throw Error(`Mismatching Component ${pe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=pe,this.shouldAutoInitialize()){if(function _e(Fe){return"EAGER"===Fe.instantiationMode}(pe))try{this.getOrInitializeService({instanceIdentifier:d})}catch{}for(const[be,Pe]of this.instancesDeferred.entries()){const st=this.normalizeInstanceIdentifier(be);try{const mt=this.getOrInitializeService({instanceIdentifier:st});Pe.resolve(mt)}catch{}}}}clearInstance(pe=d){this.instancesDeferred.delete(pe),this.instancesOptions.delete(pe),this.instances.delete(pe)}delete(){var pe=this;return(0,h.Z)(function*(){const be=Array.from(pe.instances.values());yield Promise.all([...be.filter(Pe=>"INTERNAL"in Pe).map(Pe=>Pe.INTERNAL.delete()),...be.filter(Pe=>"_delete"in Pe).map(Pe=>Pe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(pe=d){return this.instances.has(pe)}getOptions(pe=d){return this.instancesOptions.get(pe)||{}}initialize(pe={}){const{options:be={}}=pe,Pe=this.normalizeInstanceIdentifier(pe.instanceIdentifier);if(this.isInitialized(Pe))throw Error(`${this.name}(${Pe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const st=this.getOrInitializeService({instanceIdentifier:Pe,options:be});for(const[mt,He]of this.instancesDeferred.entries())Pe===this.normalizeInstanceIdentifier(mt)&&He.resolve(st);return st}onInit(pe,be){var Pe;const st=this.normalizeInstanceIdentifier(be),mt=null!==(Pe=this.onInitCallbacks.get(st))&&void 0!==Pe?Pe:new Set;mt.add(pe),this.onInitCallbacks.set(st,mt);const He=this.instances.get(st);return He&&pe(He,st),()=>{mt.delete(pe)}}invokeOnInitCallbacks(pe,be){const Pe=this.onInitCallbacks.get(be);if(Pe)for(const st of Pe)try{st(pe,be)}catch{}}getOrInitializeService({instanceIdentifier:pe,options:be={}}){let Pe=this.instances.get(pe);if(!Pe&&this.component&&(Pe=this.component.instanceFactory(this.container,{instanceIdentifier:(Fe=pe,Fe===d?void 0:Fe),options:be}),this.instances.set(pe,Pe),this.instancesOptions.set(pe,be),this.invokeOnInitCallbacks(Pe,pe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,pe,Pe)}catch{}var Fe;return Pe||null}normalizeInstanceIdentifier(pe=d){return this.component?this.component.multipleInstances?pe:d:pe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(pe){this.name=pe,this.providers=new Map}addComponent(pe){const be=this.getProvider(pe.name);if(be.isComponentSet())throw new Error(`Component ${pe.name} has already been registered with ${this.name}`);be.setComponent(pe)}addOrOverwriteComponent(pe){this.getProvider(pe.name).isComponentSet()&&this.providers.delete(pe.name),this.addComponent(pe)}getProvider(pe){if(this.providers.has(pe))return this.providers.get(pe);const be=new de(pe,this);return this.providers.set(pe,be),be}getProviders(){return Array.from(this.providers.values())}}},1877:(Jt,Qe,k)=>{k.d(Qe,{Am:()=>Fe,Ub:()=>fe,Yd:()=>_e,in:()=>c});const h=[];var c=(()=>{return(pe=c||(c={}))[pe.DEBUG=0]="DEBUG",pe[pe.VERBOSE=1]="VERBOSE",pe[pe.INFO=2]="INFO",pe[pe.WARN=3]="WARN",pe[pe.ERROR=4]="ERROR",pe[pe.SILENT=5]="SILENT",c;var pe})();const S={debug:c.DEBUG,verbose:c.VERBOSE,info:c.INFO,warn:c.WARN,error:c.ERROR,silent:c.SILENT},d=c.INFO,de={[c.DEBUG]:"log",[c.VERBOSE]:"log",[c.INFO]:"info",[c.WARN]:"warn",[c.ERROR]:"error"},Ae=(pe,be,...Pe)=>{if(be<pe.logLevel)return;const st=(new Date).toISOString(),mt=de[be];if(!mt)throw new Error(`Attempted to log a message with an invalid logType (value: ${be})`);console[mt](`[${st}]  ${pe.name}:`,...Pe)};class _e{constructor(be){this.name=be,this._logLevel=d,this._logHandler=Ae,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(be){if(!(be in c))throw new TypeError(`Invalid value "${be}" assigned to \`logLevel\``);this._logLevel=be}setLogLevel(be){this._logLevel="string"==typeof be?S[be]:be}get logHandler(){return this._logHandler}set logHandler(be){if("function"!=typeof be)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=be}get userLogHandler(){return this._userLogHandler}set userLogHandler(be){this._userLogHandler=be}debug(...be){this._userLogHandler&&this._userLogHandler(this,c.DEBUG,...be),this._logHandler(this,c.DEBUG,...be)}log(...be){this._userLogHandler&&this._userLogHandler(this,c.VERBOSE,...be),this._logHandler(this,c.VERBOSE,...be)}info(...be){this._userLogHandler&&this._userLogHandler(this,c.INFO,...be),this._logHandler(this,c.INFO,...be)}warn(...be){this._userLogHandler&&this._userLogHandler(this,c.WARN,...be),this._logHandler(this,c.WARN,...be)}error(...be){this._userLogHandler&&this._userLogHandler(this,c.ERROR,...be),this._logHandler(this,c.ERROR,...be)}}function fe(pe){h.forEach(be=>{be.setLogLevel(pe)})}function Fe(pe,be){for(const Pe of h){let st=null;be&&be.level&&(st=S[be.level]),Pe.userLogHandler=null===pe?null:(mt,He,...Tt)=>{const gt=Tt.map(ft=>{if(null==ft)return null;if("string"==typeof ft)return ft;if("number"==typeof ft||"boolean"==typeof ft)return ft.toString();if(ft instanceof Error)return ft.message;try{return JSON.stringify(ft)}catch{return null}}).filter(ft=>ft).join(" ");He>=(st??mt.logLevel)&&pe({level:c[He].toLowerCase(),message:gt,args:Tt,type:mt.name})}}}},8766:(Jt,Qe,k)=>{k.d(Qe,{Lj:()=>Ge,X3:()=>Gt});var h=k(5861);let S,d;const _e=new WeakMap,fe=new WeakMap,Fe=new WeakMap,pe=new WeakMap,be=new WeakMap;let mt={get(it,ct,We){if(it instanceof IDBTransaction){if("done"===ct)return fe.get(it);if("objectStoreNames"===ct)return it.objectStoreNames||Fe.get(it);if("store"===ct)return We.objectStoreNames[1]?void 0:We.objectStore(We.objectStoreNames[0])}return ft(it[ct])},set:(it,ct,We)=>(it[ct]=We,!0),has:(it,ct)=>it instanceof IDBTransaction&&("done"===ct||"store"===ct)||ct in it};function gt(it){return"function"==typeof it?function Tt(it){return it!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ae(){return d||(d=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(it)?function(...ct){return it.apply(Ye(this),ct),ft(_e.get(this))}:function(...ct){return ft(it.apply(Ye(this),ct))}:function(ct,...We){const je=it.call(Ye(this),ct,...We);return Fe.set(je,ct.sort?ct.sort():[ct]),ft(je)}}(it):(it instanceof IDBTransaction&&function st(it){if(fe.has(it))return;const ct=new Promise((We,je)=>{const pt=()=>{it.removeEventListener("complete",dt),it.removeEventListener("error",Lt),it.removeEventListener("abort",Lt)},dt=()=>{We(),pt()},Lt=()=>{je(it.error||new DOMException("AbortError","AbortError")),pt()};it.addEventListener("complete",dt),it.addEventListener("error",Lt),it.addEventListener("abort",Lt)});fe.set(it,ct)}(it),((it,ct)=>ct.some(We=>it instanceof We))(it,function de(){return S||(S=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(it,mt):it)}function ft(it){if(it instanceof IDBRequest)return function Pe(it){const ct=new Promise((We,je)=>{const pt=()=>{it.removeEventListener("success",dt),it.removeEventListener("error",Lt)},dt=()=>{We(ft(it.result)),pt()},Lt=()=>{je(it.error),pt()};it.addEventListener("success",dt),it.addEventListener("error",Lt)});return ct.then(We=>{We instanceof IDBCursor&&_e.set(We,it)}).catch(()=>{}),be.set(ct,it),ct}(it);if(pe.has(it))return pe.get(it);const ct=gt(it);return ct!==it&&(pe.set(it,ct),be.set(ct,it)),ct}const Ye=it=>be.get(it);function Gt(it,ct,{blocked:We,upgrade:je,blocking:pt,terminated:dt}={}){const Lt=indexedDB.open(it,ct),$t=ft(Lt);return je&&Lt.addEventListener("upgradeneeded",Qt=>{je(ft(Lt.result),Qt.oldVersion,Qt.newVersion,ft(Lt.transaction))}),We&&Lt.addEventListener("blocked",()=>We()),$t.then(Qt=>{dt&&Qt.addEventListener("close",()=>dt()),pt&&Qt.addEventListener("versionchange",()=>pt())}).catch(()=>{}),$t}function Ge(it,{blocked:ct}={}){const We=indexedDB.deleteDatabase(it);return ct&&We.addEventListener("blocked",()=>ct()),ft(We).then(()=>{})}const Me=["get","getKey","getAll","getAllKeys","count"],rt=["put","add","delete","clear"],Pt=new Map;function qe(it,ct){if(!(it instanceof IDBDatabase)||ct in it||"string"!=typeof ct)return;if(Pt.get(ct))return Pt.get(ct);const We=ct.replace(/FromIndex$/,""),je=ct!==We,pt=rt.includes(We);if(!(We in(je?IDBIndex:IDBObjectStore).prototype)||!pt&&!Me.includes(We))return;const dt=function(){var Lt=(0,h.Z)(function*($t,...Qt){const Mn=this.transaction($t,pt?"readwrite":"readonly");let cn=Mn.store;return je&&(cn=cn.index(Qt.shift())),(yield Promise.all([cn[We](...Qt),pt&&Mn.done]))[0]});return function(Qt){return Lt.apply(this,arguments)}}();return Pt.set(ct,dt),dt}!function He(it){mt=it(mt)}(it=>({...it,get:(ct,We,je)=>qe(ct,We)||it.get(ct,We,je),has:(ct,We)=>!!qe(ct,We)||it.has(ct,We)}))},5861:(Jt,Qe,k)=>{function h(S,d,de,Ae,_e,fe,Fe){try{var pe=S[fe](Fe),be=pe.value}catch(Pe){return void de(Pe)}pe.done?d(be):Promise.resolve(be).then(Ae,_e)}function c(S){return function(){var d=this,de=arguments;return new Promise(function(Ae,_e){var fe=S.apply(d,de);function Fe(be){h(fe,Ae,_e,Fe,pe,"next",be)}function pe(be){h(fe,Ae,_e,Fe,pe,"throw",be)}Fe(void 0)})}}k.d(Qe,{Z:()=>c})}},Jt=>{Jt(Jt.s=665)}]);